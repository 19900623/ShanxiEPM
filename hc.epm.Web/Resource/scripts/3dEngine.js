(function(c,a){"object"===typeof exports&&"undefined"!==typeof module?a(exports):"function"===typeof define&&define.amd?define(["exports"],a):a(c.GLE={})})(this,function(c){function a(){}function d(b,f){this.x=b||0;this.y=f||0}function e(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function g(b,f,k,r){this._x=b||0;this._y=f||0;this._z=k||0;this._w=void 0!==r?r:1}function h(b,f,k){this.x=b||0;this.y=f||0;this.z=k||0}function l(){this.elements=[1,0,0,0,1,0,0,0,1]}function m(b,f,k,r,c,a,e,g,h,w){Object.defineProperty(this,"id",{value:Wd++});this.uuid=oa.generateUUID();this.name="";this.image=void 0!==b?b:m.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==f?f:m.DEFAULT_MAPPING;this.wrapS=void 0!==k?k:1001;this.wrapT=void 0!==r?r:1001;this.magFilter=void 0!==c?c:1006;this.minFilter=void 0!==a?a:1008;this.anisotropy=void 0!==h?h:1;this.format=void 0!==e?e:1023;this.type=void 0!==g?g:1009;this.offset=new d(0,0);this.repeat=new d(1,1);this.center=new d(0,0);this.rotation=0;this.matrixAutoUpdate=!0;this.matrix=new l;this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==w?w:3E3;this.version=0;this.onUpdate=null}function n(b,f,k,r){this.x=b||0;this.y=f||0;this.z=k||0;this.w=void 0!==r?r:1}function q(b,f,k){this.uuid=oa.generateUUID();this.width=b;this.height=f;this.scissor=new n(0,0,b,f);this.scissorTest=!1;this.viewport=new n(0,0,b,f);k=k||{};void 0===k.minFilter&&(k.minFilter=1006);this.texture=new m(void 0,void 0,k.wrapS,k.wrapT,k.magFilter,k.minFilter,k.format,k.type,k.anisotropy,k.encoding);this.depthBuffer=void 0!==k.depthBuffer?k.depthBuffer:!0;this.stencilBuffer=void 0!==k.stencilBuffer?k.stencilBuffer:!0;this.depthTexture=void 0!==k.depthTexture?k.depthTexture:null}function z(b,f,k){q.call(this,b,f,k);this.activeMipMapLevel=this.activeCubeFace=0}function F(b,f,k,r,c,a,d,e,g,h,l,w){m.call(this,null,a,d,e,g,h,r,c,l,w);this.image={data:b,width:f,height:k};this.magFilter=void 0!==g?g:1003;this.minFilter=void 0!==h?h:1003;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}function C(b,f,k,r,c,a,d,e,g,h){b=void 0!==b?b:[];m.call(this,b,void 0!==f?f:301,k,r,c,a,d,e,g,h);this.flipY=!1}function t(b,f,k){var r=b[0];if(0>=r||0<r)return b;var c=f*k,a=td[c];void 0===a&&(a=new Float32Array(c),td[c]=a);if(0!==f)for(r.toArray(a,0),r=1,c=0;r!==f;++r)c+=k,b[r].toArray(a,c);return a}function I(b,f){var k=ud[f];void 0===k&&(k=new Int32Array(f),ud[f]=k);for(var r=0;r!==f;++r)k[r]=b.allocTextureUnit();return k}function K(b,f){b.uniform1f(this.addr,f)}function H(b,f){b.uniform1i(this.addr,f)}function A(b,f){void 0===f.x?b.uniform2fv(this.addr,f):b.uniform2f(this.addr,f.x,f.y)}function G(b,f){void 0!==f.x?b.uniform3f(this.addr,f.x,f.y,f.z):void 0!==f.r?b.uniform3f(this.addr,f.r,f.g,f.b):b.uniform3fv(this.addr,f)}function E(b,f){void 0===f.x?b.uniform4fv(this.addr,f):b.uniform4f(this.addr,f.x,f.y,f.z,f.w)}function N(b,f){b.uniformMatrix2fv(this.addr,!1,f.elements||f)}function O(b,f){void 0===f.elements?b.uniformMatrix3fv(this.addr,!1,f):(vd.set(f.elements),b.uniformMatrix3fv(this.addr,!1,vd))}function v(b,f){void 0===f.elements?b.uniformMatrix4fv(this.addr,!1,f):(wd.set(f.elements),b.uniformMatrix4fv(this.addr,!1,wd))}function L(b,f,k){var r=k.allocTextureUnit();b.uniform1i(this.addr,r);k.setTexture2D(f||xd,r)}function x(b,f,k){var r=k.allocTextureUnit();b.uniform1i(this.addr,r);k.setTextureCube(f||yd,r)}function B(b,f){b.uniform2iv(this.addr,f)}function p(b,f){b.uniform3iv(this.addr,f)}function D(b,f){b.uniform4iv(this.addr,f)}function T(b){switch(b){case 5126:return K;case 35664:return A;case 35665:return G;case 35666:return E;case 35674:return N;case 35675:return O;case 35676:return v;case 35678:case 36198:return L;case 35680:return x;case 5124:case 35670:return H;case 35667:case 35671:return B;case 35668:case 35672:return p;case 35669:case 35673:return D}}function U(b,f){b.uniform1fv(this.addr,f)}function da(b,f){b.uniform1iv(this.addr,f)}function ia(b,f){b.uniform2fv(this.addr,t(f,this.size,2))}function ka(b,f){b.uniform3fv(this.addr,t(f,this.size,3))}function na(b,f){b.uniform4fv(this.addr,t(f,this.size,4))}function ya(b,f){b.uniformMatrix2fv(this.addr,!1,t(f,this.size,4))}function Ea(b,f){b.uniformMatrix3fv(this.addr,!1,t(f,this.size,9))}function ha(b,f){b.uniformMatrix4fv(this.addr,!1,t(f,this.size,16))}function W(b,f,k){var r=f.length,c=I(k,r);b.uniform1iv(this.addr,c);for(b=0;b!==r;++b)k.setTexture2D(f[b]||xd,c[b])}function la(b,f,k){var r=f.length,c=I(k,r);b.uniform1iv(this.addr,c);for(b=0;b!==r;++b)k.setTextureCube(f[b]||yd,c[b])}function Z(b){switch(b){case 5126:return U;case 35664:return ia;case 35665:return ka;case 35666:return na;case 35674:return ya;case 35675:return Ea;case 35676:return ha;case 35678:return W;case 35680:return la;case 5124:case 35670:return da;case 35667:case 35671:return B;case 35668:case 35672:return p;case 35669:case 35673:return D}}function V(b,f,k){this.id=b;this.addr=k;this.setValue=T(f.type)}function ba(b,f,k){this.id=b;this.addr=k;this.size=f.size;this.setValue=Z(f.type)}function ga(b){this.id=b;this.seq=[];this.map={}}function ua(b,f,k){this.seq=[];this.map={};this.renderer=k;k=b.getProgramParameter(f,b.ACTIVE_UNIFORMS);for(var r=0;r<k;++r){var c=b.getActiveUniform(f,r),a=b.getUniformLocation(f,c.name),d=this,e=c.name,g=e.length;for(Vc.lastIndex=0;;){var h=Vc.exec(e),l=Vc.lastIndex,w=h[1],p=h[3];"]"===h[2]&&(w|=0);if(void 0===p||"["===p&&l+2===g){e=d;c=void 0===p?new V(w,c,a):new ba(w,c,a);e.seq.push(c);e.map[c.id]=c;break}else p=d.map[w],void 0===p&&(p=new ga(w),w=d,d=p,w.seq.push(d),w.map[d.id]=d),d=p}}}function Y(b,f,k){return void 0===f&&void 0===k?this.set(b):this.setRGB(b,f,k)}function ca(b,f){this.min=void 0!==b?b:new d(Infinity,Infinity);this.max=void 0!==f?f:new d(-Infinity,-Infinity)}function va(b,f,k,r,c){var a,J,e,g,l,w,p,m,u,n,t,x,v,y,q,A;this.render=function(b,M,Q,R){if(0!==b.length){M=new h;var S=R.w/R.z,Aa=.5*R.z,B=.5*R.w,D=16/R.w,z=new d(D*S,D),C=new h(1,1,0),Ga=new d(1,1),F=new ca;F.min.set(R.x,R.y);F.max.set(R.x+(R.z-16),R.y+(R.w-16));if(void 0===y){var D=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),Pa=new Uint16Array([0,1,2,0,2,3]);t=f.createBuffer();x=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,t);f.bufferData(f.ARRAY_BUFFER,D,f.STATIC_DRAW);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,x);f.bufferData(f.ELEMENT_ARRAY_BUFFER,Pa,f.STATIC_DRAW);q=f.createTexture();A=f.createTexture();k.bindTexture(f.TEXTURE_2D,q);f.texImage2D(f.TEXTURE_2D,0,f.RGB,16,16,0,f.RGB,f.UNSIGNED_BYTE,null);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);k.bindTexture(f.TEXTURE_2D,A);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,16,16,0,f.RGBA,f.UNSIGNED_BYTE,null);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);var D=v={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\n\tvUV \x3d uv;\n\tvec2 pos \x3d position;\n\tif ( renderType \x3d\x3d 2 ) {\n\t\tvec4 visibility \x3d texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\n\t\tvisibility +\x3d texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\n\t\tvisibility +\x3d texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\n\t\tvisibility +\x3d texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\n\t\tvisibility +\x3d texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\n\t\tvisibility +\x3d texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\n\t\tvisibility +\x3d texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\n\t\tvisibility +\x3d texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\n\t\tvisibility +\x3d texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\n\t\tvVisibility \x3d        visibility.r / 9.0;\n\t\tvVisibility *\x3d 1.0 - visibility.g / 9.0;\n\t\tvVisibility *\x3d       visibility.b / 9.0;\n\t\tvVisibility *\x3d 1.0 - visibility.a / 9.0;\n\t\tpos.x \x3d cos( rotation ) * position.x - sin( rotation ) * position.y;\n\t\tpos.y \x3d sin( rotation ) * position.x + cos( rotation ) * position.y;\n\t}\n\tgl_Position \x3d vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\n\tif ( renderType \x3d\x3d 0 ) {\n\t\tgl_FragColor \x3d vec4( 1.0, 0.0, 1.0, 0.0 );\n\t} else if ( renderType \x3d\x3d 1 ) {\n\t\tgl_FragColor \x3d texture2D( map, vUV );\n\t} else {\n\t\tvec4 texture \x3d texture2D( map, vUV );\n\t\ttexture.a *\x3d opacity * vVisibility;\n\t\tgl_FragColor \x3d texture;\n\t\tgl_FragColor.rgb *\x3d color;\n\t}\n}"},Pa=f.createProgram(),H=f.createShader(f.FRAGMENT_SHADER),E=f.createShader(f.VERTEX_SHADER),G="precision "+c.precision+" float;\n";f.shaderSource(H,G+D.fragmentShader);f.shaderSource(E,G+D.vertexShader);f.compileShader(H);f.compileShader(E);f.attachShader(Pa,H);f.attachShader(Pa,E);f.linkProgram(Pa);y=Pa;u=f.getAttribLocation(y,"position");n=f.getAttribLocation(y,"uv");a=f.getUniformLocation(y,"renderType");J=f.getUniformLocation(y,"map");e=f.getUniformLocation(y,"occlusionMap");g=f.getUniformLocation(y,"opacity");l=f.getUniformLocation(y,"color");w=f.getUniformLocation(y,"scale");p=f.getUniformLocation(y,"rotation");m=f.getUniformLocation(y,"screenPosition")}k.useProgram(y);k.initAttributes();k.enableAttribute(u);k.enableAttribute(n);k.disableUnusedAttributes();f.uniform1i(e,0);f.uniform1i(J,1);f.bindBuffer(f.ARRAY_BUFFER,t);f.vertexAttribPointer(u,2,f.FLOAT,!1,16,0);f.vertexAttribPointer(n,2,f.FLOAT,!1,16,8);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,x);k.disable(f.CULL_FACE);k.buffers.depth.setMask(!1);Pa=0;for(H=b.length;Pa<H;Pa++)if(D=16/R.w,z.set(D*S,D),E=b[Pa],M.set(E.matrixWorld.elements[12],E.matrixWorld.elements[13],E.matrixWorld.elements[14]),M.applyMatrix4(Q.matrixWorldInverse),M.applyMatrix4(Q.projectionMatrix),C.copy(M),Ga.x=R.x+C.x*Aa+Aa-8,Ga.y=R.y+C.y*B+B-8,!0===F.containsPoint(Ga)){k.activeTexture(f.TEXTURE0);k.bindTexture(f.TEXTURE_2D,null);k.activeTexture(f.TEXTURE1);k.bindTexture(f.TEXTURE_2D,q);f.copyTexImage2D(f.TEXTURE_2D,0,f.RGB,Ga.x,Ga.y,16,16,0);f.uniform1i(a,0);f.uniform2f(w,z.x,z.y);f.uniform3f(m,C.x,C.y,C.z);k.disable(f.BLEND);k.enable(f.DEPTH_TEST);f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0);k.activeTexture(f.TEXTURE0);k.bindTexture(f.TEXTURE_2D,A);f.copyTexImage2D(f.TEXTURE_2D,0,f.RGBA,Ga.x,Ga.y,16,16,0);f.uniform1i(a,1);k.disable(f.DEPTH_TEST);k.activeTexture(f.TEXTURE1);k.bindTexture(f.TEXTURE_2D,q);f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0);E.positionScreen.copy(C);E.customUpdateCallback?E.customUpdateCallback(E):E.updateLensFlares();f.uniform1i(a,2);k.enable(f.BLEND);for(var G=0,wa=E.lensFlares.length;G<wa;G++){var I=E.lensFlares[G];.001<I.opacity&&.001<I.scale&&(C.x=I.x,C.y=I.y,C.z=I.z,D=I.size*I.scale/R.w,z.x=D*S,z.y=D,f.uniform3f(m,C.x,C.y,C.z),f.uniform2f(w,z.x,z.y),f.uniform1f(p,I.rotation),f.uniform1f(g,I.opacity),f.uniform3f(l,I.color.r,I.color.g,I.color.b),k.setBlending(I.blending,I.blendEquation,I.blendSrc,I.blendDst),r.setTexture2D(I.texture,1),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0))}}k.enable(f.CULL_FACE);k.enable(f.DEPTH_TEST);k.buffers.depth.setMask(!0);k.reset()}}}function aa(b,f,k,r,c,a,d,e,g){m.call(this,b,f,k,r,c,a,d,e,g);this.needsUpdate=!0}function ra(b,f,k,r,c){var a,J,d,e,l,w,p,m,u,n,t,x,v,y,q,D;function A(b,f){return b.renderOrder!==f.renderOrder?b.renderOrder-f.renderOrder:b.z!==f.z?f.z-b.z:f.id-b.id}var B,z,C,F,E=new h,H=new g,G=new h;this.render=function(M,g,Q){if(0!==M.length){if(void 0===C){var h=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),R=new Uint16Array([0,1,2,0,2,3]);B=f.createBuffer();z=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,B);f.bufferData(f.ARRAY_BUFFER,h,f.STATIC_DRAW);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,z);f.bufferData(f.ELEMENT_ARRAY_BUFFER,R,f.STATIC_DRAW);var h=f.createProgram(),R=f.createShader(f.VERTEX_SHADER),S=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(R,["precision "+c.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvUV \x3d uvOffset + uv * uvScale;\n\tvec2 alignedPosition \x3d position * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x \x3d cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y \x3d sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tvec4 mvPosition;\n\tmvPosition \x3d modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tmvPosition.xy +\x3d rotatedPosition;\n\tgl_Position \x3d projectionMatrix * mvPosition;\n\tfogDepth \x3d - mvPosition.z;\n}"].join("\n"));f.shaderSource(S,["precision "+c.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvec4 texture \x3d texture2D( map, vUV );\n\tgl_FragColor \x3d vec4( color * texture.xyz, texture.a * opacity );\n\tif ( gl_FragColor.a \x3c alphaTest ) discard;\n\tif ( fogType \x3e 0 ) {\n\t\tfloat fogFactor \x3d 0.0;\n\t\tif ( fogType \x3d\x3d 1 ) {\n\t\t\tfogFactor \x3d smoothstep( fogNear, fogFar, fogDepth );\n\t\t} else {\n\t\t\tconst float LOG2 \x3d 1.442695;\n\t\t\tfogFactor \x3d exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );\n\t\t\tfogFactor \x3d 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\t\t}\n\t\tgl_FragColor.rgb \x3d mix( gl_FragColor.rgb, fogColor, fogFactor );\n\t}\n}"].join("\n"));f.compileShader(R);f.compileShader(S);f.attachShader(h,R);f.attachShader(h,S);f.linkProgram(h);C=h;q=f.getAttribLocation(C,"position");D=f.getAttribLocation(C,"uv");a=f.getUniformLocation(C,"uvOffset");J=f.getUniformLocation(C,"uvScale");d=f.getUniformLocation(C,"rotation");e=f.getUniformLocation(C,"scale");l=f.getUniformLocation(C,"color");w=f.getUniformLocation(C,"map");p=f.getUniformLocation(C,"opacity");m=f.getUniformLocation(C,"modelViewMatrix");u=f.getUniformLocation(C,"projectionMatrix");n=f.getUniformLocation(C,"fogType");f.getUniformLocation(C,"fogDensity");t=f.getUniformLocation(C,"fogNear");x=f.getUniformLocation(C,"fogFar");v=f.getUniformLocation(C,"fogColor");f.getUniformLocation(C,"fogDepth");y=f.getUniformLocation(C,"alphaTest");h=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");h.width=8;h.height=8;R=h.getContext("2d");R.fillStyle="white";R.fillRect(0,0,8,8);F=new aa(h)}k.useProgram(C);k.initAttributes();k.enableAttribute(q);k.enableAttribute(D);k.disableUnusedAttributes();k.disable(f.CULL_FACE);k.enable(f.BLEND);f.bindBuffer(f.ARRAY_BUFFER,B);f.vertexAttribPointer(q,2,f.FLOAT,!1,16,0);f.vertexAttribPointer(D,2,f.FLOAT,!1,16,8);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,z);f.uniformMatrix4fv(u,!1,Q.projectionMatrix.elements);k.activeTexture(f.TEXTURE0);f.uniform1i(w,0);R=h=0;(S=g.fog)?(f.uniform3f(v,S.color.r,S.color.g,S.color.b),S.isFog&&(f.uniform1f(t,S.near),f.uniform1f(x,S.far),f.uniform1i(n,1),R=h=1)):(f.uniform1i(n,0),R=h=0);for(var S=0,Aa=M.length;S<Aa;S++){var Ga=M[S];Ga.modelViewMatrix.multiplyMatrices(Q.matrixWorldInverse,Ga.matrixWorld);Ga.z=-Ga.modelViewMatrix.elements[14]}M.sort(A);for(var Pa=[],S=0,Aa=M.length;S<Aa;S++){var Ga=M[S],wa=Ga.material;if(!1!==wa.visible){Ga.onBeforeRender(b,g,Q,void 0,wa,void 0);f.uniform1f(y,wa.alphaTest);f.uniformMatrix4fv(m,!1,Ga.modelViewMatrix.elements);Ga.matrixWorld.decompose(E,H,G);Pa[0]=G.x;Pa[1]=G.y;var I=0;g.fog&&wa.fog&&(I=R);h!==I&&(f.uniform1i(n,I),h=I);null!==wa.map?(f.uniform2f(a,wa.map.offset.x,wa.map.offset.y),f.uniform2f(J,wa.map.repeat.x,wa.map.repeat.y)):(f.uniform2f(a,0,0),f.uniform2f(J,1,1));f.uniform1f(p,wa.opacity);f.uniform3f(l,wa.color.r,wa.color.g,wa.color.b);f.uniform1f(d,wa.rotation);f.uniform2fv(e,Pa);k.setBlending(wa.blending,wa.blendEquation,wa.blendSrc,wa.blendDst,wa.blendEquationAlpha,wa.blendSrcAlpha,wa.blendDstAlpha,wa.premultipliedAlpha);k.buffers.depth.setTest(wa.depthTest);k.buffers.depth.setMask(wa.depthWrite);k.buffers.color.setMask(wa.colorWrite);r.setTexture2D(wa.map||F,0);f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0);Ga.onAfterRender(b,g,Q,void 0,wa,void 0)}}k.enable(f.CULL_FACE);k.reset()}}}function y(){Object.defineProperty(this,"id",{value:Yd++});this.uuid=oa.generateUUID();this.name="";this.type="Material";this.lights=this.fog=!0;this.blending=1;this.side=0;this.flatShading=!1;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.cs=null;this.clipShadows=this.clipIntersection=!1;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.dithering=!1;this.alphaTest=0;this.premultipliedAlpha=!1;this.overdraw=0;this.visible=!0;this.userData={};this.needsUpdate=!0}function ta(b){y.call(this);this.type="MeshDepthMaterial";this.depthPacking=3200;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(b)}function w(b){y.call(this);this.type="MeshDistanceMaterial";this.referencePosition=new h;this.nearDistance=1;this.farDistance=1E3;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.lights=this.fog=!1;this.setValues(b)}function u(b,f){this.min=void 0!==b?b:new h(Infinity,Infinity,Infinity);this.max=void 0!==f?f:new h(-Infinity,-Infinity,-Infinity)}function Ba(b,f){this.center=void 0!==b?b:new h;this.radius=void 0!==f?f:0}function Ha(b,f){this.normal=void 0!==b?b:new h(1,0,0);this.constant=void 0!==f?f:0}function Hb(b,f,k,r,c,a){this.planes=[void 0!==b?b:new Ha,void 0!==f?f:new Ha,void 0!==k?k:new Ha,void 0!==r?r:new Ha,void 0!==c?c:new Ha,void 0!==a?a:new Ha]}function zd(b,f,k){function r(f,k,r,c,a,J){var d=f.geometry,M;M=u;var e=f.customDepthMaterial;r&&(M=t,e=f.customDistanceMaterial);e?M=e:(e=!1,k.morphTargets&&(d&&d.isBufferGeometry?e=d.morphAttributes&&d.morphAttributes.position&&0<d.morphAttributes.position.length:d&&d.isGeometry&&(e=d.morphTargets&&0<d.morphTargets.length)),f=f.isSkinnedMesh&&k.skinning,d=0,e&&(d|=1),f&&(d|=2),M=M[d]);b.ld&&!0===k.clipShadows&&0!==k.cs.length&&(d=M.uuid,e=k.uuid,f=x[d],void 0===f&&(f={},x[d]=f),d=f[e],void 0===d&&(d=M.clone(),f[e]=d),M=d);M.visible=k.visible;M.wireframe=k.wireframe;e=k.side;z.renderSingleSided&&2==e&&(e=0);z.renderReverseSided&&(0===e?e=1:1===e&&(e=0));M.side=e;M.clipShadows=k.clipShadows;M.cs=k.cs;M.clipIntersection=k.clipIntersection;M.wireframeLinewidth=k.wireframeLinewidth;M.linewidth=k.linewidth;r&&M.isMeshDistanceMaterial&&(M.referencePosition.copy(c),M.nearDistance=a,M.farDistance=J);return M}function c(k,J,d,M){if(!1!==k.visible){if(k.layers.test(J.layers)&&(k.isMesh||k.isLine||k.isPoints)&&k.castShadow&&(!k.frustumCulled||a.intersectsObject(k))){k.modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,k.matrixWorld);var e=f.update(k),g=k.material;if(Array.isArray(g))for(var Q=e.groups,h=0,R=Q.length;h<R;h++){var l=Q[h],w=g[l.materialIndex];w&&w.visible&&(w=r(k,w,M,m,d.near,d.far),b.renderBufferDirect(d,null,e,w,k,l))}else g.visible&&(w=r(k,g,M,m,d.near,d.far),b.renderBufferDirect(d,null,e,w,k,null))}k=k.children;e=0;for(g=k.length;e<g;e++)c(k[e],J,d,M)}}var a=new Hb,g=new e,R=new d,l=new d(k,k),p=new h,m=new h,u=Array(4),t=Array(4),x={},v=[new h(1,0,0),new h(-1,0,0),new h(0,0,1),new h(0,0,-1),new h(0,1,0),new h(0,-1,0)],y=[new h(0,1,0),new h(0,1,0),new h(0,1,0),new h(0,1,0),new h(0,0,1),new h(0,0,-1)],C=[new n,new n,new n,new n,new n,new n];for(k=0;4!==k;++k){var D=0!==(k&1),B=0!==(k&2),A=new ta({depthPacking:3201,morphTargets:D,skinning:B});u[k]=A;D=new w({morphTargets:D,skinning:B});t[k]=D}var z=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.renderSingleSided=this.renderReverseSided=!0;this.render=function(f,k,r){if(!1!==z.enabled&&(!1!==z.autoUpdate||!1!==z.needsUpdate)&&0!==f.length){var J=b.state;J.disable(b.context.BLEND);J.buffers.color.setClear(1,1,1,1);J.buffers.depth.setTest(!0);J.setScissorTest(!1);for(var d,M=0,e=f.length;M<e;M++){var Q=f[M];d=Q.shadow;var h=Q&&Q.isPointLight;if(void 0!==d){var w=d.camera;R.copy(d.mapSize);R.min(l);if(h){var S=R.x,Aa=R.y;C[0].set(2*S,Aa,S,Aa);C[1].set(0,Aa,S,Aa);C[2].set(3*S,Aa,S,Aa);C[3].set(S,Aa,S,Aa);C[4].set(3*S,0,S,Aa);C[5].set(S,0,S,Aa);R.x*=4;R.y*=2}null===d.map&&(d.map=new q(R.x,R.y,{minFilter:1003,magFilter:1003,format:1023}),d.map.texture.name=Q.name+".shadowMap",w.ux());d.isSpotLightShadow&&d.update(Q);S=d.map;Aa=d.matrix;m.setFromMatrixPosition(Q.matrixWorld);w.position.copy(m);h?(d=6,Aa.makeTranslation(-m.x,-m.y,-m.z)):(d=1,p.setFromMatrixPosition(Q.target.matrixWorld),w.lookAt(p),w.uld(),Aa.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Aa.multiply(w.projectionMatrix),Aa.multiply(w.matrixWorldInverse));b.setRenderTarget(S);b.clear();for(Q=0;Q<d;Q++)h&&(p.copy(w.position),p.add(v[Q]),w.up.copy(y[Q]),w.lookAt(p),w.uld(),J.viewport(C[Q])),g.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),a.setFromMatrix(g),c(k,r,w,h)}}z.needsUpdate=!1}}}function Zd(b){var f={};return{get:function(b){b.isInterleavedBufferAttribute&&(b=b.data);return f[b.uuid]},remove:function(k){k.isInterleavedBufferAttribute&&(k=k.data);var r=f[k.uuid];r&&(b.deleteBuffer(r.buffer),delete f[k.uuid])},update:function(k,r){k.isInterleavedBufferAttribute&&(k=k.data);var c=f[k.uuid];if(void 0===c){var c=k.uuid,a=k,d=a.array,e=a.dynamic?b.DYNAMIC_DRAW:b.STATIC_DRAW,g=b.createBuffer();b.bindBuffer(r,g);b.bufferData(r,d,e);a.onUploadCallback();e=b.FLOAT;d instanceof Float32Array?e=b.FLOAT:d instanceof Float64Array||(d instanceof Uint16Array?e=b.UNSIGNED_SHORT:d instanceof Int16Array?e=b.SHORT:d instanceof Uint32Array?e=b.UNSIGNED_INT:d instanceof Int32Array?e=b.INT:d instanceof Int8Array?e=b.BYTE:d instanceof Uint8Array&&(e=b.UNSIGNED_BYTE));f[c]={buffer:g,type:e,bytesPerElement:d.BYTES_PER_ELEMENT,version:a.version}}else c.version<k.version&&(a=k,d=a.array,g=a.updateRange,b.bindBuffer(r,c.buffer),!1===a.dynamic?b.bufferData(r,d,b.STATIC_DRAW):-1===g.count?b.bufferSubData(r,0,d):0!==g.count&&(b.bufferSubData(r,g.offset*d.BYTES_PER_ELEMENT,d.subarray(g.offset,g.offset+g.count)),g.count=-1),c.version=k.version)}}}function Da(b,f,k,r){this._x=b||0;this._y=f||0;this._z=k||0;this._order=r||Da.DefaultOrder}function Ka(){this.mask=1}function ea(){Object.defineProperty(this,"id",{value:$d++});this.uuid=oa.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=ea.DefaultUp.clone();var b=new h,f=new Da,k=new g,r=new h(1,1,1);f.onChange(function(){k.setFromEuler(f,!1)});k.onChange(function(){f.setFromQuaternion(k,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:b},rotation:{enumerable:!0,value:f},quaternion:{enumerable:!0,value:k},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new e},normalMatrix:{value:new l}});this.matrix=new e;this.matrixWorld=new e;this.matrixAutoUpdate=ea.DefaultMatrixAutoUpdate;this.mte=!1;this.layers=new Ka;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}}function Qa(){ea.call(this);this.type="Camera";this.matrixWorldInverse=new e;this.projectionMatrix=new e}function Ua(b,f,k,r,c,a){Qa.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=b;this.right=f;this.top=k;this.bottom=r;this.near=void 0!==c?c:.1;this.far=void 0!==a?a:2E3;this.ux()}function Sa(b,f,k,r,c,a){this.a=b;this.b=f;this.c=k;this.normal=r&&r.isVector3?r:new h;this.vertexNormals=Array.isArray(r)?r:[];this.color=c&&c.isColor?c:new Y;this.vertexColors=Array.isArray(c)?c:[];this.materialIndex=void 0!==a?a:0}function qa(){Object.defineProperty(this,"id",{value:ae+=2});this.uuid=oa.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function ja(b,f,k){this.uuid=oa.generateUUID();this.name="";this.array=b;this.itemSize=f;this.count=void 0!==b?b.length/f:0;this.normalized=!0===k;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function Zb(b,f,k){ja.call(this,new Int8Array(b),f,k)}function $b(b,f,k){ja.call(this,new Uint8Array(b),f,k)}function ac(b,f,k){ja.call(this,new Uint8ClampedArray(b),f,k)}function bc(b,f,k){ja.call(this,new Int16Array(b),f,k)}function ob(b,f,k){ja.call(this,new Uint16Array(b),f,k)}function cc(b,f,k){ja.call(this,new Int32Array(b),f,k)}function pb(b,f,k){ja.call(this,new Uint32Array(b),f,k)}function X(b,f,k){ja.call(this,new Float32Array(b),f,k)}function dc(b,f,k){ja.call(this,new Float64Array(b),f,k)}function Ad(){this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Wc(b){if(0===b.length)return-Infinity;for(var f=b[0],k=1,r=b.length;k<r;++k)b[k]>f&&(f=b[k]);return f}function ma(){Object.defineProperty(this,"id",{value:be+=2});this.uuid=oa.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}}function Ib(b,f,k,r,c,a){qa.call(this);this.type="BoxGeometry";this.parameters={width:b,height:f,depth:k,widthSegments:r,heightSegments:c,depthSegments:a};this.fromBufferGeometry(new qb(b,f,k,r,c,a));this.mergeVertices()}function qb(b,f,k,r,c,a){function d(b,f,k,r,c,a,d,Q,R,S,m){var Aa=a/R,u=d/S,n=a/2,t=d/2,x=Q/2;d=R+1;var v=S+1,y=a=0,q,C,D=new h;for(C=0;C<v;C++){var z=C*u-t;for(q=0;q<d;q++)D[b]=(q*Aa-n)*r,D[f]=z*c,D[k]=x,M.push(D.x,D.y,D.z),D[b]=0,D[f]=0,D[k]=0<Q?1:-1,g.push(D.x,D.y,D.z),l.push(q/R),l.push(1-C/S),a+=1}for(C=0;C<S;C++)for(q=0;q<R;q++)b=w+q+d*(C+1),f=w+(q+1)+d*(C+1),k=w+(q+1)+d*C,e.push(w+q+d*C,b,k),e.push(b,f,k),y+=6;J.addGroup(p,y,m);p+=y;w+=a}ma.call(this);this.type="By";this.parameters={width:b,height:f,depth:k,widthSegments:r,heightSegments:c,depthSegments:a};var J=this;b=b||1;f=f||1;k=k||1;r=Math.floor(r)||1;c=Math.floor(c)||1;a=Math.floor(a)||1;var e=[],M=[],g=[],l=[],w=0,p=0;d("z","y","x",-1,-1,k,f,b,a,c,0);d("z","y","x",1,-1,k,f,-b,a,c,1);d("x","z","y",1,1,b,k,f,r,a,2);d("x","z","y",1,-1,b,k,-f,r,a,3);d("x","y","z",1,-1,b,f,k,r,c,4);d("x","y","z",-1,-1,b,f,-k,r,c,5);this.setIndex(e);this.addAttribute("position",new X(M,3));this.addAttribute("normal",new X(g,3));this.addAttribute("uv",new X(l,2))}function ec(b,f,k,r){qa.call(this);this.type="PlaneGeometry";this.parameters={width:b,height:f,widthSegments:k,heightSegments:r};this.fromBufferGeometry(new rb(b,f,k,r));this.mergeVertices()}function rb(b,f,k,r){ma.call(this);this.type="PlaneBufferGeometry";this.parameters={width:b,height:f,widthSegments:k,heightSegments:r};b=b||1;f=f||1;var c=b/2,a=f/2;k=Math.floor(k)||1;r=Math.floor(r)||1;var d=k+1,e=r+1,g=b/k,h=f/r,l=[],w=[],p=[],m=[];for(b=0;b<e;b++){var u=b*h-a;for(f=0;f<d;f++)w.push(f*g-c,-u,0),p.push(0,0,1),m.push(f/k),m.push(1-b/r)}for(b=0;b<r;b++)for(f=0;f<k;f++)c=f+d*(b+1),a=f+1+d*(b+1),e=f+1+d*b,l.push(f+d*b,c,e),l.push(c,a,e);this.setIndex(l);this.addAttribute("position",new X(w,3));this.addAttribute("normal",new X(p,3));this.addAttribute("uv",new X(m,2))}function Va(b){y.call(this);this.type="Mal";this.color=new Y(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=this.morphTargets=this.skinning=!1;this.setValues(b)}function Oa(b){y.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position \x3d projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor \x3d vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==b&&this.setValues(b)}function sb(b,f){this.origin=void 0!==b?b:new h;this.direction=void 0!==f?f:new h}function Jb(b,f){this.start=void 0!==b?b:new h;this.end=void 0!==f?f:new h}function cb(b,f,k){this.a=void 0!==b?b:new h;this.b=void 0!==f?f:new h;this.c=void 0!==k?k:new h}function La(b,f){ea.call(this);this.type="Mesh";this.geometry=void 0!==b?b:new ma;this.material=void 0!==f?f:new Va({color:16777215*Math.random()});this.drawMode=0;this.updateMorphTargets()}function ce(b,f,k,r){function c(b,k){f.buffers.color.setClear(b.r,b.g,b.b,k,r)}var a=new Y(0),d=0,e,g,h;return{getClearColor:function(){return a},sr:function(b,f){a.set(b);d=void 0!==f?f:1;c(a,d)},getClearAlpha:function(){return d},setClearAlpha:function(b){d=b;c(a,d)},render:function(f,r,J,M){r=r.background;null===r?c(a,d):r&&r.isColor&&(c(r,1),M=!0);(b.autoClear||M)&&b.clear(b.autoClearColor,b.autoClearDepth,b.autoClearStencil);r&&r.isCubeTexture?(void 0===h&&(h=new La(new qb(1,1,1),new Oa({uniforms:tb.cube.uniforms,vertexShader:tb.cube.vertexShader,fragmentShader:tb.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1})),h.geometry.removeAttribute("normal"),h.geometry.removeAttribute("uv"),h.onBeforeRender=function(b,f,k){this.matrixWorld.copyPosition(k.matrixWorld)},k.update(h.geometry)),h.material.uniforms.tCube.value=r,f.push(h,h.geometry,h.material,0,null)):r&&r.isTexture&&(void 0===e&&(e=new Ua(-1,1,1,-1,0,1),g=new La(new rb(2,2),new Va({depthTest:!1,depthWrite:!1,fog:!1})),k.update(g.geometry)),g.material.map=r,b.renderBufferDirect(e,null,g.geometry,g.material,g,null))}}}function de(b,f){return b.renderOrder!==f.renderOrder?b.renderOrder-f.renderOrder:b.program&&f.program&&b.program!==f.program?b.program.id-f.program.id:b.material.id!==f.material.id?b.material.id-f.material.id:b.z!==f.z?b.z-f.z:b.id-f.id}function ee(b,f){return b.renderOrder!==f.renderOrder?b.renderOrder-f.renderOrder:b.z!==f.z?f.z-b.z:b.id-f.id}function fe(){var b=[],f=0,k=[],r=[];return{opaque:k,transparent:r,init:function(){f=0;k.length=0;r.length=0},push:function(c,a,d,e,g){var J=b[f];void 0===J?(J={id:c.id,object:c,geometry:a,material:d,program:d.program,renderOrder:c.renderOrder,z:e,group:g},b[f]=J):(J.id=c.id,J.object=c,J.geometry=a,J.material=d,J.program=d.program,J.renderOrder=c.renderOrder,J.z=e,J.group=g);(!0===d.transparent?r:k).push(J);f++},sort:function(){1<k.length&&k.sort(de);1<r.length&&r.sort(ee)}}}function ge(){var b={};return{get:function(f,k){var r=f.id+","+k.id,c=b[r];void 0===c&&(c=new fe,b[r]=c);return c},dispose:function(){b={}}}}function he(b,f){return Math.abs(f[1])-Math.abs(b[1])}function ie(b){var f={},k=new Float32Array(8);return{update:function(r,c,a,d){var J=r.morphTargetInfluences,e=J.length;r=f[c.id];if(void 0===r){r=[];for(var M=0;M<e;M++)r[M]=[M,0];f[c.id]=r}var g=a.morphTargets&&c.morphAttributes.position;a=a.morphNormals&&c.morphAttributes.normal;for(M=0;M<e;M++){var h=r[M];0!==h[1]&&(g&&c.removeAttribute("morphTarget"+M),a&&c.removeAttribute("morphNormal"+M))}for(M=0;M<e;M++)h=r[M],h[0]=M,h[1]=J[M];r.sort(he);for(M=0;8>M;M++){if(h=r[M])if(J=h[0],e=h[1]){g&&c.addAttribute("morphTarget"+M,g[J]);a&&c.addAttribute("morphNormal"+M,a[J]);k[M]=e;continue}k[M]=0}d.getUniforms().setValue(b,"morphTargetInfluences",k)}}}function je(b,f,k){var r,c,a;this.setMode=function(b){r=b};this.setIndex=function(b){c=b.type;a=b.bytesPerElement};this.render=function(f,d){b.drawElements(r,d,c,f*a);k.calls++;k.vertices+=d;r===b.TRIANGLES?k.faces+=d/3:r===b.POINTS&&(k.points+=d)};this.renderInstances=function(d,J,e){var M=f.get("ANGLE_instanced_arrays");null!==M&&(M.drawElementsInstancedANGLE(r,e,c,J*a,d.maxInstancedCount),k.calls++,k.vertices+=e*d.maxInstancedCount,r===b.TRIANGLES?k.faces+=d.maxInstancedCount*e/3:r===b.POINTS&&(k.points+=d.maxInstancedCount*e))}}function ke(b,f,k){var r;this.setMode=function(b){r=b};this.render=function(f,c){b.drawArrays(r,f,c);k.calls++;k.vertices+=c;r===b.TRIANGLES?k.faces+=c/3:r===b.POINTS&&(k.points+=c)};this.renderInstances=function(c,a,d){var J=f.get("ANGLE_instanced_arrays");if(null!==J){var e=c.attributes.position;e.isInterleavedBufferAttribute?(d=e.data.count,J.drawArraysInstancedANGLE(r,0,d,c.maxInstancedCount)):J.drawArraysInstancedANGLE(r,a,d,c.maxInstancedCount);k.calls++;k.vertices+=d*c.maxInstancedCount;r===b.TRIANGLES?k.faces+=c.maxInstancedCount*d/3:r===b.POINTS&&(k.points+=c.maxInstancedCount*d)}}}function le(b,f,k){function c(b){b=b.target;var r=a[b.id];null!==r.index&&f.remove(r.index);for(var J in r.attributes)f.remove(r.attributes[J]);b.removeEventListener("dispose",c);delete a[b.id];if(J=d[b.id])f.remove(J),delete d[b.id];if(J=d[r.id])f.remove(J),delete d[r.id];k.geometries--}var a={},d={};return{get:function(b,f){var r=a[f.id];if(r)return r;f.addEventListener("dispose",c);f.isBufferGeometry?r=f:f.isGeometry&&(void 0===f._bufferGeometry&&(f._bufferGeometry=(new ma).st(b)),r=f._bufferGeometry);a[f.id]=r;k.geometries++;return r},update:function(k){var c=k.index,r=k.attributes;null!==c&&f.update(c,b.ELEMENT_ARRAY_BUFFER);for(var a in r)f.update(r[a],b.ARRAY_BUFFER);k=k.morphAttributes;for(a in k)for(var c=k[a],r=0,d=c.length;r<d;r++)f.update(c[r],b.ARRAY_BUFFER)},getWireframeAttribute:function(k){var c=d[k.id];if(c)return c;var c=[],r=k.index,a=k.attributes;if(null!==r)for(var r=r.array,a=0,J=r.length;a<J;a+=3){var e=r[a+0],M=r[a+1],g=r[a+2];c.push(e,M,M,g,g,e)}else for(r=a.position.array,a=0,J=r.length/3-1;a<J;a+=3)e=a+0,M=a+1,g=a+2,c.push(e,M,M,g,g,e);c=new (65535<Wc(c)?pb:ob)(c,1);f.update(c,b.ELEMENT_ARRAY_BUFFER);return d[k.id]=c}}}function me(){var b={};return{get:function(f){if(void 0!==b[f.id])return b[f.id];var k;switch(f.type){case "Dt":k={direction:new h,color:new Y,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new d};break;case "SpotLight":k={position:new h,direction:new h,color:new Y,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new d};break;case "PointLight":k={position:new h,color:new Y,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new d,shadowCameraNear:1,shadowCameraFar:1E3};break;case "HemisphereLight":k={direction:new h,skyColor:new Y,groundColor:new Y};break;case "RectAreaLight":k={color:new Y,position:new h,halfWidth:new h,halfHeight:new h}}return b[f.id]=k}}}function ne(){var b=new me,f={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},k=new h,c=new e,a=new e;return{setup:function(r,d,J){var e=0,M=0,g=0,h=0,Q=0,R=0,l=0,w=0;J=J.matrixWorldInverse;for(var p=0,m=r.length;p<m;p++){var u=r[p],n=u.color,t=u.intensity,x=u.distance,v=u.shadow&&u.shadow.map?u.shadow.map.texture:null;if(u.isAmbientLight)e+=n.r*t,M+=n.g*t,g+=n.b*t;else if(u.isDt){var y=b.get(u);y.color.copy(u.color).multiplyScalar(u.intensity);y.direction.setFromMatrixPosition(u.matrixWorld);k.setFromMatrixPosition(u.target.matrixWorld);y.direction.sub(k);y.direction.transformDirection(J);if(y.shadow=u.castShadow)n=u.shadow,y.shadowBias=n.bias,y.shadowRadius=n.radius,y.shadowMapSize=n.mapSize;f.directionalShadowMap[h]=v;f.directionalShadowMatrix[h]=u.shadow.matrix;f.directional[h]=y;h++}else if(u.isSpotLight){y=b.get(u);y.position.setFromMatrixPosition(u.matrixWorld);y.position.applyMatrix4(J);y.color.copy(n).multiplyScalar(t);y.distance=x;y.direction.setFromMatrixPosition(u.matrixWorld);k.setFromMatrixPosition(u.target.matrixWorld);y.direction.sub(k);y.direction.transformDirection(J);y.coneCos=Math.cos(u.angle);y.penumbraCos=Math.cos(u.angle*(1-u.penumbra));y.decay=0===u.distance?0:u.decay;if(y.shadow=u.castShadow)n=u.shadow,y.shadowBias=n.bias,y.shadowRadius=n.radius,y.shadowMapSize=n.mapSize;f.spotShadowMap[R]=v;f.spotShadowMatrix[R]=u.shadow.matrix;f.spot[R]=y;R++}else if(u.isRectAreaLight)y=b.get(u),y.color.copy(n).multiplyScalar(t/(u.width*u.height)),y.position.setFromMatrixPosition(u.matrixWorld),y.position.applyMatrix4(J),a.identity(),c.copy(u.matrixWorld),c.premultiply(J),a.extractRotation(c),y.halfWidth.set(.5*u.width,0,0),y.halfHeight.set(0,.5*u.height,0),y.halfWidth.applyMatrix4(a),y.halfHeight.applyMatrix4(a),f.rectArea[l]=y,l++;else if(u.isPointLight){y=b.get(u);y.position.setFromMatrixPosition(u.matrixWorld);y.position.applyMatrix4(J);y.color.copy(u.color).multiplyScalar(u.intensity);y.distance=u.distance;y.decay=0===u.distance?0:u.decay;if(y.shadow=u.castShadow)n=u.shadow,y.shadowBias=n.bias,y.shadowRadius=n.radius,y.shadowMapSize=n.mapSize,y.shadowCameraNear=n.camera.near,y.shadowCameraFar=n.camera.far;f.pointShadowMap[Q]=v;f.pointShadowMatrix[Q]=u.shadow.matrix;f.point[Q]=y;Q++}else u.isHemisphereLight&&(y=b.get(u),y.direction.setFromMatrixPosition(u.matrixWorld),y.direction.transformDirection(J),y.direction.normalize(),y.skyColor.copy(u.color).multiplyScalar(t),y.groundColor.copy(u.groundColor).multiplyScalar(t),f.hemi[w]=y,w++)}f.ambient[0]=e;f.ambient[1]=M;f.ambient[2]=g;f.directional.length=h;f.spot.length=R;f.rectArea.length=l;f.point.length=Q;f.hemi.length=w;f.hash=h+","+Q+","+R+","+l+","+w+","+d.length},state:f}}function oe(b,f){var k={};return{update:function(c){var r=f.frame,a=c.geometry,d=b.get(c,a);k[d.id]!==r&&(a.isGeometry&&d.updateFromObject(c),b.update(d),k[d.id]=r);return d},clear:function(){k={}}}}function Bd(b,f,k){f=b.createShader(f);b.shaderSource(f,k);b.compileShader(f);b.getShaderParameter(f,b.COMPILE_STATUS);b.getShaderInfoLog(f);return f}function Cd(b){switch(b){case 3E3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"]}}function Xc(b,f){var k=Cd(f);return"vec4 "+b+"( vec4 value ) { return "+k[0]+"ToLinear"+k[1]+"; }"}function pe(b,f){var k=Cd(f);return"vec4 "+b+"( vec4 value ) { return LinearTo"+k[0]+k[1]+"; }"}function qe(b,f){var k;switch(f){case 1:k="Linear";break;case 2:k="Reinhard";break;case 3:k="Uncharted2";break;case 4:k="OptimizedCineon"}return"vec3 "+b+"( vec3 color ) { return "+k+"ToneMapping( color ); }"}function re(b,f,k){b=b||{};return[b.derivatives||f.envMapCubeUV||f.bumpMap||f.normalMap||f.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(b.fragDepth||f.logarithmicDepthBuffer)&&k.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",b.drawBuffers&&k.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(b.shaderTextureLOD||f.envMap)&&k.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(fc).join("\n")}function se(b){var f=[],k;for(k in b){var c=b[k];!1!==c&&f.push("#define "+k+" "+c)}return f.join("\n")}function fc(b){return""!==b}function Dd(b,f){return b.replace(/NUM_DIR_LIGHTS/g,f.numDirLights).replace(/NUM_SPOT_LIGHTS/g,f.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,f.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,f.numPointLights).replace(/NUM_HEMI_LIGHTS/g,f.numHemiLights)}function Yc(b){return b.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(b,k){return Yc(sa[k])})}function Ed(b){return b.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(b,k,c,a){b="";for(k=parseInt(k);k<parseInt(c);k++)b+=a.replace(/\[ i \]/g,"[ "+k+" ]");return b})}function te(b,f,k,c,a,d){var r=b.context,J=c.defines,e=a.vertexShader,g=a.fragmentShader,M="SHADOWMAP_TYPE_BASIC";1===d.shadowMapType?M="SHADOWMAP_TYPE_PCF":2===d.shadowMapType&&(M="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",l="ENVMAP_MODE_REFLECTION",w="ENVMAP_BLENDING_MULTIPLY";if(d.envMap){switch(c.envMap.mapping){case 301:case 302:h="ENVMAP_TYPE_CUBE";break;case 306:case 307:h="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:h="ENVMAP_TYPE_EQUIREC";break;case 305:h="ENVMAP_TYPE_SPHERE"}switch(c.envMap.mapping){case 302:case 304:l="ENVMAP_MODE_REFRACTION"}switch(c.combine){case 0:w="ENVMAP_BLENDING_MULTIPLY";break;case 1:w="ENVMAP_BLENDING_MIX";break;case 2:w="ENVMAP_BLENDING_ADD"}}var p=0<b.gammaFactor?b.gammaFactor:1,m=re(c.extensions,d,f),u=se(J),n=r.createProgram();c.isRawShaderMaterial?(J=[u].filter(fc).join("\n"),0<J.length&&(J+="\n"),f=[m,u].filter(fc).join("\n"),0<f.length&&(f+="\n")):(J=["precision "+d.precision+" float;","precision "+d.precision+" int;","#define SHADER_NAME "+a.name,u,d.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+d.maxBones,d.useFog&&d.fog?"#define USE_FOG":"",d.useFog&&d.fogExp?"#define FOG_EXP2":"",d.map?"#define USE_MAP":"",d.envMap?"#define USE_ENVMAP":"",d.envMap?"#define "+l:"",d.lightMap?"#define USE_LIGHTMAP":"",d.aoMap?"#define USE_AOMAP":"",d.emissiveMap?"#define USE_EMISSIVEMAP":"",d.bumpMap?"#define USE_BUMPMAP":"",d.normalMap?"#define USE_NORMALMAP":"",d.displacementMap&&d.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",d.specularMap?"#define USE_SPECULARMAP":"",d.roughnessMap?"#define USE_ROUGHNESSMAP":"",d.metalnessMap?"#define USE_METALNESSMAP":"",d.alphaMap?"#define USE_ALPHAMAP":"",d.vertexColors?"#define USE_COLOR":"",d.flatShading?"#define FLAT_SHADED":"",d.skinning?"#define USE_SKINNING":"",d.useVertexTexture?"#define BONE_TEXTURE":"",d.morphTargets?"#define USE_MORPHTARGETS":"",d.morphNormals&&!1===d.flatShading?"#define USE_MORPHNORMALS":"",d.doubleSided?"#define DOUBLE_SIDED":"",d.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+d.numClippingPlanes,d.shadowMapEnabled?"#define USE_SHADOWMAP":"",d.shadowMapEnabled?"#define "+M:"",d.sizeAttenuation?"#define USE_SIZEATTENUATION":"",d.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",d.logarithmicDepthBuffer&&f.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(fc).join("\n"),f=[m,"precision "+d.precision+" float;","precision "+d.precision+" int;","#define SHADER_NAME "+a.name,u,d.alphaTest?"#define ALPHATEST "+d.alphaTest:"","#define GAMMA_FACTOR "+p,d.useFog&&d.fog?"#define USE_FOG":"",d.useFog&&d.fogExp?"#define FOG_EXP2":"",d.map?"#define USE_MAP":"",d.envMap?"#define USE_ENVMAP":"",d.envMap?"#define "+h:"",d.envMap?"#define "+l:"",d.envMap?"#define "+w:"",d.lightMap?"#define USE_LIGHTMAP":"",d.aoMap?"#define USE_AOMAP":"",d.emissiveMap?"#define USE_EMISSIVEMAP":"",d.bumpMap?"#define USE_BUMPMAP":"",d.normalMap?"#define USE_NORMALMAP":"",d.specularMap?"#define USE_SPECULARMAP":"",d.roughnessMap?"#define USE_ROUGHNESSMAP":"",d.metalnessMap?"#define USE_METALNESSMAP":"",d.alphaMap?"#define USE_ALPHAMAP":"",d.vertexColors?"#define USE_COLOR":"",d.gradientMap?"#define USE_GRADIENTMAP":"",d.flatShading?"#define FLAT_SHADED":"",d.doubleSided?"#define DOUBLE_SIDED":"",d.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+d.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(d.numClippingPlanes-d.numClipIntersection),d.shadowMapEnabled?"#define USE_SHADOWMAP":"",d.shadowMapEnabled?"#define "+M:"",d.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",d.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",d.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",d.logarithmicDepthBuffer&&f.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",d.envMap&&f.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==d.toneMapping?"#define TONE_MAPPING":"",0!==d.toneMapping?sa.tonemapping_pars_fragment:"",0!==d.toneMapping?qe("toneMapping",d.toneMapping):"",d.dithering?"#define DITHERING":"",d.outputEncoding||d.mapEncoding||d.envMapEncoding||d.emissiveMapEncoding?sa.encodings_pars_fragment:"",d.mapEncoding?Xc("mapTexelToLinear",d.mapEncoding):"",d.envMapEncoding?Xc("envMapTexelToLinear",d.envMapEncoding):"",d.emissiveMapEncoding?Xc("emissiveMapTexelToLinear",d.emissiveMapEncoding):"",d.outputEncoding?pe("linearToOutputTexel",d.outputEncoding):"",d.depthPacking?"#define DEPTH_PACKING "+c.depthPacking:"","\n"].filter(fc).join("\n"));e=Yc(e);e=Dd(e,d);g=Yc(g);g=Dd(g,d);c.isShaderMaterial||(e=Ed(e),g=Ed(g));g=f+g;e=Bd(r,r.VERTEX_SHADER,J+e);g=Bd(r,r.FRAGMENT_SHADER,g);r.attachShader(n,e);r.attachShader(n,g);void 0!==c.index0AttributeName?r.bindAttribLocation(n,0,c.index0AttributeName):!0===d.morphTargets&&r.bindAttribLocation(n,0,"position");r.linkProgram(n);d=r.getProgramInfoLog(n);a=r.getShaderInfoLog(e);M=r.getShaderInfoLog(g);l=h=!0;!1===r.getProgramParameter(n,r.LINK_STATUS)?h=!1:""!==d||""!==a&&""!==M||(l=!1);l&&(this.diagnostics={runnable:h,material:c,programLog:d,vertexShader:{log:a,prefix:J},fragmentShader:{log:M,prefix:f}});r.deleteShader(e);r.deleteShader(g);var y;this.getUniforms=function(){void 0===y&&(y=new ua(r,n,b));return y};var t;this.getAttributes=function(){if(void 0===t){for(var b={},f=r.getProgramParameter(n,r.ACTIVE_ATTRIBUTES),k=0;k<f;k++){var c=r.getActiveAttrib(n,k).name;b[c]=r.getAttribLocation(n,c)}t=b}return t};this.destroy=function(){r.deleteProgram(n);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){return this.getUniforms()}},attributes:{get:function(){return this.getAttributes()}}});this.id=ue++;this.code=k;this.usedTimes=1;this.program=n;this.vertexShader=e;this.fragmentShader=g;return this}function ve(b,f,k){function c(b,f){var k;b?b.isTexture?k=b.encoding:b.isWt&&(k=b.texture.encoding):k=3E3;3E3===k&&f&&(k=3007);return k}var a=[],d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",Mal:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},e="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");this.getParameters=function(f,r,a,J,e,g,M){var h=d[f.type],Q;if(M.isSkinnedMesh)if(Q=M.skeleton.bones,k.floatVertexTextures)Q=1024;else{var l=Math.min(Math.floor((k.maxVertexUniforms-20)/4),Q.length);Q=l<Q.length?0:l}else Q=0;l=k.precision;null!==f.precision&&(l=k.getMaxPrecision(f.precision));var R=b.getRenderTarget();return{shaderID:h,precision:l,supportsVertexTextures:k.vertexTextures,outputEncoding:c(R?R.texture:null,b.gammaOutput),map:!!f.map,mapEncoding:c(f.map,b.gammaInput),envMap:!!f.envMap,envMapMode:f.envMap&&f.envMap.mapping,envMapEncoding:c(f.envMap,b.gammaInput),envMapCubeUV:!!f.envMap&&(306===f.envMap.mapping||307===f.envMap.mapping),lightMap:!!f.lightMap,aoMap:!!f.aoMap,emissiveMap:!!f.emissiveMap,emissiveMapEncoding:c(f.emissiveMap,b.gammaInput),bumpMap:!!f.bumpMap,normalMap:!!f.normalMap,displacementMap:!!f.displacementMap,roughnessMap:!!f.roughnessMap,metalnessMap:!!f.metalnessMap,specularMap:!!f.specularMap,alphaMap:!!f.alphaMap,gradientMap:!!f.gradientMap,combine:f.combine,vertexColors:f.vertexColors,fog:!!J,useFog:f.fog,fogExp:J,flatShading:f.flatShading,sizeAttenuation:f.sizeAttenuation,logarithmicDepthBuffer:k.logarithmicDepthBuffer,skinning:f.skinning&&0<Q,maxBones:Q,useVertexTexture:k.floatVertexTextures,morphTargets:f.morphTargets,morphNormals:f.morphNormals,maxMorphTargets:b.maxMorphTargets,maxMorphNormals:b.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:e,numClipIntersection:g,dithering:f.dithering,shadowMapEnabled:b.shadowMap.enabled&&M.receiveShadow&&0<a.length,shadowMapType:b.shadowMap.type,toneMapping:b.toneMapping,physicallyCorrectLights:b.physicallyCorrectLights,premultipliedAlpha:f.premultipliedAlpha,alphaTest:f.alphaTest,doubleSided:2===f.side,flipSided:1===f.side,depthPacking:void 0!==f.depthPacking?f.depthPacking:!1}};this.getProgramCode=function(f,k){var c=[];k.shaderID?c.push(k.shaderID):(c.push(f.fragmentShader),c.push(f.vertexShader));if(void 0!==f.defines)for(var r in f.defines)c.push(r),c.push(f.defines[r]);for(r=0;r<e.length;r++)c.push(k[e[r]]);c.push(f.onBeforeCompile.toString());c.push(b.gammaOutput);return c.join()};this.acquireProgram=function(k,c,r,d){for(var J,e=0,g=a.length;e<g;e++){var M=a[e];if(M.code===d){J=M;++J.usedTimes;break}}void 0===J&&(J=new te(b,f,d,k,c,r),a.push(J));return J};this.releaseProgram=function(b){if(0===--b.usedTimes){var f=a.indexOf(b);a[f]=a[a.length-1];a.pop();b.destroy()}};this.programs=a}function we(b,f,k,c,a,d,e){function r(b,f){if(b.width>f||b.height>f){var k=f/Math.max(b.width,b.height),c=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");c.width=Math.floor(b.width*k);c.height=Math.floor(b.height*k);c.getContext("2d").drawImage(b,0,0,b.width,b.height,0,0,c.width,c.height);return c}return b}function J(b){return oa.isPowerOfTwo(b.width)&&oa.isPowerOfTwo(b.height)}function g(b,f){return b.generateMipmaps&&f&&1003!==b.minFilter&&1006!==b.minFilter}function M(f){return 1003===f||1004===f||1005===f?b.NEAREST:b.LINEAR}function h(f){f=f.target;f.removeEventListener("dispose",h);a:{var k=c.get(f);if(f.image&&k.__image__webglTextureCube)console("del1"),b.deleteTexture(k.__image__webglTextureCube);else{console("del2");if(void 0===k.__webglInit)break a;b.deleteTexture(k.__webglTexture)}c.remove(f)}e.textures--}function Q(f){f=f.target;f.removeEventListener("dispose",Q);var k=c.get(f),r=c.get(f.texture);if(f){void 0!==r.__webglTexture&&b.deleteTexture(r.__webglTexture);f.depthTexture&&f.depthTexture.dispose();if(f.isWtCube)for(r=0;6>r;r++)b.deleteFramebuffer(k.__webglFramebuffer[r]),k.__webglDepthbuffer&&b.deleteRenderbuffer(k.__webglDepthbuffer[r]);else b.deleteFramebuffer(k.__webglFramebuffer),k.__webglDepthbuffer&&b.deleteRenderbuffer(k.__webglDepthbuffer);c.remove(f.texture);c.remove(f)}e.textures--}function l(f,M){var Q=c.get(f);if(0<f.version&&Q.__version!==f.version){var l=f.image;if(void 0!==l&&!1!==l.complete){void 0===Q.__webglInit&&(Q.__webglInit=!0,f.addEventListener("dispose",h),Q.__webglTexture=b.createTexture(),e.textures++);k.activeTexture(b.TEXTURE0+M);k.bindTexture(b.TEXTURE_2D,Q.__webglTexture);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,f.flipY);b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,f.premultiplyAlpha);b.pixelStorei(b.UNPACK_ALIGNMENT,f.unpackAlignment);var R=r(f.image,a.maxTextureSize);if((1001!==f.wrapS||1001!==f.wrapT||1003!==f.minFilter&&1006!==f.minFilter)&&!1===J(R))if(l=R,l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof ImageBitmap){var p=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");p.width=oa.floorPowerOfTwo(l.width);p.height=oa.floorPowerOfTwo(l.height);p.getContext("2d").drawImage(l,0,0,p.width,p.height);R=p}else R=l;var l=J(R),p=d.convert(f.format),m=d.convert(f.type);w(b.TEXTURE_2D,f,l);var S=f.mipmaps;if(f.isDepthTexture)S=b.DEPTH_COMPONENT,1015===f.type?S=b.DEPTH_COMPONENT32F:u&&(S=b.DEPTH_COMPONENT16),1026===f.format&&S===b.DEPTH_COMPONENT&&1012!==f.type&&1014!==f.type&&(f.type=1012,m=d.convert(f.type)),1027===f.format&&(S=b.DEPTH_STENCIL,1020!==f.type&&(f.type=1020,m=d.convert(f.type))),k.texImage2D(b.TEXTURE_2D,0,S,R.width,R.height,0,p,m,null);else if(f.isDataTexture)if(0<S.length&&l){for(var n=0,y=S.length;n<y;n++)R=S[n],k.texImage2D(b.TEXTURE_2D,n,p,R.width,R.height,0,p,m,R.data);f.generateMipmaps=!1}else k.texImage2D(b.TEXTURE_2D,0,p,R.width,R.height,0,p,m,R.data);else if(f.isCompressedTexture)for(n=0,y=S.length;n<y;n++)R=S[n],1023!==f.format&&1022!==f.format?-1<k.getCompressedTextureFormats().indexOf(p)&&k.compressedTexImage2D(b.TEXTURE_2D,n,p,R.width,R.height,0,R.data):k.texImage2D(b.TEXTURE_2D,n,p,R.width,R.height,0,p,m,R.data);else if(0<S.length&&l){n=0;for(y=S.length;n<y;n++)R=S[n],k.texImage2D(b.TEXTURE_2D,n,p,p,m,R);f.generateMipmaps=!1}else k.texImage2D(b.TEXTURE_2D,0,p,p,m,R);g(f,l)&&b.generateMipmap(b.TEXTURE_2D);Q.__version=f.version;if(f.onUpdate)f.onUpdate(f);return}}k.activeTexture(b.TEXTURE0+M);k.bindTexture(b.TEXTURE_2D,Q.__webglTexture)}function w(k,r,J){J?(b.texParameteri(k,b.TEXTURE_WRAP_S,d.convert(r.wrapS)),b.texParameteri(k,b.TEXTURE_WRAP_T,d.convert(r.wrapT)),b.texParameteri(k,b.TEXTURE_MAG_FILTER,d.convert(r.magFilter)),b.texParameteri(k,b.TEXTURE_MIN_FILTER,d.convert(r.minFilter))):(b.texParameteri(k,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(k,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(k,b.TEXTURE_MAG_FILTER,M(r.magFilter)),b.texParameteri(k,b.TEXTURE_MIN_FILTER,M(r.minFilter)));!(J=f.get("EXT_texture_filter_anisotropic"))||1015===r.type&&null===f.get("OES_texture_float_linear")||1016===r.type&&null===f.get("OES_texture_half_float_linear")||!(1<r.anisotropy||c.get(r).__currentAnisotropy)||(b.texParameterf(k,J.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,a.getMaxAnisotropy())),c.get(r).__currentAnisotropy=r.anisotropy)}function p(f,r,a,J){var e=d.convert(r.texture.format),g=d.convert(r.texture.type);k.texImage2D(J,0,e,r.width,r.height,0,e,g,null);b.bindFramebuffer(b.FRAMEBUFFER,f);b.framebufferTexture2D(b.FRAMEBUFFER,a,J,c.get(r.texture).__webglTexture,0);b.bindFramebuffer(b.FRAMEBUFFER,null)}function m(f,k){b.bindRenderbuffer(b.RENDERBUFFER,f);k.depthBuffer&&!k.stencilBuffer?(b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,k.width,k.height),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,f)):k.depthBuffer&&k.stencilBuffer?(b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_STENCIL,k.width,k.height),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,f)):b.renderbufferStorage(b.RENDERBUFFER,b.RGBA4,k.width,k.height);b.bindRenderbuffer(b.RENDERBUFFER,null)}var u="undefined"!==typeof WebGL2RenderingContext&&b instanceof window.WebGL2RenderingContext;this.setTexture2D=l;this.setTextureCube=function(f,M){var Q=c.get(f);if(6===f.image.length)if(0<f.version&&Q.__version!==f.version){Q.__image__webglTextureCube||(f.addEventListener("dispose",h),Q.__image__webglTextureCube=b.createTexture(),e.textures++);k.activeTexture(b.TEXTURE0+M);k.bindTexture(b.TEXTURE_CUBE_MAP,Q.__image__webglTextureCube);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,f.flipY);for(var l=f&&f.isCompressedTexture,R=f.image[0]&&f.image[0].isDataTexture,p=[],m=0;6>m;m++)p[m]=l||R?R?f.image[m].image:f.image[m]:r(f.image[m],a.maxCubemapSize);var u=J(p[0]),S=d.convert(f.format),n=d.convert(f.type);w(b.TEXTURE_CUBE_MAP,f,u);for(m=0;6>m;m++)if(l)for(var y,t=p[m].mipmaps,x=0,v=t.length;x<v;x++)y=t[x],1023!==f.format&&1022!==f.format?-1<k.getCompressedTextureFormats().indexOf(S)&&k.compressedTexImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+m,x,S,y.width,y.height,0,y.data):k.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+m,x,S,y.width,y.height,0,S,n,y.data);else R?k.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,S,p[m].width,p[m].height,0,S,n,p[m].data):k.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,S,S,n,p[m]);g(f,u)&&b.generateMipmap(b.TEXTURE_CUBE_MAP);Q.__version=f.version;if(f.onUpdate)f.onUpdate(f)}else k.activeTexture(b.TEXTURE0+M),k.bindTexture(b.TEXTURE_CUBE_MAP,Q.__image__webglTextureCube)};this.setTextureCubeDynamic=function(f,r){k.activeTexture(b.TEXTURE0+r);k.bindTexture(b.TEXTURE_CUBE_MAP,c.get(f).__webglTexture)};this.setupRenderTarget=function(f){var r=c.get(f),a=c.get(f.texture);f.addEventListener("dispose",Q);a.__webglTexture=b.createTexture();e.textures++;var d=!0===f.isWtCube,M=J(f);if(d){r.__webglFramebuffer=[];for(var h=0;6>h;h++)r.__webglFramebuffer[h]=b.createFramebuffer()}else r.__webglFramebuffer=b.createFramebuffer();if(d){k.bindTexture(b.TEXTURE_CUBE_MAP,a.__webglTexture);w(b.TEXTURE_CUBE_MAP,f.texture,M);for(h=0;6>h;h++)p(r.__webglFramebuffer[h],f,b.COLOR_ATTACHMENT0,b.TEXTURE_CUBE_MAP_POSITIVE_X+h);g(f.texture,M)&&b.generateMipmap(b.TEXTURE_CUBE_MAP);k.bindTexture(b.TEXTURE_CUBE_MAP,null)}else k.bindTexture(b.TEXTURE_2D,a.__webglTexture),w(b.TEXTURE_2D,f.texture,M),p(r.__webglFramebuffer,f,b.COLOR_ATTACHMENT0,b.TEXTURE_2D),g(f.texture,M)&&b.generateMipmap(b.TEXTURE_2D),k.bindTexture(b.TEXTURE_2D,null);if(f.depthBuffer){r=c.get(f);a=!0===f.isWtCube;if(f.depthTexture)b.bindFramebuffer(b.FRAMEBUFFER,r.__webglFramebuffer),c.get(f.depthTexture).__webglTexture&&f.depthTexture.image.width===f.width&&f.depthTexture.image.height===f.height||(f.depthTexture.image.width=f.width,f.depthTexture.image.height=f.height,f.depthTexture.needsUpdate=!0),l(f.depthTexture,0),r=c.get(f.depthTexture).__webglTexture,1026===f.depthTexture.format?b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.TEXTURE_2D,r,0):1027===f.depthTexture.format&&b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,r,0);else if(a)for(r.__webglDepthbuffer=[],a=0;6>a;a++)b.bindFramebuffer(b.FRAMEBUFFER,r.__webglFramebuffer[a]),r.__webglDepthbuffer[a]=b.createRenderbuffer(),m(r.__webglDepthbuffer[a],f);else b.bindFramebuffer(b.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=b.createRenderbuffer(),m(r.__webglDepthbuffer,f);b.bindFramebuffer(b.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=function(f){var r=f.texture,a=J(f);g(r,a)&&(f=f.isWtCube?b.TEXTURE_CUBE_MAP:b.TEXTURE_2D,r=c.get(r).__webglTexture,k.bindTexture(f,r),b.generateMipmap(f),k.bindTexture(f,null))}}function xe(){var b={};return{get:function(f){f=f.uuid;var k=b[f];void 0===k&&(k={},b[f]=k);return k},remove:function(f){delete b[f.uuid]},clear:function(){b={}}}}function ye(b,f,k){function c(f,k,c){var r=new Uint8Array(4),a=b.createTexture();b.bindTexture(f,a);b.texParameteri(f,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(f,b.TEXTURE_MAG_FILTER,b.NEAREST);for(f=0;f<c;f++)b.texImage2D(k+f,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,r);return a}function a(f){!0!==q[f]&&(b.enable(f),q[f]=!0)}function d(f){!1!==q[f]&&(b.disable(f),q[f]=!1)}function e(f,c,r,J,e,g,M,h){0!==f?a(b.BLEND):d(b.BLEND);if(5!==f){if(f!==z||h!==I)switch(f){case 2:h?(b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.ONE,b.ONE,b.ONE,b.ONE)):(b.blendEquation(b.FUNC_ADD),b.blendFunc(b.SRC_ALPHA,b.ONE));break;case 3:h?(b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.ZERO,b.ZERO,b.ONE_MINUS_SRC_COLOR,b.ONE_MINUS_SRC_ALPHA)):(b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ZERO,b.ONE_MINUS_SRC_COLOR));break;case 4:h?(b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.ZERO,b.SRC_COLOR,b.ZERO,b.SRC_ALPHA)):(b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ZERO,b.SRC_COLOR));break;default:h?(b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.ONE,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA)):(b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA))}G=H=E=F=A=B=null}else{e=e||c;g=g||r;M=M||J;if(c!==B||e!==E)b.blendEquationSeparate(k.convert(c),k.convert(e)),B=c,E=e;if(r!==A||J!==F||g!==H||M!==G)b.blendFuncSeparate(k.convert(r),k.convert(J),k.convert(g),k.convert(M)),A=r,F=J,H=g,G=M}z=f;I=h}function g(f){K!==f&&(f?b.frontFace(b.CW):b.frontFace(b.CCW),K=f)}function h(f){0!==f?(a(b.CULL_FACE),f!==L&&(1===f?b.cullFace(b.BACK):2===f?b.cullFace(b.FRONT):b.cullFace(b.FRONT_AND_BACK))):d(b.CULL_FACE);L=f}function l(f,k,c){if(f){if(a(b.POLYGON_OFFSET_FILL),T!==k||ia!==c)b.polygonOffset(k,c),T=k,ia=c}else d(b.POLYGON_OFFSET_FILL)}function w(f){void 0===f&&(f=b.TEXTURE0+Ha-1);U!==f&&(b.activeTexture(f),U=f)}var p=new function(){var f=!1,k=new n,c=null,r=new n(0,0,0,0);return{setMask:function(k){c===k||f||(b.colorMask(k,k,k,k),c=k)},setLocked:function(b){f=b},setClear:function(f,c,a,d,J){!0===J&&(f*=d,c*=d,a*=d);k.set(f,c,a,d);!1===r.equals(k)&&(b.clearColor(f,c,a,d),r.copy(k))},reset:function(){f=!1;c=null;r.set(-1,0,0,0)}}},m=new function(){var f=!1,k=null,c=null,r=null;return{setTest:function(f){f?a(b.DEPTH_TEST):d(b.DEPTH_TEST)},setMask:function(c){k===c||f||(b.depthMask(c),k=c)},setFunc:function(f){if(c!==f){if(f)switch(f){case 0:b.depthFunc(b.NEVER);break;case 1:b.depthFunc(b.ALWAYS);break;case 2:b.depthFunc(b.LESS);break;case 3:b.depthFunc(b.LEQUAL);break;case 4:b.depthFunc(b.EQUAL);break;case 5:b.depthFunc(b.GEQUAL);break;case 6:b.depthFunc(b.GREATER);break;case 7:b.depthFunc(b.NOTEQUAL);break;default:b.depthFunc(b.LEQUAL)}else b.depthFunc(b.LEQUAL);c=f}},setLocked:function(b){f=b},setClear:function(f){r!==f&&(b.clearDepth(f),r=f)},reset:function(){f=!1;r=c=k=null}}},u=new function(){var f=!1,k=null,c=null,r=null,J=null,e=null,g=null,M=null,h=null;return{setTest:function(f){f?a(b.STENCIL_TEST):d(b.STENCIL_TEST)},setMask:function(c){k===c||f||(b.stencilMask(c),k=c)},setFunc:function(f,k,a){if(c!==f||r!==k||J!==a)b.stencilFunc(f,k,a),c=f,r=k,J=a},setOp:function(f,k,c){if(e!==f||g!==k||M!==c)b.stencilOp(f,k,c),e=f,g=k,M=c},setLocked:function(b){f=b},setClear:function(f){h!==f&&(b.clearStencil(f),h=f)},reset:function(){f=!1;h=M=g=e=J=r=c=k=null}}},y=b.getParameter(b.MAX_VERTEX_ATTRIBS),t=new Uint8Array(y),x=new Uint8Array(y),v=new Uint8Array(y),q={},C=null,D=null,z=null,B=null,A=null,F=null,E=null,H=null,G=null,I=!1,K=null,L=null,Ba=null,T=null,ia=null,Ha=b.getParameter(b.MAX_COMBINED_TEXTURE_IMAGE_UNITS),y=parseFloat(/^WebGL\ ([0-9])/.exec(b.getParameter(b.VERSION))[1]),N=1<=parseFloat(y),U=null,na={},da=new n,ya=new n,ca={};ca[b.TEXTURE_2D]=c(b.TEXTURE_2D,b.TEXTURE_2D,1);ca[b.TEXTURE_CUBE_MAP]=c(b.TEXTURE_CUBE_MAP,b.TEXTURE_CUBE_MAP_POSITIVE_X,6);p.setClear(0,0,0,1);m.setClear(1);u.setClear(0);a(b.DEPTH_TEST);m.setFunc(3);g(!1);h(1);a(b.CULL_FACE);a(b.BLEND);e(1);return{buffers:{color:p,depth:m,stencil:u},initAttributes:function(){for(var b=0,f=t.length;b<f;b++)t[b]=0},enableAttribute:function(k){t[k]=1;0===x[k]&&(b.enableVertexAttribArray(k),x[k]=1);0!==v[k]&&(f.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(k,0),v[k]=0)},enableAttributeAndDivisor:function(k,c){t[k]=1;0===x[k]&&(b.enableVertexAttribArray(k),x[k]=1);v[k]!==c&&(f.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(k,c),v[k]=c)},disableUnusedAttributes:function(){for(var f=0,k=x.length;f!==k;++f)x[f]!==t[f]&&(b.disableVertexAttribArray(f),x[f]=0)},enable:a,disable:d,getCompressedTextureFormats:function(){if(null===C&&(C=[],f.get("WEBGL_compressed_texture_pvrtc")||f.get("WEBGL_compressed_texture_s3tc")||f.get("WEBGL_compressed_texture_etc1")))for(var k=b.getParameter(b.COMPRESSED_TEXTURE_FORMATS),c=0;c<k.length;c++)C.push(k[c]);return C},useProgram:function(f){return D!==f?(b.useProgram(f),D=f,!0):!1},setBlending:e,setMaterial:function(f){2===f.side?d(b.CULL_FACE):a(b.CULL_FACE);g(1===f.side);!0===f.transparent?e(f.blending,f.blendEquation,f.blendSrc,f.blendDst,f.blendEquationAlpha,f.blendSrcAlpha,f.blendDstAlpha,f.premultipliedAlpha):e(0);m.setFunc(f.depthFunc);m.setTest(f.depthTest);m.setMask(f.depthWrite);p.setMask(f.colorWrite);l(f.polygonOffset,f.polygonOffsetFactor,f.polygonOffsetUnits)},setFlipSided:g,setCullFace:h,setLineWidth:function(f){f!==Ba&&(N&&b.lineWidth(f),Ba=f)},setPolygonOffset:l,setScissorTest:function(f){f?a(b.SCISSOR_TEST):d(b.SCISSOR_TEST)},activeTexture:w,bindTexture:function(f,k){null===U&&w();var c=na[U];void 0===c&&(c={type:void 0,texture:void 0},na[U]=c);if(c.type!==f||c.texture!==k)b.bindTexture(f,k||ca[f]),c.type=f,c.texture=k},compressedTexImage2D:function(){try{b.compressedTexImage2D.apply(b,arguments)}catch(ze){}},texImage2D:function(){try{b.texImage2D.apply(b,arguments)}catch(ze){}},scissor:function(f){!1===da.equals(f)&&(b.scissor(f.x,f.y,f.z,f.w),da.copy(f))},viewport:function(f){!1===ya.equals(f)&&(b.viewport(f.x,f.y,f.z,f.w),ya.copy(f))},reset:function(){for(var f=0;f<x.length;f++)1===x[f]&&(b.disableVertexAttribArray(f),x[f]=0);q={};U=C=null;na={};L=K=z=D=null;p.reset();m.reset();u.reset()}}}function Ae(b,f,k){function c(f){if("highp"===f){if(0<b.getShaderPrecisionFormat(b.VERTEX_SHADER,b.HIGH_FLOAT).precision&&0<b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.HIGH_FLOAT).precision)return"highp";f="mediump"}return"mediump"===f&&0<b.getShaderPrecisionFormat(b.VERTEX_SHADER,b.MEDIUM_FLOAT).precision&&0<b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT).precision?"mediump":"lowp"}var a,d=void 0!==k.precision?k.precision:"highp",e=c(d);e!==d&&(d=e);k=!0===k.logarithmicDepthBuffer;var e=b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS),g=b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=b.getParameter(b.MAX_TEXTURE_SIZE),l=b.getParameter(b.MAX_CUBE_MAP_TEXTURE_SIZE),w=b.getParameter(b.MAX_VERTEX_ATTRIBS),p=b.getParameter(b.MAX_VERTEX_UNIFORM_VECTORS),m=b.getParameter(b.MAX_VARYING_VECTORS),u=b.getParameter(b.MAX_FRAGMENT_UNIFORM_VECTORS),n=0<g,y=!!f.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==a)return a;var k=f.get("EXT_texture_filter_anisotropic");return a=null!==k?b.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:c,precision:d,logarithmicDepthBuffer:k,maxTextures:e,maxVertexTextures:g,maxTextureSize:h,maxCubemapSize:l,maxAttributes:w,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:u,vertexTextures:n,floatFragmentTextures:y,floatVertexTextures:n&&y}}function db(b,f,k,c){Qa.call(this);this.type="Pa";this.fov=void 0!==b?b:50;this.zoom=1;this.near=void 0!==k?k:.1;this.far=void 0!==c?c:2E3;this.focus=10;this.aspect=void 0!==f?f:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.ux()}function Zc(b){db.call(this);this.cameras=b||[]}function Be(b){var f={};return{get:function(k){if(void 0!==f[k])return f[k];var c;switch(k){case "WEBGL_depth_texture":c=b.getExtension("WEBGL_depth_texture")||b.getExtension("MOZ_WEBGL_depth_texture")||b.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":c=b.getExtension("EXT_texture_filter_anisotropic")||b.getExtension("MOZ_EXT_texture_filter_anisotropic")||b.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":c=b.getExtension("WEBGL_compressed_texture_s3tc")||b.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||b.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":c=b.getExtension("WEBGL_compressed_texture_pvrtc")||b.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case "WEBGL_compressed_texture_etc1":c=b.getExtension("WEBGL_compressed_texture_etc1");break;default:c=b.getExtension(k)}null===c&&console.log("tesss");return f[k]=c}}}function Ce(){function b(){w.value!==c&&(w.value=c,w.needsUpdate=0<a);k.numPlanes=a;k.numIntersection=0}function f(b,f,c,r){var a=null!==b?b.length:0,d=null;if(0!==a){d=w.value;if(!0!==r||null===d){r=c+4*a;f=f.matrixWorldInverse;h.getNormalMatrix(f);if(null===d||d.length<r)d=new Float32Array(r);for(r=0;r!==a;++r,c+=4)g.copy(b[r]).applyMatrix4(f,h),g.normal.toArray(d,c),d[c+3]=g.constant}w.value=d;w.needsUpdate=!0}k.numPlanes=a;return d}var k=this,c=null,a=0,d=!1,e=!1,g=new Ha,h=new l,w={value:null,needsUpdate:!1};this.uniform=w;this.numIntersection=this.numPlanes=0;this.init=function(b,k,r){var J=0!==b.length||k||0!==a||d;d=k;c=f(b,r,0);a=b.length;return J};this.beginShadows=function(){e=!0;f(null)};this.endShadows=function(){e=!1;b()};this.setState=function(k,r,J,g,M,h){if(!d||null===k||0===k.length||e&&!J)e?f(null):b();else{J=e?0:a;var l=4*J,Q=M.clippingState||null;w.value=Q;Q=f(k,g,l,h);for(k=0;k!==l;++k)Q[k]=c[k];M.clippingState=Q;this.numIntersection=r?this.numPlanes:0;this.numPlanes+=J}}}function Fd(b,f){return{convert:function(k){var c;if(1E3===k)return b.REPEAT;if(1001===k)return b.CLAMP_TO_EDGE;if(1002===k)return b.MIRRORED_REPEAT;if(1003===k)return b.NEAREST;if(1004===k)return b.NEAREST_MIPMAP_NEAREST;if(1005===k)return b.NEAREST_MIPMAP_LINEAR;if(1006===k)return b.LINEAR;if(1007===k)return b.LINEAR_MIPMAP_NEAREST;if(1008===k)return b.LINEAR_MIPMAP_LINEAR;if(1009===k)return b.UNSIGNED_BYTE;if(1017===k)return b.UNSIGNED_SHORT_4_4_4_4;if(1018===k)return b.UNSIGNED_SHORT_5_5_5_1;if(1019===k)return b.UNSIGNED_SHORT_5_6_5;if(1010===k)return b.BYTE;if(1011===k)return b.SHORT;if(1012===k)return b.UNSIGNED_SHORT;if(1013===k)return b.INT;if(1014===k)return b.UNSIGNED_INT;if(1015===k)return b.FLOAT;if(1016===k&&(c=f.get("OES_texture_half_float"),null!==c))return c.HALF_FLOAT_OES;if(1021===k)return b.ALPHA;if(1022===k)return b.RGB;if(1023===k)return b.RGBA;if(1024===k)return b.LUMINANCE;if(1025===k)return b.LUMINANCE_ALPHA;if(1026===k)return b.DEPTH_COMPONENT;if(1027===k)return b.DEPTH_STENCIL;if(100===k)return b.FUNC_ADD;if(101===k)return b.FUNC_SUBTRACT;if(102===k)return b.FUNC_REVERSE_SUBTRACT;if(200===k)return b.ZERO;if(201===k)return b.ONE;if(202===k)return b.SRC_COLOR;if(203===k)return b.ONE_MINUS_SRC_COLOR;if(204===k)return b.SRC_ALPHA;if(205===k)return b.ONE_MINUS_SRC_ALPHA;if(206===k)return b.DST_ALPHA;if(207===k)return b.ONE_MINUS_DST_ALPHA;if(208===k)return b.DST_COLOR;if(209===k)return b.ONE_MINUS_DST_COLOR;if(210===k)return b.SRC_ALPHA_SATURATE;if(2001===k||2002===k||2003===k||2004===k)if(c=f.get("WEBGL_compressed_texture_s3tc"),null!==c){if(2001===k)return c.COMPRESSED_RGB_S3TC_DXT1_EXT;if(2002===k)return c.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(2003===k)return c.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(2004===k)return c.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(2100===k||2101===k||2102===k||2103===k)if(c=f.get("WEBGL_compressed_texture_pvrtc"),null!==c){if(2100===k)return c.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(2101===k)return c.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(2102===k)return c.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(2103===k)return c.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(2151===k&&(c=f.get("WEBGL_compressed_texture_etc1"),null!==c))return c.COMPRESSED_RGB_ETC1_WEBGL;if(103===k||104===k)if(c=f.get("EXT_blend_minmax"),null!==c){if(103===k)return c.MIN_EXT;if(104===k)return c.MAX_EXT}return 1020===k&&(c=f.get("WEBGL_depth_texture"),null!==c)?c.UNSIGNED_INT_24_8_WEBGL:0}}}function $c(b){function f(){la=new Be(P);la.get("WEBGL_depth_texture");la.get("OES_texture_float");la.get("OES_texture_float_linear");la.get("OES_texture_half_float");la.get("OES_texture_half_float_linear");la.get("OES_standard_derivatives");la.get("OES_element_index_uint");la.get("ANGLE_instanced_arrays");Ca=new Fd(P,la);ja=new Ae(P,la,b);X=new ye(P,la,Ca);X.scissor(da.copy(ha).multiplyScalar(ka));X.viewport(na.copy(W).multiplyScalar(ka));Ka=new xe;ma=new we(P,la,X,Ka,ja,Ca,Ea);pa=new Zd(P);sa=new le(P,pa,Ea);Qa=new oe(sa,ga);Sa=new ie(P);xa=new ve(K,la,ja);qa=new ne;Ua=new ge;za=new ce(K,X,sa,z);Fa=new ke(P,la,ga);Ia=new je(P,la,ga);Ja=new va(K,P,X,ma,ja);Ma=new ra(K,P,X,ma,ja);K.info.programs=xa.programs;K.context=P;K.capabilities=ja;K.extensions=la;K.properties=Ka;K.renderLists=Ua;K.state=X}function k(b){b.preventDefault();L=!0}function c(){L=!1;f()}function a(b){b=b.target;b.removeEventListener("dispose",a);d(b);Ka.remove(b)}function d(b){var f=Ka.get(b).program;b.program=void 0;void 0!==f&&xa.releaseProgram(f)}function g(b){null!==La&&La(b);window.requestAnimationFrame(g)}function l(b,f,k){if(!1!==b.visible){if(b.layers.test(f.layers))if(b.isLight)A.push(b),b.castShadow&&E.push(b);else if(b.isSprite)b.frustumCulled&&!V.intersectsSprite(b)||G.push(b);else if(b.isLensFlare)I.push(b);else if(b.isMesh||b.isLine||b.isPoints)if(b.isSkinnedMesh&&b.skeleton.update(),!b.frustumCulled||V.intersectsObject(b)){k&&Z.setFromMatrixPosition(b.matrixWorld).applyMatrix4(ba);var c=Qa.update(b),r=b.material;if(Array.isArray(r))for(var a=c.groups,d=0,J=a.length;d<J;d++){var e=a[d],g=r[e.materialIndex];g&&g.visible&&H.push(b,c,g,Z.z,e)}else r.visible&&H.push(b,c,r,Z.z,null)}b=b.children;d=0;for(J=b.length;d<J;d++)l(b[d],f,k)}}function w(b,f,k,c){for(var r=0,a=b.length;r<a;r++){var d=b[r],J=d.object,e=d.geometry,g=void 0===c?d.material:c,d=d.group;if(k.isArrayCamera){U=k;for(var M=k.cameras,h=0,l=M.length;h<l;h++){var Q=M[h];if(J.layers.test(Q.layers)){var w=Q.bounds;X.viewport(na.set(w.x*O,w.y*ta,w.z*O,w.w*ta).multiplyScalar(ka));p(J,f,Q,e,g,d)}}}else U=null,p(J,f,k,e,g,d)}}function p(b,f,k,c,r,a){b.onBeforeRender(K,f,k,c,r,a);b.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,b.matrixWorld);b.normalMatrix.getNormalMatrix(b.modelViewMatrix);K.renderBufferDirect(k,f.fog,c,r,b,a);b.onAfterRender(K,f,k,c,r,a)}function m(b,f,k){var c=Ka.get(b);k=xa.getParameters(b,qa.state,E,f,Da.numPlanes,Da.numIntersection,k);var r=xa.getProgramCode(b,k),J=c.program,e=!0;if(void 0===J)b.addEventListener("dispose",a);else if(J.code!==r)d(b);else{if(void 0!==k.shaderID)return;e=!1}e&&(k.shaderID?(J=tb[k.shaderID],c.shader={name:b.type,uniforms:Ra.clone(J.uniforms),vertexShader:J.vertexShader,fragmentShader:J.fragmentShader}):c.shader={name:b.type,uniforms:b.uniforms,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader},b.onBeforeCompile(c.shader),J=xa.acquireProgram(b,c.shader,k,r),c.program=J,b.program=J);k=J.getAttributes();if(b.morphTargets)for(r=b.numSupportedMorphTargets=0;r<K.maxMorphTargets;r++)0<=k["morphTarget"+r]&&b.numSupportedMorphTargets++;if(b.morphNormals)for(r=b.numSupportedMorphNormals=0;r<K.maxMorphNormals;r++)0<=k["morphNormal"+r]&&b.numSupportedMorphNormals++;k=c.shader.uniforms;if(!b.isShaderMaterial&&!b.isRawShaderMaterial||!0===b.clipping)c.numClippingPlanes=Da.numPlanes,c.numIntersection=Da.numIntersection,k.cs=Da.uniform;c.fog=f;c.lightsHash=qa.state.hash;b.lights&&(k.ambientLightColor.value=qa.state.ambient,k.directionalLights.value=qa.state.directional,k.spotLights.value=qa.state.spot,k.rectAreaLights.value=qa.state.rectArea,k.pointLights.value=qa.state.point,k.hemisphereLights.value=qa.state.hemi,k.directionalShadowMap.value=qa.state.directionalShadowMap,k.directionalShadowMatrix.value=qa.state.directionalShadowMatrix,k.spotShadowMap.value=qa.state.spotShadowMap,k.spotShadowMatrix.value=qa.state.spotShadowMatrix,k.pointShadowMap.value=qa.state.pointShadowMap,k.pointShadowMatrix.value=qa.state.pointShadowMatrix);b=c.program.getUniforms();b=ua.seqWithValue(b.seq,k);c.uniformsList=b}function u(b,f){b.opacity.value=f.opacity;f.color&&(b.diffuse.value=f.color);f.emissive&&b.emissive.value.copy(f.emissive).multiplyScalar(f.emissiveIntensity);f.map&&(b.map.value=f.map);f.alphaMap&&(b.alphaMap.value=f.alphaMap);f.specularMap&&(b.specularMap.value=f.specularMap);f.envMap&&(b.envMap.value=f.envMap,b.flipEnvMap.value=f.envMap&&f.envMap.isCubeTexture?-1:1,b.reflectivity.value=f.reflectivity,b.refractionRatio.value=f.refractionRatio);f.lightMap&&(b.lightMap.value=f.lightMap,b.lightMapIntensity.value=f.lightMapIntensity);f.aoMap&&(b.aoMap.value=f.aoMap,b.aoMapIntensity.value=f.aoMapIntensity);var k;f.map?k=f.map:f.specularMap?k=f.specularMap:f.displacementMap?k=f.displacementMap:f.normalMap?k=f.normalMap:f.bumpMap?k=f.bumpMap:f.roughnessMap?k=f.roughnessMap:f.metalnessMap?k=f.metalnessMap:f.alphaMap?k=f.alphaMap:f.emissiveMap&&(k=f.emissiveMap);if(void 0!==k){k.isWt&&(k=k.texture);if(!0===k.matrixAutoUpdate){var c=k.offset,r=k.repeat,a=k.center;k.matrix.setUvTransform(c.x,c.y,r.x,r.y,k.rotation,a.x,a.y)}b.uvTransform.value.copy(k.matrix)}}function y(b,f){b.specular.value=f.specular;b.shininess.value=Math.max(f.shininess,1E-4);f.emissiveMap&&(b.emissiveMap.value=f.emissiveMap);f.bumpMap&&(b.bumpMap.value=f.bumpMap,b.bumpScale.value=f.bumpScale);f.normalMap&&(b.normalMap.value=f.normalMap,b.normalScale.value.copy(f.normalScale));f.displacementMap&&(b.displacementMap.value=f.displacementMap,b.displacementScale.value=f.displacementScale,b.displacementBias.value=f.displacementBias)}b=b||{};var t=void 0!==b.canvas?b.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),x=void 0!==b.context?b.context:null,v=void 0!==b.alpha?b.alpha:!1,q=void 0!==b.depth?b.depth:!0,C=void 0!==b.stencil?b.stencil:!0,D=void 0!==b.antialias?b.antialias:!1,z=void 0!==b.premultipliedAlpha?b.premultipliedAlpha:!0,B=void 0!==b.preserveDrawingBuffer?b.preserveDrawingBuffer:!1,A=[],E=[],H=null,G=[],I=[];this.domElement=t;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.cs=[];this.ld=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var K=this,L=!1,Ba=null,T=null,ia=-1,Ha="",N=null,U=null,na=new n,da=new n,ya=null,ca=0,O=t.width,ta=t.height,ka=1,W=new n(0,0,O,ta),ha=new n(0,0,O,ta),aa=!1,V=new Hb,Da=new Ce,ea=!1,Y=!1,ba=new e,Z=new h,Ea={geometries:0,textures:0},ga={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:ga,memory:Ea,programs:null};var P;try{v={alpha:v,depth:q,stencil:C,antialias:D,premultipliedAlpha:z,preserveDrawingBuffer:B};P=x||t.getContext("webgl",v)||t.getContext("experimental-webgl",v);if(null===P){if(null!==t.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context.";}void 0===P.getShaderPrecisionFormat&&(P.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});t.addEventListener("webglcontextlost",k,!1);t.addEventListener("webglcontextrestored",c,!1)}catch(Ge){}var la,ja,X,Ka,ma,pa,sa,Qa,qa,xa,Ua,za,Sa,Fa,Ia,Ja,Ma,Ca;f();var Na=new zd(K,Qa,ja.maxTextureSize);this.shadowMap=Na;this.getContext=function(){return P};this.getContextAttributes=function(){return P.getContextAttributes()};this.forceContextLoss=function(){var b=la.get("WEBGL_lose_context");b&&b.loseContext()};this.forceContextRestore=function(){var b=la.get("WEBGL_lose_context");b&&b.restoreContext()};this.getPixelRatio=function(){return ka};this.so=function(b){void 0!==b&&(ka=b,this.setSize(O,ta,!1))};this.getSize=function(){return{width:O,height:ta}};this.setSize=function(b,f,k){O=b;ta=f;t.width=b*ka;t.height=f*ka;!1!==k&&(t.style.width=b+"px",t.style.height=f+"px");this.setViewport(0,0,b,f)};this.getDrawingBufferSize=function(){return{width:O*ka,height:ta*ka}};this.setDrawingBufferSize=function(b,f,k){O=b;ta=f;ka=k;t.width=b*k;t.height=f*k;this.setViewport(0,0,b,f)};this.setViewport=function(b,f,k,c){W.set(b,ta-f-c,k,c);X.viewport(na.copy(W).multiplyScalar(ka))};this.setScissor=function(b,f,k,c){ha.set(b,ta-f-c,k,c);X.scissor(da.copy(ha).multiplyScalar(ka))};this.setScissorTest=function(b){X.setScissorTest(aa=b)};this.getClearColor=function(){return za.getClearColor()};this.sr=function(){za.sr.apply(za,arguments)};this.getClearAlpha=function(){return za.getClearAlpha()};this.setClearAlpha=function(){za.setClearAlpha.apply(za,arguments)};this.clear=function(b,f,k){var c=0;if(void 0===b||b)c|=P.COLOR_BUFFER_BIT;if(void 0===f||f)c|=P.DEPTH_BUFFER_BIT;if(void 0===k||k)c|=P.STENCIL_BUFFER_BIT;P.clear(c)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.clearTarget=function(b,f,k,c){this.setRenderTarget(b);this.clear(f,k,c)};this.dispose=function(){t.removeEventListener("webglcontextlost",k,!1);t.removeEventListener("webglcontextrestored",c,!1);Ua.dispose()};this.renderBufferImmediate=function(b,f,k){X.initAttributes();var c=Ka.get(b);b.hasPositions&&!c.position&&(c.position=P.createBuffer());b.hasNormals&&!c.normal&&(c.normal=P.createBuffer());b.hasUvs&&!c.uv&&(c.uv=P.createBuffer());b.hasColors&&!c.color&&(c.color=P.createBuffer());f=f.getAttributes();b.hasPositions&&(P.bindBuffer(P.ARRAY_BUFFER,c.position),P.bufferData(P.ARRAY_BUFFER,b.positionArray,P.DYNAMIC_DRAW),X.enableAttribute(f.position),P.vertexAttribPointer(f.position,3,P.FLOAT,!1,0,0));if(b.hasNormals){P.bindBuffer(P.ARRAY_BUFFER,c.normal);if(!k.isMeshPhongMaterial&&!k.isMeshStandardMaterial&&!k.isMeshNormalMaterial&&!0===k.flatShading)for(var r=0,a=3*b.count;r<a;r+=9){var d=b.normalArray,J=(d[r+0]+d[r+3]+d[r+6])/3,e=(d[r+1]+d[r+4]+d[r+7])/3,g=(d[r+2]+d[r+5]+d[r+8])/3;d[r+0]=J;d[r+1]=e;d[r+2]=g;d[r+3]=J;d[r+4]=e;d[r+5]=g;d[r+6]=J;d[r+7]=e;d[r+8]=g}P.bufferData(P.ARRAY_BUFFER,b.normalArray,P.DYNAMIC_DRAW);X.enableAttribute(f.normal);P.vertexAttribPointer(f.normal,3,P.FLOAT,!1,0,0)}b.hasUvs&&k.map&&(P.bindBuffer(P.ARRAY_BUFFER,c.uv),P.bufferData(P.ARRAY_BUFFER,b.uvArray,P.DYNAMIC_DRAW),X.enableAttribute(f.uv),P.vertexAttribPointer(f.uv,2,P.FLOAT,!1,0,0));b.hasColors&&0!==k.vertexColors&&(P.bindBuffer(P.ARRAY_BUFFER,c.color),P.bufferData(P.ARRAY_BUFFER,b.colorArray,P.DYNAMIC_DRAW),X.enableAttribute(f.color),P.vertexAttribPointer(f.color,3,P.FLOAT,!1,0,0));X.disableUnusedAttributes();P.drawArrays(P.TRIANGLES,0,b.count);b.count=0};this.renderBufferDirect=function(b,f,k,c,r,a){X.setMaterial(c);ca=0;var d=Ka.get(c);ea&&(Y||b!==N)&&Da.setState(c.cs,c.clipIntersection,c.clipShadows,b,d,b===N&&c.id===ia);!1===c.needsUpdate&&(void 0===d.program?c.needsUpdate=!0:c.fog&&d.fog!==f?c.needsUpdate=!0:c.lights&&d.lightsHash!==qa.state.hash?c.needsUpdate=!0:void 0===d.numClippingPlanes||d.numClippingPlanes===Da.numPlanes&&d.numIntersection===Da.numIntersection||(c.needsUpdate=!0));c.needsUpdate&&(m(c,f,r),c.needsUpdate=!1);var J=!1,e=!1,g=!1,M=d.program,h=M.getUniforms(),l=d.shader.uniforms;X.useProgram(M.program)&&(g=e=J=!0);c.id!==ia&&(ia=c.id,e=!0);if(J||b!==N){h.setValue(P,"projectionMatrix",b.projectionMatrix);ja.logarithmicDepthBuffer&&h.setValue(P,"logDepthBufFC",2/(Math.log(b.far+1)/Math.LN2));N!==(U||b)&&(N=U||b,g=e=!0);if(c.isShaderMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.envMap)J=h.map.cameraPosition,void 0!==J&&J.setValue(P,Z.setFromMatrixPosition(b.matrixWorld));(c.isMeshPhongMaterial||c.isMeshLambertMaterial||c.isMal||c.isMeshStandardMaterial||c.isShaderMaterial||c.skinning)&&h.setValue(P,"viewMatrix",b.matrixWorldInverse)}if(c.skinning&&(h.setOptional(P,r,"bindMatrix"),h.setOptional(P,r,"bindMatrixInverse"),b=r.skeleton))if(J=b.bones,ja.floatVertexTextures){if(void 0===b.boneTexture){var J=Math.sqrt(4*J.length),J=oa.ceilPowerOfTwo(J),J=Math.max(J,4),Q=new Float32Array(J*J*4);Q.set(b.boneMatrices);var w=new F(Q,J,J,1023,1015);b.boneMatrices=Q;b.boneTexture=w;b.boneTextureSize=J}h.setValue(P,"boneTexture",b.boneTexture);h.setValue(P,"boneTextureSize",b.boneTextureSize)}else h.setOptional(P,b,"boneMatrices");e&&(h.setValue(P,"toneMappingExposure",K.toneMappingExposure),h.setValue(P,"toneMappingWhitePoint",K.toneMappingWhitePoint),c.lights&&(e=g,l.ambientLightColor.needsUpdate=e,l.directionalLights.needsUpdate=e,l.pointLights.needsUpdate=e,l.spotLights.needsUpdate=e,l.rectAreaLights.needsUpdate=e,l.hemisphereLights.needsUpdate=e),f&&c.fog&&(l.fogColor.value=f.color,f.isFog&&(l.fogNear.value=f.near,l.fogFar.value=f.far)),c.isMal?u(l,c):c.isMeshLambertMaterial?(u(l,c),c.emissiveMap&&(l.emissiveMap.value=c.emissiveMap)):c.isMeshPhongMaterial?(u(l,c),c.isMeshToonMaterial?(y(l,c),c.gradientMap&&(l.gradientMap.value=c.gradientMap)):y(l,c)):c.isMeshStandardMaterial?(u(l,c),c.isMeshPhysicalMaterial&&(l.clearCoat.value=c.clearCoat,l.clearCoatRoughness.value=c.clearCoatRoughness),l.roughness.value=c.roughness,l.metalness.value=c.metalness,c.roughnessMap&&(l.roughnessMap.value=c.roughnessMap),c.metalnessMap&&(l.metalnessMap.value=c.metalnessMap),c.emissiveMap&&(l.emissiveMap.value=c.emissiveMap),c.bumpMap&&(l.bumpMap.value=c.bumpMap,l.bumpScale.value=c.bumpScale),c.normalMap&&(l.normalMap.value=c.normalMap,l.normalScale.value.copy(c.normalScale)),c.displacementMap&&(l.displacementMap.value=c.displacementMap,l.displacementScale.value=c.displacementScale,l.displacementBias.value=c.displacementBias),c.envMap&&(l.envMapIntensity.value=c.envMapIntensity)):c.isMeshDepthMaterial?(u(l,c),c.displacementMap&&(l.displacementMap.value=c.displacementMap,l.displacementScale.value=c.displacementScale,l.displacementBias.value=c.displacementBias)):c.isMeshDistanceMaterial?(u(l,c),c.displacementMap&&(l.displacementMap.value=c.displacementMap,l.displacementScale.value=c.displacementScale,l.displacementBias.value=c.displacementBias),l.referencePosition.value.copy(c.referencePosition),l.nearDistance.value=c.nearDistance,l.farDistance.value=c.farDistance):c.isMeshNormalMaterial?(u(l,c),c.bumpMap&&(l.bumpMap.value=c.bumpMap,l.bumpScale.value=c.bumpScale),c.normalMap&&(l.normalMap.value=c.normalMap,l.normalScale.value.copy(c.normalScale)),c.displacementMap&&(l.displacementMap.value=c.displacementMap,l.displacementScale.value=c.displacementScale,l.displacementBias.value=c.displacementBias)):c.isLineBasicMaterial?(l.diffuse.value=c.color,l.opacity.value=c.opacity,c.isLineDashedMaterial&&(l.dashSize.value=c.dashSize,l.totalSize.value=c.dashSize+c.gapSize,l.scale.value=c.scale)):c.isPointsMaterial?(l.diffuse.value=c.color,l.opacity.value=c.opacity,l.size.value=c.size*ka,l.scale.value=.5*ta,l.map.value=c.map,null!==c.map&&(!0===c.map.matrixAutoUpdate&&(f=c.map.offset,e=c.map.repeat,g=c.map.center,c.map.matrix.setUvTransform(f.x,f.y,e.x,e.y,c.map.rotation,g.x,g.y)),l.uvTransform.value.copy(c.map.matrix))):c.isShadowMaterial&&(l.color.value=c.color,l.opacity.value=c.opacity),void 0!==l.ltcMat&&(l.ltcMat.value=fa.LTC_MAT_TEXTURE),void 0!==l.ltcMag&&(l.ltcMag.value=fa.LTC_MAG_TEXTURE),ua.upload(P,d.uniformsList,l,K));h.setValue(P,"modelViewMatrix",r.modelViewMatrix);h.setValue(P,"normalMatrix",r.normalMatrix);h.setValue(P,"modelMatrix",r.matrixWorld);d=k.id+"_"+M.id+"_"+(!0===c.wireframe);e=!1;d!==Ha&&(Ha=d,e=!0);r.morphTargetInfluences&&(Sa.update(r,k,c,M),e=!0);l=k.index;f=k.attributes.position;h=1;!0===c.wireframe&&(l=sa.getWireframeAttribute(k),h=2);var R,d=Fa;null!==l&&(R=pa.get(l),d=Ia,d.setIndex(R));if(e){e=void 0;if(!k||!k.isInstancedBufferGeometry||null!==la.get("ANGLE_instanced_arrays")){void 0===e&&(e=0);X.initAttributes();g=k.attributes;M=M.getAttributes();b=c.defaultAttributeValues;for(var p in M)if(J=M[p],0<=J){var S=g[p];if(void 0!==S){var Q=S.normalized,w=S.itemSize,n=pa.get(S);if(void 0!==n){var t=n.buffer,x=n.type,n=n.bytesPerElement;if(S.isInterleavedBufferAttribute){var v=S.data,q=v.stride,S=S.offset;v&&v.isInstancedInterleavedBuffer?(X.enableAttributeAndDivisor(J,v.meshPerAttribute),void 0===k.maxInstancedCount&&(k.maxInstancedCount=v.meshPerAttribute*v.count)):X.enableAttribute(J);P.bindBuffer(P.ARRAY_BUFFER,t);P.vertexAttribPointer(J,w,x,Q,q*n,(e*q+S)*n)}else S.isInstancedBufferAttribute?(X.enableAttributeAndDivisor(J,S.meshPerAttribute),void 0===k.maxInstancedCount&&(k.maxInstancedCount=S.meshPerAttribute*S.count)):X.enableAttribute(J),P.bindBuffer(P.ARRAY_BUFFER,t),P.vertexAttribPointer(J,w,x,Q,0,e*w*n)}}else if(void 0!==b&&(Q=b[p],void 0!==Q))switch(Q.length){case 2:P.vertexAttrib2fv(J,Q);break;case 3:P.vertexAttrib3fv(J,Q);break;case 4:P.vertexAttrib4fv(J,Q);break;default:P.vertexAttrib1fv(J,Q)}}X.disableUnusedAttributes()}null!==l&&P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,R.buffer)}R=0;null!==l?R=l.count:void 0!==f&&(R=f.count);M=k.drawRange.start*h;l=null!==a?a.start*h:0;p=Math.max(M,l);a=Math.max(0,Math.min(R,M+k.drawRange.count*h,l+(null!==a?a.count*h:Infinity))-1-p+1);if(0!==a){if(r.isMesh)if(!0===c.wireframe)X.setLineWidth(c.wireframeLinewidth*(null===Ba?ka:1)),d.setMode(P.LINES);else switch(r.drawMode){case 0:d.setMode(P.TRIANGLES);break;case 1:d.setMode(P.TRIANGLE_STRIP);break;case 2:d.setMode(P.TRIANGLE_FAN)}else r.isLine?(c=c.linewidth,void 0===c&&(c=1),X.setLineWidth(c*(null===Ba?ka:1)),r.isLineSegments?d.setMode(P.LINES):r.isLineLoop?d.setMode(P.LINE_LOOP):d.setMode(P.LINE_STRIP)):r.isPoints&&d.setMode(P.POINTS);k&&k.isInstancedBufferGeometry?0<k.maxInstancedCount&&d.renderInstances(k,p,a):d.render(p,a)}};this.compile=function(b,f){A.length=0;E.length=0;b.traverse(function(b){b.isLight&&(A.push(b),b.castShadow&&E.push(b))});qa.setup(A,E,f);b.traverse(function(f){if(f.material)if(Array.isArray(f.material))for(var k=0;k<f.material.length;k++)m(f.material[k],b.fog,f);else m(f.material,b.fog,f)})};var Oa=!1,La=null;this.animate=function(b){La=b;Oa||(window.requestAnimationFrame(g),Oa=!0)};this.render=function(b,f,k,c){if(f&&f.isCamera&&!L){Ha="";ia=-1;N=null;!0===b.autoUpdate&&b.uld();null===f.parent&&f.uld();ba.multiplyMatrices(f.projectionMatrix,f.matrixWorldInverse);V.setFromMatrix(ba);A.length=0;E.length=0;G.length=0;I.length=0;Y=this.ld;ea=Da.init(this.cs,Y,f);H=Ua.get(b,f);H.init();l(b,f,K.sortObjects);!0===K.sortObjects&&H.sort();ea&&Da.beginShadows();Na.render(E,b,f);qa.setup(A,E,f);ea&&Da.endShadows();ga.frame++;ga.calls=0;ga.vertices=0;ga.faces=0;ga.points=0;void 0===k&&(k=null);this.setRenderTarget(k);za.render(H,b,f,c);c=H.opaque;var r=H.transparent;if(b.overrideMaterial){var a=b.overrideMaterial;c.length&&w(c,b,f,a);r.length&&w(r,b,f,a)}else c.length&&w(c,b,f),r.length&&w(r,b,f);Ma.render(G,b,f);Ja.render(I,b,f,na);k&&ma.updateRenderTargetMipmap(k);X.buffers.depth.setTest(!0);X.buffers.depth.setMask(!0);X.buffers.color.setMask(!0);X.setPolygonOffset(!1)}};this.setFaceCulling=function(b,f){X.setCullFace(b);X.setFlipSided(0===f)};this.allocTextureUnit=function(){var b=ca;ca+=1;return b};this.setTexture2D=function(){var b=!1;return function(f,k){f&&f.isWt&&(b||(b=!0),f=f.texture);ma.setTexture2D(f,k)}}();this.setTexture=function(){var b=!1;return function(f,k){b||(b=!0);ma.setTexture2D(f,k)}}();this.setTextureCube=function(){var b=!1;return function(f,k){f&&f.isWtCube&&(b||(b=!0),f=f.texture);f&&f.isCubeTexture||Array.isArray(f.image)&&6===f.image.length?ma.setTextureCube(f,k):ma.setTextureCubeDynamic(f,k)}}();this.getRenderTarget=function(){return Ba};this.setRenderTarget=function(b){(Ba=b)&&void 0===Ka.get(b).__webglFramebuffer&&ma.setupRenderTarget(b);var f=null,k=!1;b?(f=Ka.get(b).__webglFramebuffer,b.isWtCube&&(f=f[b.activeCubeFace],k=!0),na.copy(b.viewport),da.copy(b.scissor),ya=b.scissorTest):(na.copy(W).multiplyScalar(ka),da.copy(ha).multiplyScalar(ka),ya=aa);T!==f&&(P.bindFramebuffer(P.FRAMEBUFFER,f),T=f);X.viewport(na);X.scissor(da);X.setScissorTest(ya);k&&(k=Ka.get(b.texture),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_CUBE_MAP_POSITIVE_X+b.activeCubeFace,k.__webglTexture,b.activeMipMapLevel))};this.rls=function(b,f,k,c,r,a){if(b&&b.isWt){var d=Ka.get(b).__webglFramebuffer;if(d){var J=!1;d!==T&&(P.bindFramebuffer(P.FRAMEBUFFER,d),J=!0);try{var e=b.texture,g=e.format,M=e.type;1023!==g&&Ca.convert(g)!==P.getParameter(P.IMPLEMENTATION_COLOR_READ_FORMAT)||!(1009===M||Ca.convert(M)===P.getParameter(P.IMPLEMENTATION_COLOR_READ_TYPE)||1015===M&&(la.get("OES_texture_float")||la.get("WEBGL_color_buffer_float"))||1016===M&&la.get("EXT_color_buffer_half_float"))||P.checkFramebufferStatus(P.FRAMEBUFFER)===P.FRAMEBUFFER_COMPLETE&&0<=f&&f<=b.width-c&&0<=k&&k<=b.height-r&&P.readPixels(f,k,c,r,Ca.convert(g),Ca.convert(M),a)}finally{J&&P.bindFramebuffer(P.FRAMEBUFFER,T)}}}};this.copyFramebufferToTexture=function(b,f,k){var c=f.image.width,r=f.image.height,a=Ca.convert(f.format);this.setTexture2D(f,0);P.copyTexImage2D(P.TEXTURE_2D,k||0,a,b.x,b.y,c,r,0)};this.copyTextureToTexture=function(b,f,k,c){var r=f.image.width,a=f.image.height,d=Ca.convert(k.format),J=Ca.convert(k.type);this.setTexture2D(k,0);f.isDataTexture?P.texSubImage2D(P.TEXTURE_2D,c||0,b.x,b.y,r,a,d,J,f.image.data):P.texSubImage2D(P.TEXTURE_2D,c||0,b.x,b.y,d,J,f.image)}}function Kb(b,f,k){this.name="";this.color=new Y(b);this.near=void 0!==f?f:1;this.far=void 0!==k?k:1E3}function yc(){ea.call(this);this.type="Scene";this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0}function ad(b,f,k,c,a){ea.call(this);this.lensFlares=[];this.positionScreen=new h;this.customUpdateCallback=void 0;void 0!==b&&this.add(b,f,k,c,a)}function hb(b){y.call(this);this.type="SpriteMaterial";this.color=new Y(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;this.setValues(b)}function zc(b){ea.call(this);this.type="Sprite";this.material=void 0!==b?b:new hb}function gc(b,f){b=b||[];this.bones=b.slice(0);this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===f)this.calculateInverses();else if(this.bones.length===f.length)this.boneInverses=f.slice(0);else{this.boneInverses=[];for(var k=0,c=this.bones.length;k<c;k++)this.boneInverses.push(new e)}}function Ac(){ea.call(this);this.type="Bone"}function Bc(b,f){La.call(this,b,f);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new e;this.bindMatrixInverse=new e;var k=this.initBones(),k=new gc(k);this.bind(k,this.matrixWorld);this.normalizeSkinWeights()}function za(b){y.call(this);this.type="LineBasicMaterial";this.color=new Y(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.lights=!1;this.setValues(b)}function Wa(b,f,k){if(1===k)return new Ia(b,f);ea.call(this);this.type="Line";this.geometry=void 0!==b?b:new ma;this.material=void 0!==f?f:new za({color:16777215*Math.random()})}function Ia(b,f){Wa.call(this,b,f);this.type="LineSegments"}function Cc(b,f){Wa.call(this,b,f);this.type="LineLoop"}function eb(b){y.call(this);this.type="PointsMaterial";this.color=new Y(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=!1;this.setValues(b)}function hc(b,f){ea.call(this);this.type="Points";this.geometry=void 0!==b?b:new ma;this.material=void 0!==f?f:new eb({color:16777215*Math.random()})}function ic(){ea.call(this);this.type="Group"}function Dc(b,f,k,c,a,d,e,g,h){function r(){var b=J.image;b.readyState>=b.HAVE_CURRENT_DATA&&(J.needsUpdate=!0);requestAnimationFrame(r)}m.call(this,b,f,k,c,a,d,e,g,h);this.generateMipmaps=!1;var J=this;requestAnimationFrame(r)}function Lb(b,f,k,c,a,d,e,g,h,l,w,p){m.call(this,null,d,e,g,h,l,c,a,w,p);this.image={width:f,height:k};this.mipmaps=b;this.generateMipmaps=this.flipY=!1}function jc(b,f,k,c,a,d,e,g,h,l){l=void 0!==l?l:1026;void 0===k&&1026===l&&(k=1012);void 0===k&&1027===l&&(k=1020);m.call(this,null,c,a,d,e,g,l,k,h);this.image={width:b,height:f};this.magFilter=void 0!==e?e:1003;this.minFilter=void 0!==g?g:1003;this.generateMipmaps=this.flipY=!1}function Mb(b){ma.call(this);this.type="WireframeGeometry";var f=[],k,c,a,d,e=[0,0],g={},l,w,p=["a","b","c"];if(b&&b.isGeometry){var m=b.faces;k=0;for(a=m.length;k<a;k++){var u=m[k];for(c=0;3>c;c++)l=u[p[c]],w=u[p[(c+1)%3]],e[0]=Math.min(l,w),e[1]=Math.max(l,w),l=e[0]+","+e[1],void 0===g[l]&&(g[l]={index1:e[0],index2:e[1]})}for(l in g)k=g[l],p=b.vertices[k.index1],f.push(p.x,p.y,p.z),p=b.vertices[k.index2],f.push(p.x,p.y,p.z)}else if(b&&b.isBufferGeometry){var n,p=new h;if(null!==b.index){m=b.attributes.position;u=b.index;n=b.groups;0===n.length&&(n=[{start:0,count:u.count,materialIndex:0}]);b=0;for(d=n.length;b<d;++b)for(k=n[b],c=k.start,a=k.count,k=c,a=c+a;k<a;k+=3)for(c=0;3>c;c++)l=u.getX(k+c),w=u.getX(k+(c+1)%3),e[0]=Math.min(l,w),e[1]=Math.max(l,w),l=e[0]+","+e[1],void 0===g[l]&&(g[l]={index1:e[0],index2:e[1]});for(l in g)k=g[l],p.fromBufferAttribute(m,k.index1),f.push(p.x,p.y,p.z),p.fromBufferAttribute(m,k.index2),f.push(p.x,p.y,p.z)}else for(m=b.attributes.position,k=0,a=m.count/3;k<a;k++)for(c=0;3>c;c++)g=3*k+c,p.fromBufferAttribute(m,g),f.push(p.x,p.y,p.z),g=3*k+(c+1)%3,p.fromBufferAttribute(m,g),f.push(p.x,p.y,p.z)}this.addAttribute("position",new X(f,3))}function kc(b,f,k,c,a,d,e){qa.call(this);this.type="SphereGeometry";this.parameters={radius:b,widthSegments:f,heightSegments:k,phiStart:c,phiLength:a,thetaStart:d,thetaLength:e};this.fromBufferGeometry(new Nb(b,f,k,c,a,d,e));this.mergeVertices()}function Nb(b,f,k,c,a,d,e){ma.call(this);this.type="SphereBufferGeometry";this.parameters={radius:b,widthSegments:f,heightSegments:k,phiStart:c,phiLength:a,thetaStart:d,thetaLength:e};b=b||1;f=Math.max(3,Math.floor(f)||8);k=Math.max(2,Math.floor(k)||6);c=void 0!==c?c:0;a=void 0!==a?a:2*Math.PI;d=void 0!==d?d:0;e=void 0!==e?e:Math.PI;var r=d+e,J,g,M=0,l=[],Q=new h,w=new h,p=[],m=[],u=[],n=[];for(g=0;g<=k;g++){var y=[],t=g/k;for(J=0;J<=f;J++){var x=J/f;Q.x=-b*Math.cos(c+x*a)*Math.sin(d+t*e);Q.y=b*Math.cos(d+t*e);Q.z=b*Math.sin(c+x*a)*Math.sin(d+t*e);m.push(Q.x,Q.y,Q.z);w.set(Q.x,Q.y,Q.z).normalize();u.push(w.x,w.y,w.z);n.push(x,1-t);y.push(M++)}l.push(y)}for(g=0;g<k;g++)for(J=0;J<f;J++)b=l[g][J+1],c=l[g][J],a=l[g+1][J],e=l[g+1][J+1],(0!==g||0<d)&&p.push(b,c,e),(g!==k-1||r<Math.PI)&&p.push(c,a,e);this.setIndex(p);this.addAttribute("position",new X(m,3));this.addAttribute("normal",new X(u,3));this.addAttribute("uv",new X(n,2))}function Ob(b,f){qa.call(this);this.type="ShapeGeometry";"object"===typeof f&&(f=f.curveSegments);this.parameters={shapes:b,curveSegments:f};this.fromBufferGeometry(new Pb(b,f));this.mergeVertices()}function Pb(b,f){function k(b){var k,r,J=a.length/3;b=b.extractPoints(f);var g=b.shape,M=b.holes;if(!1===ib.isClockWise(g))for(g=g.reverse(),b=0,k=M.length;b<k;b++)r=M[b],!0===ib.isClockWise(r)&&(M[b]=r.reverse());var l=ib.triangulateShape(g,M);b=0;for(k=M.length;b<k;b++)r=M[b],g=g.concat(r);b=0;for(k=g.length;b<k;b++)r=g[b],a.push(r.x,r.y,0),d.push(0,0,1),e.push(r.x,r.y);b=0;for(k=l.length;b<k;b++)g=l[b],c.push(g[0]+J,g[1]+J,g[2]+J),h+=3}ma.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:b,curveSegments:f};f=f||12;var c=[],a=[],d=[],e=[],g=0,h=0;if(!1===Array.isArray(b))k(b);else for(var l=0;l<b.length;l++)k(b[l]),this.addGroup(g,h,l),g+=h,h=0;this.setIndex(c);this.addAttribute("position",new X(a,3));this.addAttribute("normal",new X(d,3));this.addAttribute("uv",new X(e,2))}function Qb(b,f){ma.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:f};var k=[],c=Math.cos(oa.DEG2RAD*(void 0!==f?f:1)),a=[0,0],d={},e,g,h=["a","b","c"],l;b.isBufferGeometry?(l=new qa,l.fromBufferGeometry(b)):l=b.clone();l.mergeVertices();l.computeFaceNormals();var w=l.vertices;l=l.faces;for(var p=0,m=l.length;p<m;p++)for(var u=l[p],n=0;3>n;n++)e=u[h[n]],g=u[h[(n+1)%3]],a[0]=Math.min(e,g),a[1]=Math.max(e,g),e=a[0]+","+a[1],void 0===d[e]?d[e]={index1:a[0],index2:a[1],face1:p,face2:void 0}:d[e].face2=p;for(e in d)if(a=d[e],void 0===a.face2||l[a.face1].normal.dot(l[a.face2].normal)<=c)h=w[a.index1],k.push(h.x,h.y,h.z),h=w[a.index2],k.push(h.x,h.y,h.z);this.addAttribute("position",new X(k,3))}function ub(b,f,k,c,a,d,e,g){qa.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:b,radiusBottom:f,height:k,radialSegments:c,heightSegments:a,openEnded:d,thetaStart:e,thetaLength:g};this.fromBufferGeometry(new fb(b,f,k,c,a,d,e,g));this.mergeVertices()}function fb(b,f,k,c,a,e,g,l){function r(k){var r,a,e,m=new d,S=new h,y=0,t=!0===k?b:f,x=!0===k?1:-1;a=R;for(r=1;r<=c;r++)Q.push(0,u*x,0),w.push(0,x,0),p.push(.5,.5),R++;e=R;for(r=0;r<=c;r++){var v=r/c*l+g,q=Math.cos(v),v=Math.sin(v);S.x=t*v;S.y=u*x;S.z=t*q;Q.push(S.x,S.y,S.z);w.push(0,x,0);m.x=.5*q+.5;m.y=.5*v*x+.5;p.push(m.x,m.y);R++}for(r=0;r<c;r++)m=a+r,S=e+r,!0===k?M.push(S,S+1,m):M.push(S+1,S,m),y+=3;J.addGroup(n,y,!0===k?1:2);n+=y}ma.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:b,radiusBottom:f,height:k,radialSegments:c,heightSegments:a,openEnded:e,thetaStart:g,thetaLength:l};var J=this;b=void 0!==b?b:1;f=void 0!==f?f:1;k=k||1;c=Math.floor(c)||8;a=Math.floor(a)||1;e=void 0!==e?e:!1;g=void 0!==g?g:0;l=void 0!==l?l:2*Math.PI;var M=[],Q=[],w=[],p=[],R=0,m=[],u=k/2,n=0;(function(){var r,d,e=new h,S=new h,y=0,t=(f-b)/k;for(d=0;d<=a;d++){var x=[],v=d/a,q=v*(f-b)+b;for(r=0;r<=c;r++){var C=r/c,D=C*l+g,z=Math.sin(D),D=Math.cos(D);S.x=q*z;S.y=-v*k+u;S.z=q*D;Q.push(S.x,S.y,S.z);e.set(z,t,D).normalize();w.push(e.x,e.y,e.z);p.push(C,1-v);x.push(R++)}m.push(x)}for(r=0;r<c;r++)for(d=0;d<a;d++)e=m[d+1][r],S=m[d+1][r+1],t=m[d][r+1],M.push(m[d][r],e,t),M.push(e,S,t),y+=6;J.addGroup(n,y,0);n+=y})();!1===e&&(0<b&&r(!0),0<f&&r(!1));this.setIndex(M);this.addAttribute("position",new X(Q,3));this.addAttribute("normal",new X(w,3));this.addAttribute("uv",new X(p,2))}function lc(b,f,k,c,a,d,e){ub.call(this,0,b,f,k,c,a,d,e);this.type="ConeGeometry";this.parameters={radius:b,height:f,radialSegments:k,heightSegments:c,openEnded:a,thetaStart:d,thetaLength:e}}function mc(b,f,k,c,a,d,e){fb.call(this,0,b,f,k,c,a,d,e);this.type="ConeBufferGeometry";this.parameters={radius:b,height:f,radialSegments:k,heightSegments:c,openEnded:a,thetaStart:d,thetaLength:e}}function nc(b,f,k,c){qa.call(this);this.type="CircleGeometry";this.parameters={radius:b,segments:f,thetaStart:k,thetaLength:c};this.fromBufferGeometry(new Rb(b,f,k,c));this.mergeVertices()}function Rb(b,f,k,c){ma.call(this);this.type="CircleBufferGeometry";this.parameters={radius:b,segments:f,thetaStart:k,thetaLength:c};b=b||1;f=void 0!==f?Math.max(3,f):8;k=void 0!==k?k:0;c=void 0!==c?c:2*Math.PI;var r=[],a=[],e=[],g=[],l,w,p=new h,m=new d;a.push(0,0,0);e.push(0,0,1);g.push(.5,.5);w=0;for(l=3;w<=f;w++,l+=3){var u=k+w/f*c;p.x=b*Math.cos(u);p.y=b*Math.sin(u);a.push(p.x,p.y,p.z);e.push(0,0,1);m.x=(a[l]/b+1)/2;m.y=(a[l+1]/b+1)/2;g.push(m.x,m.y)}for(l=1;l<=f;l++)r.push(l,l+1,0);this.setIndex(r);this.addAttribute("position",new X(a,3));this.addAttribute("normal",new X(e,3));this.addAttribute("uv",new X(g,2))}function Sb(b){y.call(this);this.type="ShadowMaterial";this.color=new Y(0);this.opacity=1;this.transparent=this.lights=!0;this.setValues(b)}function Tb(b){Oa.call(this,b);this.type="RawShaderMaterial"}function Za(b){y.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new Y(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new Y(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new d(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(b)}function vb(b){Za.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(b)}function Xa(b){y.call(this);this.type="MeshPhongMaterial";this.color=new Y(16777215);this.specular=new Y(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new Y(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new d(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(b)}function wb(b){Xa.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(b)}function xb(b){y.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new d(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1;this.setValues(b)}function yb(b){y.call(this);this.type="MeshLambertMaterial";this.color=new Y(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new Y(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(b)}function zb(b){za.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(b)}function bd(b,f,k){var c=this,a=!1,d=0,e=0,g=void 0;this.onStart=void 0;this.onLoad=b;this.onProgress=f;this.onError=k;this.itemStart=function(b){e++;if(!1===a&&void 0!==c.onStart)c.onStart(b,d,e);a=!0};this.itemEnd=function(b){d++;if(void 0!==c.onProgress)c.onProgress(b,d,e);if(d===e&&(a=!1,void 0!==c.onLoad))c.onLoad()};this.itemError=function(b){if(void 0!==c.onError)c.onError(b)};this.resolveURL=function(b){return g?g(b):b};this.setURLModifier=function(b){g=b}}function $a(b){this.manager=void 0!==b?b:Ta}function Gd(b){this.manager=void 0!==b?b:Ta;this._parser=null}function cd(b){this.manager=void 0!==b?b:Ta;this._parser=null}function oc(b){this.manager=void 0!==b?b:Ta}function dd(b){this.manager=void 0!==b?b:Ta}function Ec(b){this.manager=void 0!==b?b:Ta}function xa(b,f){ea.call(this);this.type="Light";this.color=new Y(b);this.intensity=void 0!==f?f:1;this.receiveShadow=void 0}function Fc(b,f,k){xa.call(this,b,k);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(ea.DefaultUp);this.updateMatrix();this.groundColor=new Y(f)}function Ab(b){this.camera=b;this.bias=0;this.radius=1;this.mapSize=new d(512,512);this.map=null;this.matrix=new e}function Gc(){Ab.call(this,new db(50,1,.5,500))}function Hc(b,f,k,c,a,d){xa.call(this,b,f);this.type="SpotLight";this.position.copy(ea.DefaultUp);this.updateMatrix();this.target=new ea;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(b){this.intensity=b/Math.PI}});this.distance=void 0!==k?k:0;this.angle=void 0!==c?c:Math.PI/3;this.penumbra=void 0!==a?a:0;this.decay=void 0!==d?d:1;this.shadow=new Gc}function Ic(b,f,k,c){xa.call(this,b,f);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(b){this.intensity=b/(4*Math.PI)}});this.distance=void 0!==k?k:0;this.decay=void 0!==c?c:1;this.shadow=new Ab(new db(90,1,.5,500))}function Jc(){Ab.call(this,new Ua(-5,5,5,-5,.5,500))}function Kc(b,f){xa.call(this,b,f);this.type="Dt";this.position.copy(ea.DefaultUp);this.updateMatrix();this.target=new ea;this.shadow=new Jc}function Lc(b,f){xa.call(this,b,f);this.type="AmbientLight";this.castShadow=void 0}function Mc(b,f,k,c){xa.call(this,b,f);this.type="RectAreaLight";this.position.set(0,1,0);this.updateMatrix();this.width=void 0!==k?k:10;this.height=void 0!==c?c:10}function Ma(b,f,k,c){this.parameterPositions=b;this._cachedIndex=0;this.resultBuffer=void 0!==c?c:new f.constructor(k);this.sampleValues=f;this.valueSize=k}function Nc(b,f,k,c){Ma.call(this,b,f,k,c)}function pc(b,f,k,c){Ca.call(this,b,f,k,c)}function Ub(b,f,k,c){Ca.call(this,b,f,k,c)}function Oc(b,f,k,c){Ma.call(this,b,f,k,c);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function Pc(b,f,k,c){Ma.call(this,b,f,k,c)}function Qc(b,f,k,c){Ma.call(this,b,f,k,c)}function Ca(b,f,k,c){this.name=b;this.times=Fa.convertArray(f,this.TimeBufferType);this.values=Fa.convertArray(k,this.ValueBufferType);this.setInterpolation(c||this.DefaultInterpolation);this.validate();this.optimize()}function Vb(b,f,k,c){Ca.call(this,b,f,k,c)}function ab(b,f,k){this.name=b;this.tracks=k;this.duration=void 0!==f?f:-1;this.uuid=oa.generateUUID();0>this.duration&&this.resetDuration();this.optimize()}function Rc(b){this.manager=void 0!==b?b:Ta;this.textures={}}function ed(b){this.manager=void 0!==b?b:Ta}function Wb(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}}function fd(b){"boolean"===typeof b&&(b=void 0);this.manager=void 0!==b?b:Ta;this.withCredentials=!1}function Hd(b){this.manager=void 0!==b?b:Ta;this.texturePath=""}function Id(b,f,k,c,a){f=.5*(c-f);a=.5*(a-k);var r=b*b;return(2*k-2*c+f+a)*b*r+(-3*k+3*c-2*f-a)*r+f*b+k}function qc(b,f,k,c){var r=1-b;return r*r*f+2*(1-b)*b*k+b*b*c}function rc(b,f,k,c,a){var r=1-b,d=1-b;return r*r*r*f+3*d*d*b*k+3*(1-b)*b*b*c+b*b*b*a}function pa(){this.type="Curve";this.arcLengthDivisions=200}function Ya(b,f){pa.call(this);this.type="LineCurve";this.v1=b||new d;this.v2=f||new d}function Bb(){pa.call(this);this.type="CurvePath";this.curves=[];this.autoClose=!1}function bb(b,f,k,c,a,d,e,g){pa.call(this);this.type="EllipseCurve";this.aX=b||0;this.aY=f||0;this.xRadius=k||1;this.yRadius=c||1;this.aStartAngle=a||0;this.aEndAngle=d||2*Math.PI;this.aClockwise=e||!1;this.aRotation=g||0}function jb(b){pa.call(this);this.type="SplineCurve";this.points=b||[]}function kb(b,f,k,c){pa.call(this);this.type="CubicBezierCurve";this.v0=b||new d;this.v1=f||new d;this.v2=k||new d;this.v3=c||new d}function lb(b,f,k){pa.call(this);this.type="QuadraticBezierCurve";this.v0=b||new d;this.v1=f||new d;this.v2=k||new d}function mb(b){Bb.call(this);this.type="Path";this.currentPoint=new d;b&&this.setFromPoints(b)}function Cb(b){mb.call(this,b);this.type="Shape";this.holes=[]}function gd(){this.type="ShapePath";this.subPaths=[];this.currentPath=null}function hd(b){this.type="Font";this.data=b}function Jd(b){this.manager=void 0!==b?b:Ta}function Kd(b,f,k){k=k||Ja.parseTrackName(f);this._targetGroup=b;this._bindings=b.subscribe_(f,k)}function Ja(b,f,k){this.path=f;this.parsedPath=k||Ja.parseTrackName(f);this.node=Ja.findNode(b,this.parsedPath.nodeName)||b;this.rootNode=b}function Ld(){this.uuid=oa.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var b={};this._indicesByUUID=b;for(var f=0,k=arguments.length;f!==k;++f)b[arguments[f].uuid]=f;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var c=this;this.stats={objects:{get total(){return c._objects.length},get inUse(){return this.total-c.nCachedObjects_}},get bindingsPerObject(){return c._bindings.length}}}function Sc(b,f){"string"===typeof b&&(b=f);this.value=b}function id(){ma.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0}function jd(b,f,k,c){this.uuid=oa.generateUUID();this.data=b;this.itemSize=f;this.offset=k;this.normalized=!0===c}function Xb(b,f){this.uuid=oa.generateUUID();this.array=b;this.stride=f;this.count=void 0!==b?b.length/f:0;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function kd(b,f,k){Xb.call(this,b,f);this.meshPerAttribute=k||1}function ld(b,f,k){ja.call(this,b,f);this.meshPerAttribute=k||1}function Md(b,f,k,c){this.ray=new sb(b,f);this.near=k||0;this.far=c||Infinity;this.params={Mesh:{},Line:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){return this.Points}}})}function Nd(b,f){return b.distance-f.distance}function md(b,f,k,c){if(!1!==b.visible&&(b.raycast(f,k),!0===c)){b=b.children;c=0;for(var a=b.length;c<a;c++)md(b[c],f,k,!0)}}function Od(b){this.autoStart=void 0!==b?b:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function Pd(b,f,k){this.radius=void 0!==b?b:1;this.phi=void 0!==f?f:0;this.theta=void 0!==k?k:0;return this}function Qd(b,f,k){this.radius=void 0!==b?b:1;this.theta=void 0!==f?f:0;this.y=void 0!==k?k:0;return this}function sc(b){function f(b,f,c){k(b,c);k(f,c)}function k(b,f){d.push(0,0,0);e.push(f.r,f.g,f.b);void 0===g[b]&&(g[b]=[]);g[b].push(d.length/3-1)}var c=new ma,a=new za({color:16777215,vertexColors:1}),d=[],e=[],g={},h=new Y(16755200),l=new Y(16711680),w=new Y(43775),p=new Y(16777215),m=new Y(3355443);f("n1","n2",h);f("n2","n4",h);f("n4","n3",h);f("n3","n1",h);f("f1","f2",h);f("f2","f4",h);f("f4","f3",h);f("f3","f1",h);f("n1","f1",h);f("n2","f2",h);f("n3","f3",h);f("n4","f4",h);f("p","n1",l);f("p","n2",l);f("p","n3",l);f("p","n4",l);f("u1","u2",w);f("u2","u3",w);f("u3","u1",w);f("c","t",p);f("p","c",m);f("cn1","cn2",m);f("cn3","cn4",m);f("cf1","cf2",m);f("cf3","cf4",m);c.addAttribute("position",new X(d,3));c.addAttribute("color",new X(e,3));Ia.call(this,c,a);this.camera=b;this.camera.ux&&this.camera.ux();this.matrix=b.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=g;this.update()}function Db(b,f){this.object=b;void 0===f&&(f=16776960);var k=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),c=new Float32Array(24),a=new ma;a.setIndex(new ja(k,1));a.addAttribute("position",new ja(c,3));Ia.call(this,a,new za({color:f}));this.matrixAutoUpdate=!1;this.update()}function tc(b,f){this.type="Box3Helper";this.box=b;var k=void 0!==f?f:16776960,c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new ma;a.setIndex(new ja(c,1));a.addAttribute("position",new X([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));Ia.call(this,a,new za({color:k}));this.geometry.computeBoundingSphere()}function uc(b,f,k){this.type="pr";this.plane=b;this.size=void 0===f?1:f;b=void 0!==k?k:16776960;f=new ma;f.addAttribute("position",new X([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));f.computeBoundingSphere();Wa.call(this,f,new za({color:b}));f=new ma;f.addAttribute("position",new X([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));f.computeBoundingSphere();this.add(new La(f,new Va({color:b,opacity:.2,transparent:!0,depthWrite:!1})))}function Eb(b,f,k,c,a,d){ea.call(this);void 0===c&&(c=16776960);void 0===k&&(k=1);void 0===a&&(a=.2*k);void 0===d&&(d=.2*a);void 0===Tc&&(Tc=new ma,Tc.addAttribute("position",new X([0,0,0,0,1,0],3)),nd=new fb(0,.5,1,5,1),nd.translate(0,-.5,0));this.position.copy(f);this.line=new Wa(Tc,new za({color:c}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new La(nd,new Va({color:c}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(b);this.setLength(k,a,d)}function vc(b){b=b||1;var f=[0,0,0,b,0,0,0,0,0,0,b,0,0,0,0,0,0,b];b=new ma;b.addAttribute("position",new X(f,3));b.addAttribute("color",new X([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));f=new za({vertexColors:2});Ia.call(this,b,f)}function od(){var b=0,f=0,k=0,c=0;return{initCatmullRom:function(a,r,d,e,g){a=g*(d-a);e=g*(e-r);b=r;f=a;k=-3*r+3*d-2*a-e;c=2*r-2*d+a+e},initNonuniformCatmullRom:function(a,r,d,e,g,h,l){a=((r-a)/g-(d-a)/(g+h)+(d-r)/h)*h;e=((d-r)/h-(e-r)/(h+l)+(e-d)/l)*h;b=r;f=a;k=-3*r+3*d-2*a-e;c=2*r-2*d+a+e},calc:function(a){var r=a*a;return b+f*a+k*r+c*r*a}}}function Na(b,f,k,c){pa.call(this);this.type="CatmullRomCurve3";this.points=b||[];this.closed=f||!1;this.curveType=k||"centripetal";this.tension=c||.5}function Fb(b,f,k,c){pa.call(this);this.type="CubicBezierCurve3";this.v0=b||new h;this.v1=f||new h;this.v2=k||new h;this.v3=c||new h}function Gb(b,f,k){pa.call(this);this.type="QuadraticBezierCurve3";this.v0=b||new h;this.v1=f||new h;this.v2=k||new h}function nb(b,f){pa.call(this);this.type="LineCurve3";this.v1=b||new h;this.v2=f||new h}function wc(b,f,k,c,a,d){bb.call(this,b,f,k,k,c,a,d);this.type="ArcCurve"}function Rd(b){Na.call(this,b);this.type="catmullrom";this.closed=!0}function Sd(b){Na.call(this,b);this.type="catmullrom"}function pd(b){Na.call(this,b);this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(b){return"number"===typeof b&&isFinite(b)&&Math.floor(b)===b});void 0===Math.sign&&(Math.sign=function(b){return 0>b?-1:0<b?1:+b});!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(b){for(var f=Object(b),k=1;k<arguments.length;k++){var c=arguments[k];if(void 0!==c&&null!==c)for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(f[a]=c[a])}return f}}();Object.assign(a.prototype,{addEventListener:function(b,f){void 0===this._listeners&&(this._listeners={});var k=this._listeners;void 0===k[b]&&(k[b]=[]);-1===k[b].indexOf(f)&&k[b].push(f)},hasEventListener:function(b,f){if(void 0===this._listeners)return!1;var k=this._listeners;return void 0!==k[b]&&-1!==k[b].indexOf(f)},removeEventListener:function(b,f){if(void 0!==this._listeners){var k=this._listeners[b];if(void 0!==k){var c=k.indexOf(f);-1!==c&&k.splice(c,1)}}},dispatchEvent:function(b){if(void 0!==this._listeners){var f=this._listeners[b.type];if(void 0!==f){b.target=this;for(var f=f.slice(0),k=0,c=f.length;k<c;k++)f[k].call(this,b)}}}});var oa={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var b=[],f=0;256>f;f++)b[f]=(16>f?"0":"")+f.toString(16).toUpperCase();return function(){var f=4294967295*Math.random()|0,c=4294967295*Math.random()|0,a=4294967295*Math.random()|0,d=4294967295*Math.random()|0;return b[f&255]+b[f>>8&255]+b[f>>16&255]+b[f>>24&255]+"-"+b[c&255]+b[c>>8&255]+"-"+b[c>>16&15|64]+b[c>>24&255]+"-"+b[a&63|128]+b[a>>8&255]+"-"+b[a>>16&255]+b[a>>24&255]+b[d&255]+b[d>>8&255]+b[d>>16&255]+b[d>>24&255]}}(),clamp:function(b,f,k){return Math.max(f,Math.min(k,b))},euclideanModulo:function(b,f){return(b%f+f)%f},mapLinear:function(b,f,k,c,a){return c+(b-f)*(a-c)/(k-f)},lerp:function(b,f,k){return(1-k)*b+k*f},smoothstep:function(b,f,k){if(b<=f)return 0;if(b>=k)return 1;b=(b-f)/(k-f);return b*b*(3-2*b)},smootherstep:function(b,f,k){if(b<=f)return 0;if(b>=k)return 1;b=(b-f)/(k-f);return b*b*b*(b*(6*b-15)+10)},randInt:function(b,f){return b+Math.floor(Math.random()*(f-b+1))},randFloat:function(b,f){return b+Math.random()*(f-b)},randFloatSpread:function(b){return b*(.5-Math.random())},degToRad:function(b){return b*oa.DEG2RAD},radToDeg:function(b){return b*oa.RAD2DEG},isPowerOfTwo:function(b){return 0===(b&b-1)&&0!==b},ceilPowerOfTwo:function(b){return Math.pow(2,Math.ceil(Math.log(b)/Math.LN2))},floorPowerOfTwo:function(b){return Math.pow(2,Math.floor(Math.log(b)/Math.LN2))}};Object.defineProperties(d.prototype,{width:{get:function(){return this.x},set:function(b){this.x=b}},height:{get:function(){return this.y},set:function(b){this.y=b}}});Object.assign(d.prototype,{isVector2:!0,set:function(b,f){this.x=b;this.y=f;return this},setScalar:function(b){this.y=this.x=b;return this},setX:function(b){this.x=b;return this},setY:function(b){this.y=b;return this},setComponent:function(b,f){switch(b){case 0:this.x=f;break;case 1:this.y=f}return this},getComponent:function(b){switch(b){case 0:return this.x;case 1:return this.y}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(b){this.x=b.x;this.y=b.y;return this},add:function(b,f){if(void 0!==f)return this.addVectors(b,f);this.x+=b.x;this.y+=b.y;return this},addScalar:function(b){this.x+=b;this.y+=b;return this},addVectors:function(b,f){this.x=b.x+f.x;this.y=b.y+f.y;return this},addScaledVector:function(b,f){this.x+=b.x*f;this.y+=b.y*f;return this},sub:function(b,f){if(void 0!==f)return this.subVectors(b,f);this.x-=b.x;this.y-=b.y;return this},subScalar:function(b){this.x-=b;this.y-=b;return this},subVectors:function(b,f){this.x=b.x-f.x;this.y=b.y-f.y;return this},multiply:function(b){this.x*=b.x;this.y*=b.y;return this},multiplyScalar:function(b){this.x*=b;this.y*=b;return this},divide:function(b){this.x/=b.x;this.y/=b.y;return this},divideScalar:function(b){return this.multiplyScalar(1/b)},applyMatrix3:function(b){var f=this.x,k=this.y;b=b.elements;this.x=b[0]*f+b[3]*k+b[6];this.y=b[1]*f+b[4]*k+b[7];return this},min:function(b){this.x=Math.min(this.x,b.x);this.y=Math.min(this.y,b.y);return this},max:function(b){this.x=Math.max(this.x,b.x);this.y=Math.max(this.y,b.y);return this},clamp:function(b,f){this.x=Math.max(b.x,Math.min(f.x,this.x));this.y=Math.max(b.y,Math.min(f.y,this.y));return this},clampScalar:function(){var b=new d,f=new d;return function(k,c){b.set(k,k);f.set(c,c);return this.clamp(b,f)}}(),clampLength:function(b,f){var k=this.length();return this.divideScalar(k||1).multiplyScalar(Math.max(b,Math.min(f,k)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(b){return this.x*b.x+this.y*b.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var b=Math.atan2(this.y,this.x);0>b&&(b+=2*Math.PI);return b},distanceTo:function(b){return Math.sqrt(this.distanceToSquared(b))},distanceToSquared:function(b){var f=this.x-b.x;b=this.y-b.y;return f*f+b*b},manhattanDistanceTo:function(b){return Math.abs(this.x-b.x)+Math.abs(this.y-b.y)},setLength:function(b){return this.normalize().multiplyScalar(b)},lerp:function(b,f){this.x+=(b.x-this.x)*f;this.y+=(b.y-this.y)*f;return this},lerpVectors:function(b,f,k){return this.subVectors(f,b).multiplyScalar(k).add(b)},equals:function(b){return b.x===this.x&&b.y===this.y},fromArray:function(b,f){void 0===f&&(f=0);this.x=b[f];this.y=b[f+1];return this},toArray:function(b,f){void 0===b&&(b=[]);void 0===f&&(f=0);b[f]=this.x;b[f+1]=this.y;return b},fromBufferAttribute:function(b,f,k){this.x=b.getX(f);this.y=b.getY(f);return this},rotateAround:function(b,f){var k=Math.cos(f),c=Math.sin(f),a=this.x-b.x,d=this.y-b.y;this.x=a*k-d*c+b.x;this.y=a*c+d*k+b.y;return this}});Object.assign(e.prototype,{isMatrix4:!0,set:function(b,f,k,c,a,d,e,g,h,l,w,p,m,u,n,y){var r=this.elements;r[0]=b;r[4]=f;r[8]=k;r[12]=c;r[1]=a;r[5]=d;r[9]=e;r[13]=g;r[2]=h;r[6]=l;r[10]=w;r[14]=p;r[3]=m;r[7]=u;r[11]=n;r[15]=y;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new e).fromArray(this.elements)},copy:function(b){var f=this.elements;b=b.elements;f[0]=b[0];f[1]=b[1];f[2]=b[2];f[3]=b[3];f[4]=b[4];f[5]=b[5];f[6]=b[6];f[7]=b[7];f[8]=b[8];f[9]=b[9];f[10]=b[10];f[11]=b[11];f[12]=b[12];f[13]=b[13];f[14]=b[14];f[15]=b[15];return this},copyPosition:function(b){var f=this.elements;b=b.elements;f[12]=b[12];f[13]=b[13];f[14]=b[14];return this},extractBasis:function(b,f,k){b.setFromMatrixColumn(this,0);f.setFromMatrixColumn(this,1);k.setFromMatrixColumn(this,2);return this},makeBasis:function(b,f,k){this.set(b.x,f.x,k.x,0,b.y,f.y,k.y,0,b.z,f.z,k.z,0,0,0,0,1);return this},extractRotation:function(){var b=new h;return function(f){var k=this.elements,c=f.elements,a=1/b.setFromMatrixColumn(f,0).length(),d=1/b.setFromMatrixColumn(f,1).length();f=1/b.setFromMatrixColumn(f,2).length();k[0]=c[0]*a;k[1]=c[1]*a;k[2]=c[2]*a;k[4]=c[4]*d;k[5]=c[5]*d;k[6]=c[6]*d;k[8]=c[8]*f;k[9]=c[9]*f;k[10]=c[10]*f;return this}}(),makeRotationFromEuler:function(b){var f=this.elements,k=b.x,c=b.y,a=b.z,d=Math.cos(k),k=Math.sin(k),e=Math.cos(c),c=Math.sin(c),g=Math.cos(a),a=Math.sin(a);if("XYZ"===b.order){b=d*g;var h=d*a,l=k*g,w=k*a;f[0]=e*g;f[4]=-e*a;f[8]=c;f[1]=h+l*c;f[5]=b-w*c;f[9]=-k*e;f[2]=w-b*c;f[6]=l+h*c;f[10]=d*e}else"YXZ"===b.order?(b=e*g,h=e*a,l=c*g,w=c*a,f[0]=b+w*k,f[4]=l*k-h,f[8]=d*c,f[1]=d*a,f[5]=d*g,f[9]=-k,f[2]=h*k-l,f[6]=w+b*k,f[10]=d*e):"ZXY"===b.order?(b=e*g,h=e*a,l=c*g,w=c*a,f[0]=b-w*k,f[4]=-d*a,f[8]=l+h*k,f[1]=h+l*k,f[5]=d*g,f[9]=w-b*k,f[2]=-d*c,f[6]=k,f[10]=d*e):"ZYX"===b.order?(b=d*g,h=d*a,l=k*g,w=k*a,f[0]=e*g,f[4]=l*c-h,f[8]=b*c+w,f[1]=e*a,f[5]=w*c+b,f[9]=h*c-l,f[2]=-c,f[6]=k*e,f[10]=d*e):"YZX"===b.order?(b=d*e,h=d*c,l=k*e,w=k*c,f[0]=e*g,f[4]=w-b*a,f[8]=l*a+h,f[1]=a,f[5]=d*g,f[9]=-k*g,f[2]=-c*g,f[6]=h*a+l,f[10]=b-w*a):"XZY"===b.order&&(b=d*e,h=d*c,l=k*e,w=k*c,f[0]=e*g,f[4]=-a,f[8]=c*g,f[1]=b*a+w,f[5]=d*g,f[9]=h*a-l,f[2]=l*a-h,f[6]=k*g,f[10]=w*a+b);f[3]=0;f[7]=0;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return this},makeRotationFromQuaternion:function(b){var f=this.elements,k=b._x,c=b._y,a=b._z,d=b._w,e=k+k,g=c+c,h=a+a;b=k*e;var l=k*g,k=k*h,w=c*g,c=c*h,a=a*h,e=d*e,g=d*g,d=d*h;f[0]=1-(w+a);f[4]=l-d;f[8]=k+g;f[1]=l+d;f[5]=1-(b+a);f[9]=c-e;f[2]=k-g;f[6]=c+e;f[10]=1-(b+w);f[3]=0;f[7]=0;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return this},lookAt:function(){var b=new h,f=new h,k=new h;return function(c,a,d){var r=this.elements;k.subVectors(c,a);0===k.lengthSq()&&(k.z=1);k.normalize();b.crossVectors(d,k);0===b.lengthSq()&&(1===Math.abs(d.z)?k.x+=1E-4:k.z+=1E-4,k.normalize(),b.crossVectors(d,k));b.normalize();f.crossVectors(k,b);r[0]=b.x;r[4]=f.x;r[8]=k.x;r[1]=b.y;r[5]=f.y;r[9]=k.y;r[2]=b.z;r[6]=f.z;r[10]=k.z;return this}}(),multiply:function(b,f){return void 0!==f?this.multiplyMatrices(b,f):this.multiplyMatrices(this,b)},premultiply:function(b){return this.multiplyMatrices(b,this)},multiplyMatrices:function(b,f){var k=b.elements,c=f.elements,a=this.elements,d=k[0],e=k[4],g=k[8],h=k[12],l=k[1],w=k[5],p=k[9],m=k[13],u=k[2],n=k[6],y=k[10],t=k[14],x=k[3],v=k[7],q=k[11],k=k[15],C=c[0],D=c[4],z=c[8],A=c[12],B=c[1],F=c[5],E=c[9],H=c[13],G=c[2],I=c[6],K=c[10],L=c[14],Ba=c[3],T=c[7],ia=c[11],c=c[15];a[0]=d*C+e*B+g*G+h*Ba;a[4]=d*D+e*F+g*I+h*T;a[8]=d*z+e*E+g*K+h*ia;a[12]=d*A+e*H+g*L+h*c;a[1]=l*C+w*B+p*G+m*Ba;a[5]=l*D+w*F+p*I+m*T;a[9]=l*z+w*E+p*K+m*ia;a[13]=l*A+w*H+p*L+m*c;a[2]=u*C+n*B+y*G+t*Ba;a[6]=u*D+n*F+y*I+t*T;a[10]=u*z+n*E+y*K+t*ia;a[14]=u*A+n*H+y*L+t*c;a[3]=x*C+v*B+q*G+k*Ba;a[7]=x*D+v*F+q*I+k*T;a[11]=x*z+v*E+q*K+k*ia;a[15]=x*A+v*H+q*L+k*c;return this},multiplyScalar:function(b){var f=this.elements;f[0]*=b;f[4]*=b;f[8]*=b;f[12]*=b;f[1]*=b;f[5]*=b;f[9]*=b;f[13]*=b;f[2]*=b;f[6]*=b;f[10]*=b;f[14]*=b;f[3]*=b;f[7]*=b;f[11]*=b;f[15]*=b;return this},applyToBufferAttribute:function(){var b=new h;return function(f){for(var k=0,c=f.count;k<c;k++)b.x=f.getX(k),b.y=f.getY(k),b.z=f.getZ(k),b.applyMatrix4(this),f.setXYZ(k,b.x,b.y,b.z);return f}}(),determinant:function(){var b=this.elements,f=b[0],k=b[4],c=b[8],a=b[12],d=b[1],e=b[5],g=b[9],h=b[13],l=b[2],w=b[6],p=b[10],m=b[14];return b[3]*(+a*g*w-c*h*w-a*e*p+k*h*p+c*e*m-k*g*m)+b[7]*(+f*g*m-f*h*p+a*d*p-c*d*m+c*h*l-a*g*l)+b[11]*(+f*h*w-f*e*m-a*d*w+k*d*m+a*e*l-k*h*l)+b[15]*(-c*e*l-f*g*w+f*e*p+c*d*w-k*d*p+k*g*l)},transpose:function(){var b=this.elements,f;f=b[1];b[1]=b[4];b[4]=f;f=b[2];b[2]=b[8];b[8]=f;f=b[6];b[6]=b[9];b[9]=f;f=b[3];b[3]=b[12];b[12]=f;f=b[7];b[7]=b[13];b[13]=f;f=b[11];b[11]=b[14];b[14]=f;return this},setPosition:function(b){var f=this.elements;f[12]=b.x;f[13]=b.y;f[14]=b.z;return this},getInverse:function(b,f){var k=this.elements,c=b.elements,a=c[0],d=c[1],e=c[2],g=c[3],h=c[4],l=c[5],w=c[6],p=c[7],m=c[8],u=c[9],n=c[10],y=c[11],t=c[12],x=c[13],v=c[14],c=c[15],q=u*v*p-x*n*p+x*w*y-l*v*y-u*w*c+l*n*c,C=t*n*p-m*v*p-t*w*y+h*v*y+m*w*c-h*n*c,D=m*x*p-t*u*p+t*l*y-h*x*y-m*l*c+h*u*c,z=t*u*w-m*x*w-t*l*n+h*x*n+m*l*v-h*u*v,A=a*q+d*C+e*D+g*z;if(0===A)return this.identity();A=1/A;k[0]=q*A;k[1]=(x*n*g-u*v*g-x*e*y+d*v*y+u*e*c-d*n*c)*A;k[2]=(l*v*g-x*w*g+x*e*p-d*v*p-l*e*c+d*w*c)*A;k[3]=(u*w*g-l*n*g-u*e*p+d*n*p+l*e*y-d*w*y)*A;k[4]=C*A;k[5]=(m*v*g-t*n*g+t*e*y-a*v*y-m*e*c+a*n*c)*A;k[6]=(t*w*g-h*v*g-t*e*p+a*v*p+h*e*c-a*w*c)*A;k[7]=(h*n*g-m*w*g+m*e*p-a*n*p-h*e*y+a*w*y)*A;k[8]=D*A;k[9]=(t*u*g-m*x*g-t*d*y+a*x*y+m*d*c-a*u*c)*A;k[10]=(h*x*g-t*l*g+t*d*p-a*x*p-h*d*c+a*l*c)*A;k[11]=(m*l*g-h*u*g-m*d*p+a*u*p+h*d*y-a*l*y)*A;k[12]=z*A;k[13]=(m*x*e-t*u*e+t*d*n-a*x*n-m*d*v+a*u*v)*A;k[14]=(t*l*e-h*x*e-t*d*w+a*x*w+h*d*v-a*l*v)*A;k[15]=(h*u*e-m*l*e+m*d*w-a*u*w-h*d*n+a*l*n)*A;return this},scale:function(b){var f=this.elements,k=b.x,c=b.y;b=b.z;f[0]*=k;f[4]*=c;f[8]*=b;f[1]*=k;f[5]*=c;f[9]*=b;f[2]*=k;f[6]*=c;f[10]*=b;f[3]*=k;f[7]*=c;f[11]*=b;return this},getMaxScaleOnAxis:function(){var b=this.elements;return Math.sqrt(Math.max(b[0]*b[0]+b[1]*b[1]+b[2]*b[2],b[4]*b[4]+b[5]*b[5]+b[6]*b[6],b[8]*b[8]+b[9]*b[9]+b[10]*b[10]))},makeTranslation:function(b,f,k){this.set(1,0,0,b,0,1,0,f,0,0,1,k,0,0,0,1);return this},makeRotationX:function(b){var f=Math.cos(b);b=Math.sin(b);this.set(1,0,0,0,0,f,-b,0,0,b,f,0,0,0,0,1);return this},makeRotationY:function(b){var f=Math.cos(b);b=Math.sin(b);this.set(f,0,b,0,0,1,0,0,-b,0,f,0,0,0,0,1);return this},makeRotationZ:function(b){var f=Math.cos(b);b=Math.sin(b);this.set(f,-b,0,0,b,f,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(b,f){var k=Math.cos(f),c=Math.sin(f),a=1-k,d=b.x,e=b.y,g=b.z,h=a*d,l=a*e;this.set(h*d+k,h*e-c*g,h*g+c*e,0,h*e+c*g,l*e+k,l*g-c*d,0,h*g-c*e,l*g+c*d,a*g*g+k,0,0,0,0,1);return this},makeScale:function(b,f,k){this.set(b,0,0,0,0,f,0,0,0,0,k,0,0,0,0,1);return this},makeShear:function(b,f,k){this.set(1,f,k,0,b,1,k,0,b,f,1,0,0,0,0,1);return this},compose:function(b,f,k){this.makeRotationFromQuaternion(f);this.scale(k);this.setPosition(b);return this},decompose:function(){var b=new h,f=new e;return function(k,c,a){var d=this.elements,r=b.set(d[0],d[1],d[2]).length(),e=b.set(d[4],d[5],d[6]).length(),g=b.set(d[8],d[9],d[10]).length();0>this.determinant()&&(r=-r);k.x=d[12];k.y=d[13];k.z=d[14];f.copy(this);k=1/r;var d=1/e,J=1/g;f.elements[0]*=k;f.elements[1]*=k;f.elements[2]*=k;f.elements[4]*=d;f.elements[5]*=d;f.elements[6]*=d;f.elements[8]*=J;f.elements[9]*=J;f.elements[10]*=J;c.setFromRotationMatrix(f);a.x=r;a.y=e;a.z=g;return this}}(),makePerspective:function(b,f,k,c,a,d){var r=this.elements;r[0]=2*a/(f-b);r[4]=0;r[8]=(f+b)/(f-b);r[12]=0;r[1]=0;r[5]=2*a/(k-c);r[9]=(k+c)/(k-c);r[13]=0;r[2]=0;r[6]=0;r[10]=-(d+a)/(d-a);r[14]=-2*d*a/(d-a);r[3]=0;r[7]=0;r[11]=-1;r[15]=0;return this},makeOrthographic:function(b,f,k,c,a,d){var r=this.elements,e=1/(f-b),g=1/(k-c),J=1/(d-a);r[0]=2*e;r[4]=0;r[8]=0;r[12]=-((f+b)*e);r[1]=0;r[5]=2*g;r[9]=0;r[13]=-((k+c)*g);r[2]=0;r[6]=0;r[10]=-2*J;r[14]=-((d+a)*J);r[3]=0;r[7]=0;r[11]=0;r[15]=1;return this},equals:function(b){var f=this.elements;b=b.elements;for(var k=0;16>k;k++)if(f[k]!==b[k])return!1;return!0},fromArray:function(b,f){void 0===f&&(f=0);for(var k=0;16>k;k++)this.elements[k]=b[k+f];return this},toArray:function(b,f){void 0===b&&(b=[]);void 0===f&&(f=0);var k=this.elements;b[f]=k[0];b[f+1]=k[1];b[f+2]=k[2];b[f+3]=k[3];b[f+4]=k[4];b[f+5]=k[5];b[f+6]=k[6];b[f+7]=k[7];b[f+8]=k[8];b[f+9]=k[9];b[f+10]=k[10];b[f+11]=k[11];b[f+12]=k[12];b[f+13]=k[13];b[f+14]=k[14];b[f+15]=k[15];return b}});Object.assign(g,{slerp:function(b,f,k,c){return k.copy(b).slerp(f,c)},slerpFlat:function(b,f,k,c,a,d,e){var r=k[c+0],g=k[c+1],J=k[c+2];k=k[c+3];c=a[d+0];var h=a[d+1],l=a[d+2];a=a[d+3];if(k!==a||r!==c||g!==h||J!==l){d=1-e;var w=r*c+g*h+J*l+k*a,M=0<=w?1:-1,p=1-w*w;p>Number.EPSILON&&(p=Math.sqrt(p),w=Math.atan2(p,w*M),d=Math.sin(d*w)/p,e=Math.sin(e*w)/p);M*=e;r=r*d+c*M;g=g*d+h*M;J=J*d+l*M;k=k*d+a*M;d===1-e&&(e=1/Math.sqrt(r*r+g*g+J*J+k*k),r*=e,g*=e,J*=e,k*=e)}b[f]=r;b[f+1]=g;b[f+2]=J;b[f+3]=k}});Object.defineProperties(g.prototype,{x:{get:function(){return this._x},set:function(b){this._x=b;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(b){this._y=b;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(b){this._z=b;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(b){this._w=b;this.onChangeCallback()}}});Object.assign(g.prototype,{set:function(b,f,k,c){this._x=b;this._y=f;this._z=k;this._w=c;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(b){this._x=b.x;this._y=b.y;this._z=b.z;this._w=b.w;this.onChangeCallback();return this},setFromEuler:function(b,f){var k=b._x,c=b._y,a=b._z,d=b.order,e=Math.cos,g=Math.sin,h=e(k/2),l=e(c/2),e=e(a/2),k=g(k/2),c=g(c/2),a=g(a/2);"XYZ"===d?(this._x=k*l*e+h*c*a,this._y=h*c*e-k*l*a,this._z=h*l*a+k*c*e,this._w=h*l*e-k*c*a):"YXZ"===d?(this._x=k*l*e+h*c*a,this._y=h*c*e-k*l*a,this._z=h*l*a-k*c*e,this._w=h*l*e+k*c*a):"ZXY"===d?(this._x=k*l*e-h*c*a,this._y=h*c*e+k*l*a,this._z=h*l*a+k*c*e,this._w=h*l*e-k*c*a):"ZYX"===d?(this._x=k*l*e-h*c*a,this._y=h*c*e+k*l*a,this._z=h*l*a-k*c*e,this._w=h*l*e+k*c*a):"YZX"===d?(this._x=k*l*e+h*c*a,this._y=h*c*e+k*l*a,this._z=h*l*a-k*c*e,this._w=h*l*e-k*c*a):"XZY"===d&&(this._x=k*l*e-h*c*a,this._y=h*c*e-k*l*a,this._z=h*l*a+k*c*e,this._w=h*l*e+k*c*a);if(!1!==f)this.onChangeCallback();return this},setFromAxisAngle:function(b,f){var k=f/2,c=Math.sin(k);this._x=b.x*c;this._y=b.y*c;this._z=b.z*c;this._w=Math.cos(k);this.onChangeCallback();return this},setFromRotationMatrix:function(b){var f=b.elements,k=f[0];b=f[4];var c=f[8],a=f[1],d=f[5],e=f[9],g=f[2],h=f[6],f=f[10],l=k+d+f;0<l?(k=.5/Math.sqrt(l+1),this._w=.25/k,this._x=(h-e)*k,this._y=(c-g)*k,this._z=(a-b)*k):k>d&&k>f?(k=2*Math.sqrt(1+k-d-f),this._w=(h-e)/k,this._x=.25*k,this._y=(b+a)/k,this._z=(c+g)/k):d>f?(k=2*Math.sqrt(1+d-k-f),this._w=(c-g)/k,this._x=(b+a)/k,this._y=.25*k,this._z=(e+h)/k):(k=2*Math.sqrt(1+f-k-d),this._w=(a-b)/k,this._x=(c+g)/k,this._y=(e+h)/k,this._z=.25*k);this.onChangeCallback();return this},setFromUnitVectors:function(){var b=new h,f;return function(k,c){void 0===b&&(b=new h);f=k.dot(c)+1;1E-6>f?(f=0,Math.abs(k.x)>Math.abs(k.z)?b.set(-k.y,k.x,0):b.set(0,-k.z,k.y)):b.crossVectors(k,c);this._x=b.x;this._y=b.y;this._z=b.z;this._w=f;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(b){return this._x*b._x+this._y*b._y+this._z*b._z+this._w*b._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var b=this.length();0===b?(this._z=this._y=this._x=0,this._w=1):(b=1/b,this._x*=b,this._y*=b,this._z*=b,this._w*=b);this.onChangeCallback();return this},multiply:function(b,f){return void 0!==f?this.multiplyQuaternions(b,f):this.multiplyQuaternions(this,b)},premultiply:function(b){return this.multiplyQuaternions(b,this)},multiplyQuaternions:function(b,f){var k=b._x,c=b._y,a=b._z,d=b._w,e=f._x,g=f._y,h=f._z,l=f._w;this._x=k*l+d*e+c*h-a*g;this._y=c*l+d*g+a*e-k*h;this._z=a*l+d*h+k*g-c*e;this._w=d*l-k*e-c*g-a*h;this.onChangeCallback();return this},slerp:function(b,f){if(0===f)return this;if(1===f)return this.copy(b);var k=this._x,c=this._y,a=this._z,d=this._w,e=d*b._w+k*b._x+c*b._y+a*b._z;0>e?(this._w=-b._w,this._x=-b._x,this._y=-b._y,this._z=-b._z,e=-e):this.copy(b);if(1<=e)return this._w=d,this._x=k,this._y=c,this._z=a,this;var g=Math.sqrt(1-e*e);if(.001>Math.abs(g))return this._w=.5*(d+this._w),this._x=.5*(k+this._x),this._y=.5*(c+this._y),this._z=.5*(a+this._z),this;var h=Math.atan2(g,e),e=Math.sin((1-f)*h)/g,g=Math.sin(f*h)/g;this._w=d*e+this._w*g;this._x=k*e+this._x*g;this._y=c*e+this._y*g;this._z=a*e+this._z*g;this.onChangeCallback();return this},equals:function(b){return b._x===this._x&&b._y===this._y&&b._z===this._z&&b._w===this._w},fromArray:function(b,f){void 0===f&&(f=0);this._x=b[f];this._y=b[f+1];this._z=b[f+2];this._w=b[f+3];this.onChangeCallback();return this},toArray:function(b,f){void 0===b&&(b=[]);void 0===f&&(f=0);b[f]=this._x;b[f+1]=this._y;b[f+2]=this._z;b[f+3]=this._w;return b},onChange:function(b){this.onChangeCallback=b;return this},onChangeCallback:function(){}});Object.assign(h.prototype,{isVector3:!0,set:function(b,f,k){this.x=b;this.y=f;this.z=k;return this},setScalar:function(b){this.z=this.y=this.x=b;return this},setX:function(b){this.x=b;return this},setY:function(b){this.y=b;return this},setZ:function(b){this.z=b;return this},setComponent:function(b,f){switch(b){case 0:this.x=f;break;case 1:this.y=f;break;case 2:this.z=f}return this},getComponent:function(b){switch(b){case 0:return this.x;case 1:return this.y;case 2:return this.z}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(b){this.x=b.x;this.y=b.y;this.z=b.z;return this},add:function(b,f){if(void 0!==f)return this.addVectors(b,f);this.x+=b.x;this.y+=b.y;this.z+=b.z;return this},addScalar:function(b){this.x+=b;this.y+=b;this.z+=b;return this},addVectors:function(b,f){this.x=b.x+f.x;this.y=b.y+f.y;this.z=b.z+f.z;return this},addScaledVector:function(b,f){this.x+=b.x*f;this.y+=b.y*f;this.z+=b.z*f;return this},sub:function(b,f){if(void 0!==f)return this.subVectors(b,f);this.x-=b.x;this.y-=b.y;this.z-=b.z;return this},subScalar:function(b){this.x-=b;this.y-=b;this.z-=b;return this},subVectors:function(b,f){this.x=b.x-f.x;this.y=b.y-f.y;this.z=b.z-f.z;return this},multiply:function(b,f){if(void 0!==f)return this.multiplyVectors(b,f);this.x*=b.x;this.y*=b.y;this.z*=b.z;return this},multiplyScalar:function(b){this.x*=b;this.y*=b;this.z*=b;return this},multiplyVectors:function(b,f){this.x=b.x*f.x;this.y=b.y*f.y;this.z=b.z*f.z;return this},applyEuler:function(){var b=new g;return function(f){return this.applyQuaternion(b.setFromEuler(f))}}(),applyAxisAngle:function(){var b=new g;return function(f,k){return this.applyQuaternion(b.setFromAxisAngle(f,k))}}(),applyMatrix3:function(b){var f=this.x,k=this.y,c=this.z;b=b.elements;this.x=b[0]*f+b[3]*k+b[6]*c;this.y=b[1]*f+b[4]*k+b[7]*c;this.z=b[2]*f+b[5]*k+b[8]*c;return this},applyMatrix4:function(b){var f=this.x,k=this.y,c=this.z;b=b.elements;var a=1/(b[3]*f+b[7]*k+b[11]*c+b[15]);this.x=(b[0]*f+b[4]*k+b[8]*c+b[12])*a;this.y=(b[1]*f+b[5]*k+b[9]*c+b[13])*a;this.z=(b[2]*f+b[6]*k+b[10]*c+b[14])*a;return this},applyQuaternion:function(b){var f=this.x,k=this.y,c=this.z,a=b.x,d=b.y,e=b.z;b=b.w;var g=b*f+d*c-e*k,h=b*k+e*f-a*c,l=b*c+a*k-d*f,f=-a*f-d*k-e*c;this.x=g*b+f*-a+h*-e-l*-d;this.y=h*b+f*-d+l*-a-g*-e;this.z=l*b+f*-e+g*-d-h*-a;return this},project:function(){var b=new e;return function(f){b.multiplyMatrices(f.projectionMatrix,b.getInverse(f.matrixWorld));return this.applyMatrix4(b)}}(),unproject:function(){var b=new e;return function(f){b.multiplyMatrices(f.matrixWorld,b.getInverse(f.projectionMatrix));return this.applyMatrix4(b)}}(),transformDirection:function(b){var f=this.x,k=this.y,c=this.z;b=b.elements;this.x=b[0]*f+b[4]*k+b[8]*c;this.y=b[1]*f+b[5]*k+b[9]*c;this.z=b[2]*f+b[6]*k+b[10]*c;return this.normalize()},divide:function(b){this.x/=b.x;this.y/=b.y;this.z/=b.z;return this},divideScalar:function(b){return this.multiplyScalar(1/b)},min:function(b){this.x=Math.min(this.x,b.x);this.y=Math.min(this.y,b.y);this.z=Math.min(this.z,b.z);return this},max:function(b){this.x=Math.max(this.x,b.x);this.y=Math.max(this.y,b.y);this.z=Math.max(this.z,b.z);return this},clamp:function(b,f){this.x=Math.max(b.x,Math.min(f.x,this.x));this.y=Math.max(b.y,Math.min(f.y,this.y));this.z=Math.max(b.z,Math.min(f.z,this.z));return this},clampScalar:function(){var b=new h,f=new h;return function(k,c){b.set(k,k,k);f.set(c,c,c);return this.clamp(b,f)}}(),clampLength:function(b,f){var k=this.length();return this.divideScalar(k||1).multiplyScalar(Math.max(b,Math.min(f,k)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(b){return this.x*b.x+this.y*b.y+this.z*b.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(b){return this.normalize().multiplyScalar(b)},lerp:function(b,f){this.x+=(b.x-this.x)*f;this.y+=(b.y-this.y)*f;this.z+=(b.z-this.z)*f;return this},lerpVectors:function(b,f,k){return this.subVectors(f,b).multiplyScalar(k).add(b)},cross:function(b,f){return void 0!==f?this.crossVectors(b,f):this.crossVectors(this,b)},crossVectors:function(b,f){var k=b.x,c=b.y,a=b.z,d=f.x,e=f.y,g=f.z;this.x=c*g-a*e;this.y=a*d-k*g;this.z=k*e-c*d;return this},projectOnVector:function(b){var f=b.dot(this)/b.lengthSq();return this.copy(b).multiplyScalar(f)},projectOnPlane:function(){var b=new h;return function(f){b.copy(this).projectOnVector(f);return this.sub(b)}}(),reflect:function(){var b=new h;return function(f){return this.sub(b.copy(f).multiplyScalar(2*this.dot(f)))}}(),angleTo:function(b){b=this.dot(b)/Math.sqrt(this.lengthSq()*b.lengthSq());return Math.acos(oa.clamp(b,-1,1))},distanceTo:function(b){return Math.sqrt(this.distanceToSquared(b))},distanceToSquared:function(b){var f=this.x-b.x,k=this.y-b.y;b=this.z-b.z;return f*f+k*k+b*b},manhattanDistanceTo:function(b){return Math.abs(this.x-b.x)+Math.abs(this.y-b.y)+Math.abs(this.z-b.z)},setFromSpherical:function(b){var f=Math.sin(b.phi)*b.radius;this.x=f*Math.sin(b.theta);this.y=Math.cos(b.phi)*b.radius;this.z=f*Math.cos(b.theta);return this},setFromCylindrical:function(b){this.x=b.radius*Math.sin(b.theta);this.y=b.y;this.z=b.radius*Math.cos(b.theta);return this},setFromMatrixPosition:function(b){b=b.elements;this.x=b[12];this.y=b[13];this.z=b[14];return this},setFromMatrixScale:function(b){var f=this.setFromMatrixColumn(b,0).length(),k=this.setFromMatrixColumn(b,1).length();b=this.setFromMatrixColumn(b,2).length();this.x=f;this.y=k;this.z=b;return this},setFromMatrixColumn:function(b,f){return this.fromArray(b.elements,4*f)},equals:function(b){return b.x===this.x&&b.y===this.y&&b.z===this.z},fromArray:function(b,f){void 0===f&&(f=0);this.x=b[f];this.y=b[f+1];this.z=b[f+2];return this},toArray:function(b,f){void 0===b&&(b=[]);void 0===f&&(f=0);b[f]=this.x;b[f+1]=this.y;b[f+2]=this.z;return b},fromBufferAttribute:function(b,f,k){this.x=b.getX(f);this.y=b.getY(f);this.z=b.getZ(f);return this}});Object.assign(l.prototype,{isMatrix3:!0,set:function(b,f,k,c,a,d,e,g,h){var r=this.elements;r[0]=b;r[1]=c;r[2]=e;r[3]=f;r[4]=a;r[5]=g;r[6]=k;r[7]=d;r[8]=h;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(b){var f=this.elements;b=b.elements;f[0]=b[0];f[1]=b[1];f[2]=b[2];f[3]=b[3];f[4]=b[4];f[5]=b[5];f[6]=b[6];f[7]=b[7];f[8]=b[8];return this},setFromMatrix4:function(b){b=b.elements;this.set(b[0],b[4],b[8],b[1],b[5],b[9],b[2],b[6],b[10]);return this},applyToBufferAttribute:function(){var b=new h;return function(f){for(var k=0,c=f.count;k<c;k++)b.x=f.getX(k),b.y=f.getY(k),b.z=f.getZ(k),b.applyMatrix3(this),f.setXYZ(k,b.x,b.y,b.z);return f}}(),multiply:function(b){return this.multiplyMatrices(this,b)},premultiply:function(b){return this.multiplyMatrices(b,this)},multiplyMatrices:function(b,f){var k=b.elements,c=f.elements,a=this.elements,d=k[0],e=k[3],g=k[6],h=k[1],l=k[4],w=k[7],p=k[2],m=k[5],k=k[8],u=c[0],n=c[3],y=c[6],t=c[1],x=c[4],v=c[7],q=c[2],C=c[5],c=c[8];a[0]=d*u+e*t+g*q;a[3]=d*n+e*x+g*C;a[6]=d*y+e*v+g*c;a[1]=h*u+l*t+w*q;a[4]=h*n+l*x+w*C;a[7]=h*y+l*v+w*c;a[2]=p*u+m*t+k*q;a[5]=p*n+m*x+k*C;a[8]=p*y+m*v+k*c;return this},multiplyScalar:function(b){var f=this.elements;f[0]*=b;f[3]*=b;f[6]*=b;f[1]*=b;f[4]*=b;f[7]*=b;f[2]*=b;f[5]*=b;f[8]*=b;return this},determinant:function(){var b=this.elements,f=b[0],k=b[1],c=b[2],a=b[3],d=b[4],e=b[5],g=b[6],h=b[7],b=b[8];return f*d*b-f*e*h-k*a*b+k*e*g+c*a*h-c*d*g},getInverse:function(b,f){var k=b.elements,c=this.elements,a=k[0],d=k[1],e=k[2],g=k[3],h=k[4],l=k[5],w=k[6],p=k[7],k=k[8],m=k*h-l*p,u=l*w-k*g,n=p*g-h*w,y=a*m+d*u+e*n;if(0===y)return this.identity();y=1/y;c[0]=m*y;c[1]=(e*p-k*d)*y;c[2]=(l*d-e*h)*y;c[3]=u*y;c[4]=(k*a-e*w)*y;c[5]=(e*g-l*a)*y;c[6]=n*y;c[7]=(d*w-p*a)*y;c[8]=(h*a-d*g)*y;return this},transpose:function(){var b,f=this.elements;b=f[1];f[1]=f[3];f[3]=b;b=f[2];f[2]=f[6];f[6]=b;b=f[5];f[5]=f[7];f[7]=b;return this},getNormalMatrix:function(b){return this.setFromMatrix4(b).getInverse(this).transpose()},transposeIntoArray:function(b){var f=this.elements;b[0]=f[0];b[1]=f[3];b[2]=f[6];b[3]=f[1];b[4]=f[4];b[5]=f[7];b[6]=f[2];b[7]=f[5];b[8]=f[8];return this},setUvTransform:function(b,f,k,c,a,d,e){var r=Math.cos(a);a=Math.sin(a);this.set(k*r,k*a,-k*(r*d+a*e)+d+b,-c*a,c*r,-c*(-a*d+r*e)+e+f,0,0,1)},scale:function(b,f){var k=this.elements;k[0]*=b;k[3]*=b;k[6]*=b;k[1]*=f;k[4]*=f;k[7]*=f;return this},rotate:function(b){var f=Math.cos(b);b=Math.sin(b);var k=this.elements,c=k[0],a=k[3],d=k[6],e=k[1],g=k[4],h=k[7];k[0]=f*c+b*e;k[3]=f*a+b*g;k[6]=f*d+b*h;k[1]=-b*c+f*e;k[4]=-b*a+f*g;k[7]=-b*d+f*h;return this},translate:function(b,f){var k=this.elements;k[0]+=b*k[2];k[3]+=b*k[5];k[6]+=b*k[8];k[1]+=f*k[2];k[4]+=f*k[5];k[7]+=f*k[8];return this},equals:function(b){var f=this.elements;b=b.elements;for(var k=0;9>k;k++)if(f[k]!==b[k])return!1;return!0},fromArray:function(b,f){void 0===f&&(f=0);for(var k=0;9>k;k++)this.elements[k]=b[k+f];return this},toArray:function(b,f){void 0===b&&(b=[]);void 0===f&&(f=0);var k=this.elements;b[f]=k[0];b[f+1]=k[1];b[f+2]=k[2];b[f+3]=k[3];b[f+4]=k[4];b[f+5]=k[5];b[f+6]=k[6];b[f+7]=k[7];b[f+8]=k[8];return b}});var Wd=0;m.DEFAULT_IMAGE=void 0;m.DEFAULT_MAPPING=300;Object.defineProperty(m.prototype,"needsUpdate",{set:function(b){!0===b&&this.version++}});Object.assign(m.prototype,a.prototype,{constructor:m,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.name=b.name;this.image=b.image;this.mipmaps=b.mipmaps.slice(0);this.mapping=b.mapping;this.wrapS=b.wrapS;this.wrapT=b.wrapT;this.magFilter=b.magFilter;this.minFilter=b.minFilter;this.anisotropy=b.anisotropy;this.format=b.format;this.type=b.type;this.offset.copy(b.offset);this.repeat.copy(b.repeat);this.center.copy(b.center);this.rotation=b.rotation;this.matrixAutoUpdate=b.matrixAutoUpdate;this.matrix.copy(b.matrix);this.generateMipmaps=b.generateMipmaps;this.premultiplyAlpha=b.premultiplyAlpha;this.flipY=b.flipY;this.unpackAlignment=b.unpackAlignment;this.encoding=b.encoding;return this},toJSON:function(b){var f=void 0===b||"string"===typeof b;if(!f&&void 0!==b.textures[this.uuid])return b.textures[this.uuid];var k={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var c=this.image;void 0===c.uuid&&(c.uuid=oa.generateUUID());if(!f&&void 0===b.images[c.uuid]){var a=b.images,d=c.uuid,e=c.uuid,g;if(c instanceof HTMLCanvasElement)g=c;else{g=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");g.width=c.width;g.height=c.height;var h=g.getContext("2d");c instanceof ImageData?h.putImageData(c,0,0):h.drawImage(c,0,0,c.width,c.height)}g=2048<g.width||2048<g.height?g.toDataURL("image/jpeg",.6):g.toDataURL("image/png");a[d]={uuid:e,url:g}}k.image=c.uuid}f||(b.textures[this.uuid]=k);return k},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(b){if(300===this.mapping){b.applyMatrix3(this.matrix);if(0>b.x||1<b.x)switch(this.wrapS){case 1E3:b.x-=Math.floor(b.x);break;case 1001:b.x=0>b.x?0:1;break;case 1002:b.x=1===Math.abs(Math.floor(b.x)%2)?Math.ceil(b.x)-b.x:b.x-Math.floor(b.x)}if(0>b.y||1<b.y)switch(this.wrapT){case 1E3:b.y-=Math.floor(b.y);break;case 1001:b.y=0>b.y?0:1;break;case 1002:b.y=1===Math.abs(Math.floor(b.y)%2)?Math.ceil(b.y)-b.y:b.y-Math.floor(b.y)}this.flipY&&(b.y=1-b.y)}}});Object.assign(n.prototype,{isVector4:!0,set:function(b,f,k,c){this.x=b;this.y=f;this.z=k;this.w=c;return this},setScalar:function(b){this.w=this.z=this.y=this.x=b;return this},setX:function(b){this.x=b;return this},setY:function(b){this.y=b;return this},setZ:function(b){this.z=b;return this},setW:function(b){this.w=b;return this},setComponent:function(b,f){switch(b){case 0:this.x=f;break;case 1:this.y=f;break;case 2:this.z=f;break;case 3:this.w=f}return this},getComponent:function(b){switch(b){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(b){this.x=b.x;this.y=b.y;this.z=b.z;this.w=void 0!==b.w?b.w:1;return this},add:function(b,f){if(void 0!==f)return this.addVectors(b,f);this.x+=b.x;this.y+=b.y;this.z+=b.z;this.w+=b.w;return this},addScalar:function(b){this.x+=b;this.y+=b;this.z+=b;this.w+=b;return this},addVectors:function(b,f){this.x=b.x+f.x;this.y=b.y+f.y;this.z=b.z+f.z;this.w=b.w+f.w;return this},addScaledVector:function(b,f){this.x+=b.x*f;this.y+=b.y*f;this.z+=b.z*f;this.w+=b.w*f;return this},sub:function(b,f){if(void 0!==f)return this.subVectors(b,f);this.x-=b.x;this.y-=b.y;this.z-=b.z;this.w-=b.w;return this},subScalar:function(b){this.x-=b;this.y-=b;this.z-=b;this.w-=b;return this},subVectors:function(b,f){this.x=b.x-f.x;this.y=b.y-f.y;this.z=b.z-f.z;this.w=b.w-f.w;return this},multiplyScalar:function(b){this.x*=b;this.y*=b;this.z*=b;this.w*=b;return this},applyMatrix4:function(b){var f=this.x,k=this.y,c=this.z,a=this.w;b=b.elements;this.x=b[0]*f+b[4]*k+b[8]*c+b[12]*a;this.y=b[1]*f+b[5]*k+b[9]*c+b[13]*a;this.z=b[2]*f+b[6]*k+b[10]*c+b[14]*a;this.w=b[3]*f+b[7]*k+b[11]*c+b[15]*a;return this},divideScalar:function(b){return this.multiplyScalar(1/b)},setAxisAngleFromQuaternion:function(b){this.w=2*Math.acos(b.w);var f=Math.sqrt(1-b.w*b.w);1E-4>f?(this.x=1,this.z=this.y=0):(this.x=b.x/f,this.y=b.y/f,this.z=b.z/f);return this},setAxisAngleFromRotationMatrix:function(b){var f,k,c;b=b.elements;var a=b[0];c=b[4];var d=b[8],e=b[1],g=b[5],h=b[9];k=b[2];f=b[6];var l=b[10];if(.01>Math.abs(c-e)&&.01>Math.abs(d-k)&&.01>Math.abs(h-f)){if(.1>Math.abs(c+e)&&.1>Math.abs(d+k)&&.1>Math.abs(h+f)&&.1>Math.abs(a+g+l-3))return this.set(1,0,0,0),this;b=Math.PI;a=(a+1)/2;g=(g+1)/2;l=(l+1)/2;c=(c+e)/4;d=(d+k)/4;h=(h+f)/4;a>g&&a>l?.01>a?(f=0,c=k=.707106781):(f=Math.sqrt(a),k=c/f,c=d/f):g>l?.01>g?(f=.707106781,k=0,c=.707106781):(k=Math.sqrt(g),f=c/k,c=h/k):.01>l?(k=f=.707106781,c=0):(c=Math.sqrt(l),f=d/c,k=h/c);this.set(f,k,c,b);return this}b=Math.sqrt((f-h)*(f-h)+(d-k)*(d-k)+(e-c)*(e-c));.001>Math.abs(b)&&(b=1);this.x=(f-h)/b;this.y=(d-k)/b;this.z=(e-c)/b;this.w=Math.acos((a+g+l-1)/2);return this},min:function(b){this.x=Math.min(this.x,b.x);this.y=Math.min(this.y,b.y);this.z=Math.min(this.z,b.z);this.w=Math.min(this.w,b.w);return this},max:function(b){this.x=Math.max(this.x,b.x);this.y=Math.max(this.y,b.y);this.z=Math.max(this.z,b.z);this.w=Math.max(this.w,b.w);return this},clamp:function(b,f){this.x=Math.max(b.x,Math.min(f.x,this.x));this.y=Math.max(b.y,Math.min(f.y,this.y));this.z=Math.max(b.z,Math.min(f.z,this.z));this.w=Math.max(b.w,Math.min(f.w,this.w));return this},clampScalar:function(){var b,f;return function(k,c){void 0===b&&(b=new n,f=new n);b.set(k,k,k,k);f.set(c,c,c,c);return this.clamp(b,f)}}(),clampLength:function(b,f){var k=this.length();return this.divideScalar(k||1).multiplyScalar(Math.max(b,Math.min(f,k)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(b){return this.x*b.x+this.y*b.y+this.z*b.z+this.w*b.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(b){return this.normalize().multiplyScalar(b)},lerp:function(b,f){this.x+=(b.x-this.x)*f;this.y+=(b.y-this.y)*f;this.z+=(b.z-this.z)*f;this.w+=(b.w-this.w)*f;return this},lerpVectors:function(b,f,k){return this.subVectors(f,b).multiplyScalar(k).add(b)},equals:function(b){return b.x===this.x&&b.y===this.y&&b.z===this.z&&b.w===this.w},fromArray:function(b,f){void 0===f&&(f=0);this.x=b[f];this.y=b[f+1];this.z=b[f+2];this.w=b[f+3];return this},toArray:function(b,f){void 0===b&&(b=[]);void 0===f&&(f=0);b[f]=this.x;b[f+1]=this.y;b[f+2]=this.z;b[f+3]=this.w;return b},fromBufferAttribute:function(b,f,k){this.x=b.getX(f);this.y=b.getY(f);this.z=b.getZ(f);this.w=b.getW(f);return this}});Object.assign(q.prototype,a.prototype,{isWt:!0,setSize:function(b,f){if(this.width!==b||this.height!==f)this.width=b,this.height=f,this.dispose();this.viewport.set(0,0,b,f);this.scissor.set(0,0,b,f)},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.width=b.width;this.height=b.height;this.viewport.copy(b.viewport);this.texture=b.texture.clone();this.depthBuffer=b.depthBuffer;this.stencilBuffer=b.stencilBuffer;this.depthTexture=b.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});z.prototype=Object.create(q.prototype);z.prototype.constructor=z;z.prototype.isWtCube=!0;F.prototype=Object.create(m.prototype);F.prototype.constructor=F;F.prototype.isDataTexture=!0;C.prototype=Object.create(m.prototype);C.prototype.constructor=C;C.prototype.isCubeTexture=!0;Object.defineProperty(C.prototype,"images",{get:function(){return this.image},set:function(b){this.image=b}});var xd=new m,yd=new C,td=[],ud=[],wd=new Float32Array(16),vd=new Float32Array(9);ga.prototype.setValue=function(b,f){for(var k=this.seq,c=0,a=k.length;c!==a;++c){var d=k[c];d.setValue(b,f[d.id])}};var Vc=/([\w\d_]+)(\])?(\[|\.)?/g;ua.prototype.setValue=function(b,f,k){f=this.map[f];void 0!==f&&f.setValue(b,k,this.renderer)};ua.prototype.setOptional=function(b,f,k){f=f[k];void 0!==f&&this.setValue(b,k,f)};ua.upload=function(b,f,k,c){for(var a=0,d=f.length;a!==d;++a){var e=f[a],r=k[e.id];!1!==r.needsUpdate&&e.setValue(b,r.value,c)}};ua.seqWithValue=function(b,f){for(var k=[],c=0,a=b.length;c!==a;++c){var d=b[c];d.id in f&&k.push(d)}return k};var De={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(Y.prototype,{isColor:!0,r:1,g:1,b:1,set:function(b){b&&b.isColor?this.copy(b):"number"===typeof b?this.setHex(b):"string"===typeof b&&this.setStyle(b);return this},setScalar:function(b){this.b=this.g=this.r=b;return this},setHex:function(b){b=Math.floor(b);this.r=(b>>16&255)/255;this.g=(b>>8&255)/255;this.b=(b&255)/255;return this},setRGB:function(b,f,k){this.r=b;this.g=f;this.b=k;return this},setHSL:function(){function b(b,k,c){0>c&&(c+=1);1<c&&--c;return c<1/6?b+6*(k-b)*c:.5>c?k:c<2/3?b+6*(k-b)*(2/3-c):b}return function(f,k,c){f=oa.euclideanModulo(f,1);k=oa.clamp(k,0,1);c=oa.clamp(c,0,1);0===k?this.r=this.g=this.b=c:(k=.5>=c?c*(1+k):c+k-c*k,c=2*c-k,this.r=b(c,k,f+1/3),this.g=b(c,k,f),this.b=b(c,k,f-1/3));return this}}(),setStyle:function(b){function f(b){void 0!==b&&parseFloat(b)}var k;if(k=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(b)){var c=k[2];switch(k[1]){case "rgb":case "rgba":if(k=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(k[1],10))/255,this.g=Math.min(255,parseInt(k[2],10))/255,this.b=Math.min(255,parseInt(k[3],10))/255,f(k[5]),this;if(k=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(k[1],10))/100,this.g=Math.min(100,parseInt(k[2],10))/100,this.b=Math.min(100,parseInt(k[3],10))/100,f(k[5]),this;break;case "hsl":case "hsla":if(k=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(c)){b=parseFloat(k[1])/360;var c=parseInt(k[2],10)/100,a=parseInt(k[3],10)/100;f(k[5]);return this.setHSL(b,c,a)}}}else if(k=/^\#([A-Fa-f0-9]+)$/.exec(b)){k=k[1];c=k.length;if(3===c)return this.r=parseInt(k.charAt(0)+k.charAt(0),16)/255,this.g=parseInt(k.charAt(1)+k.charAt(1),16)/255,this.b=parseInt(k.charAt(2)+k.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(k.charAt(0)+k.charAt(1),16)/255,this.g=parseInt(k.charAt(2)+k.charAt(3),16)/255,this.b=parseInt(k.charAt(4)+k.charAt(5),16)/255,this}b&&0<b.length&&(k=De[b],void 0!==k&&this.setHex(k));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(b){this.r=b.r;this.g=b.g;this.b=b.b;return this},copyGammaToLinear:function(b,f){void 0===f&&(f=2);this.r=Math.pow(b.r,f);this.g=Math.pow(b.g,f);this.b=Math.pow(b.b,f);return this},copyLinearToGamma:function(b,f){void 0===f&&(f=2);var k=0<f?1/f:1;this.r=Math.pow(b.r,k);this.g=Math.pow(b.g,k);this.b=Math.pow(b.b,k);return this},convertGammaToLinear:function(){var b=this.r,f=this.g,k=this.b;this.r=b*b;this.g=f*f;this.b=k*k;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(b){b=b||{h:0,s:0,l:0};var f=this.r,k=this.g,c=this.b,a=Math.max(f,k,c),d=Math.min(f,k,c),e,g=(d+a)/2;if(d===a)d=e=0;else{var h=a-d,d=.5>=g?h/(a+d):h/(2-a-d);switch(a){case f:e=(k-c)/h+(k<c?6:0);break;case k:e=(c-f)/h+2;break;case c:e=(f-k)/h+4}e/=6}b.h=e;b.s=d;b.l=g;return b},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(b,f,k){var c=this.getHSL();c.h+=b;c.s+=f;c.l+=k;this.setHSL(c.h,c.s,c.l);return this},add:function(b){this.r+=b.r;this.g+=b.g;this.b+=b.b;return this},addColors:function(b,f){this.r=b.r+f.r;this.g=b.g+f.g;this.b=b.b+f.b;return this},addScalar:function(b){this.r+=b;this.g+=b;this.b+=b;return this},sub:function(b){this.r=Math.max(0,this.r-b.r);this.g=Math.max(0,this.g-b.g);this.b=Math.max(0,this.b-b.b);return this},multiply:function(b){this.r*=b.r;this.g*=b.g;this.b*=b.b;return this},multiplyScalar:function(b){this.r*=b;this.g*=b;this.b*=b;return this},lerp:function(b,f){this.r+=(b.r-this.r)*f;this.g+=(b.g-this.g)*f;this.b+=(b.b-this.b)*f;return this},equals:function(b){return b.r===this.r&&b.g===this.g&&b.b===this.b},fromArray:function(b,f){void 0===f&&(f=0);this.r=b[f];this.g=b[f+1];this.b=b[f+2];return this},toArray:function(b,f){void 0===b&&(b=[]);void 0===f&&(f=0);b[f]=this.r;b[f+1]=this.g;b[f+2]=this.b;return b},toJSON:function(){return this.getHex()}});var fa={common:{diffuse:{value:new Y(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new l},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new d(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new Y(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Y(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new l}}},Ra={merge:function(b){for(var f={},k=0;k<b.length;k++){var c=this.clone(b[k]),a;for(a in c)f[a]=c[a]}return f},clone:function(b){var f={},k;for(k in b){f[k]={};for(var c in b[k]){var a=b[k][c];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture)?f[k][c]=a.clone():Array.isArray(a)?f[k][c]=a.slice():f[k][c]=a}}return f}},sa={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *\x3d texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a \x3c ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion \x3d ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *\x3d ambientOcclusion;\n\t#if defined( USE_ENVMAP ) \x26\x26 defined( PHYSICAL )\n\t\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *\x3d computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed \x3d vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal \x3d vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent \x3e 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff \x3d 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor \x3d pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel \x3d exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat gl \x3d dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv \x3d dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat gv \x3d dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl \x3d dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat denom \x3d pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha \x3d pow2( roughness );\n\tvec3 halfDir \x3d normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL \x3d saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH \x3d saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH \x3d saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F \x3d F_Schlick( specularColor, dotLH );\n\tfloat G \x3d G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D \x3d D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  \x3d 64.0;\n\tconst float LUT_SCALE \x3d ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  \x3d 0.5 / LUT_SIZE;\n\tfloat theta \x3d acos( dot( N, V ) );\n\tvec2 uv \x3d vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv \x3d uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l \x3d length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x \x3d dot( v1, v2 );\n\tfloat y \x3d abs( x );\n\tfloat a \x3d 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b \x3d 3.45068 + (4.18814 + y) * y;\n\tfloat v \x3d a / b;\n\tfloat theta_sintheta \x3d (x \x3e 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 \x3d rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 \x3d rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal \x3d cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) \x3c 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 \x3d normalize( V - N * dot( V, N ) );\n\tT2 \x3d - cross( N, T1 );\n\tmat3 mat \x3d mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] \x3d mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] \x3d mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] \x3d mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] \x3d mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] \x3d normalize( coords[ 0 ] );\n\tcoords[ 1 ] \x3d normalize( coords[ 1 ] );\n\tcoords[ 2 ] \x3d normalize( coords[ 2 ] );\n\tcoords[ 3 ] \x3d normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor \x3d vec3( 0.0 );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor +\x3d LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result \x3d vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 \x3d vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 \x3d vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r \x3d roughness * c0 + c1;\n\tfloat a004 \x3d min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB \x3d vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir \x3d normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH \x3d saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH \x3d saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F \x3d F_Schlick( specularColor, dotLH );\n\tfloat G \x3d G_BlinnPhong_Implicit( );\n\tfloat D \x3d D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx \x3d dFdx( vUv );\n\t\tvec2 dSTdy \x3d dFdy( vUv );\n\t\tfloat Hll \x3d bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx \x3d bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy \x3d bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX \x3d vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY \x3d vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN \x3d surf_norm;\n\t\tvec3 R1 \x3d cross( vSigmaY, vN );\n\t\tvec3 R2 \x3d cross( vN, vSigmaX );\n\t\tfloat fDet \x3d dot( vSigmaX, R1 );\n\t\tvec3 vGrad \x3d sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES \x3e 0\n\tfor ( int i \x3d 0; i \x3c UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane \x3d cs[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) \x3e plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES \x3c NUM_CLIPPING_PLANES\n\t\tbool clipped \x3d true;\n\t\tfor ( int i \x3d UNION_CLIPPING_PLANES; i \x3c NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane \x3d cs[ i ];\n\t\t\tclipped \x3d ( dot( vViewPosition, plane.xyz ) \x3e plane.w ) \x26\x26 clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES \x3e 0\n\t#if ! defined( PHYSICAL ) \x26\x26 ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 cs[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES \x3e 0 \x26\x26 ! defined( PHYSICAL ) \x26\x26 ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES \x3e 0 \x26\x26 ! defined( PHYSICAL ) \x26\x26 ! defined( PHONG )\n\tvViewPosition \x3d - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *\x3d vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz \x3d color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 \x3d x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a \x3d 12.9898, b \x3d 78.233, c \x3d 43758.5453;\n\thighp float dt \x3d dot( uv.xy, vec2( a,b ) ), sn \x3d mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance \x3d dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] \x3d vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] \x3d vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] \x3d vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights \x3d vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection \x3d abs(direction);\n\tint face \x3d -1;\n\tif( absDirection.x \x3e absDirection.z ) {\n\t\tif(absDirection.x \x3e absDirection.y )\n\t\t\tface \x3d direction.x \x3e 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface \x3d direction.y \x3e 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z \x3e absDirection.y )\n\t\t\tface \x3d direction.z \x3e 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface \x3d direction.y \x3e 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale \x3d exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness \x3d dFdx(roughness);\n\tfloat dyRoughness \x3d dFdy(roughness);\n\tvec3 dx \x3d dFdx( vec * scale * dxRoughness );\n\tvec3 dy \x3d dFdy( vec * scale * dyRoughness );\n\tfloat d \x3d max( dot( dx, dx ), dot( dy, dy ) );\n\td \x3d clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel \x3d 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel \x3d roughnessLevel \x3e cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a \x3d 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed \x3d exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed \x3d vec2( 1.0 ) / exp2_packed;\n\tfloat powScale \x3d exp2_packed.x * exp2_packed.y;\n\tfloat scale \x3d rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset \x3d 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes \x3d mipLevel \x3d\x3d 0.0;\n\tscale \x3d  bRes \x26\x26 (scale \x3c a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face \x3d getFaceFromDirection(direction);\n\tfloat rcpPowScale \x3d 1.0 / powScale;\n\tif( face \x3d\x3d 0) {\n\t\tr \x3d vec3(direction.x, -direction.z, direction.y);\n\t\toffset \x3d vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ? a : offset.y;\n\t}\n\telse if( face \x3d\x3d 1) {\n\t\tr \x3d vec3(direction.y, direction.x, direction.z);\n\t\toffset \x3d vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ? a : offset.y;\n\t}\n\telse if( face \x3d\x3d 2) {\n\t\tr \x3d vec3(direction.z, direction.x, direction.y);\n\t\toffset \x3d vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ? a : offset.y;\n\t}\n\telse if( face \x3d\x3d 3) {\n\t\tr \x3d vec3(direction.x, direction.z, direction.y);\n\t\toffset \x3d vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face \x3d\x3d 4) {\n\t\tr \x3d vec3(direction.y, direction.x, -direction.z);\n\t\toffset \x3d vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr \x3d vec3(direction.z, -direction.x, direction.y);\n\t\toffset \x3d vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr \x3d normalize(r);\n\tfloat texelOffset \x3d 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s \x3d ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base \x3d offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal \x3d roughness* cubeUV_maxLods3;\n\tfloat r1 \x3d floor(roughnessVal);\n\tfloat r2 \x3d r1 + 1.0;\n\tfloat t \x3d fract(roughnessVal);\n\tvec2 mipInfo \x3d MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s \x3d mipInfo.y;\n\tfloat level0 \x3d mipInfo.x;\n\tfloat level1 \x3d level0 + 1.0;\n\tlevel1 \x3d level1 \x3e 5.0 ? 5.0 : level1;\n\tlevel0 +\x3d min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 \x3d getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 \x3d envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 \x3d getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 \x3d envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result \x3d mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal \x3d normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal \x3d - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed +\x3d normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor \x3d texture2D( emissiveMap, vUv );\n\temissiveColor.rgb \x3d emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *\x3d emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor \x3d linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent \x3d max( max( value.r, value.g ), value.b );\n\tfloat fExp \x3d clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB \x3d max( value.x, max( value.g, value.b ) );\n\tfloat M      \x3d clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            \x3d ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB \x3d max( value.x, max( value.g, value.b ) );\n\tfloat D      \x3d max( maxRange / maxRGB, 1.0 );\n\tD            \x3d min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM \x3d mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp \x3d value.rgb * cLogLuvM;\n\tXp_Y_XYZp \x3d max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy \x3d Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le \x3d 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w \x3d fract(Le);\n\tvResult.z \x3d (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM \x3d mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le \x3d value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y \x3d exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z \x3d Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x \x3d value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB \x3d Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex \x3d normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec \x3d reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec \x3d refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec \x3d vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor \x3d textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec \x3d normalize( reflectVec );\n\t\tsampleUV.y \x3d asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x \x3d atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor \x3d texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec \x3d normalize( reflectVec );\n\t\tvec3 reflectView \x3d normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor \x3d texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor \x3d vec4( 0.0 );\n\t#endif\n\tenvColor \x3d envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight \x3d mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight \x3d mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight +\x3d envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) \x26\x26 ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition \x3d worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex \x3d normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal \x3d inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect \x3d reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect \x3d refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth \x3d -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor \x3d whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor \x3d smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb \x3d mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL \x3d dot( normal, lightDirection );\n\t\tvec2 coord \x3d vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x \x3c 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse +\x3d PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse \x3d vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position \x3d mvPosition.xyz;\ngeometry.normal \x3d normalize( transformedNormal );\ngeometry.viewDir \x3d normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position \x3d geometry.position;\nbackGeometry.normal \x3d -geometry.normal;\nbackGeometry.viewDir \x3d geometry.viewDir;\nvLightFront \x3d vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack \x3d vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL \x3d dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse \x3d PI * directLight.color;\n\t\tvLightFront +\x3d saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL \x3d dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse \x3d PI * directLight.color;\n\t\tvLightFront +\x3d saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL \x3d dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse \x3d PI * directLight.color;\n\t\tvLightFront +\x3d saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance \x3d ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *\x3d PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS \x3e 0\n\tstruct Dt {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform Dt directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in Dt directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color \x3d directionalLight.color;\n\t\tdirectLight.direction \x3d directionalLight.direction;\n\t\tdirectLight.visible \x3d true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS \x3e 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector \x3d pointLight.position - geometry.position;\n\t\tdirectLight.direction \x3d normalize( lVector );\n\t\tfloat lightDistance \x3d length( lVector );\n\t\tdirectLight.color \x3d pointLight.color;\n\t\tdirectLight.color *\x3d punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible \x3d ( directLight.color !\x3d vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS \x3e 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector \x3d spotLight.position - geometry.position;\n\t\tdirectLight.direction \x3d normalize( lVector );\n\t\tfloat lightDistance \x3d length( lVector );\n\t\tfloat angleCos \x3d dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos \x3e spotLight.coneCos ) {\n\t\t\tfloat spotEffect \x3d smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color \x3d spotLight.color;\n\t\t\tdirectLight.color *\x3d spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible \x3d true;\n\t\t} else {\n\t\t\tdirectLight.color \x3d vec3( 0.0 );\n\t\t\tdirectLight.visible \x3d false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS \x3e 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS \x3e 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL \x3d dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight \x3d 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance \x3d mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *\x3d PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) \x26\x26 defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal \x3d inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec \x3d vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor \x3d textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor \x3d textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb \x3d envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec \x3d vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor \x3d textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor \x3d vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar \x3d float( maxMIPLevel );\n\t\tfloat desiredMIPLevel \x3d maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec \x3d reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec \x3d refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec \x3d inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel \x3d getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec \x3d vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor \x3d textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor \x3d textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb \x3d envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec \x3d vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor \x3d textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y \x3d asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x \x3d atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor \x3d texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor \x3d texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb \x3d envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView \x3d normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor \x3d texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor \x3d texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb \x3d envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb;\nmaterial.specularColor \x3d specular;\nmaterial.specularShininess \x3d shininess;\nmaterial.specularStrength \x3d specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance \x3d getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL \x3d saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance \x3d dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *\x3d PI;\n\t#endif\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular +\x3d irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness \x3d clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor \x3d mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor \x3d mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat \x3d saturate( clearCoat );\tmaterial.clearCoatRoughness \x3d clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS \x3e 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal \x3d geometry.normal;\n\t\tvec3 viewDir \x3d geometry.viewDir;\n\t\tvec3 position \x3d geometry.position;\n\t\tvec3 lightPos \x3d rectAreaLight.position;\n\t\tvec3 halfWidth \x3d rectAreaLight.halfWidth;\n\t\tvec3 halfHeight \x3d rectAreaLight.halfHeight;\n\t\tvec3 lightColor \x3d rectAreaLight.color;\n\t\tfloat roughness \x3d material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] \x3d lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] \x3d lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] \x3d lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] \x3d lightPos - halfWidth + halfHeight;\n\t\tvec2 uv \x3d LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm \x3d texture2D( ltcMag, uv ).a;\n\t\tvec4 t \x3d texture2D( ltcMat, uv );\n\t\tmat3 mInv \x3d mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular +\x3d lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse +\x3d lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *\x3d PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR \x3d material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR \x3d 0.0;\n\t#endif\n\treflectedLight.directSpecular +\x3d ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse +\x3d ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular +\x3d irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL \x3d dotNV;\n\t\tfloat clearCoatDHR \x3d material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR \x3d 0.0;\n\t#endif\n\treflectedLight.indirectSpecular +\x3d ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular +\x3d clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position \x3d - vViewPosition;\ngeometry.normal \x3d normal;\ngeometry.viewDir \x3d normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight \x3d pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *\x3d all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight \x3d spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *\x3d all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tDt directionalLight;\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight \x3d directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *\x3d all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i \x3d 0; i \x3c NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight \x3d rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance \x3d getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance \x3d texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *\x3d PI;\n\t\t#endif\n\t\tirradiance +\x3d lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS \x3e 0 )\n\t\tfor ( int i \x3d 0; i \x3c NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) \x26\x26 defined( PHYSICAL ) \x26\x26 defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance +\x3d getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) \x26\x26 defined( RE_IndirectSpecular )\n\tvec3 radiance \x3d getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance \x3d getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance \x3d vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) \x26\x26 defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT \x3d log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth \x3d 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z \x3d log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *\x3d gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor \x3d texture2D( map, vUv );\n\ttexelColor \x3d mapTexelToLinear( texelColor );\n\tdiffuseColor *\x3d texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv \x3d ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel \x3d texture2D( map, uv );\n\tdiffuseColor *\x3d mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor \x3d metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness \x3d texture2D( metalnessMap, vUv );\n\tmetalnessFactor *\x3d texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal +\x3d ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal +\x3d ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal +\x3d ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal +\x3d ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed +\x3d ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed +\x3d ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed +\x3d ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed +\x3d ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed +\x3d ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed +\x3d ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed +\x3d ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed +\x3d ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx \x3d vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy \x3d vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal \x3d normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal \x3d normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal \x3d normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal \x3d perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal \x3d perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 \x3d vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 \x3d vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 \x3d dFdx( vUv.st );\n\t\tvec2 st1 \x3d dFdy( vUv.st );\n\t\tvec3 S \x3d normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T \x3d normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N \x3d normalize( surf_norm );\n\t\tvec3 mapN \x3d texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy \x3d normalScale * mapN.xy;\n\t\tmat3 tsn \x3d mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale \x3d 256. / 255.;const float UnpackDownscale \x3d 255. / 256.;\nconst vec3 PackFactors \x3d vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors \x3d UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 \x3d 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r \x3d vec4( fract( v * PackFactors ), v );\n\tr.yzw -\x3d r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *\x3d gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition \x3d modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position \x3d projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb \x3d dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position \x3d rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB \x3d vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB \x3d mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor \x3d roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness \x3d texture2D( roughnessMap, vUv );\n\troughnessFactor *\x3d texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS \x3e 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS \x3e 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS \x3e 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset \x3d vec2( 0.0, 1.0 );\n\t\tvec2 texelSize \x3d vec2( 1.0 ) / size;\n\t\tvec2 centroidUV \x3d floor( uv * size + 0.5 ) / size;\n\t\tfloat lb \x3d texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt \x3d texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb \x3d texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt \x3d texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f \x3d fract( uv * size + 0.5 );\n\t\tfloat a \x3d mix( lb, lt, f.y );\n\t\tfloat b \x3d mix( rb, rt, f.y );\n\t\tfloat c \x3d mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow \x3d 1.0;\n\t\tshadowCoord.xyz /\x3d shadowCoord.w;\n\t\tshadowCoord.z +\x3d shadowBias;\n\t\tbvec4 inFrustumVec \x3d bvec4 ( shadowCoord.x \x3e\x3d 0.0, shadowCoord.x \x3c\x3d 1.0, shadowCoord.y \x3e\x3d 0.0, shadowCoord.y \x3c\x3d 1.0 );\n\t\tbool inFrustum \x3d all( inFrustumVec );\n\t\tbvec2 frustumTestVec \x3d bvec2( inFrustum, shadowCoord.z \x3c\x3d 1.0 );\n\t\tbool frustumTest \x3d all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize \x3d vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 \x3d - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 \x3d - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 \x3d + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 \x3d + texelSize.y * shadowRadius;\n\t\t\tshadow \x3d (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize \x3d vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 \x3d - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 \x3d - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 \x3d + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 \x3d + texelSize.y * shadowRadius;\n\t\t\tshadow \x3d (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow \x3d texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV \x3d abs( v );\n\t\tfloat scaleToCube \x3d 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *\x3d scaleToCube;\n\t\tv *\x3d scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar \x3d v.xy;\n\t\tfloat almostATexel \x3d 1.5 * texelSizeY;\n\t\tfloat almostOne \x3d 1.0 - almostATexel;\n\t\tif ( absV.z \x3e\x3d almostOne ) {\n\t\t\tif ( v.z \x3e 0.0 )\n\t\t\t\tplanar.x \x3d 4.0 - v.x;\n\t\t} else if ( absV.x \x3e\x3d almostOne ) {\n\t\t\tfloat signX \x3d sign( v.x );\n\t\t\tplanar.x \x3d v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y \x3e\x3d almostOne ) {\n\t\t\tfloat signY \x3d sign( v.y );\n\t\t\tplanar.x \x3d v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y \x3d v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize \x3d vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition \x3d shadowCoord.xyz;\n\t\tfloat dp \x3d ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp +\x3d shadowBias;\n\t\tvec3 bd3D \x3d normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset \x3d vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS \x3e 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS \x3e 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS \x3e 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] \x3d directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] \x3d spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] \x3d pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow \x3d 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS \x3e 0\n\tDt directionalLight;\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight \x3d directionalLights[ i ];\n\t\tshadow *\x3d bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS \x3e 0\n\tSpotLight spotLight;\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight \x3d spotLights[ i ];\n\t\tshadow *\x3d bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS \x3e 0\n\tPointLight pointLight;\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight \x3d pointLights[ i ];\n\t\tshadow *\x3d bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX \x3d getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY \x3d getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ \x3d getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW \x3d getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j \x3d i * 4.0;\n\t\t\tfloat x \x3d mod( j, float( boneTextureSize ) );\n\t\t\tfloat y \x3d floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx \x3d 1.0 / float( boneTextureSize );\n\t\t\tfloat dy \x3d 1.0 / float( boneTextureSize );\n\t\t\ty \x3d dy * ( y + 0.5 );\n\t\t\tvec4 v1 \x3d texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 \x3d texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 \x3d texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 \x3d texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone \x3d mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone \x3d boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex \x3d bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned \x3d vec4( 0.0 );\n\tskinned +\x3d boneMatX * skinVertex * skinWeight.x;\n\tskinned +\x3d boneMatY * skinVertex * skinWeight.y;\n\tskinned +\x3d boneMatZ * skinVertex * skinWeight.z;\n\tskinned +\x3d boneMatW * skinVertex * skinWeight.w;\n\ttransformed \x3d ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix \x3d mat4( 0.0 );\n\tskinMatrix +\x3d skinWeight.x * boneMatX;\n\tskinMatrix +\x3d skinWeight.y * boneMatY;\n\tskinMatrix +\x3d skinWeight.z * boneMatZ;\n\tskinMatrix +\x3d skinWeight.w * boneMatW;\n\tskinMatrix  \x3d bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal \x3d vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular \x3d texture2D( specularMap, vUv );\n\tspecularStrength \x3d texelSpecular.r;\n#else\n\tspecularStrength \x3d 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb \x3d toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *\x3d toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *\x3d toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *\x3d toneMappingExposure;\n\tcolor \x3d max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv \x3d ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 \x3d uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition \x3d modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor \x3d textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *\x3d opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include \x3ccommon\x3e\nvoid main() {\n\tvWorldPosition \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\tgl_Position.z \x3d gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING \x3d\x3d 3200\n\tuniform float opacity;\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( 1.0 );\n\t#if DEPTH_PACKING \x3d\x3d 3200\n\t\tdiffuseColor.a \x3d opacity;\n\t#endif\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#if DEPTH_PACKING \x3d\x3d 3200\n\t\tgl_FragColor \x3d vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING \x3d\x3d 3201\n\t\tgl_FragColor \x3d packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include \x3cbeginnormal_vertex\x3e\n\t\t#include \x3cmorphnormal_vertex\x3e\n\t\t#include \x3cskinnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main () {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( 1.0 );\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\tfloat dist \x3d length( vWorldPosition - referencePosition );\n\tdist \x3d ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist \x3d saturate( dist );\n\tgl_FragColor \x3d packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include \x3cbeginnormal_vertex\x3e\n\t\t#include \x3cmorphnormal_vertex\x3e\n\t\t#include \x3cskinnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvWorldPosition \x3d worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\nvoid main() {\n\tvec3 direction \x3d normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y \x3d asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x \x3d atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor \x3d texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include \x3ccommon\x3e\nvoid main() {\n\tvWorldPosition \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tif ( mod( vLineDistance, totalSize ) \x3e dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3ccolor_vertex\x3e\n\tvLineDistance \x3d scale * lineDistance;\n\tvec4 mvPosition \x3d modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position \x3d projectionMatrix * mvPosition;\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse +\x3d texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse +\x3d vec3( 1.0 );\n\t#endif\n\t#include \x3caomap_fragment\x3e\n\treflectedLight.indirectDiffuse *\x3d diffuseColor.rgb;\n\tvec3 outgoingLight \x3d reflectedLight.indirectDiffuse;\n\t#include \x3cenvmap_fragment\x3e\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}\n",meshbasic_vert:"#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#ifdef USE_ENVMAP\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cshadowmask_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\treflectedLight.indirectDiffuse \x3d getAmbientLightIrradiance( ambientLightColor );\n\t#include \x3clightmap_fragment\x3e\n\treflectedLight.indirectDiffuse *\x3d BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse \x3d ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse \x3d vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *\x3d BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include \x3cenvmap_fragment\x3e\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3clights_lambert_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cgradientmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars\x3e\n#include \x3clights_phong_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3cnormal_fragment\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_phong_fragment\x3e\n\t#include \x3clights_template\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include \x3cenvmap_fragment\x3e\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n#ifndef FLAT_SHADED\n\tvNormal \x3d normalize( transformedNormal );\n#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cdithering_pars_fragment\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3ccube_uv_reflection_fragment\x3e\n#include \x3clights_pars\x3e\n#include \x3clights_physical_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3croughnessmap_pars_fragment\x3e\n#include \x3cmetalnessmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3croughnessmap_fragment\x3e\n\t#include \x3cmetalnessmap_fragment\x3e\n\t#include \x3cnormal_fragment\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_physical_fragment\x3e\n\t#include \x3clights_template\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3cdithering_fragment\x3e\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n#ifndef FLAT_SHADED\n\tvNormal \x3d normalize( transformedNormal );\n#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\nvoid main() {\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cnormal_fragment\x3e\n\tgl_FragColor \x3d vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n#ifndef FLAT_SHADED\n\tvNormal \x3d normalize( transformedNormal );\n#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition \x3d - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cmap_particle_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_particle_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cfog_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize \x3d size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize \x3d size;\n\t#endif\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cshadowmask_pars_fragment\x3e\nvoid main() {\n\tgl_FragColor \x3d vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include \x3cfog_fragment\x3e\n}\n",shadow_vert:"#include \x3cfog_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\nvoid main() {\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n\t#include \x3cfog_vertex\x3e\n}\n"},tb={basic:{uniforms:Ra.merge([fa.common,fa.specularmap,fa.envmap,fa.aomap,fa.lightmap,fa.fog]),vertexShader:sa.meshbasic_vert,fragmentShader:sa.meshbasic_frag},lambert:{uniforms:Ra.merge([fa.common,fa.specularmap,fa.envmap,fa.aomap,fa.lightmap,fa.emissivemap,fa.fog,fa.lights,{emissive:{value:new Y(0)}}]),vertexShader:sa.meshlambert_vert,fragmentShader:sa.meshlambert_frag},phong:{uniforms:Ra.merge([fa.common,fa.specularmap,fa.envmap,fa.aomap,fa.lightmap,fa.emissivemap,fa.bumpmap,fa.normalmap,fa.displacementmap,fa.gradientmap,fa.fog,fa.lights,{emissive:{value:new Y(0)},specular:{value:new Y(1118481)},shininess:{value:30}}]),vertexShader:sa.meshphong_vert,fragmentShader:sa.meshphong_frag},standard:{uniforms:Ra.merge([fa.common,fa.envmap,fa.aomap,fa.lightmap,fa.emissivemap,fa.bumpmap,fa.normalmap,fa.displacementmap,fa.roughnessmap,fa.metalnessmap,fa.fog,fa.lights,{emissive:{value:new Y(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:sa.meshphysical_vert,fragmentShader:sa.meshphysical_frag},points:{uniforms:Ra.merge([fa.points,fa.fog]),vertexShader:sa.points_vert,fragmentShader:sa.points_frag},dashed:{uniforms:Ra.merge([fa.common,fa.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:sa.linedashed_vert,fragmentShader:sa.linedashed_frag},depth:{uniforms:Ra.merge([fa.common,fa.displacementmap]),vertexShader:sa.depth_vert,fragmentShader:sa.depth_frag},normal:{uniforms:Ra.merge([fa.common,fa.bumpmap,fa.normalmap,fa.displacementmap,{opacity:{value:1}}]),vertexShader:sa.normal_vert,fragmentShader:sa.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:sa.cube_vert,fragmentShader:sa.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:sa.equirect_vert,fragmentShader:sa.equirect_frag},distanceRGBA:{uniforms:Ra.merge([fa.common,fa.displacementmap,{referencePosition:{value:new h},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:sa.distanceRGBA_vert,fragmentShader:sa.distanceRGBA_frag},shadow:{uniforms:Ra.merge([fa.lights,fa.fog,{color:{value:new Y(0)},opacity:{value:1}}]),vertexShader:sa.shadow_vert,fragmentShader:sa.shadow_frag}};tb.physical={uniforms:Ra.merge([tb.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:sa.meshphysical_vert,fragmentShader:sa.meshphysical_frag};Object.assign(ca.prototype,{set:function(b,f){this.min.copy(b);this.max.copy(f);return this},setFromPoints:function(b){this.makeEmpty();for(var f=0,k=b.length;f<k;f++)this.expandByPoint(b[f]);return this},setFromCenterAndSize:function(){var b=new d;return function(f,k){var c=b.copy(k).multiplyScalar(.5);this.min.copy(f).sub(c);this.max.copy(f).add(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.min.copy(b.min);this.max.copy(b.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(b){b=b||new d;return this.isEmpty()?b.set(0,0):b.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(b){b=b||new d;return this.isEmpty()?b.set(0,0):b.subVectors(this.max,this.min)},expandByPoint:function(b){this.min.min(b);this.max.max(b);return this},expandByVector:function(b){this.min.sub(b);this.max.add(b);return this},expandByScalar:function(b){this.min.addScalar(-b);this.max.addScalar(b);return this},containsPoint:function(b){return b.x<this.min.x||b.x>this.max.x||b.y<this.min.y||b.y>this.max.y?!1:!0},containsBox:function(b){return this.min.x<=b.min.x&&b.max.x<=this.max.x&&this.min.y<=b.min.y&&b.max.y<=this.max.y},getParameter:function(b,f){return(f||new d).set((b.x-this.min.x)/(this.max.x-this.min.x),(b.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(b){return b.max.x<this.min.x||b.min.x>this.max.x||b.max.y<this.min.y||b.min.y>this.max.y?!1:!0},clampPoint:function(b,f){return(f||new d).copy(b).clamp(this.min,this.max)},distanceToPoint:function(){var b=new d;return function(f){return b.copy(f).clamp(this.min,this.max).sub(f).length()}}(),intersect:function(b){this.min.max(b.min);this.max.min(b.max);return this},union:function(b){this.min.min(b.min);this.max.max(b.max);return this},translate:function(b){this.min.add(b);this.max.add(b);return this},equals:function(b){return b.min.equals(this.min)&&b.max.equals(this.max)}});aa.prototype=Object.create(m.prototype);aa.prototype.constructor=aa;var Yd=0;Object.assign(y.prototype,a.prototype,{isMaterial:!0,onBeforeCompile:function(){},setValues:function(b){if(void 0!==b)for(var f in b){var k=b[f];if(void 0!==k)if("shading"===f)this.flatShading=1===k?!0:!1;else{var c=this[f];void 0!==c&&(c&&c.isColor?c.set(k):c&&c.isVector3&&k&&k.isVector3?c.copy(k):this[f]="overdraw"===f?Number(k):k)}}},toJSON:function(b){function f(b){var f=[],c;for(c in b){var k=b[c];delete k.metadata;f.push(k)}return f}var k=void 0===b||"string"===typeof b;k&&(b={textures:{},images:{}});var c={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};c.uuid=this.uuid;c.type=this.type;""!==this.name&&(c.name=this.name);this.color&&this.color.isColor&&(c.color=this.color.getHex());void 0!==this.roughness&&(c.roughness=this.roughness);void 0!==this.metalness&&(c.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(c.emissive=this.emissive.getHex());1!==this.emissiveIntensity&&(c.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&(c.specular=this.specular.getHex());void 0!==this.shininess&&(c.shininess=this.shininess);void 0!==this.clearCoat&&(c.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(c.clearCoatRoughness=this.clearCoatRoughness);this.map&&this.map.isTexture&&(c.map=this.map.toJSON(b).uuid);this.alphaMap&&this.alphaMap.isTexture&&(c.alphaMap=this.alphaMap.toJSON(b).uuid);this.lightMap&&this.lightMap.isTexture&&(c.lightMap=this.lightMap.toJSON(b).uuid);this.bumpMap&&this.bumpMap.isTexture&&(c.bumpMap=this.bumpMap.toJSON(b).uuid,c.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(c.normalMap=this.normalMap.toJSON(b).uuid,c.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(c.displacementMap=this.displacementMap.toJSON(b).uuid,c.displacementScale=this.displacementScale,c.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(c.roughnessMap=this.roughnessMap.toJSON(b).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(c.metalnessMap=this.metalnessMap.toJSON(b).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(c.emissiveMap=this.emissiveMap.toJSON(b).uuid);this.specularMap&&this.specularMap.isTexture&&(c.specularMap=this.specularMap.toJSON(b).uuid);this.envMap&&this.envMap.isTexture&&(c.envMap=this.envMap.toJSON(b).uuid,c.reflectivity=this.reflectivity);this.gradientMap&&this.gradientMap.isTexture&&(c.gradientMap=this.gradientMap.toJSON(b).uuid);void 0!==this.size&&(c.size=this.size);void 0!==this.sizeAttenuation&&(c.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(c.blending=this.blending);!0===this.flatShading&&(c.flatShading=this.flatShading);0!==this.side&&(c.side=this.side);0!==this.vertexColors&&(c.vertexColors=this.vertexColors);1>this.opacity&&(c.opacity=this.opacity);!0===this.transparent&&(c.transparent=this.transparent);c.depthFunc=this.depthFunc;c.depthTest=this.depthTest;c.depthWrite=this.depthWrite;0!==this.rotation&&(c.rotation=this.rotation);1!==this.linewidth&&(c.linewidth=this.linewidth);void 0!==this.dashSize&&(c.dashSize=this.dashSize);void 0!==this.gapSize&&(c.gapSize=this.gapSize);void 0!==this.scale&&(c.scale=this.scale);!0===this.dithering&&(c.dithering=!0);0<this.alphaTest&&(c.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(c.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(c.wireframe=this.wireframe);1<this.wireframeLinewidth&&(c.wireframeLinewidth=this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(c.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(c.wireframeLinejoin=this.wireframeLinejoin);!0===this.morphTargets&&(c.morphTargets=!0);!0===this.skinning&&(c.skinning=!0);!1===this.visible&&(c.visible=!1);"{}"!==JSON.stringify(this.userData)&&(c.userData=this.userData);k&&(k=f(b.textures),b=f(b.images),0<k.length&&(c.textures=k),0<b.length&&(c.images=b));return c},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.name=b.name;this.fog=b.fog;this.lights=b.lights;this.blending=b.blending;this.side=b.side;this.flatShading=b.flatShading;this.vertexColors=b.vertexColors;this.opacity=b.opacity;this.transparent=b.transparent;this.blendSrc=b.blendSrc;this.blendDst=b.blendDst;this.blendEquation=b.blendEquation;this.blendSrcAlpha=b.blendSrcAlpha;this.blendDstAlpha=b.blendDstAlpha;this.blendEquationAlpha=b.blendEquationAlpha;this.depthFunc=b.depthFunc;this.depthTest=b.depthTest;this.depthWrite=b.depthWrite;this.colorWrite=b.colorWrite;this.precision=b.precision;this.polygonOffset=b.polygonOffset;this.polygonOffsetFactor=b.polygonOffsetFactor;this.polygonOffsetUnits=b.polygonOffsetUnits;this.dithering=b.dithering;this.alphaTest=b.alphaTest;this.premultipliedAlpha=b.premultipliedAlpha;this.overdraw=b.overdraw;this.visible=b.visible;this.userData=JSON.parse(JSON.stringify(b.userData));this.clipShadows=b.clipShadows;this.clipIntersection=b.clipIntersection;b=b.cs;var f=null;if(null!==b)for(var c=b.length,f=Array(c),a=0;a!==c;++a)f[a]=b[a].clone();this.cs=f;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});ta.prototype=Object.create(y.prototype);ta.prototype.constructor=ta;ta.prototype.isMeshDepthMaterial=!0;ta.prototype.copy=function(b){y.prototype.copy.call(this,b);this.depthPacking=b.depthPacking;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.map=b.map;this.alphaMap=b.alphaMap;this.displacementMap=b.displacementMap;this.displacementScale=b.displacementScale;this.displacementBias=b.displacementBias;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;return this};w.prototype=Object.create(y.prototype);w.prototype.constructor=w;w.prototype.isMeshDistanceMaterial=!0;w.prototype.copy=function(b){y.prototype.copy.call(this,b);this.referencePosition.copy(b.referencePosition);this.nearDistance=b.nearDistance;this.farDistance=b.farDistance;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.map=b.map;this.alphaMap=b.alphaMap;this.displacementMap=b.displacementMap;this.displacementScale=b.displacementScale;this.displacementBias=b.displacementBias;return this};Object.assign(u.prototype,{isBox3:!0,set:function(b,f){this.min.copy(b);this.max.copy(f);return this},setFromArray:function(b){for(var f=Infinity,c=Infinity,a=Infinity,d=-Infinity,e=-Infinity,g=-Infinity,h=0,l=b.length;h<l;h+=3){var w=b[h],p=b[h+1],m=b[h+2];w<f&&(f=w);p<c&&(c=p);m<a&&(a=m);w>d&&(d=w);p>e&&(e=p);m>g&&(g=m)}this.min.set(f,c,a);this.max.set(d,e,g);return this},setFromBufferAttribute:function(b){for(var f=Infinity,c=Infinity,a=Infinity,d=-Infinity,e=-Infinity,g=-Infinity,h=0,l=b.count;h<l;h++){var w=b.getX(h),p=b.getY(h),m=b.getZ(h);w<f&&(f=w);p<c&&(c=p);m<a&&(a=m);w>d&&(d=w);p>e&&(e=p);m>g&&(g=m)}this.min.set(f,c,a);this.max.set(d,e,g);return this},setFromPoints:function(b){this.makeEmpty();for(var f=0,c=b.length;f<c;f++)this.expandByPoint(b[f]);return this},setFromCenterAndSize:function(){var b=new h;return function(f,c){var k=b.copy(c).multiplyScalar(.5);this.min.copy(f).sub(k);this.max.copy(f).add(k);return this}}(),st:function(b,f){this.makeEmpty();return this.expandByObject(b,f)},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.min.copy(b.min);this.max.copy(b.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(b){b=b||new h;return this.isEmpty()?b.set(0,0,0):b.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(b){b=b||new h;return this.isEmpty()?b.set(0,0,0):b.subVectors(this.max,this.min)},expandByPoint:function(b){this.min.min(b);this.max.max(b);return this},expandByVector:function(b){this.min.sub(b);this.max.add(b);return this},expandByScalar:function(b){this.min.addScalar(-b);this.max.addScalar(b);return this},expandByObject:function(b){function f(b,f){var k=b.geometry;if(void 0!==k)if(k.isGeometry)for(k=k.vertices,a=0,d=k.length;a<d;a++)e.copy(k[a]),e.applyMatrix4(b.matrixWorld),c.expandByPoint(e);else if(k.isBufferGeometry&&(k=k.attributes.position,void 0!==k))for(a=0,d=k.count;a<d;a++)f?e.fromBufferAttribute(k,a).applyMatrix4(b.matrixWorld):e.fromBufferAttribute(k,a),c.expandByPoint(e)}var c,a,d,e=new h;return function(b,k){c=this;b.uld(!0);b.traverse(f,k);return this}}(),containsPoint:function(b){return b.x<this.min.x||b.x>this.max.x||b.y<this.min.y||b.y>this.max.y||b.z<this.min.z||b.z>this.max.z?!1:!0},containsBox:function(b){return this.min.x<=b.min.x&&b.max.x<=this.max.x&&this.min.y<=b.min.y&&b.max.y<=this.max.y&&this.min.z<=b.min.z&&b.max.z<=this.max.z},getParameter:function(b,f){return(f||new h).set((b.x-this.min.x)/(this.max.x-this.min.x),(b.y-this.min.y)/(this.max.y-this.min.y),(b.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(b){return b.max.x<this.min.x||b.min.x>this.max.x||b.max.y<this.min.y||b.min.y>this.max.y||b.max.z<this.min.z||b.min.z>this.max.z?!1:!0},intersectsSphere:function(){var b=new h;return function(f){this.clampPoint(f.center,b);return b.distanceToSquared(f.center)<=f.radius*f.radius}}(),intersectsPlane:function(b){var f,c;0<b.normal.x?(f=b.normal.x*this.min.x,c=b.normal.x*this.max.x):(f=b.normal.x*this.max.x,c=b.normal.x*this.min.x);0<b.normal.y?(f+=b.normal.y*this.min.y,c+=b.normal.y*this.max.y):(f+=b.normal.y*this.max.y,c+=b.normal.y*this.min.y);0<b.normal.z?(f+=b.normal.z*this.min.z,c+=b.normal.z*this.max.z):(f+=b.normal.z*this.max.z,c+=b.normal.z*this.min.z);return f<=b.constant&&c>=b.constant},clampPoint:function(b,f){return(f||new h).copy(b).clamp(this.min,this.max)},distanceToPoint:function(){var b=new h;return function(f){return b.copy(f).clamp(this.min,this.max).sub(f).length()}}(),getBoundingSphere:function(){var b=new h;return function(f){f=f||new Ba;this.getCenter(f.center);f.radius=.5*this.getSize(b).length();return f}}(),intersect:function(b){this.min.max(b.min);this.max.min(b.max);this.isEmpty()&&this.makeEmpty();return this},union:function(b){this.min.min(b.min);this.max.max(b.max);return this},applyMatrix4:function(){var b=[new h,new h,new h,new h,new h,new h,new h,new h];return function(f){if(this.isEmpty())return this;b[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(f);b[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(f);b[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(f);b[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(f);b[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(f);b[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(f);b[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(f);b[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(f);this.setFromPoints(b);return this}}(),translate:function(b){this.min.add(b);this.max.add(b);return this},equals:function(b){return b.min.equals(this.min)&&b.max.equals(this.max)}});Object.assign(Ba.prototype,{set:function(b,f){this.center.copy(b);this.radius=f;return this},setFromPoints:function(){var b=new u;return function(f,c){var k=this.center;void 0!==c?k.copy(c):b.setFromPoints(f).getCenter(k);for(var a=0,d=0,e=f.length;d<e;d++)a=Math.max(a,k.distanceToSquared(f[d]));this.radius=Math.sqrt(a);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.center.copy(b.center);this.radius=b.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(b){return b.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(b){return b.distanceTo(this.center)-this.radius},intersectsSphere:function(b){var f=this.radius+b.radius;return b.center.distanceToSquared(this.center)<=f*f},intersectsBox:function(b){return b.intersectsSphere(this)},intersectsPlane:function(b){return Math.abs(b.distanceToPoint(this.center))<=this.radius},clampPoint:function(b,f){var c=this.center.distanceToSquared(b),a=f||new h;a.copy(b);c>this.radius*this.radius&&(a.sub(this.center).normalize(),a.multiplyScalar(this.radius).add(this.center));return a},getBoundingBox:function(b){b=b||new u;b.set(this.center,this.center);b.expandByScalar(this.radius);return b},applyMatrix4:function(b){this.center.applyMatrix4(b);this.radius*=b.getMaxScaleOnAxis();return this},translate:function(b){this.center.add(b);return this},equals:function(b){return b.center.equals(this.center)&&b.radius===this.radius}});Object.assign(Ha.prototype,{set:function(b,f){this.normal.copy(b);this.constant=f;return this},setComponents:function(b,f,c,a){this.normal.set(b,f,c);this.constant=a;return this},setFromNormalAndCoplanarPoint:function(b,f){this.normal.copy(b);this.constant=-f.dot(this.normal);return this},setFromCoplanarPoints:function(){var b=new h,f=new h;return function(c,a,d){a=b.subVectors(d,a).cross(f.subVectors(c,a)).normalize();this.setFromNormalAndCoplanarPoint(a,c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.normal.copy(b.normal);this.constant=b.constant;return this},normalize:function(){var b=1/this.normal.length();this.normal.multiplyScalar(b);this.constant*=b;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(b){return this.normal.dot(b)+this.constant},distanceToSphere:function(b){return this.distanceToPoint(b.center)-b.radius},projectPoint:function(b,f){return(f||new h).copy(this.normal).multiplyScalar(-this.distanceToPoint(b)).add(b)},intersectLine:function(){var b=new h;return function(f,c){var k=c||new h,a=f.delta(b),d=this.normal.dot(a);if(0===d){if(0===this.distanceToPoint(f.start))return k.copy(f.start)}else if(d=-(f.start.dot(this.normal)+this.constant)/d,!(0>d||1<d))return k.copy(a).multiplyScalar(d).add(f.start)}}(),intersectsLine:function(b){var f=this.distanceToPoint(b.start);b=this.distanceToPoint(b.end);return 0>f&&0<b||0>b&&0<f},intersectsBox:function(b){return b.intersectsPlane(this)},intersectsSphere:function(b){return b.intersectsPlane(this)},coplanarPoint:function(b){return(b||new h).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var b=new h,f=new l;return function(c,a){var k=a||f.getNormalMatrix(c),d=this.coplanarPoint(b).applyMatrix4(c),k=this.normal.applyMatrix3(k).normalize();this.constant=-d.dot(k);return this}}(),translate:function(b){this.constant-=b.dot(this.normal);return this},equals:function(b){return b.normal.equals(this.normal)&&b.constant===this.constant}});Object.assign(Hb.prototype,{set:function(b,f,c,a,d,e){var k=this.planes;k[0].copy(b);k[1].copy(f);k[2].copy(c);k[3].copy(a);k[4].copy(d);k[5].copy(e);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){for(var f=this.planes,c=0;6>c;c++)f[c].copy(b.planes[c]);return this},setFromMatrix:function(b){var f=this.planes,c=b.elements;b=c[0];var a=c[1],d=c[2],e=c[3],g=c[4],h=c[5],l=c[6],w=c[7],p=c[8],m=c[9],u=c[10],n=c[11],y=c[12],t=c[13],x=c[14],c=c[15];f[0].setComponents(e-b,w-g,n-p,c-y).normalize();f[1].setComponents(e+b,w+g,n+p,c+y).normalize();f[2].setComponents(e+a,w+h,n+m,c+t).normalize();f[3].setComponents(e-a,w-h,n-m,c-t).normalize();f[4].setComponents(e-d,w-l,n-u,c-x).normalize();f[5].setComponents(e+d,w+l,n+u,c+x).normalize();return this},intersectsObject:function(){var b=new Ba;return function(f){var c=f.geometry;null===c.boundingSphere&&c.computeBoundingSphere();b.copy(c.boundingSphere).applyMatrix4(f.matrixWorld);return this.intersectsSphere(b)}}(),intersectsSprite:function(){var b=new Ba;return function(f){b.center.set(0,0,0);b.radius=.7071067811865476;b.applyMatrix4(f.matrixWorld);return this.intersectsSphere(b)}}(),intersectsSphere:function(b){var f=this.planes,c=b.center;b=-b.radius;for(var a=0;6>a;a++)if(f[a].distanceToPoint(c)<b)return!1;return!0},intersectsBox:function(){var b=new h,f=new h;return function(c){for(var k=this.planes,a=0;6>a;a++){var d=k[a];b.x=0<d.normal.x?c.min.x:c.max.x;f.x=0<d.normal.x?c.max.x:c.min.x;b.y=0<d.normal.y?c.min.y:c.max.y;f.y=0<d.normal.y?c.max.y:c.min.y;b.z=0<d.normal.z?c.min.z:c.max.z;f.z=0<d.normal.z?c.max.z:c.min.z;var e=d.distanceToPoint(b),d=d.distanceToPoint(f);if(0>e&&0>d)return!1}return!0}}(),containsPoint:function(b){for(var f=this.planes,c=0;6>c;c++)if(0>f[c].distanceToPoint(b))return!1;return!0}});Da.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");Da.DefaultOrder="XYZ";Object.defineProperties(Da.prototype,{x:{get:function(){return this._x},set:function(b){this._x=b;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(b){this._y=b;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(b){this._z=b;this.onChangeCallback()}},order:{get:function(){return this._order},set:function(b){this._order=b;this.onChangeCallback()}}});Object.assign(Da.prototype,{isEuler:!0,set:function(b,f,c,a){this._x=b;this._y=f;this._z=c;this._order=a||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(b){this._x=b._x;this._y=b._y;this._z=b._z;this._order=b._order;this.onChangeCallback();return this},setFromRotationMatrix:function(b,f,c){var k=oa.clamp,a=b.elements;b=a[0];var d=a[4],e=a[8],g=a[1],h=a[5],l=a[9],w=a[2],p=a[6],a=a[10];f=f||this._order;"XYZ"===f?(this._y=Math.asin(k(e,-1,1)),.99999>Math.abs(e)?(this._x=Math.atan2(-l,a),this._z=Math.atan2(-d,b)):(this._x=Math.atan2(p,h),this._z=0)):"YXZ"===f?(this._x=Math.asin(-k(l,-1,1)),.99999>Math.abs(l)?(this._y=Math.atan2(e,a),this._z=Math.atan2(g,h)):(this._y=Math.atan2(-w,b),this._z=0)):"ZXY"===f?(this._x=Math.asin(k(p,-1,1)),.99999>Math.abs(p)?(this._y=Math.atan2(-w,a),this._z=Math.atan2(-d,h)):(this._y=0,this._z=Math.atan2(g,b))):"ZYX"===f?(this._y=Math.asin(-k(w,-1,1)),.99999>Math.abs(w)?(this._x=Math.atan2(p,a),this._z=Math.atan2(g,b)):(this._x=0,this._z=Math.atan2(-d,h))):"YZX"===f?(this._z=Math.asin(k(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(-l,h),this._y=Math.atan2(-w,b)):(this._x=0,this._y=Math.atan2(e,a))):"XZY"===f&&(this._z=Math.asin(-k(d,-1,1)),.99999>Math.abs(d)?(this._x=Math.atan2(p,h),this._y=Math.atan2(e,b)):(this._x=Math.atan2(-l,a),this._y=0));this._order=f;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var b=new e;return function(f,c,a){b.makeRotationFromQuaternion(f);return this.setFromRotationMatrix(b,c,a)}}(),setFromVector3:function(b,f){return this.set(b.x,b.y,b.z,f||this._order)},reorder:function(){var b=new g;return function(f){b.setFromEuler(this);return this.setFromQuaternion(b,f)}}(),equals:function(b){return b._x===this._x&&b._y===this._y&&b._z===this._z&&b._order===this._order},fromArray:function(b){this._x=b[0];this._y=b[1];this._z=b[2];void 0!==b[3]&&(this._order=b[3]);this.onChangeCallback();return this},toArray:function(b,f){void 0===b&&(b=[]);void 0===f&&(f=0);b[f]=this._x;b[f+1]=this._y;b[f+2]=this._z;b[f+3]=this._order;return b},toVector3:function(b){return b?b.set(this._x,this._y,this._z):new h(this._x,this._y,this._z)},onChange:function(b){this.onChangeCallback=b;return this},onChangeCallback:function(){}});Object.assign(Ka.prototype,{set:function(b){this.mask=1<<b|0},enable:function(b){this.mask=this.mask|1<<b|0},toggle:function(b){this.mask^=1<<b|0},disable:function(b){this.mask&=~(1<<b|0)},test:function(b){return 0!==(this.mask&b.mask)}});var $d=0;ea.DefaultUp=new h(0,1,0);ea.DefaultMatrixAutoUpdate=!0;Object.assign(ea.prototype,a.prototype,{isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(b){this.matrix.multiplyMatrices(b,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(b){this.quaternion.premultiply(b);return this},setRotationFromAxisAngle:function(b,f){this.quaternion.setFromAxisAngle(b,f)},setRotationFromEuler:function(b){this.quaternion.setFromEuler(b,!0)},setRotationFromMatrix:function(b){this.quaternion.setFromRotationMatrix(b)},setRotationFromQuaternion:function(b){this.quaternion.copy(b)},rotateOnAxis:function(){var b=new g;return function(f,c){b.setFromAxisAngle(f,c);this.quaternion.multiply(b);return this}}(),rotateOnWorldAxis:function(){var b=new g;return function(f,c){b.setFromAxisAngle(f,c);this.quaternion.premultiply(b);return this}}(),rotateX:function(){var b=new h(1,0,0);return function(f){return this.rotateOnAxis(b,f)}}(),rotateY:function(){var b=new h(0,1,0);return function(f){return this.rotateOnAxis(b,f)}}(),rotateZ:function(){var b=new h(0,0,1);return function(f){return this.rotateOnAxis(b,f)}}(),translateOnAxis:function(){var b=new h;return function(f,c){b.copy(f).applyQuaternion(this.quaternion);this.position.add(b.multiplyScalar(c));return this}}(),translateX:function(){var b=new h(1,0,0);return function(f){return this.translateOnAxis(b,f)}}(),translateY:function(){var b=new h(0,1,0);return function(f){return this.translateOnAxis(b,f)}}(),translateZ:function(){var b=new h(0,0,1);return function(f){return this.translateOnAxis(b,f)}}(),localToWorld:function(b){return b.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var b=new e;return function(f){return f.applyMatrix4(b.getInverse(this.matrixWorld))}}(),lookAt:function(){var b=new e,f=new h;return function(c,a,d){c.isVector3?f.copy(c):f.set(c,a,d);this.isCamera?b.lookAt(this.position,f,this.up):b.lookAt(f,this.position,this.up);this.quaternion.setFromRotationMatrix(b)}}(),add:function(b){if(1<arguments.length){for(var f=0;f<arguments.length;f++)this.add(arguments[f]);return this}if(b===this)return this;b&&b.isObject3D&&(null!==b.parent&&b.parent.remove(b),b.parent=this,b.dispatchEvent({type:"added"}),this.children.push(b));return this},remove:function(b){if(1<arguments.length){for(var f=0;f<arguments.length;f++)this.remove(arguments[f]);return this}f=this.children.indexOf(b);-1!==f&&(b.parent=null,b.dispatchEvent({type:"removed"}),this.children.splice(f,1));return this},getObjectById:function(b){return this.getObjectByProperty("id",b)},ge:function(b){return this.getObjectByProperty("name",b)},getObjectByProperty:function(b,f){if(this[b]===f)return this;for(var c=0,a=this.children.length;c<a;c++){var d=this.children[c].getObjectByProperty(b,f);if(void 0!==d)return d}},getWorldPosition:function(b){b=b||new h;this.uld(!0);return b.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var b=new h,f=new h;return function(c){c=c||new g;this.uld(!0);this.matrixWorld.decompose(b,c,f);return c}}(),getWorldRotation:function(){var b=new g;return function(f){f=f||new Da;this.getWorldQuaternion(b);return f.setFromQuaternion(b,this.rotation.order,!1)}}(),getWorldScale:function(){var b=new h,f=new g;return function(c){c=c||new h;this.uld(!0);this.matrixWorld.decompose(b,f,c);return c}}(),getWorldDirection:function(){var b=new g;return function(f){f=f||new h;this.getWorldQuaternion(b);return f.set(0,0,1).applyQuaternion(b)}}(),raycast:function(){},traverse:function(b,f){b(this,f);for(var c=this.children,a=0,d=c.length;a<d;a++)c[a].traverse(b,f)},traverseVisible:function(b){if(!1!==this.visible){b(this);for(var f=this.children,c=0,a=f.length;c<a;c++)f[c].traverseVisible(b)}},traverseAncestors:function(b){var f=this.parent;null!==f&&(b(f),f.traverseAncestors(b))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.mte=!0},uld:function(b){this.matrixAutoUpdate&&this.updateMatrix();if(this.mte||b)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.mte=!1,b=!0;for(var f=this.children,c=0,a=f.length;c<a;c++)f[c].uld(b)},toJSON:function(b){function f(f,c){void 0===f[c.uuid]&&(f[c.uuid]=c.toJSON(b));return c.uuid}function c(b){var f=[],c;for(c in b){var k=b[c];delete k.metadata;f.push(k)}return f}var a=void 0===b||"string"===typeof b,d={};a&&(b={geometries:{},materials:{},textures:{},images:{}},d.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var e={};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);!0===this.castShadow&&(e.castShadow=!0);!0===this.receiveShadow&&(e.receiveShadow=!0);!1===this.visible&&(e.visible=!1);"{}"!==JSON.stringify(this.userData)&&(e.userData=this.userData);e.matrix=this.matrix.toArray();void 0!==this.geometry&&(e.geometry=f(b.geometries,this.geometry));if(void 0!==this.material)if(Array.isArray(this.material)){for(var g=[],h=0,l=this.material.length;h<l;h++)g.push(f(b.materials,this.material[h]));e.material=g}else e.material=f(b.materials,this.material);if(0<this.children.length)for(e.children=[],h=0;h<this.children.length;h++)e.children.push(this.children[h].toJSON(b).object);a&&(a=c(b.geometries),g=c(b.materials),h=c(b.textures),l=c(b.images),0<a.length&&(d.geometries=a),0<g.length&&(d.materials=g),0<h.length&&(d.textures=h),0<l.length&&(d.images=l));d.object=e;return d},clone:function(b){return(new this.constructor).copy(this,b)},copy:function(b,f){void 0===f&&(f=!0);this.name=b.name;this.up.copy(b.up);this.position.copy(b.position);this.quaternion.copy(b.quaternion);this.scale.copy(b.scale);this.matrix.copy(b.matrix);this.matrixWorld.copy(b.matrixWorld);this.matrixAutoUpdate=b.matrixAutoUpdate;this.mte=b.mte;this.layers.mask=b.layers.mask;this.visible=b.visible;this.castShadow=b.castShadow;this.receiveShadow=b.receiveShadow;this.frustumCulled=b.frustumCulled;this.renderOrder=b.renderOrder;this.userData=JSON.parse(JSON.stringify(b.userData));if(!0===f)for(var c=0;c<b.children.length;c++)this.add(b.children[c].clone());return this}});Qa.prototype=Object.assign(Object.create(ea.prototype),{constructor:Qa,isCamera:!0,copy:function(b,f){ea.prototype.copy.call(this,b,f);this.matrixWorldInverse.copy(b.matrixWorldInverse);this.projectionMatrix.copy(b.projectionMatrix);return this},getWorldDirection:function(){var b=new g;return function(f){f=f||new h;this.getWorldQuaternion(b);return f.set(0,0,-1).applyQuaternion(b)}}(),uld:function(b){ea.prototype.uld.call(this,b);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});Ua.prototype=Object.assign(Object.create(Qa.prototype),{constructor:Ua,isOrthographicCamera:!0,copy:function(b,f){Qa.prototype.copy.call(this,b,f);this.left=b.left;this.right=b.right;this.top=b.top;this.bottom=b.bottom;this.near=b.near;this.far=b.far;this.zoom=b.zoom;this.view=null===b.view?null:Object.assign({},b.view);return this},setViewOffset:function(b,f,c,a,d,e){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=b;this.view.fullHeight=f;this.view.offsetX=c;this.view.offsetY=a;this.view.width=d;this.view.height=e;this.ux()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.ux()},ux:function(){var b=(this.right-this.left)/(2*this.zoom),f=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,a=(this.top+this.bottom)/2,d=c-b,c=c+b,b=a+f,f=a-f;if(null!==this.view&&this.view.enabled)var c=this.zoom/(this.view.width/this.view.fullWidth),f=this.zoom/(this.view.height/this.view.fullHeight),e=(this.right-this.left)/this.view.width,a=(this.top-this.bottom)/this.view.height,d=d+this.view.offsetX/c*e,c=d+this.view.width/c*e,b=b-this.view.offsetY/f*a,f=b-this.view.height/f*a;this.projectionMatrix.makeOrthographic(d,c,b,f,this.near,this.far)},toJSON:function(b){b=ea.prototype.toJSON.call(this,b);b.object.zoom=this.zoom;b.object.left=this.left;b.object.right=this.right;b.object.top=this.top;b.object.bottom=this.bottom;b.object.near=this.near;b.object.far=this.far;null!==this.view&&(b.object.view=Object.assign({},this.view));return b}});Object.assign(Sa.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.a=b.a;this.b=b.b;this.c=b.c;this.normal.copy(b.normal);this.color.copy(b.color);this.materialIndex=b.materialIndex;for(var f=0,c=b.vertexNormals.length;f<c;f++)this.vertexNormals[f]=b.vertexNormals[f].clone();f=0;for(c=b.vertexColors.length;f<c;f++)this.vertexColors[f]=b.vertexColors[f].clone();return this}});var ae=0;Object.assign(qa.prototype,a.prototype,{isGeometry:!0,applyMatrix:function(b){for(var f=(new l).getNormalMatrix(b),c=0,a=this.vertices.length;c<a;c++)this.vertices[c].applyMatrix4(b);c=0;for(a=this.faces.length;c<a;c++){b=this.faces[c];b.normal.applyMatrix3(f).normalize();for(var d=0,e=b.vertexNormals.length;d<e;d++)b.vertexNormals[d].applyMatrix3(f).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var b=new e;return function(f){b.makeRotationX(f);this.applyMatrix(b);return this}}(),rotateY:function(){var b=new e;return function(f){b.makeRotationY(f);this.applyMatrix(b);return this}}(),rotateZ:function(){var b=new e;return function(f){b.makeRotationZ(f);this.applyMatrix(b);return this}}(),translate:function(){var b=new e;return function(f,c,a){b.makeTranslation(f,c,a);this.applyMatrix(b);return this}}(),scale:function(){var b=new e;return function(f,c,a){b.makeScale(f,c,a);this.applyMatrix(b);return this}}(),lookAt:function(){var b=new ea;return function(f){b.lookAt(f);b.updateMatrix();this.applyMatrix(b.matrix)}}(),fromBufferGeometry:function(b){function f(b,f,k,a){var d=void 0!==l?[u[b].clone(),u[f].clone(),u[k].clone()]:[],e=void 0!==w?[c.colors[b].clone(),c.colors[f].clone(),c.colors[k].clone()]:[];a=new Sa(b,f,k,d,e,a);c.faces.push(a);void 0!==p&&c.faceVertexUvs[0].push([n[b].clone(),n[f].clone(),n[k].clone()]);void 0!==m&&c.faceVertexUvs[1].push([y[b].clone(),y[f].clone(),y[k].clone()])}var c=this,a=null!==b.index?b.index.array:void 0,e=b.attributes,g=e.position.array,l=void 0!==e.normal?e.normal.array:void 0,w=void 0!==e.color?e.color.array:void 0,p=void 0!==e.uv?e.uv.array:void 0,m=void 0!==e.uv2?e.uv2.array:void 0;void 0!==m&&(this.faceVertexUvs[1]=[]);for(var u=[],n=[],y=[],t=e=0;e<g.length;e+=3,t+=2)c.vertices.push(new h(g[e],g[e+1],g[e+2])),void 0!==l&&u.push(new h(l[e],l[e+1],l[e+2])),void 0!==w&&c.colors.push(new Y(w[e],w[e+1],w[e+2])),void 0!==p&&n.push(new d(p[t],p[t+1])),void 0!==m&&y.push(new d(m[t],m[t+1]));var x=b.groups;if(0<x.length)for(e=0;e<x.length;e++)for(var g=x[e],v=g.start,q=g.count,t=v,v=v+q;t<v;t+=3)void 0!==a?f(a[t],a[t+1],a[t+2],g.materialIndex):f(t,t+1,t+2,g.materialIndex);else if(void 0!==a)for(e=0;e<a.length;e+=3)f(a[e],a[e+1],a[e+2]);else for(e=0;e<g.length/3;e+=3)f(e,e+1,e+2);this.computeFaceNormals();null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone());null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var b=this.boundingBox.getCenter().negate();this.translate(b.x,b.y,b.z);return b},normalize:function(){this.computeBoundingSphere();var b=this.boundingSphere.center,f=this.boundingSphere.radius,f=0===f?1:1/f,c=new e;c.set(f,0,0,-f*b.x,0,f,0,-f*b.y,0,0,f,-f*b.z,0,0,0,1);this.applyMatrix(c);return this},computeFaceNormals:function(){for(var b=new h,f=new h,c=0,a=this.faces.length;c<a;c++){var d=this.faces[c],e=this.vertices[d.a],g=this.vertices[d.b];b.subVectors(this.vertices[d.c],g);f.subVectors(e,g);b.cross(f);b.normalize();d.normal.copy(b)}},computeVertexNormals:function(b){void 0===b&&(b=!0);var f,c,a;a=Array(this.vertices.length);f=0;for(c=this.vertices.length;f<c;f++)a[f]=new h;if(b){var d,e,g,l=new h,w=new h;b=0;for(f=this.faces.length;b<f;b++)c=this.faces[b],d=this.vertices[c.a],e=this.vertices[c.b],g=this.vertices[c.c],l.subVectors(g,e),w.subVectors(d,e),l.cross(w),a[c.a].add(l),a[c.b].add(l),a[c.c].add(l)}else for(this.computeFaceNormals(),b=0,f=this.faces.length;b<f;b++)c=this.faces[b],a[c.a].add(c.normal),a[c.b].add(c.normal),a[c.c].add(c.normal);f=0;for(c=this.vertices.length;f<c;f++)a[f].normalize();b=0;for(f=this.faces.length;b<f;b++)c=this.faces[b],d=c.vertexNormals,3===d.length?(d[0].copy(a[c.a]),d[1].copy(a[c.b]),d[2].copy(a[c.c])):(d[0]=a[c.a].clone(),d[1]=a[c.b].clone(),d[2]=a[c.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var b,f,c;this.computeFaceNormals();b=0;for(f=this.faces.length;b<f;b++){c=this.faces[b];var a=c.vertexNormals;3===a.length?(a[0].copy(c.normal),a[1].copy(c.normal),a[2].copy(c.normal)):(a[0]=c.normal.clone(),a[1]=c.normal.clone(),a[2]=c.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var b,f,c,a,d;c=0;for(a=this.faces.length;c<a;c++)for(d=this.faces[c],d.__originalFaceNormal?d.__originalFaceNormal.copy(d.normal):d.__originalFaceNormal=d.normal.clone(),d.__originalVertexNormals||(d.__originalVertexNormals=[]),b=0,f=d.vertexNormals.length;b<f;b++)d.__originalVertexNormals[b]?d.__originalVertexNormals[b].copy(d.vertexNormals[b]):d.__originalVertexNormals[b]=d.vertexNormals[b].clone();var e=new qa;e.faces=this.faces;b=0;for(f=this.morphTargets.length;b<f;b++){if(!this.morphNormals[b]){this.morphNormals[b]={};this.morphNormals[b].faceNormals=[];this.morphNormals[b].vertexNormals=[];d=this.morphNormals[b].faceNormals;var g=this.morphNormals[b].vertexNormals,l,w;c=0;for(a=this.faces.length;c<a;c++)l=new h,w={a:new h,b:new h,c:new h},d.push(l),g.push(w)}g=this.morphNormals[b];e.vertices=this.morphTargets[b].vertices;e.computeFaceNormals();e.computeVertexNormals();c=0;for(a=this.faces.length;c<a;c++)d=this.faces[c],l=g.faceNormals[c],w=g.vertexNormals[c],l.copy(d.normal),w.a.copy(d.vertexNormals[0]),w.b.copy(d.vertexNormals[1]),w.c.copy(d.vertexNormals[2])}c=0;for(a=this.faces.length;c<a;c++)d=this.faces[c],d.normal=d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeLineDistances:function(){for(var b=0,f=this.vertices,c=0,a=f.length;c<a;c++)0<c&&(b+=f[c].distanceTo(f[c-1])),this.lineDistances[c]=b},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new u);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Ba);this.boundingSphere.setFromPoints(this.vertices)},merge:function(b,f,c){if(b&&b.isGeometry){var k,a=this.vertices.length,d=this.vertices,e=b.vertices,g=this.faces,h=b.faces,w=this.faceVertexUvs[0],p=b.faceVertexUvs[0],m=this.colors,u=b.colors;void 0===c&&(c=0);void 0!==f&&(k=(new l).getNormalMatrix(f));b=0;for(var n=e.length;b<n;b++){var y=e[b].clone();void 0!==f&&y.applyMatrix4(f);d.push(y)}b=0;for(n=u.length;b<n;b++)m.push(u[b].clone());b=0;for(n=h.length;b<n;b++){var e=h[b],t=e.vertexNormals,u=e.vertexColors,m=new Sa(e.a+a,e.b+a,e.c+a);m.normal.copy(e.normal);void 0!==k&&m.normal.applyMatrix3(k).normalize();f=0;for(d=t.length;f<d;f++)y=t[f].clone(),void 0!==k&&y.applyMatrix3(k).normalize(),m.vertexNormals.push(y);m.color.copy(e.color);f=0;for(d=u.length;f<d;f++)y=u[f],m.vertexColors.push(y.clone());m.materialIndex=e.materialIndex+c;g.push(m)}b=0;for(n=p.length;b<n;b++)if(c=p[b],k=[],void 0!==c){f=0;for(d=c.length;f<d;f++)k.push(c[f].clone());w.push(k)}}},mergeMesh:function(b){b&&b.isMesh&&(b.matrixAutoUpdate&&b.updateMatrix(),this.merge(b.geometry,b.matrix))},mergeVertices:function(){var b={},f=[],c=[],a,d=Math.pow(10,4),e,g;e=0;for(g=this.vertices.length;e<g;e++)a=this.vertices[e],a=Math.round(a.x*d)+"_"+Math.round(a.y*d)+"_"+Math.round(a.z*d),void 0===b[a]?(b[a]=e,f.push(this.vertices[e]),c[e]=f.length-1):c[e]=c[b[a]];b=[];e=0;for(g=this.faces.length;e<g;e++)for(d=this.faces[e],d.a=c[d.a],d.b=c[d.b],d.c=c[d.c],d=[d.a,d.b,d.c],a=0;3>a;a++)if(d[a]===d[(a+1)%3]){b.push(e);break}for(e=b.length-1;0<=e;e--)for(d=b[e],this.faces.splice(d,1),c=0,g=this.faceVertexUvs.length;c<g;c++)this.faceVertexUvs[c].splice(d,1);e=this.vertices.length-f.length;this.vertices=f;return e},setFromPoints:function(b){this.vertices=[];for(var f=0,c=b.length;f<c;f++){var a=b[f];this.vertices.push(new h(a.x,a.y,a.z||0))}return this},sortFacesByMaterialIndex:function(){for(var b=this.faces,f=b.length,c=0;c<f;c++)b[c]._id=c;b.sort(function(b,f){return b.materialIndex-f.materialIndex});var a=this.faceVertexUvs[0],d=this.faceVertexUvs[1],e,g;a&&a.length===f&&(e=[]);d&&d.length===f&&(g=[]);for(c=0;c<f;c++){var h=b[c]._id;e&&e.push(a[h]);g&&g.push(d[h])}e&&(this.faceVertexUvs[0]=e);g&&(this.faceVertexUvs[1]=g)},toJSON:function(){function b(b,f,c){return c?b|1<<f:b&~(1<<f)}function f(b){var f=b.x.toString()+b.y.toString()+b.z.toString();if(void 0!==w[f])return w[f];w[f]=l.length/3;l.push(b.x,b.y,b.z);return w[f]}function c(b){var f=b.r.toString()+b.g.toString()+b.b.toString();if(void 0!==m[f])return m[f];m[f]=p.length;p.push(b.getHex());return m[f]}function a(b){var f=b.x.toString()+b.y.toString();if(void 0!==n[f])return n[f];n[f]=u.length/2;u.push(b.x,b.y);return n[f]}var d={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};d.uuid=this.uuid;d.type=this.type;""!==this.name&&(d.name=this.name);if(void 0!==this.parameters){var e=this.parameters,g;for(g in e)void 0!==e[g]&&(d[g]=e[g]);return d}e=[];for(g=0;g<this.vertices.length;g++){var h=this.vertices[g];e.push(h.x,h.y,h.z)}var h=[],l=[],w={},p=[],m={},u=[],n={};for(g=0;g<this.faces.length;g++){var y=this.faces[g],t=void 0!==this.faceVertexUvs[0][g],x=0<y.normal.length(),v=0<y.vertexNormals.length,q=1!==y.color.r||1!==y.color.g||1!==y.color.b,C=0<y.vertexColors.length,D=0,D=b(D,0,0),D=b(D,1,!0),D=b(D,2,!1),D=b(D,3,t),D=b(D,4,x),D=b(D,5,v),D=b(D,6,q),D=b(D,7,C);h.push(D);h.push(y.a,y.b,y.c);h.push(y.materialIndex);t&&(t=this.faceVertexUvs[0][g],h.push(a(t[0]),a(t[1]),a(t[2])));x&&h.push(f(y.normal));v&&(x=y.vertexNormals,h.push(f(x[0]),f(x[1]),f(x[2])));q&&h.push(c(y.color));C&&(y=y.vertexColors,h.push(c(y[0]),c(y[1]),c(y[2])))}d.data={};d.data.vertices=e;d.data.normals=l;0<p.length&&(d.data.colors=p);0<u.length&&(d.data.uvs=[u]);d.data.faces=h;return d},clone:function(){return(new qa).copy(this)},copy:function(b){var f,c,a,d,e,g;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=b.name;a=b.vertices;f=0;for(c=a.length;f<c;f++)this.vertices.push(a[f].clone());a=b.colors;f=0;for(c=a.length;f<c;f++)this.colors.push(a[f].clone());a=b.faces;f=0;for(c=a.length;f<c;f++)this.faces.push(a[f].clone());f=0;for(c=b.faceVertexUvs.length;f<c;f++){var h=b.faceVertexUvs[f];void 0===this.faceVertexUvs[f]&&(this.faceVertexUvs[f]=[]);a=0;for(d=h.length;a<d;a++){var l=h[a],w=[];e=0;for(g=l.length;e<g;e++)w.push(l[e].clone());this.faceVertexUvs[f].push(w)}}e=b.morphTargets;f=0;for(c=e.length;f<c;f++){g={};g.name=e[f].name;if(void 0!==e[f].vertices)for(g.vertices=[],a=0,d=e[f].vertices.length;a<d;a++)g.vertices.push(e[f].vertices[a].clone());if(void 0!==e[f].normals)for(g.normals=[],a=0,d=e[f].normals.length;a<d;a++)g.normals.push(e[f].normals[a].clone());this.morphTargets.push(g)}e=b.morphNormals;f=0;for(c=e.length;f<c;f++){g={};if(void 0!==e[f].vertexNormals)for(g.vertexNormals=[],a=0,d=e[f].vertexNormals.length;a<d;a++)h=e[f].vertexNormals[a],l={},l.a=h.a.clone(),l.b=h.b.clone(),l.c=h.c.clone(),g.vertexNormals.push(l);if(void 0!==e[f].faceNormals)for(g.faceNormals=[],a=0,d=e[f].faceNormals.length;a<d;a++)g.faceNormals.push(e[f].faceNormals[a].clone());this.morphNormals.push(g)}a=b.skinWeights;f=0;for(c=a.length;f<c;f++)this.skinWeights.push(a[f].clone());a=b.skinIndices;f=0;for(c=a.length;f<c;f++)this.skinIndices.push(a[f].clone());a=b.lineDistances;f=0;for(c=a.length;f<c;f++)this.lineDistances.push(a[f]);f=b.boundingBox;null!==f&&(this.boundingBox=f.clone());f=b.boundingSphere;null!==f&&(this.boundingSphere=f.clone());this.elementsNeedUpdate=b.elementsNeedUpdate;this.verticesNeedUpdate=b.verticesNeedUpdate;this.uvsNeedUpdate=b.uvsNeedUpdate;this.normalsNeedUpdate=b.normalsNeedUpdate;this.colorsNeedUpdate=b.colorsNeedUpdate;this.lineDistancesNeedUpdate=b.lineDistancesNeedUpdate;this.groupsNeedUpdate=b.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(ja.prototype,"needsUpdate",{set:function(b){!0===b&&this.version++}});Object.assign(ja.prototype,{isBufferAttribute:!0,setArray:function(b){this.count=void 0!==b?b.length/this.itemSize:0;this.array=b},setDynamic:function(b){this.dynamic=b;return this},copy:function(b){this.array=new b.array.constructor(b.array);this.itemSize=b.itemSize;this.count=b.count;this.normalized=b.normalized;this.dynamic=b.dynamic;return this},copyAt:function(b,f,c){b*=this.itemSize;c*=f.itemSize;for(var k=0,a=this.itemSize;k<a;k++)this.array[b+k]=f.array[c+k];return this},copyArray:function(b){this.array.set(b);return this},copyColorsArray:function(b){for(var f=this.array,c=0,a=0,d=b.length;a<d;a++){var e=b[a];void 0===e&&(e=new Y);f[c++]=e.r;f[c++]=e.g;f[c++]=e.b}return this},copyIndicesArray:function(b){for(var f=this.array,c=0,a=0,d=b.length;a<d;a++){var e=b[a];f[c++]=e.a;f[c++]=e.b;f[c++]=e.c}return this},copyVector2sArray:function(b){for(var f=this.array,c=0,a=0,e=b.length;a<e;a++){var g=b[a];void 0===g&&(g=new d);f[c++]=g.x;f[c++]=g.y}return this},copyVector3sArray:function(b){for(var f=this.array,c=0,a=0,d=b.length;a<d;a++){var e=b[a];void 0===e&&(e=new h);f[c++]=e.x;f[c++]=e.y;f[c++]=e.z}return this},copyVector4sArray:function(b){for(var f=this.array,c=0,a=0,d=b.length;a<d;a++){var e=b[a];void 0===e&&(e=new n);f[c++]=e.x;f[c++]=e.y;f[c++]=e.z;f[c++]=e.w}return this},set:function(b,f){void 0===f&&(f=0);this.array.set(b,f);return this},getX:function(b){return this.array[b*this.itemSize]},setX:function(b,f){this.array[b*this.itemSize]=f;return this},getY:function(b){return this.array[b*this.itemSize+1]},setY:function(b,f){this.array[b*this.itemSize+1]=f;return this},getZ:function(b){return this.array[b*this.itemSize+2]},setZ:function(b,f){this.array[b*this.itemSize+2]=f;return this},getW:function(b){return this.array[b*this.itemSize+3]},setW:function(b,f){this.array[b*this.itemSize+3]=f;return this},setXY:function(b,f,c){b*=this.itemSize;this.array[b+0]=f;this.array[b+1]=c;return this},setXYZ:function(b,f,c,a){b*=this.itemSize;this.array[b+0]=f;this.array[b+1]=c;this.array[b+2]=a;return this},setXYZW:function(b,f,c,a,d){b*=this.itemSize;this.array[b+0]=f;this.array[b+1]=c;this.array[b+2]=a;this.array[b+3]=d;return this},onUpload:function(b){this.onUploadCallback=b;return this},clone:function(){return(new this.constructor(this.array,this.itemSize)).copy(this)}});Zb.prototype=Object.create(ja.prototype);Zb.prototype.constructor=Zb;$b.prototype=Object.create(ja.prototype);$b.prototype.constructor=$b;ac.prototype=Object.create(ja.prototype);ac.prototype.constructor=ac;bc.prototype=Object.create(ja.prototype);bc.prototype.constructor=bc;ob.prototype=Object.create(ja.prototype);ob.prototype.constructor=ob;cc.prototype=Object.create(ja.prototype);cc.prototype.constructor=cc;pb.prototype=Object.create(ja.prototype);pb.prototype.constructor=pb;X.prototype=Object.create(ja.prototype);X.prototype.constructor=X;dc.prototype=Object.create(ja.prototype);dc.prototype.constructor=dc;Object.assign(Ad.prototype,{computeGroups:function(b){var f,c=[],a=void 0;b=b.faces;for(var d=0;d<b.length;d++){var e=b[d];e.materialIndex!==a&&(a=e.materialIndex,void 0!==f&&(f.count=3*d-f.start,c.push(f)),f={start:3*d,materialIndex:a})}void 0!==f&&(f.count=3*d-f.start,c.push(f));this.groups=c},fromGeometry:function(b){var f=b.faces,c=b.vertices,a=b.faceVertexUvs,e=a[0]&&0<a[0].length,g=a[1]&&0<a[1].length,h=b.morphTargets,l=h.length,w;if(0<l){w=[];for(var p=0;p<l;p++)w[p]=[];this.morphTargets.position=w}var m=b.morphNormals,u=m.length,n;if(0<u){n=[];for(p=0;p<u;p++)n[p]=[];this.morphTargets.normal=n}for(var y=b.skinIndices,t=b.skinWeights,x=y.length===c.length,v=t.length===c.length,p=0;p<f.length;p++){var q=f[p];this.vertices.push(c[q.a],c[q.b],c[q.c]);var D=q.vertexNormals;3===D.length?this.normals.push(D[0],D[1],D[2]):(D=q.normal,this.normals.push(D,D,D));D=q.vertexColors;3===D.length?this.colors.push(D[0],D[1],D[2]):(D=q.color,this.colors.push(D,D,D));!0===e&&(D=a[0][p],void 0!==D?this.uvs.push(D[0],D[1],D[2]):this.uvs.push(new d,new d,new d));!0===g&&(D=a[1][p],void 0!==D?this.uvs2.push(D[0],D[1],D[2]):this.uvs2.push(new d,new d,new d));for(D=0;D<l;D++){var C=h[D].vertices;w[D].push(C[q.a],C[q.b],C[q.c])}for(D=0;D<u;D++)C=m[D].vertexNormals[p],n[D].push(C.a,C.b,C.c);x&&this.skinIndices.push(y[q.a],y[q.b],y[q.c]);v&&this.skinWeights.push(t[q.a],t[q.b],t[q.c])}this.computeGroups(b);this.verticesNeedUpdate=b.verticesNeedUpdate;this.normalsNeedUpdate=b.normalsNeedUpdate;this.colorsNeedUpdate=b.colorsNeedUpdate;this.uvsNeedUpdate=b.uvsNeedUpdate;this.groupsNeedUpdate=b.groupsNeedUpdate;return this}});var be=1;Object.assign(ma.prototype,a.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(b){Array.isArray(b)?this.index=new (65535<Wc(b)?pb:ob)(b,1):this.index=b},addAttribute:function(b,f,c){if(f&&f.isBufferAttribute||f&&f.isInterleavedBufferAttribute)if("index"===b)this.setIndex(f);else return this.attributes[b]=f,this;else this.addAttribute(b,new ja(f,c))},getAttribute:function(b){return this.attributes[b]},removeAttribute:function(b){delete this.attributes[b];return this},addGroup:function(b,f,c){this.groups.push({start:b,count:f,materialIndex:void 0!==c?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(b,f){this.drawRange.start=b;this.drawRange.count=f},applyMatrix:function(b){var f=this.attributes.position;void 0!==f&&(b.applyToBufferAttribute(f),f.needsUpdate=!0);f=this.attributes.normal;void 0!==f&&((new l).getNormalMatrix(b).applyToBufferAttribute(f),f.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var b=new e;return function(f){b.makeRotationX(f);this.applyMatrix(b);return this}}(),rotateY:function(){var b=new e;return function(f){b.makeRotationY(f);this.applyMatrix(b);return this}}(),rotateZ:function(){var b=new e;return function(f){b.makeRotationZ(f);this.applyMatrix(b);return this}}(),translate:function(){var b=new e;return function(f,c,a){b.makeTranslation(f,c,a);this.applyMatrix(b);return this}}(),scale:function(){var b=new e;return function(f,c,a){b.makeScale(f,c,a);this.applyMatrix(b);return this}}(),lookAt:function(){var b=new ea;return function(f){b.lookAt(f);b.updateMatrix();this.applyMatrix(b.matrix)}}(),center:function(){this.computeBoundingBox();var b=this.boundingBox.getCenter().negate();this.translate(b.x,b.y,b.z);return b},st:function(b){var f=b.geometry;if(b.isPoints||b.isLine){b=new X(3*f.vertices.length,3);var c=new X(3*f.colors.length,3);this.addAttribute("position",b.copyVector3sArray(f.vertices));this.addAttribute("color",c.copyColorsArray(f.colors));f.lineDistances&&f.lineDistances.length===f.vertices.length&&(b=new X(f.lineDistances.length,1),this.addAttribute("lineDistance",b.copyArray(f.lineDistances)));null!==f.boundingSphere&&(this.boundingSphere=f.boundingSphere.clone());null!==f.boundingBox&&(this.boundingBox=f.boundingBox.clone())}else b.isMesh&&f&&f.isGeometry&&this.fromGeometry(f);return this},setFromPoints:function(b){for(var f=[],c=0,a=b.length;c<a;c++){var d=b[c];f.push(d.x,d.y,d.z||0)}this.addAttribute("position",new X(f,3));return this},updateFromObject:function(b){var f=b.geometry;if(b.isMesh){var c=f.__directGeometry;!0===f.elementsNeedUpdate&&(c=void 0,f.elementsNeedUpdate=!1);if(void 0===c)return this.fromGeometry(f);c.verticesNeedUpdate=f.verticesNeedUpdate;c.normalsNeedUpdate=f.normalsNeedUpdate;c.colorsNeedUpdate=f.colorsNeedUpdate;c.uvsNeedUpdate=f.uvsNeedUpdate;c.groupsNeedUpdate=f.groupsNeedUpdate;f.verticesNeedUpdate=!1;f.normalsNeedUpdate=!1;f.colorsNeedUpdate=!1;f.uvsNeedUpdate=!1;f.groupsNeedUpdate=!1;f=c}!0===f.verticesNeedUpdate&&(c=this.attributes.position,void 0!==c&&(c.copyVector3sArray(f.vertices),c.needsUpdate=!0),f.verticesNeedUpdate=!1);!0===f.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==c&&(c.copyVector3sArray(f.normals),c.needsUpdate=!0),f.normalsNeedUpdate=!1);!0===f.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(c.copyColorsArray(f.colors),c.needsUpdate=!0),f.colorsNeedUpdate=!1);f.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(c.copyVector2sArray(f.uvs),c.needsUpdate=!0),f.uvsNeedUpdate=!1);f.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,void 0!==c&&(c.copyArray(f.lineDistances),c.needsUpdate=!0),f.lineDistancesNeedUpdate=!1);f.groupsNeedUpdate&&(f.computeGroups(b.geometry),this.groups=f.groups,f.groupsNeedUpdate=!1);return this},fromGeometry:function(b){b.__directGeometry=(new Ad).fromGeometry(b);return this.fromDirectGeometry(b.__directGeometry)},fromDirectGeometry:function(b){var f=new Float32Array(3*b.vertices.length);this.addAttribute("position",(new ja(f,3)).copyVector3sArray(b.vertices));0<b.normals.length&&(f=new Float32Array(3*b.normals.length),this.addAttribute("normal",(new ja(f,3)).copyVector3sArray(b.normals)));0<b.colors.length&&(f=new Float32Array(3*b.colors.length),this.addAttribute("color",(new ja(f,3)).copyColorsArray(b.colors)));0<b.uvs.length&&(f=new Float32Array(2*b.uvs.length),this.addAttribute("uv",(new ja(f,2)).copyVector2sArray(b.uvs)));0<b.uvs2.length&&(f=new Float32Array(2*b.uvs2.length),this.addAttribute("uv2",(new ja(f,2)).copyVector2sArray(b.uvs2)));0<b.indices.length&&(f=new (65535<Wc(b.indices)?Uint32Array:Uint16Array)(3*b.indices.length),this.setIndex((new ja(f,1)).copyIndicesArray(b.indices)));this.groups=b.groups;for(var c in b.morphTargets){for(var f=[],a=b.morphTargets[c],d=0,e=a.length;d<e;d++){var g=a[d],h=new X(3*g.length,3);f.push(h.copyVector3sArray(g))}this.morphAttributes[c]=f}0<b.skinIndices.length&&(c=new X(4*b.skinIndices.length,4),this.addAttribute("skinIndex",c.copyVector4sArray(b.skinIndices)));0<b.skinWeights.length&&(c=new X(4*b.skinWeights.length,4),this.addAttribute("skinWeight",c.copyVector4sArray(b.skinWeights)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new u);var b=this.attributes.position;void 0!==b?this.boundingBox.setFromBufferAttribute(b):this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)},computeBoundingSphere:function(){var b=new u,f=new h;return function(){null===this.boundingSphere&&(this.boundingSphere=new Ba);var c=this.attributes.position;if(c){var a=this.boundingSphere.center;b.setFromBufferAttribute(c);b.getCenter(a);for(var d=0,e=0,g=c.count;e<g;e++)f.x=c.getX(e),f.y=c.getY(e),f.z=c.getZ(e),d=Math.max(d,a.distanceToSquared(f));this.boundingSphere.radius=Math.sqrt(d);isNaN(this.boundingSphere.radius)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var b=this.index,f=this.attributes,c=this.groups;if(f.position){var a=f.position.array;if(void 0===f.normal)this.addAttribute("normal",new ja(new Float32Array(a.length),3));else for(var d=f.normal.array,e=0,g=d.length;e<g;e++)d[e]=0;var d=f.normal.array,l,w,p,m=new h,u=new h,n=new h,y=new h,t=new h;if(b){b=b.array;0===c.length&&this.addGroup(0,b.length);for(var x=0,v=c.length;x<v;++x)for(e=c[x],g=e.start,l=e.count,e=g,g+=l;e<g;e+=3)l=3*b[e+0],w=3*b[e+1],p=3*b[e+2],m.fromArray(a,l),u.fromArray(a,w),n.fromArray(a,p),y.subVectors(n,u),t.subVectors(m,u),y.cross(t),d[l]+=y.x,d[l+1]+=y.y,d[l+2]+=y.z,d[w]+=y.x,d[w+1]+=y.y,d[w+2]+=y.z,d[p]+=y.x,d[p+1]+=y.y,d[p+2]+=y.z}else for(e=0,g=a.length;e<g;e+=9)m.fromArray(a,e),u.fromArray(a,e+3),n.fromArray(a,e+6),y.subVectors(n,u),t.subVectors(m,u),y.cross(t),d[e]=y.x,d[e+1]=y.y,d[e+2]=y.z,d[e+3]=y.x,d[e+4]=y.y,d[e+5]=y.z,d[e+6]=y.x,d[e+7]=y.y,d[e+8]=y.z;this.normalizeNormals();f.normal.needsUpdate=!0}},merge:function(b,f){if(b&&b.isBufferGeometry){void 0===f&&(f=0);var c=this.attributes,a;for(a in c)if(void 0!==b.attributes[a])for(var d=c[a].array,e=b.attributes[a],g=e.array,h=0,e=e.itemSize*f;h<g.length;h++,e++)d[e]=g[h];return this}},normalizeNormals:function(){var b=new h;return function(){for(var f=this.attributes.normal,c=0,a=f.count;c<a;c++)b.x=f.getX(c),b.y=f.getY(c),b.z=f.getZ(c),b.normalize(),f.setXYZ(c,b.x,b.y,b.z)}}(),toNonIndexed:function(){if(null===this.index)return this;var b=new ma,f=this.index.array,c=this.attributes,a;for(a in c){for(var d=c[a],e=d.array,d=d.itemSize,g=new e.constructor(f.length*d),h,l=0,w=0,p=f.length;w<p;w++){h=f[w]*d;for(var m=0;m<d;m++)g[l++]=e[h++]}b.addAttribute(a,new ja(g,d))}return b},toJSON:function(){var b={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};b.uuid=this.uuid;b.type=this.type;""!==this.name&&(b.name=this.name);if(void 0!==this.parameters){var f=this.parameters,c;for(c in f)void 0!==f[c]&&(b[c]=f[c]);return b}b.data={attributes:{}};var a=this.index;null!==a&&(f=Array.prototype.slice.call(a.array),b.data.index={type:a.array.constructor.name,array:f});a=this.attributes;for(c in a){var d=a[c],f=Array.prototype.slice.call(d.array);b.data.attributes[c]={itemSize:d.itemSize,type:d.array.constructor.name,array:f,normalized:d.normalized}}c=this.groups;0<c.length&&(b.data.groups=JSON.parse(JSON.stringify(c)));c=this.boundingSphere;null!==c&&(b.data.boundingSphere={center:c.center.toArray(),radius:c.radius});return b},clone:function(){return(new ma).copy(this)},copy:function(b){var f,c,a;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=b.name;c=b.index;null!==c&&this.setIndex(c.clone());c=b.attributes;for(f in c)this.addAttribute(f,c[f].clone());var d=b.morphAttributes;for(f in d){var e=[],g=d[f];c=0;for(a=g.length;c<a;c++)e.push(g[c].clone());this.morphAttributes[f]=e}f=b.groups;c=0;for(a=f.length;c<a;c++)d=f[c],this.addGroup(d.start,d.count,d.materialIndex);f=b.boundingBox;null!==f&&(this.boundingBox=f.clone());f=b.boundingSphere;null!==f&&(this.boundingSphere=f.clone());this.drawRange.start=b.drawRange.start;this.drawRange.count=b.drawRange.count;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Ib.prototype=Object.create(qa.prototype);Ib.prototype.constructor=Ib;qb.prototype=Object.create(ma.prototype);qb.prototype.constructor=qb;ec.prototype=Object.create(qa.prototype);ec.prototype.constructor=ec;rb.prototype=Object.create(ma.prototype);rb.prototype.constructor=rb;Va.prototype=Object.create(y.prototype);Va.prototype.constructor=Va;Va.prototype.isMal=!0;Va.prototype.copy=function(b){y.prototype.copy.call(this,b);this.color.copy(b.color);this.map=b.map;this.lightMap=b.lightMap;this.lightMapIntensity=b.lightMapIntensity;this.aoMap=b.aoMap;this.aoMapIntensity=b.aoMapIntensity;this.specularMap=b.specularMap;this.alphaMap=b.alphaMap;this.envMap=b.envMap;this.combine=b.combine;this.reflectivity=b.reflectivity;this.refractionRatio=b.refractionRatio;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.wireframeLinecap=b.wireframeLinecap;this.wireframeLinejoin=b.wireframeLinejoin;this.skinning=b.skinning;this.morphTargets=b.morphTargets;return this};Oa.prototype=Object.create(y.prototype);Oa.prototype.constructor=Oa;Oa.prototype.isShaderMaterial=!0;Oa.prototype.copy=function(b){y.prototype.copy.call(this,b);this.fragmentShader=b.fragmentShader;this.vertexShader=b.vertexShader;this.uniforms=Ra.clone(b.uniforms);this.defines=b.defines;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.lights=b.lights;this.clipping=b.clipping;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.morphNormals=b.morphNormals;this.extensions=b.extensions;return this};Oa.prototype.toJSON=function(b){b=y.prototype.toJSON.call(this,b);b.uniforms=this.uniforms;b.vertexShader=this.vertexShader;b.fragmentShader=this.fragmentShader;return b};Object.assign(sb.prototype,{set:function(b,f){this.origin.copy(b);this.direction.copy(f);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.origin.copy(b.origin);this.direction.copy(b.direction);return this},at:function(b,f){return(f||new h).copy(this.direction).multiplyScalar(b).add(this.origin)},lookAt:function(b){this.direction.copy(b).sub(this.origin).normalize();return this},recast:function(){var b=new h;return function(f){this.origin.copy(this.at(f,b));return this}}(),closestPointToPoint:function(b,f){var c=f||new h;c.subVectors(b,this.origin);var a=c.dot(this.direction);return 0>a?c.copy(this.origin):c.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(b){return Math.sqrt(this.distanceSqToPoint(b))},distanceSqToPoint:function(){var b=new h;return function(f){var c=b.subVectors(f,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(f);b.copy(this.direction).multiplyScalar(c).add(this.origin);return b.distanceToSquared(f)}}(),distanceSqToSegment:function(){var b=new h,f=new h,c=new h;return function(a,k,d,e){b.copy(a).add(k).multiplyScalar(.5);f.copy(k).sub(a).normalize();c.copy(this.origin).sub(b);var g=.5*a.distanceTo(k),h=-this.direction.dot(f),l=c.dot(this.direction),r=-c.dot(f),w=c.lengthSq(),p=Math.abs(1-h*h),m;0<p?(a=h*r-l,k=h*l-r,m=g*p,0<=a?k>=-m?k<=m?(g=1/p,a*=g,k*=g,h=a*(a+h*k+2*l)+k*(h*a+k+2*r)+w):(k=g,a=Math.max(0,-(h*k+l)),h=-a*a+k*(k+2*r)+w):(k=-g,a=Math.max(0,-(h*k+l)),h=-a*a+k*(k+2*r)+w):k<=-m?(a=Math.max(0,-(-h*g+l)),k=0<a?-g:Math.min(Math.max(-g,-r),g),h=-a*a+k*(k+2*r)+w):k<=m?(a=0,k=Math.min(Math.max(-g,-r),g),h=k*(k+2*r)+w):(a=Math.max(0,-(h*g+l)),k=0<a?g:Math.min(Math.max(-g,-r),g),h=-a*a+k*(k+2*r)+w)):(k=0<h?-g:g,a=Math.max(0,-(h*k+l)),h=-a*a+k*(k+2*r)+w);d&&d.copy(this.direction).multiplyScalar(a).add(this.origin);e&&e.copy(f).multiplyScalar(k).add(b);return h}}(),intersectSphere:function(){var b=new h;return function(f,c){b.subVectors(f.center,this.origin);var a=b.dot(this.direction),k=b.dot(b)-a*a,d=f.radius*f.radius;if(k>d)return null;d=Math.sqrt(d-k);k=a-d;a+=d;return 0>k&&0>a?null:0>k?this.at(a,c):this.at(k,c)}}(),intersectsSphere:function(b){return this.distanceToPoint(b.center)<=b.radius},distanceToPlane:function(b){var f=b.normal.dot(this.direction);if(0===f)return 0===b.distanceToPoint(this.origin)?0:null;b=-(this.origin.dot(b.normal)+b.constant)/f;return 0<=b?b:null},intersectPlane:function(b,f){var c=this.distanceToPlane(b);return null===c?null:this.at(c,f)},intersectsPlane:function(b){var f=b.distanceToPoint(this.origin);return 0===f||0>b.normal.dot(this.direction)*f?!0:!1},intersectBox:function(b,f){var c,a,d,e,g;a=1/this.direction.x;e=1/this.direction.y;g=1/this.direction.z;var h=this.origin;0<=a?(c=(b.min.x-h.x)*a,a*=b.max.x-h.x):(c=(b.max.x-h.x)*a,a*=b.min.x-h.x);0<=e?(d=(b.min.y-h.y)*e,e*=b.max.y-h.y):(d=(b.max.y-h.y)*e,e*=b.min.y-h.y);if(c>e||d>a)return null;if(d>c||c!==c)c=d;if(e<a||a!==a)a=e;0<=g?(d=(b.min.z-h.z)*g,g*=b.max.z-h.z):(d=(b.max.z-h.z)*g,g*=b.min.z-h.z);if(c>g||d>a)return null;if(d>c||c!==c)c=d;if(g<a||a!==a)a=g;return 0>a?null:this.at(0<=c?c:a,f)},intersectsBox:function(){var b=new h;return function(f){return null!==this.intersectBox(f,b)}}(),intersectTriangle:function(){var b=new h,f=new h,c=new h,a=new h;return function(k,d,e,g,h){f.subVectors(d,k);c.subVectors(e,k);a.crossVectors(f,c);d=this.direction.dot(a);if(0<d){if(g)return null;g=1}else if(0>d)g=-1,d=-d;else return null;b.subVectors(this.origin,k);k=g*this.direction.dot(c.crossVectors(b,c));if(0>k)return null;e=g*this.direction.dot(f.cross(b));if(0>e||k+e>d)return null;k=-g*b.dot(a);return 0>k?null:this.at(k/d,h)}}(),applyMatrix4:function(b){this.origin.applyMatrix4(b);this.direction.transformDirection(b);return this},equals:function(b){return b.origin.equals(this.origin)&&b.direction.equals(this.direction)}});Object.assign(Jb.prototype,{set:function(b,f){this.start.copy(b);this.end.copy(f);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.start.copy(b.start);this.end.copy(b.end);return this},getCenter:function(b){return(b||new h).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(b){return(b||new h).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(b,f){var c=f||new h;return this.delta(c).multiplyScalar(b).add(this.start)},closestPointToPointParameter:function(){var b=new h,f=new h;return function(c,a){b.subVectors(c,this.start);f.subVectors(this.end,this.start);var k=f.dot(f),k=f.dot(b)/k;a&&(k=oa.clamp(k,0,1));return k}}(),closestPointToPoint:function(b,f,c){b=this.closestPointToPointParameter(b,f);c=c||new h;return this.delta(c).multiplyScalar(b).add(this.start)},applyMatrix4:function(b){this.start.applyMatrix4(b);this.end.applyMatrix4(b);return this},equals:function(b){return b.start.equals(this.start)&&b.end.equals(this.end)}});Object.assign(cb,{normal:function(){var b=new h;return function(f,c,a,d){d=d||new h;d.subVectors(a,c);b.subVectors(f,c);d.cross(b);f=d.lengthSq();return 0<f?d.multiplyScalar(1/Math.sqrt(f)):d.set(0,0,0)}}(),barycoordFromPoint:function(){var b=new h,f=new h,c=new h;return function(a,k,d,e,g){b.subVectors(e,k);f.subVectors(d,k);c.subVectors(a,k);a=b.dot(b);k=b.dot(f);d=b.dot(c);var l=f.dot(f);e=f.dot(c);var r=a*l-k*k;g=g||new h;if(0===r)return g.set(-2,-1,-1);r=1/r;l=(l*d-k*e)*r;a=(a*e-k*d)*r;return g.set(1-l-a,a,l)}}(),containsPoint:function(){var b=new h;return function(f,c,a,d){f=cb.barycoordFromPoint(f,c,a,d,b);return 0<=f.x&&0<=f.y&&1>=f.x+f.y}}()});Object.assign(cb.prototype,{set:function(b,f,c){this.a.copy(b);this.b.copy(f);this.c.copy(c);return this},setFromPointsAndIndices:function(b,f,c,a){this.a.copy(b[f]);this.b.copy(b[c]);this.c.copy(b[a]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.a.copy(b.a);this.b.copy(b.b);this.c.copy(b.c);return this},area:function(){var b=new h,f=new h;return function(){b.subVectors(this.c,this.b);f.subVectors(this.a,this.b);return.5*b.cross(f).length()}}(),midpoint:function(b){return(b||new h).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(b){return cb.normal(this.a,this.b,this.c,b)},plane:function(b){return(b||new Ha).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(b,f){return cb.barycoordFromPoint(b,this.a,this.b,this.c,f)},containsPoint:function(b){return cb.containsPoint(b,this.a,this.b,this.c)},closestPointToPoint:function(){var b=new Ha,f=[new Jb,new Jb,new Jb],c=new h,a=new h;return function(k,d){var e=d||new h,g=Infinity;b.setFromCoplanarPoints(this.a,this.b,this.c);b.projectPoint(k,c);if(!0===this.containsPoint(c))e.copy(c);else{f[0].set(this.a,this.b);f[1].set(this.b,this.c);f[2].set(this.c,this.a);for(var l=0;l<f.length;l++){f[l].closestPointToPoint(c,!0,a);var r=c.distanceToSquared(a);r<g&&(g=r,e.copy(a))}}return e}}(),equals:function(b){return b.a.equals(this.a)&&b.b.equals(this.b)&&b.c.equals(this.c)}});La.prototype=Object.assign(Object.create(ea.prototype),{constructor:La,isMesh:!0,setDrawMode:function(b){this.drawMode=b},copy:function(b){ea.prototype.copy.call(this,b);this.drawMode=b.drawMode;void 0!==b.morphTargetInfluences&&(this.morphTargetInfluences=b.morphTargetInfluences.slice());void 0!==b.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},b.morphTargetDictionary));return this},updateMorphTargets:function(){var b=this.geometry,f,c;if(b.isBufferGeometry){if(b=b.morphAttributes,f=Object.keys(b),0<f.length){var a=b[f[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},b=0,f=a.length;b<f;b++)c=a[b].name||String(b),this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=b}}else if(a=b.morphTargets,void 0!==a&&0<a.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},b=0,f=a.length;b<f;b++)c=a[b].name||String(b),this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=b},raycast:function(){function b(b,f,c,a,k,d,e,g){if(null===(1===f.side?a.intersectTriangle(e,d,k,!0,g):a.intersectTriangle(k,d,e,2!==f.side,g)))return null;q.copy(g);q.applyMatrix4(b.matrixWorld);f=c.ray.origin.distanceTo(q);return f<c.near||f>c.far?null:{distance:f,point:q.clone(),object:b}}function f(f,c,a,k,d,e,g,h){l.fromBufferAttribute(k,e);w.fromBufferAttribute(k,g);p.fromBufferAttribute(k,h);if(f=b(f,f.material,c,a,l,w,p,D))f.face=new Sa(e,g,h,cb.normal(l,w,p)),f.faceIndex=e;return f}var c=new e,a=new sb,g=new Ba,l=new h,w=new h,p=new h,m=new h,u=new h,n=new h,y=new d,t=new d,x=new d,v=new h,D=new h,q=new h;return function(k,d){var e=this.geometry,h=this.material,r=this.matrixWorld;if(void 0!==h&&(null===e.boundingSphere&&e.computeBoundingSphere(),g.copy(e.boundingSphere),g.applyMatrix4(r),!1!==k.ray.intersectsSphere(g)&&(c.getInverse(r),a.copy(k.ray).applyMatrix4(c),null===e.boundingBox||!1!==a.intersectsBox(e.boundingBox)))){var J;if(e.isBufferGeometry){var q,M,h=e.index,C=e.attributes.position,r=e.attributes.uv,A,z;if(null!==h)for(A=0,z=h.count;A<z;A+=3){if(e=h.getX(A),q=h.getX(A+1),M=h.getX(A+2),J=f(this,k,a,C,r,e,q,M))J.faceIndex=Math.floor(A/3),d.push(J)}else if(void 0!==C)for(A=0,z=C.count;A<z;A+=3)if(e=A,q=A+1,M=A+2,J=f(this,k,a,C,r,e,q,M))J.index=e,d.push(J)}else if(e.isGeometry){var B,R,F,r=Array.isArray(h);A=e.vertices;z=e.faces;q=e.faceVertexUvs[0];0<q.length&&(C=q);q=0;for(M=z.length;q<M;q++){var Q=z[q];J=r?h[Q.materialIndex]:h;if(void 0!==J){B=A[Q.a];R=A[Q.b];F=A[Q.c];if(!0===J.morphTargets){var E=e.morphTargets,H=this.morphTargetInfluences;l.set(0,0,0);w.set(0,0,0);p.set(0,0,0);for(var G=0,I=E.length;G<I;G++){var K=H[G];if(0!==K){var L=E[G].vertices;l.addScaledVector(m.subVectors(L[Q.a],B),K);w.addScaledVector(u.subVectors(L[Q.b],R),K);p.addScaledVector(n.subVectors(L[Q.c],F),K)}}l.add(B);w.add(R);p.add(F);B=l;R=w;F=p}if(J=b(this,J,k,a,B,R,F,D))C&&C[q]&&(E=C[q],y.copy(E[0]),t.copy(E[1]),x.copy(E[2]),E=J,H=y,G=t,I=x,cb.barycoordFromPoint(D,B,R,F,v),H.multiplyScalar(v.x),G.multiplyScalar(v.y),I.multiplyScalar(v.z),H.add(G).add(I),B=H.clone(),E.uv=B),J.face=Q,J.faceIndex=q,d.push(J)}}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});var ue=0;db.prototype=Object.assign(Object.create(Qa.prototype),{constructor:db,isPa:!0,copy:function(b,f){Qa.prototype.copy.call(this,b,f);this.fov=b.fov;this.zoom=b.zoom;this.near=b.near;this.far=b.far;this.focus=b.focus;this.aspect=b.aspect;this.view=null===b.view?null:Object.assign({},b.view);this.filmGauge=b.filmGauge;this.filmOffset=b.filmOffset;return this},setFocalLength:function(b){b=.5*this.getFilmHeight()/b;this.fov=2*oa.RAD2DEG*Math.atan(b);this.ux()},getFocalLength:function(){var b=Math.tan(.5*oa.DEG2RAD*this.fov);return.5*this.getFilmHeight()/b},getEffectiveFOV:function(){return 2*oa.RAD2DEG*Math.atan(Math.tan(.5*oa.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(b,f,c,a,d,e){this.aspect=b/f;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=b;this.view.fullHeight=f;this.view.offsetX=c;this.view.offsetY=a;this.view.width=d;this.view.height=e;this.ux()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.ux()},ux:function(){var b=this.near,f=b*Math.tan(.5*oa.DEG2RAD*this.fov)/this.zoom,c=2*f,a=this.aspect*c,d=-.5*a,e=this.view;if(null!==this.view&&this.view.enabled)var g=e.fullWidth,h=e.fullHeight,d=d+e.offsetX*a/g,f=f-e.offsetY*c/h,a=e.width/g*a,c=e.height/h*c;e=this.filmOffset;0!==e&&(d+=b*e/this.getFilmWidth());this.projectionMatrix.makePerspective(d,d+a,f,f-c,b,this.far)},toJSON:function(b){b=ea.prototype.toJSON.call(this,b);b.object.fov=this.fov;b.object.zoom=this.zoom;b.object.near=this.near;b.object.far=this.far;b.object.focus=this.focus;b.object.aspect=this.aspect;null!==this.view&&(b.object.view=Object.assign({},this.view));b.object.filmGauge=this.filmGauge;b.object.filmOffset=this.filmOffset;return b}});Zc.prototype=Object.assign(Object.create(db.prototype),{constructor:Zc,isArrayCamera:!0});Kb.prototype.isFog=!0;Kb.prototype.clone=function(){return new Kb(this.color.getHex(),this.near,this.far)};Kb.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};yc.prototype=Object.assign(Object.create(ea.prototype),{constructor:yc,copy:function(b,f){ea.prototype.copy.call(this,b,f);null!==b.background&&(this.background=b.background.clone());null!==b.fog&&(this.fog=b.fog.clone());null!==b.overrideMaterial&&(this.overrideMaterial=b.overrideMaterial.clone());this.autoUpdate=b.autoUpdate;this.matrixAutoUpdate=b.matrixAutoUpdate;return this},toJSON:function(b){var f=ea.prototype.toJSON.call(this,b);null!==this.background&&(f.object.background=this.background.toJSON(b));null!==this.fog&&(f.object.fog=this.fog.toJSON());return f}});ad.prototype=Object.assign(Object.create(ea.prototype),{constructor:ad,isLensFlare:!0,copy:function(b){ea.prototype.copy.call(this,b);this.positionScreen.copy(b.positionScreen);this.customUpdateCallback=b.customUpdateCallback;for(var f=0,c=b.lensFlares.length;f<c;f++)this.lensFlares.push(b.lensFlares[f]);return this},add:function(b,f,c,a,d,e){void 0===f&&(f=-1);void 0===c&&(c=0);void 0===e&&(e=1);void 0===d&&(d=new Y(16777215));void 0===a&&(a=1);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:b,size:f,distance:c,x:0,y:0,z:0,scale:1,rotation:0,opacity:e,color:d,blending:a})},updateLensFlares:function(){var b,f=this.lensFlares.length,c,a=2*-this.positionScreen.x,d=2*-this.positionScreen.y;for(b=0;b<f;b++)c=this.lensFlares[b],c.x=this.positionScreen.x+a*c.distance,c.y=this.positionScreen.y+d*c.distance,c.wantedRotation=c.x*Math.PI*.25,c.rotation+=.25*(c.wantedRotation-c.rotation)}});hb.prototype=Object.create(y.prototype);hb.prototype.constructor=hb;hb.prototype.isSpriteMaterial=!0;hb.prototype.copy=function(b){y.prototype.copy.call(this,b);this.color.copy(b.color);this.map=b.map;this.rotation=b.rotation;return this};zc.prototype=Object.assign(Object.create(ea.prototype),{constructor:zc,isSprite:!0,raycast:function(){var b=new h,f=new h,c=new h;return function(a,k){f.setFromMatrixPosition(this.matrixWorld);a.ray.closestPointToPoint(f,b);c.setFromMatrixScale(this.matrixWorld);var d=c.x*c.y/4;f.distanceToSquared(b)>d||(d=a.ray.origin.distanceTo(b),d<a.near||d>a.far||k.push({distance:d,point:b.clone(),face:null,object:this}))}}(),clone:function(){return(new this.constructor(this.material)).copy(this)}});Object.assign(gc.prototype,{calculateInverses:function(){this.boneInverses=[];for(var b=0,f=this.bones.length;b<f;b++){var c=new e;this.bones[b]&&c.getInverse(this.bones[b].matrixWorld);this.boneInverses.push(c)}},pose:function(){var b,f,c;f=0;for(c=this.bones.length;f<c;f++)(b=this.bones[f])&&b.matrixWorld.getInverse(this.boneInverses[f]);f=0;for(c=this.bones.length;f<c;f++)if(b=this.bones[f])b.parent&&b.parent.isBone?(b.matrix.getInverse(b.parent.matrixWorld),b.matrix.multiply(b.matrixWorld)):b.matrix.copy(b.matrixWorld),b.matrix.decompose(b.position,b.quaternion,b.scale)},update:function(){var b=new e,f=new e;return function(){for(var c=this.bones,a=this.boneInverses,d=this.boneMatrices,e=this.boneTexture,g=0,h=c.length;g<h;g++)b.multiplyMatrices(c[g]?c[g].matrixWorld:f,a[g]),b.toArray(d,16*g);void 0!==e&&(e.needsUpdate=!0)}}(),clone:function(){return new gc(this.bones,this.boneInverses)}});Ac.prototype=Object.assign(Object.create(ea.prototype),{constructor:Ac,isBone:!0});Bc.prototype=Object.assign(Object.create(La.prototype),{constructor:Bc,isSkinnedMesh:!0,initBones:function(){var b=[],f,c,a,d;if(this.geometry&&void 0!==this.geometry.bones){a=0;for(d=this.geometry.bones.length;a<d;a++)c=this.geometry.bones[a],f=new Ac,b.push(f),f.name=c.name,f.position.fromArray(c.pos),f.quaternion.fromArray(c.rotq),void 0!==c.scl&&f.scale.fromArray(c.scl);a=0;for(d=this.geometry.bones.length;a<d;a++)c=this.geometry.bones[a],-1!==c.parent&&null!==c.parent&&void 0!==b[c.parent]?b[c.parent].add(b[a]):this.add(b[a])}this.uld(!0);return b},bind:function(b,f){this.skeleton=b;void 0===f&&(this.uld(!0),this.skeleton.calculateInverses(),f=this.matrixWorld);this.bindMatrix.copy(f);this.bindMatrixInverse.getInverse(f)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var b,f;if(this.geometry&&this.geometry.isGeometry)for(f=0;f<this.geometry.skinWeights.length;f++){var c=this.geometry.skinWeights[f];b=1/c.manhattanLength();Infinity!==b?c.multiplyScalar(b):c.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var c=new n,a=this.geometry.attributes.skinWeight;for(f=0;f<a.count;f++)c.x=a.getX(f),c.y=a.getY(f),c.z=a.getZ(f),c.w=a.getW(f),b=1/c.manhattanLength(),Infinity!==b?c.multiplyScalar(b):c.set(1,0,0,0),a.setXYZW(f,c.x,c.y,c.z,c.w)}},uld:function(b){La.prototype.uld.call(this,b);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode&&this.bindMatrixInverse.getInverse(this.bindMatrix)},clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});za.prototype=Object.create(y.prototype);za.prototype.constructor=za;za.prototype.isLineBasicMaterial=!0;za.prototype.copy=function(b){y.prototype.copy.call(this,b);this.color.copy(b.color);this.linewidth=b.linewidth;this.linecap=b.linecap;this.linejoin=b.linejoin;return this};Wa.prototype=Object.assign(Object.create(ea.prototype),{constructor:Wa,isLine:!0,raycast:function(){var b=new e,f=new sb,c=new Ba;return function(a,k){var d=a.linePrecision,d=d*d,e=this.geometry,g=this.matrixWorld;null===e.boundingSphere&&e.computeBoundingSphere();c.copy(e.boundingSphere);c.applyMatrix4(g);if(!1!==a.ray.intersectsSphere(c)){b.getInverse(g);f.copy(a.ray).applyMatrix4(b);var l=new h,r=new h,g=new h,w=new h,p=this&&this.isLineSegments?2:1;if(e.isBufferGeometry){var m=e.index,u=e.attributes.position.array;if(null!==m)for(var m=m.array,e=0,n=m.length-1;e<n;e+=p){var y=m[e+1];l.fromArray(u,3*m[e]);r.fromArray(u,3*y);y=f.distanceSqToSegment(l,r,w,g);y>d||(w.applyMatrix4(this.matrixWorld),y=a.ray.origin.distanceTo(w),y<a.near||y>a.far||k.push({distance:y,point:g.clone().applyMatrix4(this.matrixWorld),index:e,face:null,faceIndex:null,object:this}))}else for(e=0,n=u.length/3-1;e<n;e+=p)l.fromArray(u,3*e),r.fromArray(u,3*e+3),y=f.distanceSqToSegment(l,r,w,g),y>d||(w.applyMatrix4(this.matrixWorld),y=a.ray.origin.distanceTo(w),y<a.near||y>a.far||k.push({distance:y,point:g.clone().applyMatrix4(this.matrixWorld),index:e,face:null,faceIndex:null,object:this}))}else if(e.isGeometry)for(l=e.vertices,r=l.length,e=0;e<r-1;e+=p)y=f.distanceSqToSegment(l[e],l[e+1],w,g),y>d||(w.applyMatrix4(this.matrixWorld),y=a.ray.origin.distanceTo(w),y<a.near||y>a.far||k.push({distance:y,point:g.clone().applyMatrix4(this.matrixWorld),index:e,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});Ia.prototype=Object.assign(Object.create(Wa.prototype),{constructor:Ia,isLineSegments:!0});Cc.prototype=Object.assign(Object.create(Wa.prototype),{constructor:Cc,isLineLoop:!0});eb.prototype=Object.create(y.prototype);eb.prototype.constructor=eb;eb.prototype.isPointsMaterial=!0;eb.prototype.copy=function(b){y.prototype.copy.call(this,b);this.color.copy(b.color);this.map=b.map;this.size=b.size;this.sizeAttenuation=b.sizeAttenuation;return this};hc.prototype=Object.assign(Object.create(ea.prototype),{constructor:hc,isPoints:!0,raycast:function(){var b=new e,f=new sb,c=new Ba;return function(a,k){function d(b,c){var d=f.distanceSqToPoint(b);if(d<w){var g=f.closestPointToPoint(b);g.applyMatrix4(l);var h=a.ray.origin.distanceTo(g);h<a.near||h>a.far||k.push({distance:h,distanceToRay:Math.sqrt(d),point:g.clone(),index:c,face:null,object:e})}}var e=this,g=this.geometry,l=this.matrixWorld,r=a.params.Points.threshold;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(l);c.radius+=r;if(!1!==a.ray.intersectsSphere(c)){b.getInverse(l);f.copy(a.ray).applyMatrix4(b);var r=r/((this.scale.x+this.scale.y+this.scale.z)/3),w=r*r,r=new h;if(g.isBufferGeometry){var p=g.index,g=g.attributes.position.array;if(null!==p)for(var m=p.array,p=0,u=m.length;p<u;p++){var y=m[p];r.fromArray(g,3*y);d(r,y)}else for(p=0,m=g.length/3;p<m;p++)r.fromArray(g,3*p),d(r,p)}else for(r=g.vertices,p=0,m=r.length;p<m;p++)d(r[p],p)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});ic.prototype=Object.assign(Object.create(ea.prototype),{constructor:ic});Dc.prototype=Object.create(m.prototype);Dc.prototype.constructor=Dc;Lb.prototype=Object.create(m.prototype);Lb.prototype.constructor=Lb;Lb.prototype.isCompressedTexture=!0;jc.prototype=Object.create(m.prototype);jc.prototype.constructor=jc;jc.prototype.isDepthTexture=!0;Mb.prototype=Object.create(ma.prototype);Mb.prototype.constructor=Mb;var ib={area:function(b){for(var f=b.length,c=0,a=f-1,d=0;d<f;a=d++)c+=b[a].x*b[d].y-b[d].x*b[a].y;return.5*c},triangulate:function(){return function(b,f){var c=b.length;if(3>c)return null;var a=[],d=[],e=[],g,h,l;if(0<ib.area(b))for(h=0;h<c;h++)d[h]=h;else for(h=0;h<c;h++)d[h]=c-1-h;var w=2*c;for(h=c-1;2<c&&!(0>=w--);){g=h;c<=g&&(g=0);h=g+1;c<=h&&(h=0);l=h+1;c<=l&&(l=0);var p;a:{var m,u,y,n,t,x,v,q;m=b[d[g]].x;u=b[d[g]].y;y=b[d[h]].x;n=b[d[h]].y;t=b[d[l]].x;x=b[d[l]].y;if(0>=(y-m)*(x-u)-(n-u)*(t-m))p=!1;else{var D,C,A,z,B,F,E,H,G,I;D=t-y;C=x-n;A=m-t;z=u-x;B=y-m;F=n-u;for(p=0;p<c;p++)if(v=b[d[p]].x,q=b[d[p]].y,!(v===m&&q===u||v===y&&q===n||v===t&&q===x)&&(E=v-m,H=q-u,G=v-y,I=q-n,v-=t,q-=x,G=D*I-C*G,E=B*H-F*E,H=A*q-z*v,G>=-Number.EPSILON&&H>=-Number.EPSILON&&E>=-Number.EPSILON)){p=!1;break a}p=!0}}if(p){a.push([b[d[g]],b[d[h]],b[d[l]]]);e.push([d[g],d[h],d[l]]);g=h;for(l=h+1;l<c;g++,l++)d[g]=d[l];c--;w=2*c}}return f?e:a}}(),triangulateShape:function(b,f){function c(b){var f=b.length;2<f&&b[f-1].equals(b[0])&&b.pop()}function a(b,f,c){return b.x!==f.x?b.x<f.x?b.x<=c.x&&c.x<=f.x:f.x<=c.x&&c.x<=b.x:b.y<f.y?b.y<=c.y&&c.y<=f.y:f.y<=c.y&&c.y<=b.y}function d(b,f,c,d,k){var e=f.x-b.x,g=f.y-b.y,h=d.x-c.x,l=d.y-c.y,w=b.x-c.x,r=b.y-c.y,p=g*h-e*l,m=g*w-e*r;if(Math.abs(p)>Number.EPSILON){if(0<p){if(0>m||m>p)return[];h=l*w-h*r;if(0>h||h>p)return[]}else{if(0<m||m<p)return[];h=l*w-h*r;if(0<h||h<p)return[]}if(0===h)return!k||0!==m&&m!==p?[b]:[];if(h===p)return!k||0!==m&&m!==p?[f]:[];if(0===m)return[c];if(m===p)return[d];k=h/p;return[{x:b.x+k*e,y:b.y+k*g}]}if(0!==m||l*w!==h*r)return[];g=0===e&&0===g;h=0===h&&0===l;if(g&&h)return b.x!==c.x||b.y!==c.y?[]:[b];if(g)return a(c,d,b)?[b]:[];if(h)return a(b,f,c)?[c]:[];0!==e?(b.x<f.x?(e=b,h=b.x,g=f,b=f.x):(e=f,h=f.x,g=b,b=b.x),c.x<d.x?(f=c,p=c.x,l=d,c=d.x):(f=d,p=d.x,l=c,c=c.x)):(b.y<f.y?(e=b,h=b.y,g=f,b=f.y):(e=f,h=f.y,g=b,b=b.y),c.y<d.y?(f=c,p=c.y,l=d,c=d.y):(f=d,p=d.y,l=c,c=c.y));return h<=p?b<p?[]:b===p?k?[]:[f]:b<=c?[f,g]:[f,l]:h>c?[]:h===c?k?[]:[e]:b<=c?[e,g]:[e,l]}function e(b,f,c,a){var d=f.x-b.x,k=f.y-b.y;f=c.x-b.x;c=c.y-b.y;var e=a.x-b.x;a=a.y-b.y;b=d*c-k*f;d=d*a-k*e;return Math.abs(b)>Number.EPSILON?(f=e*c-a*f,0<b?0<=d&&0<=f:0<=d||0<=f):0<d}c(b);f.forEach(c);var g,h,l,w,p,m={};l=b.concat();g=0;for(h=f.length;g<h;g++)Array.prototype.push.apply(l,f[g]);g=0;for(h=l.length;g<h;g++)p=l[g].x+":"+l[g].y,m[p]=g;g=function(b,f){function c(b,f){var c=g.length-1,a=b-1;0>a&&(a=c);var d=b+1;d>c&&(d=0);c=e(g[b],g[a],g[d],h[f]);if(!c)return!1;c=h.length-1;a=f-1;0>a&&(a=c);d=f+1;d>c&&(d=0);return(c=e(h[f],h[a],h[d],g[b]))?!0:!1}function a(b,f){var c,a;for(c=0;c<g.length;c++)if(a=c+1,a%=g.length,a=d(b,f,g[c],g[a],!0),0<a.length)return!0;return!1}function k(b,c){var a,k,e,g;for(a=0;a<l.length;a++)for(k=f[l[a]],e=0;e<k.length;e++)if(g=e+1,g%=k.length,g=d(b,c,k[e],k[g],!0),0<g.length)return!0;return!1}var g=b.concat(),h,l=[],w,r,p,m,u,y=[],n,t,J,x=0;for(w=f.length;x<w;x++)l.push(x);n=0;for(var v=2*l.length;0<l.length;){v--;if(0>v)break;for(r=n;r<g.length;r++){p=g[r];w=-1;for(x=0;x<l.length;x++)if(m=l[x],u=p.x+":"+p.y+":"+m,void 0===y[u]){h=f[m];for(t=0;t<h.length;t++)if(m=h[t],c(r,t)&&!a(p,m)&&!k(p,m)){w=t;l.splice(x,1);n=g.slice(0,r+1);m=g.slice(r);t=h.slice(w);J=h.slice(0,w+1);g=n.concat(t).concat(J).concat(m);n=r;break}if(0<=w)break;y[u]=!0}if(0<=w)break}}return g}(b,f);var u=ib.triangulate(g,!1);g=0;for(h=u.length;g<h;g++)for(w=u[g],l=0;3>l;l++)p=w[l].x+":"+w[l].y,p=m[p],void 0!==p&&(w[l]=p);return u.concat()},isClockWise:function(b){return 0>ib.area(b)}};kc.prototype=Object.create(qa.prototype);kc.prototype.constructor=kc;Nb.prototype=Object.create(ma.prototype);Nb.prototype.constructor=Nb;Ob.prototype=Object.create(qa.prototype);Ob.prototype.constructor=Ob;Pb.prototype=Object.create(ma.prototype);Pb.prototype.constructor=Pb;Qb.prototype=Object.create(ma.prototype);Qb.prototype.constructor=Qb;ub.prototype=Object.create(qa.prototype);ub.prototype.constructor=ub;fb.prototype=Object.create(ma.prototype);fb.prototype.constructor=fb;lc.prototype=Object.create(ub.prototype);lc.prototype.constructor=lc;mc.prototype=Object.create(fb.prototype);mc.prototype.constructor=mc;nc.prototype=Object.create(qa.prototype);nc.prototype.constructor=nc;Rb.prototype=Object.create(ma.prototype);Rb.prototype.constructor=Rb;var Yb=Object.freeze({WireframeGeometry:Mb,SphereGeometry:kc,SphereBufferGeometry:Nb,PlaneGeometry:ec,PlaneBufferGeometry:rb,ShapeGeometry:Ob,ShapeBufferGeometry:Pb,EdgesGeometry:Qb,ConeGeometry:lc,ConeBufferGeometry:mc,CylinderGeometry:ub,CylinderBufferGeometry:fb,CircleGeometry:nc,CircleBufferGeometry:Rb,BoxGeometry:Ib,By:qb});Sb.prototype=Object.create(y.prototype);Sb.prototype.constructor=Sb;Sb.prototype.isShadowMaterial=!0;Tb.prototype=Object.create(Oa.prototype);Tb.prototype.constructor=Tb;Tb.prototype.isRawShaderMaterial=!0;Za.prototype=Object.create(y.prototype);Za.prototype.constructor=Za;Za.prototype.isMeshStandardMaterial=!0;Za.prototype.copy=function(b){y.prototype.copy.call(this,b);this.defines={STANDARD:""};this.color.copy(b.color);this.roughness=b.roughness;this.metalness=b.metalness;this.map=b.map;this.lightMap=b.lightMap;this.lightMapIntensity=b.lightMapIntensity;this.aoMap=b.aoMap;this.aoMapIntensity=b.aoMapIntensity;this.emissive.copy(b.emissive);this.emissiveMap=b.emissiveMap;this.emissiveIntensity=b.emissiveIntensity;this.bumpMap=b.bumpMap;this.bumpScale=b.bumpScale;this.normalMap=b.normalMap;this.normalScale.copy(b.normalScale);this.displacementMap=b.displacementMap;this.displacementScale=b.displacementScale;this.displacementBias=b.displacementBias;this.roughnessMap=b.roughnessMap;this.metalnessMap=b.metalnessMap;this.alphaMap=b.alphaMap;this.envMap=b.envMap;this.envMapIntensity=b.envMapIntensity;this.refractionRatio=b.refractionRatio;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.wireframeLinecap=b.wireframeLinecap;this.wireframeLinejoin=b.wireframeLinejoin;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.morphNormals=b.morphNormals;return this};vb.prototype=Object.create(Za.prototype);vb.prototype.constructor=vb;vb.prototype.isMeshPhysicalMaterial=!0;vb.prototype.copy=function(b){Za.prototype.copy.call(this,b);this.defines={PHYSICAL:""};this.reflectivity=b.reflectivity;this.clearCoat=b.clearCoat;this.clearCoatRoughness=b.clearCoatRoughness;return this};Xa.prototype=Object.create(y.prototype);Xa.prototype.constructor=Xa;Xa.prototype.isMeshPhongMaterial=!0;Xa.prototype.copy=function(b){y.prototype.copy.call(this,b);this.color.copy(b.color);this.specular.copy(b.specular);this.shininess=b.shininess;this.map=b.map;this.lightMap=b.lightMap;this.lightMapIntensity=b.lightMapIntensity;this.aoMap=b.aoMap;this.aoMapIntensity=b.aoMapIntensity;this.emissive.copy(b.emissive);this.emissiveMap=b.emissiveMap;this.emissiveIntensity=b.emissiveIntensity;this.bumpMap=b.bumpMap;this.bumpScale=b.bumpScale;this.normalMap=b.normalMap;this.normalScale.copy(b.normalScale);this.displacementMap=b.displacementMap;this.displacementScale=b.displacementScale;this.displacementBias=b.displacementBias;this.specularMap=b.specularMap;this.alphaMap=b.alphaMap;this.envMap=b.envMap;this.combine=b.combine;this.reflectivity=b.reflectivity;this.refractionRatio=b.refractionRatio;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.wireframeLinecap=b.wireframeLinecap;this.wireframeLinejoin=b.wireframeLinejoin;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.morphNormals=b.morphNormals;return this};wb.prototype=Object.create(Xa.prototype);wb.prototype.constructor=wb;wb.prototype.isMeshToonMaterial=!0;wb.prototype.copy=function(b){Xa.prototype.copy.call(this,b);this.gradientMap=b.gradientMap;return this};xb.prototype=Object.create(y.prototype);xb.prototype.constructor=xb;xb.prototype.isMeshNormalMaterial=!0;xb.prototype.copy=function(b){y.prototype.copy.call(this,b);this.bumpMap=b.bumpMap;this.bumpScale=b.bumpScale;this.normalMap=b.normalMap;this.normalScale.copy(b.normalScale);this.displacementMap=b.displacementMap;this.displacementScale=b.displacementScale;this.displacementBias=b.displacementBias;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.morphNormals=b.morphNormals;return this};yb.prototype=Object.create(y.prototype);yb.prototype.constructor=yb;yb.prototype.isMeshLambertMaterial=!0;yb.prototype.copy=function(b){y.prototype.copy.call(this,b);this.color.copy(b.color);this.map=b.map;this.lightMap=b.lightMap;this.lightMapIntensity=b.lightMapIntensity;this.aoMap=b.aoMap;this.aoMapIntensity=b.aoMapIntensity;this.emissive.copy(b.emissive);this.emissiveMap=b.emissiveMap;this.emissiveIntensity=b.emissiveIntensity;this.specularMap=b.specularMap;this.alphaMap=b.alphaMap;this.envMap=b.envMap;this.combine=b.combine;this.reflectivity=b.reflectivity;this.refractionRatio=b.refractionRatio;this.wireframe=b.wireframe;this.wireframeLinewidth=b.wireframeLinewidth;this.wireframeLinecap=b.wireframeLinecap;this.wireframeLinejoin=b.wireframeLinejoin;this.skinning=b.skinning;this.morphTargets=b.morphTargets;this.morphNormals=b.morphNormals;return this};zb.prototype=Object.create(za.prototype);zb.prototype.constructor=zb;zb.prototype.isLineDashedMaterial=!0;zb.prototype.copy=function(b){za.prototype.copy.call(this,b);this.scale=b.scale;this.dashSize=b.dashSize;this.gapSize=b.gapSize;return this};var Ee=Object.freeze({ShadowMaterial:Sb,SpriteMaterial:hb,RawShaderMaterial:Tb,ShaderMaterial:Oa,PointsMaterial:eb,MeshPhysicalMaterial:vb,MeshStandardMaterial:Za,MeshPhongMaterial:Xa,MeshToonMaterial:wb,MeshNormalMaterial:xb,MeshLambertMaterial:yb,MeshDepthMaterial:ta,MeshDistanceMaterial:w,Mal:Va,LineDashedMaterial:zb,LineBasicMaterial:za,Material:y}),xc={enabled:!1,files:{},add:function(b,f){!1!==this.enabled&&(this.files[b]=f)},get:function(b){if(!1!==this.enabled)return this.files[b]},remove:function(b){delete this.files[b]},clear:function(){this.files={}}},Ta=new bd,gb={};Object.assign($a.prototype,{load:function(b,f,c,a){void 0===b&&(b="");void 0!==this.path&&(b=this.path+b);b=this.manager.resolveURL(b);var d=this,k=xc.get(b);if(void 0!==k)return d.manager.itemStart(b),setTimeout(function(){f&&f(k);d.manager.itemEnd(b)},0),k;if(void 0!==gb[b])gb[b].push({onLoad:f,onProgress:c,onError:a});else{var e=b.match(/^data:(.*?)(;base64)?,(.*)$/);if(e){c=e[1];var g=!!e[2],e=e[3],e=window.decodeURIComponent(e);g&&(e=window.atob(e));try{var h,l=(this.responseType||"").toLowerCase();switch(l){case "arraybuffer":case "blob":for(var w=new Uint8Array(e.length),g=0;g<e.length;g++)w[g]=e.charCodeAt(g);h="blob"===l?new Blob([w.buffer],{type:c}):w.buffer;break;case "document":h=(new DOMParser).parseFromString(e,c);break;case "json":h=JSON.parse(e);break;default:h=e}window.setTimeout(function(){f&&f(h);d.manager.itemEnd(b)},0)}catch(Xd){window.setTimeout(function(){a&&a(Xd);d.manager.itemEnd(b);d.manager.itemError(b)},0)}}else{gb[b]=[];gb[b].push({onLoad:f,onProgress:c,onError:a});var r=new XMLHttpRequest;r.open("GET",b,!0);r.addEventListener("load",function(f){var c=f.target.response;xc.add(b,c);var a=gb[b];delete gb[b];if(200===this.status){for(var k=0,e=a.length;k<e;k++){var g=a[k];if(g.onLoad)g.onLoad(c)}d.manager.itemEnd(b)}else if(0===this.status){k=0;for(e=a.length;k<e;k++)if(g=a[k],g.onLoad)g.onLoad(c);d.manager.itemEnd(b)}else{k=0;for(e=a.length;k<e;k++)if(g=a[k],g.onError)g.onError(f);d.manager.itemEnd(b);d.manager.itemError(b)}},!1);r.addEventListener("progress",function(f){for(var c=gb[b],a=0,d=c.length;a<d;a++){var k=c[a];if(k.onProgress)k.onProgress(f)}},!1);r.addEventListener("error",function(f){var c=gb[b];delete gb[b];for(var a=0,k=c.length;a<k;a++){var e=c[a];if(e.onError)e.onError(f)}d.manager.itemEnd(b);d.manager.itemError(b)},!1);void 0!==this.responseType&&(r.responseType=this.responseType);void 0!==this.withCredentials&&(r.withCredentials=this.withCredentials);r.overrideMimeType&&r.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(g in this.requestHeader)r.setRequestHeader(g,this.requestHeader[g]);r.send(null)}d.manager.itemStart(b);return r}},setPath:function(b){this.path=b;return this},setResponseType:function(b){this.responseType=b;return this},setWithCredentials:function(b){this.withCredentials=b;return this},setMimeType:function(b){this.mimeType=b;return this},setRequestHeader:function(b){this.requestHeader=b;return this}});Object.assign(Gd.prototype,{load:function(b,f,c,a){function d(d){h.load(b[d],function(b){b=k._parser(b,!0);e[d]={width:b.width,height:b.height,format:b.format,mipmaps:b.mipmaps};l+=1;6===l&&(1===b.mipmapCount&&(g.minFilter=1006),g.format=b.format,g.needsUpdate=!0,f&&f(g))},c,a)}var k=this,e=[],g=new Lb;g.image=e;var h=new $a(this.manager);h.setPath(this.path);h.setResponseType("arraybuffer");if(Array.isArray(b))for(var l=0,w=0,r=b.length;w<r;++w)d(w);else h.load(b,function(b){b=k._parser(b,!0);if(b.isCubemap)for(var c=b.mipmaps.length/b.mipmapCount,a=0;a<c;a++){e[a]={mipmaps:[]};for(var d=0;d<b.mipmapCount;d++)e[a].mipmaps.push(b.mipmaps[a*b.mipmapCount+d]),e[a].format=b.format,e[a].width=b.width,e[a].height=b.height}else g.image.width=b.width,g.image.height=b.height,g.mipmaps=b.mipmaps;1===b.mipmapCount&&(g.minFilter=1006);g.format=b.format;g.needsUpdate=!0;f&&f(g)},c,a);return g},setPath:function(b){this.path=b;return this}});Object.assign(cd.prototype,{load:function(b,f,c,a){var d=this,k=new F,e=new $a(this.manager);e.setResponseType("arraybuffer");e.load(b,function(b){if(b=d._parser(b))void 0!==b.image?k.image=b.image:void 0!==b.data&&(k.image.width=b.width,k.image.height=b.height,k.image.data=b.data),k.wrapS=void 0!==b.wrapS?b.wrapS:1001,k.wrapT=void 0!==b.wrapT?b.wrapT:1001,k.magFilter=void 0!==b.magFilter?b.magFilter:1006,k.minFilter=void 0!==b.minFilter?b.minFilter:1008,k.anisotropy=void 0!==b.anisotropy?b.anisotropy:1,void 0!==b.format&&(k.format=b.format),void 0!==b.type&&(k.type=b.type),void 0!==b.mipmaps&&(k.mipmaps=b.mipmaps),1===b.mipmapCount&&(k.minFilter=1006),k.needsUpdate=!0,f&&f(k,b)},c,a);return k}});Object.assign(oc.prototype,{crossOrigin:"Anonymous",load:function(b,f,c,a){void 0===b&&(b="");void 0!==this.path&&(b=this.path+b);b=this.manager.resolveURL(b);var d=this,k=xc.get(b);if(void 0!==k)return d.manager.itemStart(b),setTimeout(function(){f&&f(k);d.manager.itemEnd(b)},0),k;c=document.createElementNS("http://www.w3.org/1999/xhtml","img");c.addEventListener("load",function(){xc.add(b,this);f&&f(this);d.manager.itemEnd(b)},!1);c.addEventListener("error",function(f){a&&a(f);d.manager.itemEnd(b);d.manager.itemError(b)},!1);"data:"!==b.substr(0,5)&&void 0!==this.crossOrigin&&(c.crossOrigin=this.crossOrigin);d.manager.itemStart(b);c.src=b;return c},setCrossOrigin:function(b){this.crossOrigin=b;return this},setPath:function(b){this.path=b;return this}});Object.assign(dd.prototype,{crossOrigin:"Anonymous",load:function(b,f,c,a){function d(c){e.load(b[c],function(b){k.images[c]=b;g++;6===g&&(k.needsUpdate=!0,f&&f(k))},void 0,a)}var k=new C,e=new oc(this.manager);e.setCrossOrigin(this.crossOrigin);e.setPath(this.path);var g=0;for(c=0;c<b.length;++c)d(c);return k},setCrossOrigin:function(b){this.crossOrigin=b;return this},setPath:function(b){this.path=b;return this}});Object.assign(Ec.prototype,{crossOrigin:"Anonymous",load:function(b,f,c,a){var d=new m,k=new oc(this.manager);k.setCrossOrigin(this.crossOrigin);k.setPath(this.path);k.load(b,function(c){d.image=c;c=0<b.search(/\.(jpg|jpeg)$/)||0===b.search(/^data\:image\/jpeg/);d.format=c?1022:1023;d.needsUpdate=!0;void 0!==f&&f(d)},c,a);return d},setCrossOrigin:function(b){this.crossOrigin=b;return this},setPath:function(b){this.path=b;return this}});xa.prototype=Object.assign(Object.create(ea.prototype),{constructor:xa,isLight:!0,copy:function(b){ea.prototype.copy.call(this,b);this.color.copy(b.color);this.intensity=b.intensity;return this},toJSON:function(b){b=ea.prototype.toJSON.call(this,b);b.object.color=this.color.getHex();b.object.intensity=this.intensity;void 0!==this.groundColor&&(b.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(b.object.distance=this.distance);void 0!==this.angle&&(b.object.angle=this.angle);void 0!==this.decay&&(b.object.decay=this.decay);void 0!==this.penumbra&&(b.object.penumbra=this.penumbra);void 0!==this.shadow&&(b.object.shadow=this.shadow.toJSON());return b}});Fc.prototype=Object.assign(Object.create(xa.prototype),{constructor:Fc,isHemisphereLight:!0,copy:function(b){xa.prototype.copy.call(this,b);this.groundColor.copy(b.groundColor);return this}});Object.assign(Ab.prototype,{copy:function(b){this.camera=b.camera.clone();this.bias=b.bias;this.radius=b.radius;this.mapSize.copy(b.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var b={};0!==this.bias&&(b.bias=this.bias);1!==this.radius&&(b.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)b.mapSize=this.mapSize.toArray();b.camera=this.camera.toJSON(!1).object;delete b.camera.matrix;return b}});Gc.prototype=Object.assign(Object.create(Ab.prototype),{constructor:Gc,isSpotLightShadow:!0,update:function(b){var f=this.camera,c=2*oa.RAD2DEG*b.angle,a=this.mapSize.width/this.mapSize.height;b=b.distance||f.far;if(c!==f.fov||a!==f.aspect||b!==f.far)f.fov=c,f.aspect=a,f.far=b,f.ux()}});Hc.prototype=Object.assign(Object.create(xa.prototype),{constructor:Hc,isSpotLight:!0,copy:function(b){xa.prototype.copy.call(this,b);this.distance=b.distance;this.angle=b.angle;this.penumbra=b.penumbra;this.decay=b.decay;this.target=b.target.clone();this.shadow=b.shadow.clone();return this}});Ic.prototype=Object.assign(Object.create(xa.prototype),{constructor:Ic,isPointLight:!0,copy:function(b){xa.prototype.copy.call(this,b);this.distance=b.distance;this.decay=b.decay;this.shadow=b.shadow.clone();return this}});Jc.prototype=Object.assign(Object.create(Ab.prototype),{constructor:Jc});Kc.prototype=Object.assign(Object.create(xa.prototype),{constructor:Kc,isDt:!0,copy:function(b){xa.prototype.copy.call(this,b);this.target=b.target.clone();this.shadow=b.shadow.clone();return this}});Lc.prototype=Object.assign(Object.create(xa.prototype),{constructor:Lc,isAmbientLight:!0});Mc.prototype=Object.assign(Object.create(xa.prototype),{constructor:Mc,isRectAreaLight:!0,copy:function(b){xa.prototype.copy.call(this,b);this.width=b.width;this.height=b.height;return this},toJSON:function(b){b=xa.prototype.toJSON.call(this,b);b.object.width=this.width;b.object.height=this.height;return b}});Object.assign(Ma.prototype,{evaluate:function(b){var f=this.parameterPositions,c=this._cachedIndex,a=f[c],d=f[c-1];a:{b:{c:{d:if(!(b<a)){for(var e=c+2;;){if(void 0===a){if(b<d)break d;this._cachedIndex=c=f.length;return this.afternd_(c-1,b,d)}if(c===e)break;d=a;a=f[++c];if(b<a)break b}a=f.length;break c}if(b>=d)break a;else{e=f[1];b<e&&(c=2,d=e);for(e=c-2;;){if(void 0===d)return this._cachedIndex=0,this.beforeStart_(0,b,a);if(c===e)break;a=d;d=f[--c-1];if(b>=d)break b}a=c;c=0}}for(;c<a;)d=c+a>>>1,b<f[d]?a=d:c=d+1;a=f[c];d=f[c-1];if(void 0===d)return this._cachedIndex=0,this.beforeStart_(0,b,a);if(void 0===a)return this._cachedIndex=c=f.length,this.afternd_(c-1,d,b)}this._cachedIndex=c;this.intervalChanged_(c,d,a)}return this.interpolate_(c,d,b,a)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(b){var f=this.resultBuffer,c=this.sampleValues,a=this.valueSize;b*=a;for(var d=0;d!==a;++d)f[d]=c[b+d];return f},interpolate_:function(){},intervalChanged_:function(){}});Object.assign(Ma.prototype,{beforeStart_:Ma.prototype.copySampleValue_,afternd_:Ma.prototype.copySampleValue_});Nc.prototype=Object.assign(Object.create(Ma.prototype),{constructor:Nc,interpolate_:function(b,f,c,a){var d=this.resultBuffer,k=this.sampleValues,e=this.valueSize;b*=e;f=(c-f)/(a-f);for(c=b+e;b!==c;b+=4)g.slerpFlat(d,0,k,b-e,k,b,f);return d}});pc.prototype=Object.assign(Object.create(Ca.prototype),{constructor:pc,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(b){return new Nc(this.times,this.values,this.getValueSize(),b)},InterpolantFactoryMethodSmooth:void 0});Ub.prototype=Object.assign(Object.create(Ca.prototype),{constructor:Ub,ValueTypeName:"number"});Oc.prototype=Object.assign(Object.create(Ma.prototype),{constructor:Oc,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(b,f,c){var a=this.parameterPositions,d=b-2,k=b+1,e=a[d],g=a[k];if(void 0===e)switch(this.getSettings_().endingStart){case 2401:d=b;e=2*f-c;break;case 2402:d=a.length-2;e=f+a[d]-a[d+1];break;default:d=b,e=c}if(void 0===g)switch(this.getSettings_().endingEnd){case 2401:k=b;g=2*c-f;break;case 2402:k=1;g=c+a[1]-a[0];break;default:k=b-1,g=f}b=.5*(c-f);a=this.valueSize;this._weightPrev=b/(f-e);this._weightNext=b/(g-c);this._offsetPrev=d*a;this._offsetNext=k*a},interpolate_:function(b,f,c,a){var d=this.resultBuffer,k=this.sampleValues,e=this.valueSize;b*=e;var g=b-e,h=this._offsetPrev,l=this._offsetNext,w=this._weightPrev,p=this._weightNext,r=(c-f)/(a-f);c=r*r;a=c*r;f=-w*a+2*w*c-w*r;w=(1+w)*a+(-1.5-2*w)*c+(-.5+w)*r+1;r=(-1-p)*a+(1.5+p)*c+.5*r;p=p*a-p*c;for(c=0;c!==e;++c)d[c]=f*k[h+c]+w*k[g+c]+r*k[b+c]+p*k[l+c];return d}});Pc.prototype=Object.assign(Object.create(Ma.prototype),{constructor:Pc,interpolate_:function(b,f,c,a){var d=this.resultBuffer,k=this.sampleValues,e=this.valueSize;b*=e;var g=b-e;f=(c-f)/(a-f);c=1-f;for(a=0;a!==e;++a)d[a]=k[g+a]*c+k[b+a]*f;return d}});Qc.prototype=Object.assign(Object.create(Ma.prototype),{constructor:Qc,interpolate_:function(b){return this.copySampleValue_(b-1)}});var Fa={arraySlice:function(b,f,c){return Fa.isTypedArray(b)?new b.constructor(b.subarray(f,void 0!==c?c:b.length)):b.slice(f,c)},convertArray:function(b,f,c){return!b||!c&&b.constructor===f?b:"number"===typeof f.BYTES_PER_ELEMENT?new f(b):Array.prototype.slice.call(b)},isTypedArray:function(b){return ArrayBuffer.isView(b)&&!(b instanceof DataView)},getKeyframeOrder:function(b){for(var f=b.length,c=Array(f),a=0;a!==f;++a)c[a]=a;c.sort(function(f,c){return b[f]-b[c]});return c},sortedArray:function(b,f,c){for(var a=b.length,d=new b.constructor(a),k=0,e=0;e!==a;++k)for(var g=c[k]*f,h=0;h!==f;++h)d[e++]=b[g+h];return d},flattenJSON:function(b,f,c,a){for(var d=1,k=b[0];void 0!==k&&void 0===k[a];)k=b[d++];if(void 0!==k){var e=k[a];if(void 0!==e)if(Array.isArray(e)){do e=k[a],void 0!==e&&(f.push(k.time),c.push.apply(c,e)),k=b[d++];while(void 0!==k)}else if(void 0!==e.toArray){do e=k[a],void 0!==e&&(f.push(k.time),e.toArray(c,c.length)),k=b[d++];while(void 0!==k)}else{do e=k[a],void 0!==e&&(f.push(k.time),c.push(e)),k=b[d++];while(void 0!==k)}}}};Object.assign(Ca,{parse:function(b){var f=Ca._getTrackTypeForValueTypeName(b.type);if(void 0===b.times){var c=[],a=[];Fa.flattenJSON(b.keys,c,a,"value");b.times=c;b.values=a}return void 0!==f.parse?f.parse(b):new f(b.name,b.times,b.values,b.interpolation)},toJSON:function(b){var f=b.constructor;if(void 0!==f.toJSON)f=f.toJSON(b);else{var f={name:b.name,times:Fa.convertArray(b.times,Array),values:Fa.convertArray(b.values,Array)},c=b.getInterpolation();c!==b.DefaultInterpolation&&(f.interpolation=c)}f.type=b.ValueTypeName;return f},_getTrackTypeForValueTypeName:function(b){switch(b.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return Ub;case "vector":case "vector2":case "vector3":case "vector4":return Vb;case "quaternion":return pc}}});Object.assign(Ca.prototype,{constructor:Ca,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(b){return new Qc(this.times,this.values,this.getValueSize(),b)},InterpolantFactoryMethodLinear:function(b){return new Pc(this.times,this.values,this.getValueSize(),b)},InterpolantFactoryMethodSmooth:function(b){return new Oc(this.times,this.values,this.getValueSize(),b)},setInterpolation:function(b){var f;switch(b){case 2300:f=this.InterpolantFactoryMethodDiscrete;break;case 2301:f=this.InterpolantFactoryMethodLinear;break;case 2302:f=this.InterpolantFactoryMethodSmooth}void 0===f?void 0===this.createInterpolant&&b!==this.DefaultInterpolation&&this.setInterpolation(this.DefaultInterpolation):this.createInterpolant=f},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(b){if(0!==b)for(var f=this.times,c=0,a=f.length;c!==a;++c)f[c]+=b;return this},scale:function(b){if(1!==b)for(var f=this.times,c=0,a=f.length;c!==a;++c)f[c]*=b;return this},trim:function(b,f){for(var c=this.times,a=c.length,d=0,e=a-1;d!==a&&c[d]<b;)++d;for(;-1!==e&&c[e]>f;)--e;++e;if(0!==d||e!==a)d>=e&&(e=Math.max(e,1),d=e-1),a=this.getValueSize(),this.times=Fa.arraySlice(c,d,e),this.values=Fa.arraySlice(this.values,d*a,e*a);return this},validate:function(){var b=!0,f=this.getValueSize();0!==f-Math.floor(f)&&(b=!1);var c=this.times,f=this.values,a=c.length;0===a&&(b=!1);for(var d=null,e=0;e!==a;e++){var g=c[e];if("number"===typeof g&&isNaN(g)){b=!1;break}if(null!==d&&d>g){b=!1;break}d=g}if(void 0!==f&&Fa.isTypedArray(f))for(e=0,c=f.length;e!==c;++e)if(isNaN(f[e])){b=!1;break}return b},optimize:function(){for(var b=this.times,f=this.values,c=this.getValueSize(),a=2302===this.getInterpolation(),d=1,e=b.length-1,g=1;g<e;++g){var h=!1,l=b[g];if(l!==b[g+1]&&(1!==g||l!==l[0]))if(a)h=!0;else for(var w=g*c,p=w-c,m=w+c,l=0;l!==c;++l){var u=f[w+l];if(u!==f[p+l]||u!==f[m+l]){h=!0;break}}if(h){if(g!==d)for(b[d]=b[g],h=g*c,w=d*c,l=0;l!==c;++l)f[w+l]=f[h+l];++d}}if(0<e){b[d]=b[e];h=e*c;w=d*c;for(l=0;l!==c;++l)f[w+l]=f[h+l];++d}d!==b.length&&(this.times=Fa.arraySlice(b,0,d),this.values=Fa.arraySlice(f,0,d*c));return this}});Vb.prototype=Object.assign(Object.create(Ca.prototype),{constructor:Vb,ValueTypeName:"vector"});Object.assign(ab,{parse:function(b){for(var f=[],c=b.tracks,a=1/(b.fps||1),d=0,e=c.length;d!==e;++d)f.push(Ca.parse(c[d]).scale(a));return new ab(b.name,b.duration,f)},toJSON:function(b){var f=[],c=b.tracks;b={name:b.name,duration:b.duration,tracks:f};for(var a=0,d=c.length;a!==d;++a)f.push(Ca.toJSON(c[a]));return b},CreateFromMorphTargetSequence:function(b,f,c,a){for(var d=f.length,k=[],e=0;e<d;e++){var g=[],h=[];g.push((e+d-1)%d,e,(e+1)%d);h.push(0,1,0);var l=Fa.getKeyframeOrder(g),g=Fa.sortedArray(g,1,l),h=Fa.sortedArray(h,1,l);a||0!==g[0]||(g.push(d),h.push(h[0]));k.push((new Ub(".morphTargetInfluences["+f[e].name+"]",g,h)).scale(1/c))}return new ab(b,-1,k)},findByName:function(b,f){var c=b;Array.isArray(b)||(c=b.geometry&&b.geometry.animations||b.animations);for(var a=0;a<c.length;a++)if(c[a].name===f)return c[a];return null},CreateClipsFromMorphTargetSequences:function(b,f,c){for(var a={},d=/^([\w-]*?)([\d]+)$/,k=0,e=b.length;k<e;k++){var g=b[k],h=g.name.match(d);if(h&&1<h.length){var l=h[1];(h=a[l])||(a[l]=h=[]);h.push(g)}}b=[];for(l in a)b.push(ab.CreateFromMorphTargetSequence(l,a[l],f,c));return b},parseAnimation:function(b,f){if(!b)return null;for(var c=function(b,f,c,a,d){if(0!==c.length){var k=[],e=[];Fa.flattenJSON(c,k,e,a);0!==k.length&&d.push(new b(f,k,e))}},a=[],d=b.name||"default",e=b.length||-1,g=b.fps||30,h=b.hierarchy||[],l=0;l<h.length;l++){var w=h[l].keys;if(w&&0!==w.length)if(w[0].morphTargets){for(var e={},p=0;p<w.length;p++)if(w[p].morphTargets)for(var m=0;m<w[p].morphTargets.length;m++)e[w[p].morphTargets[m]]=-1;for(var u in e){for(var y=[],n=[],m=0;m!==w[p].morphTargets.length;++m){var t=w[p];y.push(t.time);n.push(t.morphTarget===u?1:0)}a.push(new Ub(".morphTargetInfluence["+u+"]",y,n))}e=e.length*(g||1)}else p=".bones["+f[l].name+"]",c(Vb,p+".position",w,"pos",a),c(pc,p+".quaternion",w,"rot",a),c(Vb,p+".scale",w,"scl",a)}return 0===a.length?null:new ab(d,e,a)}});Object.assign(ab.prototype,{resetDuration:function(){for(var b=0,f=0,c=this.tracks.length;f!==c;++f)var a=this.tracks[f],b=Math.max(b,a.times[a.times.length-1]);this.duration=b},trim:function(){for(var b=0;b<this.tracks.length;b++)this.tracks[b].trim(0,this.duration);return this},optimize:function(){for(var b=0;b<this.tracks.length;b++)this.tracks[b].optimize();return this}});Object.assign(Rc.prototype,{load:function(b,f,c,a){var d=this;(new $a(d.manager)).load(b,function(b){f(d.parse(JSON.parse(b)))},c,a)},setTextures:function(b){this.textures=b},parse:function(b){var f=this.textures,c=new Ee[b.type];void 0!==b.uuid&&(c.uuid=b.uuid);void 0!==b.name&&(c.name=b.name);void 0!==b.color&&c.color.setHex(b.color);void 0!==b.roughness&&(c.roughness=b.roughness);void 0!==b.metalness&&(c.metalness=b.metalness);void 0!==b.emissive&&c.emissive.setHex(b.emissive);void 0!==b.specular&&c.specular.setHex(b.specular);void 0!==b.shininess&&(c.shininess=b.shininess);void 0!==b.clearCoat&&(c.clearCoat=b.clearCoat);void 0!==b.clearCoatRoughness&&(c.clearCoatRoughness=b.clearCoatRoughness);void 0!==b.uniforms&&(c.uniforms=b.uniforms);void 0!==b.vertexShader&&(c.vertexShader=b.vertexShader);void 0!==b.fragmentShader&&(c.fragmentShader=b.fragmentShader);void 0!==b.vertexColors&&(c.vertexColors=b.vertexColors);void 0!==b.fog&&(c.fog=b.fog);void 0!==b.flatShading&&(c.flatShading=b.flatShading);void 0!==b.blending&&(c.blending=b.blending);void 0!==b.side&&(c.side=b.side);void 0!==b.opacity&&(c.opacity=b.opacity);void 0!==b.transparent&&(c.transparent=b.transparent);void 0!==b.alphaTest&&(c.alphaTest=b.alphaTest);void 0!==b.depthTest&&(c.depthTest=b.depthTest);void 0!==b.depthWrite&&(c.depthWrite=b.depthWrite);void 0!==b.colorWrite&&(c.colorWrite=b.colorWrite);void 0!==b.wireframe&&(c.wireframe=b.wireframe);void 0!==b.wireframeLinewidth&&(c.wireframeLinewidth=b.wireframeLinewidth);void 0!==b.wireframeLinecap&&(c.wireframeLinecap=b.wireframeLinecap);void 0!==b.wireframeLinejoin&&(c.wireframeLinejoin=b.wireframeLinejoin);void 0!==b.rotation&&(c.rotation=b.rotation);1!==b.linewidth&&(c.linewidth=b.linewidth);void 0!==b.dashSize&&(c.dashSize=b.dashSize);void 0!==b.gapSize&&(c.gapSize=b.gapSize);void 0!==b.scale&&(c.scale=b.scale);void 0!==b.skinning&&(c.skinning=b.skinning);void 0!==b.morphTargets&&(c.morphTargets=b.morphTargets);void 0!==b.dithering&&(c.dithering=b.dithering);void 0!==b.visible&&(c.visible=b.visible);void 0!==b.userData&&(c.userData=b.userData);void 0!==b.shading&&(c.flatShading=1===b.shading);void 0!==b.size&&(c.size=b.size);void 0!==b.sizeAttenuation&&(c.sizeAttenuation=b.sizeAttenuation);void 0!==b.map&&(c.map=f[b.map]);void 0!==b.alphaMap&&(c.alphaMap=f[b.alphaMap],c.transparent=!0);void 0!==b.bumpMap&&(c.bumpMap=f[b.bumpMap]);void 0!==b.bumpScale&&(c.bumpScale=b.bumpScale);void 0!==b.normalMap&&(c.normalMap=f[b.normalMap]);if(void 0!==b.normalScale){var a=b.normalScale;!1===Array.isArray(a)&&(a=[a,a]);c.normalScale=(new d).fromArray(a)}void 0!==b.displacementMap&&(c.displacementMap=f[b.displacementMap]);void 0!==b.displacementScale&&(c.displacementScale=b.displacementScale);void 0!==b.displacementBias&&(c.displacementBias=b.displacementBias);void 0!==b.roughnessMap&&(c.roughnessMap=f[b.roughnessMap]);void 0!==b.metalnessMap&&(c.metalnessMap=f[b.metalnessMap]);void 0!==b.emissiveMap&&(c.emissiveMap=f[b.emissiveMap]);void 0!==b.emissiveIntensity&&(c.emissiveIntensity=b.emissiveIntensity);void 0!==b.specularMap&&(c.specularMap=f[b.specularMap]);void 0!==b.envMap&&(c.envMap=f[b.envMap]);void 0!==b.reflectivity&&(c.reflectivity=b.reflectivity);void 0!==b.lightMap&&(c.lightMap=f[b.lightMap]);void 0!==b.lightMapIntensity&&(c.lightMapIntensity=b.lightMapIntensity);void 0!==b.aoMap&&(c.aoMap=f[b.aoMap]);void 0!==b.aoMapIntensity&&(c.aoMapIntensity=b.aoMapIntensity);void 0!==b.gradientMap&&(c.gradientMap=f[b.gradientMap]);return c}});Object.assign(ed.prototype,{load:function(b,f,c,a){var d=this;(new $a(d.manager)).load(b,function(b){f(d.parse(JSON.parse(b)))},c,a)},parse:function(b){var f=new ma,c=b.data.index;void 0!==c&&(c=new Td[c.type](c.array),f.setIndex(new ja(c,1)));var a=b.data.attributes,d;for(d in a){var e=a[d],c=new Td[e.type](e.array);f.addAttribute(d,new ja(c,e.itemSize,e.normalized))}d=b.data.groups||b.data.drawcalls||b.data.offsets;if(void 0!==d)for(c=0,a=d.length;c!==a;++c)e=d[c],f.addGroup(e.start,e.count,e.materialIndex);b=b.data.boundingSphere;void 0!==b&&(d=new h,void 0!==b.center&&d.fromArray(b.center),f.boundingSphere=new Ba(d,b.radius));return f}});var Td={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Wb.Handlers={handlers:[],add:function(b,f){this.handlers.push(b,f)},get:function(b){for(var f=this.handlers,c=0,a=f.length;c<a;c+=2){var d=f[c+1];if(f[c].test(b))return d}return null}};Object.assign(Wb.prototype,{crossOrigin:void 0,extractUrlBase:function(b){b=b.split("/");if(1===b.length)return"./";b.pop();return b.join("/")+"/"},initMaterials:function(b,f,c){for(var a=[],d=0;d<b.length;++d)a[d]=this.createMaterial(b[d],f,c);return a},createMaterial:function(){var b={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},f=new Y,c=new Ec,a=new Rc;return function(d,k,e){function g(b,f,a,d,g){b=k+b;var l=Wb.Handlers.get(b);null!==l?b=l.load(b):(c.setCrossOrigin(e),b=c.load(b));void 0!==f&&(b.repeat.fromArray(f),1!==f[0]&&(b.wrapS=1E3),1!==f[1]&&(b.wrapT=1E3));void 0!==a&&b.offset.fromArray(a);void 0!==d&&("repeat"===d[0]&&(b.wrapS=1E3),"mirror"===d[0]&&(b.wrapS=1002),"repeat"===d[1]&&(b.wrapT=1E3),"mirror"===d[1]&&(b.wrapT=1002));void 0!==g&&(b.anisotropy=g);f=oa.generateUUID();h[f]=b;return f}var h={},l={uuid:oa.generateUUID(),type:"MeshLambertMaterial"},w;for(w in d){var p=d[w];switch(w){case "DbgName":l.name=p;break;case "blending":l.blending=b[p];break;case "colorDiffuse":l.color=f.fromArray(p).getHex();break;case "colorSpecular":l.specular=f.fromArray(p).getHex();break;case "colorEmissive":l.emissive=f.fromArray(p).getHex();break;case "specularCoef":l.shininess=p;break;case "shading":"basic"===p.toLowerCase()&&(l.type="Mal");"phong"===p.toLowerCase()&&(l.type="MeshPhongMaterial");"standard"===p.toLowerCase()&&(l.type="MeshStandardMaterial");break;case "mapDiffuse":l.map=g(p,d.mapDiffuseRepeat,d.mapDiffuseOffset,d.mapDiffuseWrap,d.mapDiffuseAnisotropy);break;case "mapEmissive":l.emissiveMap=g(p,d.mapEmissiveRepeat,d.mapEmissiveOffset,d.mapEmissiveWrap,d.mapEmissiveAnisotropy);break;case "mapLight":l.lightMap=g(p,d.mapLightRepeat,d.mapLightOffset,d.mapLightWrap,d.mapLightAnisotropy);break;case "mapAO":l.aoMap=g(p,d.mapAORepeat,d.mapAOOffset,d.mapAOWrap,d.mapAOAnisotropy);break;case "mapBump":l.bumpMap=g(p,d.mapBumpRepeat,d.mapBumpOffset,d.mapBumpWrap,d.mapBumpAnisotropy);break;case "mapBumpScale":l.bumpScale=p;break;case "mapNormal":l.normalMap=g(p,d.mapNormalRepeat,d.mapNormalOffset,d.mapNormalWrap,d.mapNormalAnisotropy);break;case "mapNormalFactor":l.normalScale=[p,p];break;case "mapSpecular":l.specularMap=g(p,d.mapSpecularRepeat,d.mapSpecularOffset,d.mapSpecularWrap,d.mapSpecularAnisotropy);break;case "mapMetalness":l.metalnessMap=g(p,d.mapMetalnessRepeat,d.mapMetalnessOffset,d.mapMetalnessWrap,d.mapMetalnessAnisotropy);break;case "mapRoughness":l.roughnessMap=g(p,d.mapRoughnessRepeat,d.mapRoughnessOffset,d.mapRoughnessWrap,d.mapRoughnessAnisotropy);break;case "mapAlpha":l.alphaMap=g(p,d.mapAlphaRepeat,d.mapAlphaOffset,d.mapAlphaWrap,d.mapAlphaAnisotropy);break;case "flipSided":l.side=1;break;case "doubleSided":l.side=2;break;case "transparency":l.opacity=p;break;case "depthTest":case "depthWrite":case "colorWrite":case "opacity":case "reflectivity":case "transparent":case "visible":case "wireframe":l[w]=p;break;case "vertexColors":!0===p&&(l.vertexColors=2),"face"===p&&(l.vertexColors=1)}}"Mal"===l.type&&delete l.emissive;"MeshPhongMaterial"!==l.type&&delete l.specular;1>l.opacity&&(l.transparent=!0);a.setTextures(h);return a.parse(l)}}()});Object.assign(fd.prototype,{load:function(b,f,c,a){var d=this,k=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:Wb.prototype.extractUrlBase(b),e=new $a(this.manager);e.setWithCredentials(this.withCredentials);e.load(b,function(b){b=JSON.parse(b);var c=b.metadata;if(void 0!==c&&(c=c.type,void 0!==c&&("object"===c.toLowerCase()||"scene"===c.toLowerCase())))return;b=d.parse(b,k);f(b.geometry,b.materials)},c,a)},setTexturePath:function(b){this.texturePath=b},parse:function(){return function(b,f){void 0!==b.data&&(b=b.data);b.scale=void 0!==b.scale?1/b.scale:1;var c=new qa,a=b,e,g,l,w,p,m,u,y,t,x,v,q,D,C,A=a.faces;t=a.vertices;var z=a.normals,B=a.colors;m=a.scale;var F=0;if(void 0!==a.uvs){for(e=0;e<a.uvs.length;e++)a.uvs[e].length&&F++;for(e=0;e<F;e++)c.faceVertexUvs[e]=[]}w=0;for(p=t.length;w<p;)e=new h,e.x=t[w++]*m,e.y=t[w++]*m,e.z=t[w++]*m,c.vertices.push(e);w=0;for(p=A.length;w<p;)if(t=A[w++],x=t&1,l=t&2,e=t&8,u=t&16,v=t&32,m=t&64,t&=128,x){x=new Sa;x.a=A[w];x.b=A[w+1];x.c=A[w+3];q=new Sa;q.a=A[w+1];q.b=A[w+2];q.c=A[w+3];w+=4;l&&(l=A[w++],x.materialIndex=l,q.materialIndex=l);l=c.faces.length;if(e)for(e=0;e<F;e++)for(D=a.uvs[e],c.faceVertexUvs[e][l]=[],c.faceVertexUvs[e][l+1]=[],g=0;4>g;g++)y=A[w++],C=D[2*y],y=D[2*y+1],C=new d(C,y),2!==g&&c.faceVertexUvs[e][l].push(C),0!==g&&c.faceVertexUvs[e][l+1].push(C);u&&(u=3*A[w++],x.normal.set(z[u++],z[u++],z[u]),q.normal.copy(x.normal));if(v)for(e=0;4>e;e++)u=3*A[w++],v=new h(z[u++],z[u++],z[u]),2!==e&&x.vertexNormals.push(v),0!==e&&q.vertexNormals.push(v);m&&(m=A[w++],m=B[m],x.color.setHex(m),q.color.setHex(m));if(t)for(e=0;4>e;e++)m=A[w++],m=B[m],2!==e&&x.vertexColors.push(new Y(m)),0!==e&&q.vertexColors.push(new Y(m));c.faces.push(x);c.faces.push(q)}else{x=new Sa;x.a=A[w++];x.b=A[w++];x.c=A[w++];l&&(l=A[w++],x.materialIndex=l);l=c.faces.length;if(e)for(e=0;e<F;e++)for(D=a.uvs[e],c.faceVertexUvs[e][l]=[],g=0;3>g;g++)y=A[w++],C=D[2*y],y=D[2*y+1],C=new d(C,y),c.faceVertexUvs[e][l].push(C);u&&(u=3*A[w++],x.normal.set(z[u++],z[u++],z[u]));if(v)for(e=0;3>e;e++)u=3*A[w++],v=new h(z[u++],z[u++],z[u]),x.vertexNormals.push(v);m&&(m=A[w++],x.color.setHex(B[m]));if(t)for(e=0;3>e;e++)m=A[w++],x.vertexColors.push(new Y(B[m]));c.faces.push(x)}a=b;w=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(p=0,A=a.skinWeights.length;p<A;p+=w)c.skinWeights.push(new n(a.skinWeights[p],1<w?a.skinWeights[p+1]:0,2<w?a.skinWeights[p+2]:0,3<w?a.skinWeights[p+3]:0));if(a.skinIndices)for(p=0,A=a.skinIndices.length;p<A;p+=w)c.skinIndices.push(new n(a.skinIndices[p],1<w?a.skinIndices[p+1]:0,2<w?a.skinIndices[p+2]:0,3<w?a.skinIndices[p+3]:0));c.bones=a.bones;p=b;A=p.scale;if(void 0!==p.morphTargets)for(a=0,w=p.morphTargets.length;a<w;a++)for(c.morphTargets[a]={},c.morphTargets[a].name=p.morphTargets[a].name,c.morphTargets[a].vertices=[],z=c.morphTargets[a].vertices,B=p.morphTargets[a].vertices,F=0,t=B.length;F<t;F+=3)m=new h,m.x=B[F]*A,m.y=B[F+1]*A,m.z=B[F+2]*A,z.push(m);if(void 0!==p.morphColors&&0<p.morphColors.length)for(A=c.faces,p=p.morphColors[0].colors,a=0,w=A.length;a<w;a++)A[a].color.fromArray(p,3*a);p=b;a=[];w=[];void 0!==p.animation&&w.push(p.animation);void 0!==p.animations&&(p.animations.length?w=w.concat(p.animations):w.push(p.animations));for(p=0;p<w.length;p++)(A=ab.parseAnimation(w[p],c.bones))&&a.push(A);c.morphTargets&&(w=ab.CreateClipsFromMorphTargetSequences(c.morphTargets,10),a=a.concat(w));0<a.length&&(c.animations=a);c.computeFaceNormals();c.computeBoundingSphere();if(void 0===b.materials||0===b.materials.length)return{geometry:c};a=Wb.prototype.initMaterials(b.materials,f,this.crossOrigin);return{geometry:c,materials:a}}}()});Object.assign(Hd.prototype,{load:function(b,f,c,a){""===this.texturePath&&(this.texturePath=b.substring(0,b.lastIndexOf("/")+1));var d=this;(new $a(d.manager)).load(b,function(b){var c=null;try{c=JSON.parse(b)}catch(R){void 0!==a&&a(R);return}b=c.metadata;void 0!==b&&void 0!==b.type&&"geometry"!==b.type.toLowerCase()&&d.parse(c,f)},c,a)},setTexturePath:function(b){this.texturePath=b},setCrossOrigin:function(b){this.crossOrigin=b},parse:function(b,f){var c=this.parseGeometries(b.geometries),a=this.parseImages(b.images,function(){void 0!==f&&f(d)}),a=this.parseTextures(b.textures,a),a=this.parseMaterials(b.materials,a),d=this.parseObject(b.object,c,a);b.animations&&(d.animations=this.parseAnimations(b.animations));void 0!==b.images&&0!==b.images.length||void 0===f||f(d);return d},parseGeometries:function(b){var f={};if(void 0!==b)for(var c=new fd,a=new ed,d=0,e=b.length;d<e;d++){var g,h=b[d];switch(h.type){case "PlaneGeometry":case "PlaneBufferGeometry":g=new Yb[h.type](h.width,h.height,h.widthSegments,h.heightSegments);break;case "BoxGeometry":case "By":case "CubeGeometry":g=new Yb[h.type](h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":g=new Yb[h.type](h.radius,h.segments,h.thetaStart,h.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":g=new Yb[h.type](h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":g=new Yb[h.type](h.radius,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":g=new Yb[h.type](h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case "BufferGeometry":g=a.parse(h);break;case "Geometry":g=c.parse(h,this.texturePath).geometry;break;default:continue}g.uuid=h.uuid;void 0!==h.name&&(g.name=h.name);f[h.uuid]=g}return f},parseMaterials:function(b,f){var c={};if(void 0!==b){var a=new Rc;a.setTextures(f);for(var d=0,e=b.length;d<e;d++){var g=b[d];if("MultiMaterial"===g.type){for(var h=[],l=0;l<g.materials.length;l++)h.push(a.parse(g.materials[l]));c[g.uuid]=h}else c[g.uuid]=a.parse(g)}}return c},parseAnimations:function(b){for(var f=[],c=0;c<b.length;c++){var a=ab.parse(b[c]);f.push(a)}return f},parseImages:function(b,f){function c(b){a.manager.itemStart(b);return g.load(b,function(){a.manager.itemEnd(b)},void 0,function(){a.manager.itemEnd(b);a.manager.itemError(b)})}var a=this,d={};if(void 0!==b&&0<b.length){var e=new bd(f),g=new oc(e);g.setCrossOrigin(this.crossOrigin);for(var e=0,h=b.length;e<h;e++){var l=b[e],w=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:a.texturePath+l.url;d[l.uuid]=c(w)}}return d},parseTextures:function(b,f){function c(b,c){return"number"===typeof b?b:c[b]}var a={};if(void 0!==b)for(var d=0,e=b.length;d<e;d++){var g=b[d],h=new m(f[g.image]);h.needsUpdate=!0;h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);void 0!==g.mapping&&(h.mapping=c(g.mapping,Fe));void 0!==g.offset&&h.offset.fromArray(g.offset);void 0!==g.repeat&&h.repeat.fromArray(g.repeat);void 0!==g.center&&h.center.fromArray(g.center);void 0!==g.rotation&&(h.rotation=g.rotation);void 0!==g.wrap&&(h.wrapS=c(g.wrap[0],Ud),h.wrapT=c(g.wrap[1],Ud));void 0!==g.minFilter&&(h.minFilter=c(g.minFilter,Vd));void 0!==g.magFilter&&(h.magFilter=c(g.magFilter,Vd));void 0!==g.anisotropy&&(h.anisotropy=g.anisotropy);void 0!==g.flipY&&(h.flipY=g.flipY);a[g.uuid]=h}return a},parseObject:function(){var b=new e;return function(c,a,d){function f(b){if(void 0!==b){if(Array.isArray(b)){for(var c=[],f=0,a=b.length;f<a;f++)c.push(d[b[f]]);return c}return d[b]}}var e;switch(c.type){case "Scene":e=new yc;void 0!==c.background&&Number.isInteger(c.background)&&(e.background=new Y(c.background));void 0!==c.fog&&"Fog"===c.fog.type&&(e.fog=new Kb(c.fog.color,c.fog.near,c.fog.far));break;case "Pa":e=new db(c.fov,c.aspect,c.near,c.far);void 0!==c.focus&&(e.focus=c.focus);void 0!==c.zoom&&(e.zoom=c.zoom);void 0!==c.filmGauge&&(e.filmGauge=c.filmGauge);void 0!==c.filmOffset&&(e.filmOffset=c.filmOffset);void 0!==c.view&&(e.view=Object.assign({},c.view));break;case "OrthographicCamera":e=new Ua(c.left,c.right,c.top,c.bottom,c.near,c.far);break;case "AmbientLight":e=new Lc(c.color,c.intensity);break;case "Dt":e=new Kc(c.color,c.intensity);break;case "PointLight":e=new Ic(c.color,c.intensity,c.distance,c.decay);break;case "RectAreaLight":e=new Mc(c.color,c.intensity,c.width,c.height);break;case "SpotLight":e=new Hc(c.color,c.intensity,c.distance,c.angle,c.penumbra,c.decay);break;case "HemisphereLight":e=new Fc(c.color,c.groundColor,c.intensity);break;case "SkinnedMesh":case "Mesh":e=a[c.geometry];var k=f(c.material);e=e.bones&&0<e.bones.length?new Bc(e,k):new La(e,k);break;case "Line":e=new Wa(a[c.geometry],f(c.material),c.mode);break;case "LineLoop":e=new Cc(a[c.geometry],f(c.material));break;case "LineSegments":e=new Ia(a[c.geometry],f(c.material));break;case "PointCloud":case "Points":e=new hc(a[c.geometry],f(c.material));break;case "Sprite":e=new zc(f(c.material));break;case "Group":e=new ic;break;default:e=new ea}e.uuid=c.uuid;void 0!==c.name&&(e.name=c.name);void 0!==c.matrix?(b.fromArray(c.matrix),b.decompose(e.position,e.quaternion,e.scale)):(void 0!==c.position&&e.position.fromArray(c.position),void 0!==c.rotation&&e.rotation.fromArray(c.rotation),void 0!==c.quaternion&&e.quaternion.fromArray(c.quaternion),void 0!==c.scale&&e.scale.fromArray(c.scale));void 0!==c.castShadow&&(e.castShadow=c.castShadow);void 0!==c.receiveShadow&&(e.receiveShadow=c.receiveShadow);c.shadow&&(void 0!==c.shadow.bias&&(e.shadow.bias=c.shadow.bias),void 0!==c.shadow.radius&&(e.shadow.radius=c.shadow.radius),void 0!==c.shadow.mapSize&&e.shadow.mapSize.fromArray(c.shadow.mapSize),void 0!==c.shadow.camera&&(e.shadow.camera=this.parseObject(c.shadow.camera)));void 0!==c.visible&&(e.visible=c.visible);void 0!==c.userData&&(e.userData=c.userData);if(void 0!==c.children)for(c=c.children,k=0;k<c.length;k++)e.add(this.parseObject(c[k],a,d));return e}}()});var Fe={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Ud={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Vd={Nr:1003,NearestMipMapNr:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNr:1007,LinearMipMapLinearFilter:1008};Object.assign(pa.prototype,{getPoint:function(){return null},getPointAt:function(b,c){var f=this.getUtoTmapping(b);return this.getPoint(f,c)},getPoints:function(b){void 0===b&&(b=5);for(var c=[],a=0;a<=b;a++)c.push(this.getPoint(a/b));return c},getSpacedPoints:function(b){void 0===b&&(b=5);for(var c=[],a=0;a<=b;a++)c.push(this.getPointAt(a/b));return c},getLength:function(){var b=this.getLengths();return b[b.length-1]},getLengths:function(b){void 0===b&&(b=this.arcLengthDivisions);if(this.cacheArcLengths&&this.cacheArcLengths.length===b+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var c=[],a,d=this.getPoint(0),e,g=0;c.push(0);for(e=1;e<=b;e++)a=this.getPoint(e/b),g+=a.distanceTo(d),c.push(g),d=a;return this.cacheArcLengths=c},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(b,c){var f=this.getLengths(),a,d=f.length,e;e=c?c:b*f[d-1];for(var g=0,h=d-1,l;g<=h;)if(a=Math.floor(g+(h-g)/2),l=f[a]-e,0>l)g=a+1;else if(0<l)h=a-1;else{h=a;break}a=h;if(f[a]===e)return a/(d-1);g=f[a];return(a+(e-g)/(f[a+1]-g))/(d-1)},getTangent:function(b){var c=b-1E-4;b+=1E-4;0>c&&(c=0);1<b&&(b=1);c=this.getPoint(c);return this.getPoint(b).clone().sub(c).normalize()},getTangentAt:function(b){b=this.getUtoTmapping(b);return this.getTangent(b)},computeFrenetFrames:function(b,c){var f=new h,a=[],d=[],g=[],l=new h,w=new e,p,m;for(p=0;p<=b;p++)m=p/b,a[p]=this.getTangentAt(m),a[p].normalize();d[0]=new h;g[0]=new h;p=Number.MAX_VALUE;m=Math.abs(a[0].x);var u=Math.abs(a[0].y),y=Math.abs(a[0].z);m<=p&&(p=m,f.set(1,0,0));u<=p&&(p=u,f.set(0,1,0));y<=p&&f.set(0,0,1);l.crossVectors(a[0],f).normalize();d[0].crossVectors(a[0],l);g[0].crossVectors(a[0],d[0]);for(p=1;p<=b;p++)d[p]=d[p-1].clone(),g[p]=g[p-1].clone(),l.crossVectors(a[p-1],a[p]),l.length()>Number.EPSILON&&(l.normalize(),f=Math.acos(oa.clamp(a[p-1].dot(a[p]),-1,1)),d[p].applyMatrix4(w.makeRotationAxis(l,f))),g[p].crossVectors(a[p],d[p]);if(!0===c)for(f=Math.acos(oa.clamp(d[0].dot(d[b]),-1,1)),f/=b,0<a[0].dot(l.crossVectors(d[0],d[b]))&&(f=-f),p=1;p<=b;p++)d[p].applyMatrix4(w.makeRotationAxis(a[p],f*p)),g[p].crossVectors(a[p],d[p]);return{tangents:a,normals:d,binormals:g}},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.arcLengthDivisions=b.arcLengthDivisions;return this}});Ya.prototype=Object.create(pa.prototype);Ya.prototype.constructor=Ya;Ya.prototype.isLineCurve=!0;Ya.prototype.getPoint=function(b,c){var f=c||new d;1===b?f.copy(this.v2):(f.copy(this.v2).sub(this.v1),f.multiplyScalar(b).add(this.v1));return f};Ya.prototype.getPointAt=function(b,c){return this.getPoint(b,c)};Ya.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};Ya.prototype.copy=function(b){pa.prototype.copy.call(this,b);this.v1.copy(b.v1);this.v2.copy(b.v2);return this};Bb.prototype=Object.assign(Object.create(pa.prototype),{constructor:Bb,add:function(b){this.curves.push(b)},closePath:function(){var b=this.curves[0].getPoint(0),c=this.curves[this.curves.length-1].getPoint(1);b.equals(c)||this.curves.push(new Ya(c,b))},getPoint:function(b){var c=b*this.getLength(),a=this.getCurveLengths();for(b=0;b<a.length;){if(a[b]>=c)return c=a[b]-c,b=this.curves[b],a=b.getLength(),b.getPointAt(0===a?0:1-c/a);b++}return null},getLength:function(){var b=this.getCurveLengths();return b[b.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var b=[],c=0,a=0,d=this.curves.length;a<d;a++)c+=this.curves[a].getLength(),b.push(c);return this.cacheLengths=b},getSpacedPoints:function(b){void 0===b&&(b=40);for(var c=[],a=0;a<=b;a++)c.push(this.getPoint(a/b));this.autoClose&&c.push(c[0]);return c},getPoints:function(b){b=b||12;for(var c=[],a,d=0,e=this.curves;d<e.length;d++)for(var g=e[d],g=g.getPoints(g&&g.isEllipseCurve?2*b:g&&g.isLineCurve?1:g&&g.isSplineCurve?b*g.points.length:b),h=0;h<g.length;h++){var l=g[h];a&&a.equals(l)||(c.push(l),a=l)}this.autoClose&&1<c.length&&!c[c.length-1].equals(c[0])&&c.push(c[0]);return c},copy:function(b){pa.prototype.copy.call(this,b);this.curves=[];for(var c=0,a=b.curves.length;c<a;c++)this.curves.push(b.curves[c].clone());this.autoClose=b.autoClose;return this}});bb.prototype=Object.create(pa.prototype);bb.prototype.constructor=bb;bb.prototype.isEllipseCurve=!0;bb.prototype.getPoint=function(b,c){for(var f=c||new d,a=2*Math.PI,e=this.aEndAngle-this.aStartAngle,g=Math.abs(e)<Number.EPSILON;0>e;)e+=a;for(;e>a;)e-=a;e<Number.EPSILON&&(e=g?0:a);!0!==this.aClockwise||g||(e=e===a?-a:e-a);var e=this.aStartAngle+b*e,a=this.aX+this.xRadius*Math.cos(e),h=this.aY+this.yRadius*Math.sin(e);if(0!==this.aRotation)var e=Math.cos(this.aRotation),g=Math.sin(this.aRotation),l=a-this.aX,h=h-this.aY,a=l*e-h*g+this.aX,h=l*g+h*e+this.aY;return f.set(a,h)};bb.prototype.copy=function(b){pa.prototype.copy.call(this,b);this.aX=b.aX;this.aY=b.aY;this.xRadius=b.xRadius;this.yRadius=b.yRadius;this.aStartAngle=b.aStartAngle;this.aEndAngle=b.aEndAngle;this.aClockwise=b.aClockwise;this.aRotation=b.aRotation;return this};jb.prototype=Object.create(pa.prototype);jb.prototype.constructor=jb;jb.prototype.isSplineCurve=!0;jb.prototype.getPoint=function(b,c){var f=c||new d,a=this.points,e=(a.length-1)*b,g=Math.floor(e),e=e-g,h=a[0===g?g:g-1],l=a[g],w=a[g>a.length-2?a.length-1:g+1],a=a[g>a.length-3?a.length-1:g+2];f.set(Id(e,h.x,l.x,w.x,a.x),Id(e,h.y,l.y,w.y,a.y));return f};jb.prototype.copy=function(b){pa.prototype.copy.call(this,b);this.points=[];for(var c=0,a=b.points.length;c<a;c++)this.points.push(b.points[c].clone());return this};kb.prototype=Object.create(pa.prototype);kb.prototype.constructor=kb;kb.prototype.isCubicBezierCurve=!0;kb.prototype.getPoint=function(b,c){var f=c||new d,a=this.v0,e=this.v1,g=this.v2,h=this.v3;f.set(rc(b,a.x,e.x,g.x,h.x),rc(b,a.y,e.y,g.y,h.y));return f};kb.prototype.copy=function(b){pa.prototype.copy.call(this,b);this.v0.copy(b.v0);this.v1.copy(b.v1);this.v2.copy(b.v2);this.v3.copy(b.v3);return this};lb.prototype=Object.create(pa.prototype);lb.prototype.constructor=lb;lb.prototype.isQuadraticBezierCurve=!0;lb.prototype.getPoint=function(b,c){var f=c||new d,a=this.v0,e=this.v1,g=this.v2;f.set(qc(b,a.x,e.x,g.x),qc(b,a.y,e.y,g.y));return f};lb.prototype.copy=function(b){pa.prototype.copy.call(this,b);this.v0.copy(b.v0);this.v1.copy(b.v1);this.v2.copy(b.v2);return this};mb.prototype=Object.assign(Object.create(Bb.prototype),{constructor:mb,setFromPoints:function(b){this.moveTo(b[0].x,b[0].y);for(var c=1,a=b.length;c<a;c++)this.lineTo(b[c].x,b[c].y)},moveTo:function(b,c){this.currentPoint.set(b,c)},lineTo:function(b,c){var f=new Ya(this.currentPoint.clone(),new d(b,c));this.curves.push(f);this.currentPoint.set(b,c)},quadraticCurveTo:function(b,c,a,e){b=new lb(this.currentPoint.clone(),new d(b,c),new d(a,e));this.curves.push(b);this.currentPoint.set(a,e)},bezierCurveTo:function(b,c,a,e,g,h){b=new kb(this.currentPoint.clone(),new d(b,c),new d(a,e),new d(g,h));this.curves.push(b);this.currentPoint.set(g,h)},splineThru:function(b){var c=[this.currentPoint.clone()].concat(b),c=new jb(c);this.curves.push(c);this.currentPoint.copy(b[b.length-1])},arc:function(b,c,a,d,e,g){this.absarc(b+this.currentPoint.x,c+this.currentPoint.y,a,d,e,g)},absarc:function(b,c,a,d,e,g){this.absellipse(b,c,a,a,d,e,g)},ellipse:function(b,c,a,d,e,g,h,l){this.absellipse(b+this.currentPoint.x,c+this.currentPoint.y,a,d,e,g,h,l)},absellipse:function(b,c,a,d,e,g,h,l){b=new bb(b,c,a,d,e,g,h,l);0<this.curves.length&&(c=b.getPoint(0),c.equals(this.currentPoint)||this.lineTo(c.x,c.y));this.curves.push(b);b=b.getPoint(1);this.currentPoint.copy(b)},copy:function(b){Bb.prototype.copy.call(this,b);this.currentPoint.copy(b.currentPoint);return this}});Cb.prototype=Object.assign(Object.create(mb.prototype),{constructor:Cb,getPointsHoles:function(b){for(var c=[],a=0,d=this.holes.length;a<d;a++)c[a]=this.holes[a].getPoints(b);return c},extractPoints:function(b){return{shape:this.getPoints(b),holes:this.getPointsHoles(b)}},copy:function(b){mb.prototype.copy.call(this,b);this.holes=[];for(var c=0,a=b.holes.length;c<a;c++)this.holes.push(b.holes[c].clone());return this}});Object.assign(gd.prototype,{moveTo:function(b,c){this.currentPath=new mb;this.subPaths.push(this.currentPath);this.currentPath.moveTo(b,c)},lineTo:function(b,c){this.currentPath.lineTo(b,c)},quadraticCurveTo:function(b,c,a,d){this.currentPath.quadraticCurveTo(b,c,a,d)},bezierCurveTo:function(b,c,a,d,e,g){this.currentPath.bezierCurveTo(b,c,a,d,e,g)},splineThru:function(b){this.currentPath.splineThru(b)},toShapes:function(b,c){function f(b){for(var c=[],f=0,a=b.length;f<a;f++){var d=b[f],e=new Cb;e.curves=d.curves;c.push(e)}return c}function a(b,c){for(var f=c.length,a=!1,d=f-1,e=0;e<f;d=e++){var k=c[d],g=c[e],h=g.x-k.x,l=g.y-k.y;if(Math.abs(l)>Number.EPSILON){if(0>l&&(k=c[e],h=-h,g=c[d],l=-l),!(b.y<k.y||b.y>g.y))if(b.y===k.y){if(b.x===k.x)return!0}else{d=l*(b.x-k.x)-h*(b.y-k.y);if(0===d)return!0;0>d||(a=!a)}}else if(b.y===k.y&&(g.x<=b.x&&b.x<=k.x||k.x<=b.x&&b.x<=g.x))return!0}return a}var d=ib.isClockWise,e=this.subPaths;if(0===e.length)return[];if(!0===c)return f(e);var g,h,l,w=[];if(1===e.length)return h=e[0],l=new Cb,l.curves=h.curves,w.push(l),w;var p=!d(e[0].getPoints()),p=b?!p:p;l=[];var m=[],u=[],y=0,n;m[y]=void 0;u[y]=[];for(var t=0,x=e.length;t<x;t++)h=e[t],n=h.getPoints(),g=d(n),(g=b?!g:g)?(!p&&m[y]&&y++,m[y]={s:new Cb,p:n},m[y].s.curves=h.curves,p&&y++,u[y]=[]):u[y].push({h:h,p:n[0]});if(!m[0])return f(e);if(1<m.length){t=!1;h=[];d=0;for(e=m.length;d<e;d++)l[d]=[];d=0;for(e=m.length;d<e;d++)for(g=u[d],p=0;p<g.length;p++){y=g[p];n=!0;for(x=0;x<m.length;x++)a(y.p,m[x].p)&&(d!==x&&h.push({froms:d,tos:x,hole:p}),n?(n=!1,l[x].push(y)):t=!0);n&&l[d].push(y)}0<h.length&&(t||(u=l))}t=0;for(d=m.length;t<d;t++)for(l=m[t].s,w.push(l),h=u[t],e=0,g=h.length;e<g;e++)l.holes.push(h[e].h);return w}});Object.assign(hd.prototype,{isFont:!0,generateShapes:function(b,c,a){void 0===c&&(c=100);a=this.data;b=String(b).split("");var f=c/a.resolution,d=(a.boundingBox.yMax-a.boundingBox.yMin+a.underlineThickness)*f,e=0,k=0;c=[];for(var g=0;g<b.length;g++){var h=b[g];if("\n"===h)e=0,k-=d;else{var l;l=f;var w=e,p=k;if(h=a.glyphs[h]||a.glyphs["?"]){var m=new gd,u,y,n,t,x,v;if(h.o)for(var q=h._cachedOutline||(h._cachedOutline=h.o.split(" ")),D=0,A=q.length;D<A;)switch(q[D++]){case "m":u=q[D++]*l+w;y=q[D++]*l+p;m.moveTo(u,y);break;case "l":u=q[D++]*l+w;y=q[D++]*l+p;m.lineTo(u,y);break;case "q":u=q[D++]*l+w;y=q[D++]*l+p;n=q[D++]*l+w;t=q[D++]*l+p;m.quadraticCurveTo(n,t,u,y);break;case "b":u=q[D++]*l+w,y=q[D++]*l+p,n=q[D++]*l+w,t=q[D++]*l+p,x=q[D++]*l+w,v=q[D++]*l+p,m.bezierCurveTo(n,t,x,v,u,y)}l={offsetX:h.ha*l,path:m}}else l=void 0;e+=l.offsetX;c.push(l.path)}}a=[];b=0;for(f=c.length;b<f;b++)Array.prototype.push.apply(a,c[b].toShapes());return a}});Object.assign(Jd.prototype,{load:function(b,c,a,d){var f=this,e=new $a(this.manager);e.setPath(this.path);e.load(b,function(b){var a;try{a=JSON.parse(b)}catch(S){a=JSON.parse(b.substring(65,b.length-2))}b=f.parse(a);c&&c(b)},a,d)},parse:function(b){return new hd(b)},setPath:function(b){this.path=b;return this}});Object.assign(Kd.prototype,{getValue:function(b,c){this.bind();var f=this._bindings[this._targetGroup.nCachedObjects_];void 0!==f&&f.getValue(b,c)},setValue:function(b,c){for(var f=this._bindings,a=this._targetGroup.nCachedObjects_,d=f.length;a!==d;++a)f[a].setValue(b,c)},bind:function(){for(var b=this._bindings,c=this._targetGroup.nCachedObjects_,a=b.length;c!==a;++c)b[c].bind()},unbind:function(){for(var b=this._bindings,c=this._targetGroup.nCachedObjects_,a=b.length;c!==a;++c)b[c].unbind()}});Object.assign(Ja,{Composite:Kd,create:function(b,c,a){return b&&b.isAnimationObjectGroup?new Ja.Composite(b,c,a):new Ja(b,c,a)},sanitizeNodeName:function(b){return b.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:function(){var b=new RegExp("^"+/((?:[\w-]+[\/:])*)/.source+/([\w-\.]+)?/.source+/(?:\.([\w-]+)(?:\[(.+)\])?)?/.source+/\.([\w-]+)(?:\[(.+)\])?/.source+"$"),c=["material","materials","bones"];return function(f){f=b.exec(f);f={nodeName:f[2],objectName:f[3],objectIndex:f[4],propertyName:f[5],propertyIndex:f[6]};var a=f.nodeName&&f.nodeName.lastIndexOf(".");if(void 0!==a&&-1!==a){var d=f.nodeName.substring(a+1);-1!==c.indexOf(d)&&(f.nodeName=f.nodeName.substring(0,a),f.objectName=d)}return f}}(),findNode:function(b,c){if(!c||""===c||"root"===c||"."===c||-1===c||c===b.name||c===b.uuid)return b;if(b.skeleton){var f=function(b){for(var f=0;f<b.bones.length;f++){var a=b.bones[f];if(a.name===c)return a}return null}(b.skeleton);if(f)return f}if(b.children){var a=function(b){for(var f=0;f<b.length;f++){var d=b[f];if(d.name===c||d.uuid===c||(d=a(d.children)))return d}return null};if(f=a(b.children))return f}return null}});Object.assign(Ja.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(b,c){b[c]=this.node[this.propertyName]},function(b,c){for(var f=this.resolvedProperty,a=0,d=f.length;a!==d;++a)b[c++]=f[a]},function(b,c){b[c]=this.resolvedProperty[this.propertyIndex]},function(b,c){this.resolvedProperty.toArray(b,c)}],SetterByBindingTypeAndVersioning:[[function(b,c){this.targetObject[this.propertyName]=b[c]},function(b,c){this.targetObject[this.propertyName]=b[c];this.targetObject.needsUpdate=!0},function(b,c){this.targetObject[this.propertyName]=b[c];this.targetObject.mte=!0}],[function(b,c){for(var f=this.resolvedProperty,a=0,d=f.length;a!==d;++a)f[a]=b[c++]},function(b,c){for(var f=this.resolvedProperty,a=0,d=f.length;a!==d;++a)f[a]=b[c++];this.targetObject.needsUpdate=!0},function(b,c){for(var f=this.resolvedProperty,a=0,d=f.length;a!==d;++a)f[a]=b[c++];this.targetObject.mte=!0}],[function(b,c){this.resolvedProperty[this.propertyIndex]=b[c]},function(b,c){this.resolvedProperty[this.propertyIndex]=b[c];this.targetObject.needsUpdate=!0},function(b,c){this.resolvedProperty[this.propertyIndex]=b[c];this.targetObject.mte=!0}],[function(b,c){this.resolvedProperty.fromArray(b,c)},function(b,c){this.resolvedProperty.fromArray(b,c);this.targetObject.needsUpdate=!0},function(b,c){this.resolvedProperty.fromArray(b,c);this.targetObject.mte=!0}]],getValue:function(b,c){this.bind();this.getValue(b,c)},setValue:function(b,c){this.bind();this.setValue(b,c)},bind:function(){var b=this.node,c=this.parsedPath,a=c.objectName,d=c.propertyName,e=c.propertyIndex;b||(this.node=b=Ja.findNode(this.rootNode,c.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(b){if(a){c=c.objectIndex;switch(a){case "materials":if(!b.material||!b.material.materials)return;b=b.material.materials;break;case "bones":if(!b.skeleton)return;b=b.skeleton.bones;for(a=0;a<b.length;a++)if(b[a].name===c){c=a;break}break;default:if(void 0===b[a])return;b=b[a]}if(void 0!==c){if(void 0===b[c])return;b=b[c]}}c=b[d];if(void 0!==c){var g=this.Versioning.None;void 0!==b.needsUpdate?(g=this.Versioning.NeedsUpdate,this.targetObject=b):void 0!==b.mte&&(g=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=b);a=this.BindingType.Direct;if(void 0!==e){if("morphTargetInfluences"===d){if(!b.geometry)return;if(b.geometry.isBufferGeometry){if(!b.geometry.morphAttributes)return;for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(b.geometry.morphAttributes.position[a].name===e){e=a;break}}else{if(!b.geometry.morphTargets)return;for(a=0;a<this.node.geometry.morphTargets.length;a++)if(b.geometry.morphTargets[a].name===e){e=a;break}}}a=this.BindingType.ArrayElement;this.resolvedProperty=c;this.propertyIndex=e}else void 0!==c.fromArray&&void 0!==c.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(a=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=d;this.getValue=this.GetterByBindingType[a];this.setValue=this.SetterByBindingTypeAndVersioning[a][g]}}},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(Ja.prototype,{_getValue_unbound:Ja.prototype.getValue,_setValue_unbound:Ja.prototype.setValue});Object.assign(Ld.prototype,{isAnimationObjectGroup:!0,add:function(){for(var b=this._objects,c=b.length,a=this.nCachedObjects_,d=this._indicesByUUID,e=this._paths,g=this._parsedPaths,h=this._bindings,l=h.length,w=0,p=arguments.length;w!==p;++w){var m=arguments[w],u=m.uuid,y=d[u];if(void 0===y){y=c++;d[u]=y;b.push(m);for(var u=0,n=l;u!==n;++u)h[u].push(new Ja(m,e[u],g[u]))}else if(y<a){var t=--a,n=b[t];d[n.uuid]=y;b[y]=n;d[u]=t;b[t]=m;u=0;for(n=l;u!==n;++u){var x=h[u],v=x[y];x[y]=x[t];void 0===v&&(v=new Ja(m,e[u],g[u]));x[t]=v}}}this.nCachedObjects_=a},remove:function(){for(var b=this._objects,c=this.nCachedObjects_,a=this._indicesByUUID,d=this._bindings,e=d.length,g=0,h=arguments.length;g!==h;++g){var l=arguments[g],w=l.uuid,p=a[w];if(void 0!==p&&p>=c){var m=c++,u=b[m];a[u.uuid]=p;b[p]=u;a[w]=m;b[m]=l;l=0;for(w=e;l!==w;++l){var u=d[l],y=u[p];u[p]=u[m];u[m]=y}}}this.nCachedObjects_=c},uncache:function(){for(var b=this._objects,c=b.length,a=this.nCachedObjects_,d=this._indicesByUUID,e=this._bindings,g=e.length,h=0,l=arguments.length;h!==l;++h){var w=arguments[h].uuid,p=d[w];if(void 0!==p)if(delete d[w],p<a){var w=--a,m=b[w],u=--c,y=b[u];d[m.uuid]=p;b[p]=m;d[y.uuid]=w;b[w]=y;b.pop();m=0;for(y=g;m!==y;++m){var n=e[m],t=n[u];n[p]=n[w];n[w]=t;n.pop()}}else for(u=--c,y=b[u],d[y.uuid]=p,b[p]=y,b.pop(),m=0,y=g;m!==y;++m)n=e[m],n[p]=n[u],n.pop()}this.nCachedObjects_=a},subscribe_:function(b,c){var f=this._bindingsIndicesByPath,a=f[b],d=this._bindings;if(void 0!==a)return d[a];var e=this._paths,g=this._parsedPaths,h=this._objects,l=this.nCachedObjects_,w=Array(h.length),a=d.length;f[b]=a;e.push(b);g.push(c);d.push(w);f=l;for(a=h.length;f!==a;++f)w[f]=new Ja(h[f],b,c);return w},unsubscribe_:function(b){var c=this._bindingsIndicesByPath,a=c[b];if(void 0!==a){var d=this._paths,e=this._parsedPaths,g=this._bindings,h=g.length-1,l=g[h];c[b[h]]=a;g[a]=l;g.pop();e[a]=e[h];e.pop();d[a]=d[h];d.pop()}}});Sc.prototype.clone=function(){return new Sc(void 0===this.value.clone?this.value:this.value.clone())};id.prototype=Object.assign(Object.create(ma.prototype),{constructor:id,isInstancedBufferGeometry:!0,copy:function(b){ma.prototype.copy.call(this,b);this.maxInstancedCount=b.maxInstancedCount;return this},clone:function(){return(new this.constructor).copy(this)}});Object.defineProperties(jd.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(jd.prototype,{isInterleavedBufferAttribute:!0,setX:function(b,c){this.data.array[b*this.data.stride+this.offset]=c;return this},setY:function(b,c){this.data.array[b*this.data.stride+this.offset+1]=c;return this},setZ:function(b,c){this.data.array[b*this.data.stride+this.offset+2]=c;return this},setW:function(b,c){this.data.array[b*this.data.stride+this.offset+3]=c;return this},getX:function(b){return this.data.array[b*this.data.stride+this.offset]},getY:function(b){return this.data.array[b*this.data.stride+this.offset+1]},getZ:function(b){return this.data.array[b*this.data.stride+this.offset+2]},getW:function(b){return this.data.array[b*this.data.stride+this.offset+3]},setXY:function(b,c,a){b=b*this.data.stride+this.offset;this.data.array[b+0]=c;this.data.array[b+1]=a;return this},setXYZ:function(b,c,a,d){b=b*this.data.stride+this.offset;this.data.array[b+0]=c;this.data.array[b+1]=a;this.data.array[b+2]=d;return this},setXYZW:function(b,c,a,d,e){b=b*this.data.stride+this.offset;this.data.array[b+0]=c;this.data.array[b+1]=a;this.data.array[b+2]=d;this.data.array[b+3]=e;return this}});Object.defineProperty(Xb.prototype,"needsUpdate",{set:function(b){!0===b&&this.version++}});Object.assign(Xb.prototype,{isInterleavedBuffer:!0,setArray:function(b){this.count=void 0!==b?b.length/this.stride:0;this.array=b},setDynamic:function(b){this.dynamic=b;return this},copy:function(b){this.array=new b.array.constructor(b.array);this.count=b.count;this.stride=b.stride;this.dynamic=b.dynamic;return this},copyAt:function(b,c,a){b*=this.stride;a*=c.stride;for(var f=0,d=this.stride;f<d;f++)this.array[b+f]=c.array[a+f];return this},set:function(b,c){void 0===c&&(c=0);this.array.set(b,c);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(b){this.onUploadCallback=b;return this}});kd.prototype=Object.assign(Object.create(Xb.prototype),{constructor:kd,isInstancedInterleavedBuffer:!0,copy:function(b){Xb.prototype.copy.call(this,b);this.meshPerAttribute=b.meshPerAttribute;return this}});ld.prototype=Object.assign(Object.create(ja.prototype),{constructor:ld,isInstancedBufferAttribute:!0,copy:function(b){ja.prototype.copy.call(this,b);this.meshPerAttribute=b.meshPerAttribute;return this}});Object.assign(Md.prototype,{linePrecision:1,set:function(b,c){this.ray.set(b,c)},sa:function(b,c){c&&c.isPa?(this.ray.origin.setFromMatrixPosition(c.matrixWorld),this.ray.direction.set(b.x,b.y,.5).unproject(c).sub(this.ray.origin).normalize()):c&&c.isOrthographicCamera&&(this.ray.origin.set(b.x,b.y,(c.near+c.far)/(c.near-c.far)).unproject(c),this.ray.direction.set(0,0,-1).transformDirection(c.matrixWorld))},intersectObject:function(b,c){var f=[];md(b,this,f,c);f.sort(Nd);return f},is:function(b,c){var f=[];if(!1===Array.isArray(b))return f;for(var a=0,d=b.length;a<d;a++)md(b[a],this,f,c);f.sort(Nd);return f}});Object.assign(Od.prototype,{start:function(){this.oldTime=this.startTime=("undefined"===typeof performance?Date:performance).now();this.elapsedTime=0;this.running=!0},stop:function(){this.getElapsedTime();this.autoStart=this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var b=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var c=("undefined"===typeof performance?Date:performance).now(),b=(c-this.oldTime)/1E3;this.oldTime=c;this.elapsedTime+=b}return b}});Object.assign(Pd.prototype,{set:function(b,c,a){this.radius=b;this.phi=c;this.theta=a;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.radius=b.radius;this.phi=b.phi;this.theta=b.theta;return this},makeSafe:function(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return this},setFromVector3:function(b){this.radius=b.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(b.x,b.z),this.phi=Math.acos(oa.clamp(b.y/this.radius,-1,1)));return this}});Object.assign(Qd.prototype,{set:function(b,c,a){this.radius=b;this.theta=c;this.y=a;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){this.radius=b.radius;this.theta=b.theta;this.y=b.y;return this},setFromVector3:function(b){this.radius=Math.sqrt(b.x*b.x+b.z*b.z);this.theta=Math.atan2(b.x,b.z);this.y=b.y;return this}});sc.prototype=Object.create(Ia.prototype);sc.prototype.constructor=sc;sc.prototype.update=function(){function b(b,f,g,k){d.set(f,g,k).unproject(e);b=a[b];if(void 0!==b)for(f=c.getAttribute("position"),g=0,k=b.length;g<k;g++)f.setXYZ(b[g],d.x,d.y,d.z)}var c,a,d=new h,e=new Qa;return function(){c=this.geometry;a=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);b("c",0,0,-1);b("t",0,0,1);b("n1",-1,-1,-1);b("n2",1,-1,-1);b("n3",-1,1,-1);b("n4",1,1,-1);b("f1",-1,-1,1);b("f2",1,-1,1);b("f3",-1,1,1);b("f4",1,1,1);b("u1",.7,1.1,-1);b("u2",-.7,1.1,-1);b("u3",0,2,-1);b("cf1",-1,0,1);b("cf2",1,0,1);b("cf3",0,-1,1);b("cf4",0,1,1);b("cn1",-1,0,-1);b("cn2",1,0,-1);b("cn3",0,-1,-1);b("cn4",0,1,-1);c.getAttribute("position").needsUpdate=!0}}();Db.prototype=Object.create(Ia.prototype);Db.prototype.constructor=Db;Db.prototype.update=function(){var b=new u;return function(c){void 0!==this.object&&b.st(this.object);if(!b.isEmpty()){c=b.min;var f=b.max,a=this.geometry.attributes.position,d=a.array;d[0]=f.x;d[1]=f.y;d[2]=f.z;d[3]=c.x;d[4]=f.y;d[5]=f.z;d[6]=c.x;d[7]=c.y;d[8]=f.z;d[9]=f.x;d[10]=c.y;d[11]=f.z;d[12]=f.x;d[13]=f.y;d[14]=c.z;d[15]=c.x;d[16]=f.y;d[17]=c.z;d[18]=c.x;d[19]=c.y;d[20]=c.z;d[21]=f.x;d[22]=c.y;d[23]=c.z;a.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();Db.prototype.st=function(b){this.object=b;this.update();return this};tc.prototype=Object.create(Ia.prototype);tc.prototype.constructor=tc;tc.prototype.uld=function(b){var c=this.box;c.isEmpty()||(c.getCenter(this.position),c.getSize(this.scale),this.scale.multiplyScalar(.5),ea.prototype.uld.call(this,b))};uc.prototype=Object.create(Wa.prototype);uc.prototype.constructor=uc;uc.prototype.uld=function(b){var c=-this.plane.constant;1E-8>Math.abs(c)&&(c=1E-8);this.scale.set(.5*this.size,.5*this.size,c);this.lookAt(this.plane.normal);ea.prototype.uld.call(this,b)};var Tc,nd;Eb.prototype=Object.create(ea.prototype);Eb.prototype.constructor=Eb;Eb.prototype.setDirection=function(){var b=new h,c;return function(f){.99999<f.y?this.quaternion.set(0,0,0,1):-.99999>f.y?this.quaternion.set(1,0,0,0):(b.set(f.z,0,-f.x).normalize(),c=Math.acos(f.y),this.quaternion.setFromAxisAngle(b,c))}}();Eb.prototype.setLength=function(b,c,a){void 0===c&&(c=.2*b);void 0===a&&(a=.2*c);this.line.scale.set(1,Math.max(0,b-c),1);this.line.updateMatrix();this.cone.scale.set(a,c,a);this.cone.position.y=b;this.cone.updateMatrix()};Eb.prototype.setColor=function(b){this.line.material.color.copy(b);this.cone.material.color.copy(b)};vc.prototype=Object.create(Ia.prototype);vc.prototype.constructor=vc;var Uc=new h,qd=new od,rd=new od,sd=new od;Na.prototype=Object.create(pa.prototype);Na.prototype.constructor=Na;Na.prototype.isCatmullRomCurve3=!0;Na.prototype.getPoint=function(b,c){var f=c||new h,a=this.points,d=a.length,e=(d-(this.closed?0:1))*b,g=Math.floor(e),e=e-g;this.closed?g+=0<g?0:(Math.floor(Math.abs(g)/a.length)+1)*a.length:0===e&&g===d-1&&(g=d-2,e=1);var l,w,p;this.closed||0<g?l=a[(g-1)%d]:(Uc.subVectors(a[0],a[1]).add(a[0]),l=Uc);w=a[g%d];p=a[(g+1)%d];this.closed||g+2<d?a=a[(g+2)%d]:(Uc.subVectors(a[d-1],a[d-2]).add(a[d-1]),a=Uc);if("centripetal"===this.curveType||"chordal"===this.curveType){var m="chordal"===this.curveType?.5:.25,d=Math.pow(l.distanceToSquared(w),m),g=Math.pow(w.distanceToSquared(p),m),m=Math.pow(p.distanceToSquared(a),m);1E-4>g&&(g=1);1E-4>d&&(d=g);1E-4>m&&(m=g);qd.initNonuniformCatmullRom(l.x,w.x,p.x,a.x,d,g,m);rd.initNonuniformCatmullRom(l.y,w.y,p.y,a.y,d,g,m);sd.initNonuniformCatmullRom(l.z,w.z,p.z,a.z,d,g,m)}else"catmullrom"===this.curveType&&(qd.initCatmullRom(l.x,w.x,p.x,a.x,this.tension),rd.initCatmullRom(l.y,w.y,p.y,a.y,this.tension),sd.initCatmullRom(l.z,w.z,p.z,a.z,this.tension));f.set(qd.calc(e),rd.calc(e),sd.calc(e));return f};Na.prototype.copy=function(b){pa.prototype.copy.call(this,b);this.points=[];for(var c=0,a=b.points.length;c<a;c++)this.points.push(b.points[c].clone());this.closed=b.closed;this.curveType=b.curveType;this.tension=b.tension;return this};Fb.prototype=Object.create(pa.prototype);Fb.prototype.constructor=Fb;Fb.prototype.isCubicBezierCurve3=!0;Fb.prototype.getPoint=function(b,c){var f=c||new h,a=this.v0,d=this.v1,e=this.v2,g=this.v3;f.set(rc(b,a.x,d.x,e.x,g.x),rc(b,a.y,d.y,e.y,g.y),rc(b,a.z,d.z,e.z,g.z));return f};Fb.prototype.copy=function(b){pa.prototype.copy.call(this,b);this.v0.copy(b.v0);this.v1.copy(b.v1);this.v2.copy(b.v2);this.v3.copy(b.v3);return this};Gb.prototype=Object.create(pa.prototype);Gb.prototype.constructor=Gb;Gb.prototype.isQuadraticBezierCurve3=!0;Gb.prototype.getPoint=function(b,c){var f=c||new h,a=this.v0,d=this.v1,e=this.v2;f.set(qc(b,a.x,d.x,e.x),qc(b,a.y,d.y,e.y),qc(b,a.z,d.z,e.z));return f};Gb.prototype.copy=function(b){pa.prototype.copy.call(this,b);this.v0.copy(b.v0);this.v1.copy(b.v1);this.v2.copy(b.v2);return this};nb.prototype=Object.create(pa.prototype);nb.prototype.constructor=nb;nb.prototype.isLineCurve3=!0;nb.prototype.getPoint=function(b,c){var f=c||new h;1===b?f.copy(this.v2):(f.copy(this.v2).sub(this.v1),f.multiplyScalar(b).add(this.v1));return f};nb.prototype.getPointAt=function(b,c){return this.getPoint(b,c)};nb.prototype.copy=function(b){pa.prototype.copy.call(this,b);this.v1.copy(b.v1);this.v2.copy(b.v2);return this};wc.prototype=Object.create(bb.prototype);wc.prototype.constructor=wc;wc.prototype.isArcCurve=!0;pa.create=function(b,c){b.prototype=Object.create(pa.prototype);b.prototype.constructor=b;b.prototype.getPoint=c;return b};Object.assign(Bb.prototype,{createPointsGeometry:function(b){b=this.getPoints(b);return this.createGeometry(b)},createSpacedPointsGeometry:function(b){b=this.getSpacedPoints(b);return this.createGeometry(b)},createGeometry:function(b){for(var c=new qa,a=0,d=b.length;a<d;a++){var e=b[a];c.vertices.push(new h(e.x,e.y,e.z||0))}return c}});Object.assign(mb.prototype,{fromPoints:function(b){this.setFromPoints(b)}});Rd.prototype=Object.create(Na.prototype);Sd.prototype=Object.create(Na.prototype);pd.prototype=Object.create(Na.prototype);Object.assign(pd.prototype,{initFromArray:function(){},getControlPointsArray:function(){},reparametrizeByArcLength:function(){}});Object.assign(ca.prototype,{center:function(b){return this.getCenter(b)},empty:function(){return this.isEmpty()},isIntersectionBox:function(b){return this.intersectsBox(b)},size:function(b){return this.getSize(b)}});Object.assign(u.prototype,{center:function(b){return this.getCenter(b)},empty:function(){return this.isEmpty()},isIntersectionBox:function(b){return this.intersectsBox(b)},isIntersectionSphere:function(b){return this.intersectsSphere(b)},size:function(b){return this.getSize(b)}});Jb.prototype.center=function(b){return this.getCenter(b)};Object.assign(oa,{random16:function(){return Math.random()},nearestPowerOfTwo:function(b){return oa.floorPowerOfTwo(b)},nextPowerOfTwo:function(b){return oa.ceilPowerOfTwo(b)}});Object.assign(l.prototype,{flattenToArrayOffset:function(b,c){return this.toArray(b,c)},multiplyVector3:function(b){return b.applyMatrix3(this)},multiplyVector3Array:function(){},applyToBuffer:function(b){return this.applyToBufferAttribute(b)},applyToVector3Array:function(){}});Object.assign(e.prototype,{extractPosition:function(b){return this.copyPosition(b)},flattenToArrayOffset:function(b,c){return this.toArray(b,c)},getPosition:function(){var b;return function(){void 0===b&&(b=new h);return b.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(b){return this.makeRotationFromQuaternion(b)},multiplyToArray:function(){},multiplyVector3:function(b){return b.applyMatrix4(this)},multiplyVector4:function(b){return b.applyMatrix4(this)},multiplyVector3Array:function(){},rotateAxis:function(b){b.transformDirection(this)},crossVector:function(b){return b.applyMatrix4(this)},translate:function(){},rotateX:function(){},rotateY:function(){},rotateZ:function(){},rotateByAxis:function(){},applyToBuffer:function(b){return this.applyToBufferAttribute(b)},applyToVector3Array:function(){},makeFrustum:function(b,c,a,d,e,g){return this.makePerspective(b,c,d,a,e,g)}});Ha.prototype.isIntersectionLine=function(b){return this.intersectsLine(b)};g.prototype.multiplyVector3=function(b){return b.applyQuaternion(this)};Object.assign(sb.prototype,{isIntersectionBox:function(b){return this.intersectsBox(b)},isIntersectionPlane:function(b){return this.intersectsPlane(b)},isIntersectionSphere:function(b){return this.intersectsSphere(b)}});Object.assign(Cb.prototype,{extractAllPoints:function(b){return this.extractPoints(b)},makeGeometry:function(b){return new Ob(this,b)}});Object.assign(d.prototype,{fromAttribute:function(b,c,a){return this.fromBufferAttribute(b,c,a)},distanceToManhattan:function(b){return this.manhattanDistanceTo(b)},lengthManhattan:function(){return this.manhattanLength()}});Object.assign(h.prototype,{setEulerFromRotationMatrix:function(){},setEulerFromQuaternion:function(){},getPositionFromMatrix:function(b){return this.setFromMatrixPosition(b)},getScaleFromMatrix:function(b){return this.setFromMatrixScale(b)},getColumnFromMatrix:function(b,c){return this.setFromMatrixColumn(c,b)},applyProjection:function(b){return this.applyMatrix4(b)},fromAttribute:function(b,c,a){return this.fromBufferAttribute(b,c,a)},distanceToManhattan:function(b){return this.manhattanDistanceTo(b)},lengthManhattan:function(){return this.manhattanLength()}});Object.assign(n.prototype,{fromAttribute:function(b,c,a){return this.fromBufferAttribute(b,c,a)},lengthManhattan:function(){return this.manhattanLength()}});qa.prototype.computeTangents=function(){};Object.assign(ea.prototype,{getChildByName:function(b){return this.ge(b)},renderDepth:function(){},translate:function(b,c){return this.translateOnAxis(c,b)}});Object.defineProperties(ea.prototype,{eulerOrder:{get:function(){return this.rotation.order},set:function(b){this.rotation.order=b}},useQuaternion:{get:function(){},set:function(){}}});Object.defineProperty(gc.prototype,"useVertexTexture",{get:function(){},set:function(){}});Object.defineProperty(pa.prototype,"__arcLengthDivisions",{get:function(){return this.arcLengthDivisions},set:function(b){this.arcLengthDivisions=b}});db.prototype.setLens=function(b,c){void 0!==c&&(this.filmGauge=c);this.setFocalLength(b)};Object.defineProperties(xa.prototype,{onlyShadow:{set:function(){}},shadowCameraFov:{set:function(b){this.shadow.camera.fov=b}},shadowCameraLeft:{set:function(b){this.shadow.camera.left=b}},shadowCameraRight:{set:function(b){this.shadow.camera.right=b}},shadowCameraTop:{set:function(b){this.shadow.camera.top=b}},shadowCameraBottom:{set:function(b){this.shadow.camera.bottom=b}},shadowCameraNear:{set:function(b){this.shadow.camera.near=b}},shadowCameraFar:{set:function(b){this.shadow.camera.far=b}},shadowCameraVisible:{set:function(){}},shadowBias:{set:function(b){this.shadow.bias=b}},shadowDarkness:{set:function(){}},shadowMapWidth:{set:function(b){this.shadow.mapSize.width=b}},shadowMapHeight:{set:function(b){this.shadow.mapSize.height=b}}});Object.defineProperties(ja.prototype,{length:{get:function(){return this.array.length}}});Object.assign(ma.prototype,{addIndex:function(b){this.setIndex(b)},addDrawCall:function(b,c,a){this.addGroup(b,c)},clearDrawCalls:function(){this.clearGroups()},computeTangents:function(){},computeOffsets:function(){}});Object.defineProperties(ma.prototype,{drawcalls:{get:function(){return this.groups}},offsets:{get:function(){return this.groups}}});Object.defineProperties(Sc.prototype,{dynamic:{set:function(){}},onUpdate:{value:function(){return this}}});Object.defineProperties(y.prototype,{wrapAround:{get:function(){},set:function(){}},wrapRGB:{get:function(){return new Y}},shading:{get:function(){},set:function(b){this.flatShading=1===b}}});Object.defineProperties(Xa.prototype,{metal:{get:function(){return!1},set:function(){}}});Object.defineProperties(Oa.prototype,{derivatives:{get:function(){return this.extensions.derivatives},set:function(b){this.extensions.derivatives=b}}});Object.assign($c.prototype,{getCurrentRenderTarget:function(){return this.getRenderTarget()},getMaxAnisotropy:function(){return this.capabilities.getMaxAnisotropy()},getPrecision:function(){return this.capabilities.precision},resetGLState:function(){return this.state.reset()},supportsFloatTextures:function(){return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(b){this.setScissorTest(b)},initMaterial:function(){},addPrePlugin:function(){},addPostPlugin:function(){},updateShadowMap:function(){}});Object.defineProperties($c.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(b){this.shadowMap.enabled=b}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(b){this.shadowMap.type=b}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(b){this.shadowMap.cullFace=b}}});Object.defineProperties(zd.prototype,{cullFace:{get:function(){return this.renderReverseSided?2:1},set:function(b){this.renderReverseSided=1!==b}}});Object.defineProperties(q.prototype,{wrapS:{get:function(){return this.texture.wrapS},set:function(b){this.texture.wrapS=b}},wrapT:{get:function(){return this.texture.wrapT},set:function(b){this.texture.wrapT=b}},magFilter:{get:function(){return this.texture.magFilter},set:function(b){this.texture.magFilter=b}},minFilter:{get:function(){return this.texture.minFilter},set:function(b){this.texture.minFilter=b}},anisotropy:{get:function(){return this.texture.anisotropy},set:function(b){this.texture.anisotropy=b}},offset:{get:function(){return this.texture.offset},set:function(b){this.texture.offset=b}},repeat:{get:function(){return this.texture.repeat},set:function(b){this.texture.repeat=b}},format:{get:function(){return this.texture.format},set:function(b){this.texture.format=b}},type:{get:function(){return this.texture.type},set:function(b){this.texture.type=b}},generateMipmaps:{get:function(){return this.texture.generateMipmaps},set:function(b){this.texture.generateMipmaps=b}}});c.WtCube=z;c.Wt=q;c.Wr=$c;c.ShaderLib=tb;c.UniformsLib=fa;c.UniformsUtils=Ra;c.ShaderChunk=sa;c.Fog=Kb;c.Scene=yc;c.LensFlare=ad;c.Sprite=zc;c.SkinnedMesh=Bc;c.Skeleton=gc;c.Bone=Ac;c.Mesh=La;c.LineSegments=Ia;c.LineLoop=Cc;c.Line=Wa;c.Points=hc;c.Group=ic;c.VideoTexture=Dc;c.DataTexture=F;c.CompressedTexture=Lb;c.CubeTexture=C;c.CanvasTexture=aa;c.DepthTexture=jc;c.Texture=m;c.CompressedTextureLoader=Gd;c.DataTextureLoader=cd;c.CubeTextureLoader=dd;c.TextureLoader=Ec;c.ObjectLoader=Hd;c.MaterialLoader=Rc;c.BufferGeometryLoader=ed;c.DefaultLr=Ta;c.Lr=bd;c.JSONLoader=fd;c.Ir=oc;c.FontLoader=Jd;c.FileLoader=$a;c.Loader=Wb;c.Cache=xc;c.SpotLightShadow=Gc;c.SpotLight=Hc;c.PointLight=Ic;c.RectAreaLight=Mc;c.HemisphereLight=Fc;c.DtShadow=Jc;c.Dt=Kc;c.AmbientLight=Lc;c.LightShadow=Ab;c.Light=xa;c.Pa=db;c.OrthographicCamera=Ua;c.ArrayCamera=Zc;c.Camera=Qa;c.VectorKeyframeTrack=Vb;c.QuaternionKeyframeTrack=pc;c.NumberKeyframeTrack=Ub;c.PropertyBinding=Ja;c.KeyframeTrack=Ca;c.AnimationUtils=Fa;c.AnimationObjectGroup=Ld;c.AnimationClip=ab;c.Uniform=Sc;c.InstancedBufferGeometry=id;c.BufferGeometry=ma;c.Geometry=qa;c.InterleavedBufferAttribute=jd;c.InstancedInterleavedBuffer=kd;c.InterleavedBuffer=Xb;c.InstancedBufferAttribute=ld;c.Face3=Sa;c.Object3D=ea;c.Rr=Md;c.Layers=Ka;c.EventDispatcher=a;c.Clock=Od;c.QuaternionLinearInterpolant=Nc;c.LinearInterpolant=Pc;c.DiscreteInterpolant=Qc;c.CubicInterpolant=Oc;c.Interpolant=Ma;c.Triangle=cb;c.Math=oa;c.Spherical=Pd;c.Cylindrical=Qd;c.Plane=Ha;c.Frustum=Hb;c.Sphere=Ba;c.Ray=sb;c.Matrix4=e;c.Matrix3=l;c.Box3=u;c.Box2=ca;c.Line3=Jb;c.Euler=Da;c.Vector4=n;c.Vector3=h;c.Vector2=d;c.Quaternion=g;c.Color=Y;c.Br=Db;c.CameraHelper=sc;c.Box3Helper=tc;c.pr=uc;c.ArrowHelper=Eb;c.AxesHelper=vc;c.CatmullRomCurve3=Na;c.CubicBezierCurve3=Fb;c.QuadraticBezierCurve3=Gb;c.LineCurve3=nb;c.ArcCurve=wc;c.EllipseCurve=bb;c.SplineCurve=jb;c.CubicBezierCurve=kb;c.QuadraticBezierCurve=lb;c.LineCurve=Ya;c.Shape=Cb;c.Path=mb;c.ShapePath=gd;c.Font=hd;c.CurvePath=Bb;c.Curve=pa;c.ShapeUtils=ib;c.SceneUtils={createMultiMaterialObject:function(b,c){for(var f=new ic,a=0,d=c.length;a<d;a++)f.add(new La(b,c[a]));return f},detach:function(b,c,a){b.applyMatrix(c.matrixWorld);c.remove(b);a.add(b)},attach:function(b,c,a){b.applyMatrix((new e).getInverse(a.matrixWorld));c.remove(b);a.add(b)}};c.WebGLUtils=Fd;c.WireframeGeometry=Mb;c.SphereGeometry=kc;c.SphereBufferGeometry=Nb;c.PlaneGeometry=ec;c.PlaneBufferGeometry=rb;c.ShapeGeometry=Ob;c.ShapeBufferGeometry=Pb;c.EdgesGeometry=Qb;c.ConeGeometry=lc;c.ConeBufferGeometry=mc;c.CylinderGeometry=ub;c.CylinderBufferGeometry=fb;c.CircleGeometry=nc;c.CircleBufferGeometry=Rb;c.BoxGeometry=Ib;c.By=qb;c.ShadowMaterial=Sb;c.SpriteMaterial=hb;c.RawShaderMaterial=Tb;c.ShaderMaterial=Oa;c.PointsMaterial=eb;c.MeshPhysicalMaterial=vb;c.MeshStandardMaterial=Za;c.MeshPhongMaterial=Xa;c.MeshToonMaterial=wb;c.MeshNormalMaterial=xb;c.MeshLambertMaterial=yb;c.MeshDepthMaterial=ta;c.MeshDistanceMaterial=w;c.Mal=Va;c.LineDashedMaterial=zb;c.LineBasicMaterial=za;c.Material=y;c.Float64BufferAttribute=dc;c.Float32BufferAttribute=X;c.Uint32BufferAttribute=pb;c.Int32BufferAttribute=cc;c.Uint16BufferAttribute=ob;c.Int16BufferAttribute=bc;c.Uint8ClampedBufferAttribute=ac;c.Uint8BufferAttribute=$b;c.Int8BufferAttribute=Zb;c.BufferAttribute=ja;c.REVISION="bim4";c.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};c.CullFaceNone=0;c.CullFaceBack=1;c.CullFaceFront=2;c.CullFaceFrontBack=3;c.FrontFaceDirectionCW=0;c.FrontFaceDirectionCCW=1;c.BasicShadowMap=0;c.PCFShadowMap=1;c.PCFSoftShadowMap=2;c.FrontSide=0;c.BackSide=1;c.DoubleSide=2;c.FlatShading=1;c.SmoothShading=2;c.NoColors=0;c.FaceColors=1;c.VertexColors=2;c.NoBlending=0;c.NormalBlending=1;c.AdditiveBlending=2;c.SubtractiveBlending=3;c.MultiplyBlending=4;c.CustomBlending=5;c.AddEquation=100;c.SubtractEquation=101;c.ReverseSubtractEquation=102;c.MinEquation=103;c.MaxEquation=104;c.ZeroFactor=200;c.OneFactor=201;c.SrcColorFactor=202;c.OneMinusSrcColorFactor=203;c.SrcAlphaFactor=204;c.OneMinusSrcAlphaFactor=205;c.DstAlphaFactor=206;c.OneMinusDstAlphaFactor=207;c.DstColorFactor=208;c.OneMinusDstColorFactor=209;c.SrcAlphaSaturateFactor=210;c.NeverDepth=0;c.AlwaysDepth=1;c.LessDepth=2;c.LessEqualDepth=3;c.EqualDepth=4;c.GreaterEqualDepth=5;c.GreaterDepth=6;c.NotEqualDepth=7;c.MultiplyOperation=0;c.MixOperation=1;c.AddOperation=2;c.NoToneMapping=0;c.LinearToneMapping=1;c.ReinhardToneMapping=2;c.Uncharted2ToneMapping=3;c.CineonToneMapping=4;c.UVMapping=300;c.CubeReflectionMapping=301;c.CubeRefractionMapping=302;c.EquirectangularReflectionMapping=303;c.EquirectangularRefractionMapping=304;c.SphericalReflectionMapping=305;c.CubeUVReflectionMapping=306;c.CubeUVRefractionMapping=307;c.RepeatWrapping=1E3;c.ClampToEdgeWrapping=1001;c.MirroredRepeatWrapping=1002;c.Nr=1003;c.NearestMipMapNr=1004;c.NearestMipMapLinearFilter=1005;c.LinearFilter=1006;c.LinearMipMapNr=1007;c.LinearMipMapLinearFilter=1008;c.UnsignedByteType=1009;c.ByteType=1010;c.ShortType=1011;c.UnsignedShortType=1012;c.IntType=1013;c.UnsignedIntType=1014;c.FloatType=1015;c.HalfFloatType=1016;c.UnsignedShort4444Type=1017;c.UnsignedShort5551Type=1018;c.UnsignedShort565Type=1019;c.UnsignedInt248Type=1020;c.AlphaFormat=1021;c.RGBFormat=1022;c.RGBAFormat=1023;c.LuminanceFormat=1024;c.LuminanceAlphaFormat=1025;c.RGBEFormat=1023;c.DepthFormat=1026;c.DepthStencilFormat=1027;c.RGB_S3TC_DXT1_Format=2001;c.RGBA_S3TC_DXT1_Format=2002;c.RGBA_S3TC_DXT3_Format=2003;c.RGBA_S3TC_DXT5_Format=2004;c.RGB_PVRTC_4BPPV1_Format=2100;c.RGB_PVRTC_2BPPV1_Format=2101;c.RGBA_PVRTC_4BPPV1_Format=2102;c.RGBA_PVRTC_2BPPV1_Format=2103;c.RGB_ETC1_Format=2151;c.LoopOnce=2200;c.LoopRepeat=2201;c.LoopPingPong=2202;c.InterpolateDiscrete=2300;c.InterpolateLinear=2301;c.InterpolateSmooth=2302;c.ZeroCurvatureEnding=2400;c.ZeroSlopeEnding=2401;c.WrapAroundEnding=2402;c.TrianglesDrawMode=0;c.TriangleStripDrawMode=1;c.TriangleFanDrawMode=2;c.LinearEncoding=3E3;c.sRGBEncoding=3001;c.GammaEncoding=3007;c.RGBEEncoding=3002;c.LogLuvEncoding=3003;c.RGBM7Encoding=3004;c.RGBM16Encoding=3005;c.RGBDEncoding=3006;c.BasicDepthPacking=3200;c.RGBADepthPacking=3201;c.CubeGeometry=Ib;c.Face4=function(b,c,a,d,e,g,h){return new Sa(b,c,a,e,g,h)};c.LineStrip=0;c.LinePieces=1;c.MeshFaceMaterial=function(b){return b};c.MultiMaterial=function(b){void 0===b&&(b=[]);b.isMultiMaterial=!0;b.materials=b;b.clone=function(){return b.slice()};return b};c.PointCloud=function(b,c){return new hc(b,c)};c.PointCloudMaterial=function(b){return new eb(b)};c.Vertex=function(b,c,a){return new h(b,c,a)};c.DynamicBufferAttribute=function(b,c){return(new ja(b,c)).setDynamic(!0)};c.Int8Attribute=function(b,c){return new Zb(b,c)};c.Uint8Attribute=function(b,c){return new $b(b,c)};c.Uint8ClampedAttribute=function(b,c){return new ac(b,c)};c.Int16Attribute=function(b,c){return new bc(b,c)};c.Uint16Attribute=function(b,c){return new ob(b,c)};c.Int32Attribute=function(b,c){return new cc(b,c)};c.Uint32Attribute=function(b,c){return new pb(b,c)};c.Float32Attribute=function(b,c){return new X(b,c)};c.Float64Attribute=function(b,c){return new dc(b,c)};c.ClosedSplineCurve3=Rd;c.SplineCurve3=Sd;c.Spline=pd;c.Ar=function(b){return new vc(b)};c.BoundingBr=function(b,c){return new Db(b,c)};c.EdgesHelper=function(b,c){return new Ia(new Qb(b.geometry),new za({color:void 0!==c?c:16777215}))};c.WireframeHelper=function(b,c){return new Ia(new Mb(b.geometry),new za({color:void 0!==c?c:16777215}))};c.XHRLoader=function(b){return new $a(b)};c.BinaryTextureLoader=function(b){return new cd(b)};c.GeometryUtils={merge:function(b,c,a){var f;c.isMesh&&(c.matrixAutoUpdate&&c.updateMatrix(),f=c.matrix,c=c.geometry);b.merge(c,f,a)},center:function(b){return b.center()}};c.ImageUtils={crossOrigin:void 0,loadTexture:function(b,c,a,d){var f=new Ec;f.setCrossOrigin(this.crossOrigin);b=f.load(b,a,void 0,d);c&&(b.mapping=c);return b},loadTextureCube:function(b,c,a,d){var f=new dd;f.setCrossOrigin(this.crossOrigin);b=f.load(b,a,void 0,d);c&&(b.mapping=c);return b},loadCompressedTexture:function(){},loadCompressedTextureCube:function(){}};c.Projector=function(){this.projectVector=function(b,c){b.project(c)};this.unprojectVector=function(b,c){b.unproject(c)};this.pickingRay=function(){}};Object.defineProperty(c,"__esModule",{value:!0})});var G_0,G_1,G_2,GLE_topCamera,G_3,G_4,G_5,G_6,G_7=!0,G_8=[],G_9=[],G_92=[],G_54=[],G_10=[],G_11=[],G_12=[],G_13,G_18,G_14,G_15,G_16,G_17=!0,G_19=!1,G_20=!1,G_21=!1,G_55=!0,G_22=!1,G_23=!0,G_24=!1,G_25=!1,G_26=!0,G_27=0,G_28=!0,GLE_bRect=!1,GLE_bRecting=!1,GLE_RectMode=0,GLE_AutoCorrection=!0,G_29=11584734,GLE_BACK_ALPHA=1,G_30,G_31,G_32,G_34,G_35,G_36,G_53,G_38,G_39,G_40,G_41=0,G_42=0,G_43=0,G_411=0,G_421=0,G_431=0,G_44=[],G_45=[],G_46=[],G_47=[],G_48,G_50=[],G_51=[],G_49=0,G_52=1E3,G_56=1,G_58=(new Date).getTime(),GLE_LoadNum=0,GLE_RenderMode=0,GLE_Unit=1,GLE_PanSpeed=1,GLE_AngleLimit=36E3,GLE_PrimitiveViewAngle=45,GLE_PrimitiveViewDistance=1.2,GLE_bLogo=!0,GLE_bNeedCamera=!0,GLE_RightArrays={1001:[46],1002:[13,14,15,29,30,31,32,33,34,35,46],1003:[46],1004:[13,14,15,33,34,35,46]},GLE_RightArray=[],GLE_Version="4.2.48",GLE_bVerify=!0,GLE_lastPivot="",GLE_zd=1,GLE_anchorArray=[],GLE_MapTexture,textureSize=128*window.devicePixelRatio,vector=new GLE.Vector2,GLE_MouseMode=0;function GetVersion(){return GLE_Version}function SetMouseMode(c){GLE_MouseMode=c}function EngineInit(c,a,d){G_15=c;G_14=[];G_0=document.getElementById(G_15);G_2=new GLE.Pa(45,G_0.offsetWidth/G_0.offsetHeight,1E-6,1E5);GLE_topCamera=new GLE.Pa(45,G_0.offsetWidth/G_0.offsetWidth,1E-6,1E5);G_3=new GLE.Scene;c=new GLE.Geometry;var e=new GLE.Mal({color:16711680});G_35=new GLE.Mesh(c,e);G_3.add(G_35);G_36=new GLE.Mesh(c,e);G_35.add(G_36);G_34=new GLE.Mesh(c,e);G_36.add(G_34);c=new GLE.Mesh(c,e);c.name="LightActor";G_34.add(c);G_30=new GLE.Dt(16777215,.8);G_30.position.set(0,0,100);G_34.add(G_30);G_31=new GLE.Dt(16777215,2);G_31.position.set(0,0,-100);G_34.add(G_31);c=new GLE.Dt(16777215,1);c.position.set(0,-100,0);G_34.add(c);e=new GLE.Dt(16777215,1);e.position.set(0,100,0);G_34.add(e);G_30.target=G_34;G_31.target=G_34;c.target=G_34;e.target=G_34;G_16=new GLE.Rr;G_4=new GLE.Wr({alpha:!0,antialias:!0,precision:"highp",preserveDrawingBuffer:!0});G_4.so(1*window.devicePixelRatio);G_4.setSize(G_0.offsetWidth,G_0.offsetHeight);G_4.sr(G_29,GLE_BACK_ALPHA);G_4.ld=!0;G_0.appendChild(G_4.domElement);G_4.sortObjects=!0;G_6=new GLE.Wt(G_0.offsetWidth,G_0.offsetHeight);G_6.texture.minFilter=GLE.Nr;G_53=new GLE.Box3;G_53.min.x=0;G_53.min.y=0;G_53.min.z=0;G_53.max.x=0;G_53.max.y=0;G_53.max.z=0;G_1=new Stats;G_21&&G_0.appendChild(G_1.dom);window.addEventListener("resize",onWindowResize,!1);G_5=new GLE.Ts(G_2,G_4.domElement,new GLE.Vector3(0,0,0));G_5.rd=1;G_5.zd=1;G_5.pd=1;G_5.sg=!1;G_48=new GLE.AxesHelper(300);G_35.add(G_48);c=new GLE.ShaderMaterial({uniforms:{texture1:{value:null}},vertexShader:"varying vec2 vUv; \r\n        void main(){    \r\n            vUv \x3d uv;   \r\n            gl_Position \x3d vec4( position, 1.0 );    \r\n        }",fragmentShader:"uniform sampler2D texture1;  \r\n        varying vec2 vUv;   \r\n        void main(void){    \r\n            gl_FragColor \x3d texture2D(texture1, vUv);    \r\n        }",side:GLE.FrontSide});e=new Float32Array(18);e[0]=-1;e[1]=1;e[2]=0;e[3]=-1;e[4]=-1;e[5]=0;e[6]=1;e[7]=1;e[8]=0;e[9]=-1;e[10]=-1;e[11]=0;e[12]=1;e[13]=-1;e[14]=0;e[15]=1;e[16]=1;e[17]=0;var g=new Float32Array(12);g[0]=0;g[1]=1;g[2]=0;g[3]=0;g[4]=1;g[5]=1;g[6]=0;g[7]=0;g[8]=1;g[9]=0;g[10]=1;g[11]=1;var h=new GLE.BufferGeometry;h.addAttribute("position",new GLE.Float32BufferAttribute(e,3));h.addAttribute("uv",new GLE.Float32BufferAttribute(g,2));c=new GLE.Mesh(h,c);c.name="back";c.renderOrder=-100;c.material.depthTest=!1;c.material.depthWrite=!1;c.material.transparent=!1;c.visible=!1;c.frustumCulled=!1;G_3.add(c);c=new GLE.ShaderMaterial({uniforms:{texture1:{value:null}},vertexShader:"varying vec2 vUv; \r\n        void main(){    \r\n            vUv \x3d uv;   \r\n            gl_Position \x3d vec4( position, 1.0 );    \r\n        }",fragmentShader:"uniform sampler2D texture1;  \r\n        varying vec2 vUv;   \r\n        void main(void){    \r\n            gl_FragColor \x3d texture2D(texture1, vUv);    \r\n        }",side:GLE.FrontSide});e=new Float32Array(18);e[0]=.6;e[1]=-.8;e[2]=0;e[3]=.6;e[4]=-1;e[5]=0;e[6]=1;e[7]=-.8;e[8]=0;e[9]=.6;e[10]=-1;e[11]=0;e[12]=1;e[13]=-1;e[14]=0;e[15]=1;e[16]=-.8;e[17]=0;g=new Float32Array(12);g[0]=0;g[1]=1;g[2]=0;g[3]=0;g[4]=1;g[5]=1;g[6]=0;g[7]=0;g[8]=1;g[9]=0;g[10]=1;g[11]=1;h=new Uint8Array(textureSize*textureSize*3);GLE_MapTexture=new GLE.DataTexture(h,textureSize,textureSize,GLE.RGBFormat);GLE_MapTexture.minFilter=GLE.Nr;GLE_MapTexture.magFilter=GLE.Nr;GLE_MapTexture.needsUpdate=!0;h=new GLE.BufferGeometry;h.addAttribute("position",new GLE.Float32BufferAttribute(e,3));h.addAttribute("uv",new GLE.Float32BufferAttribute(g,2));c=new GLE.Mesh(h,c);c.name="logo";c.renderOrder=-199;c.material.depthTest=!1;c.material.depthWrite=!1;c.material.transparent=!0;new GLE.TextureLoader;var l=c.material.uniforms,e=new Image;l.texture1.value=new GLE.Texture(e);e.onload=function(){l.texture1.value.needsUpdate=!0};e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAACCCAYAAACglrZ7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAACuiSURBVHja7H15sF3HWefv6z7n3HvfvVdv0WpLli3Zkm3Zjj1OHBQbxw4JJIYJoUhlAiGQOGRgZoAhhAyTYaBmqpiiamCgihRThIGwDZAMQxLIggMBL4njNbZsx7EWS0+StVnS2+96lu5v/jh97u17dLenDcP0r+qW9N4795zur7/+9bd1H2JmODg4OACAcCJwcHBwhODg4OAIwcHBwRGCg4ODIwQHBwdHCA4ODo4QHBwcHCE4ODg4QnBwcHCE4ODg4AjBwcHBEYKDg4MjBAcHB0cIDg4OjhAcHBwcITg4ODhCcHBwcITg4ODgCMHBwcERgoODgyMEBwcHRwgODg6OEBwcHBwhODg4OEJwcHBwhODg4OAIwcHBwRGCg4ODIwQHBwcHRwgODg6OEBwcHBwhODg4OEJwcHBwhODg4OAIwcHBwRGCg4ODIwQHBwdHCA4ODo4QHBwcHCE4ODg4QnBwcHCE4ODg4AjBwcHBEYKDg4MjBAcHB0cIDg4OjhAcHBwcITg4ODhCcHBwcITg4ODgCMHBwcERgoODgyMEBwcHRwgODg6OEBwcHBwhODg4OEJwcHD4/xte9p/gujtHXXsvgNsATFm/exjAcwCWctdeYz4AcMR8Votx72G3qV9bYP5+m/n/krmuL2bqs0MbtVDZ/pCRBQC8xcjgQnGNad9t1u+OmHY+N2As7DG4ENzbR46ZvB++gPHp0RUC99yLQRjRr3H1Ziont0EYOu6Dwdb/aeTVxHr43UjcBuAHAPwVsX5uxLWXdPJHBx8bTAhD8CYAdwD4FwCuBjBh/e1qMyn+HMD+bDItVLbfBuBd5pq/nqnPrpoQ5ivXXk3gD5gfn5qpz/5OV1Cyc91i+ep3A9hifqwBeKbP7bYByO71+Ex99rnzlCEBWGcNWWGmfngYeYy63wYAdwPYDWCrkWeGs0buzwL4lE1WC5XtH7AI7OERBDbsz3dZctkGoGr+f9p8Xgfga9lEssly1BgvVLa/HcAN1q+eANAe0parrbYAwDdm6rO/P0Z/NuW+Nwj7ho37GGN1MeADeD+A7wRQAfBtAPFr0kLog8AM0r8F8KMDrvkO8+8LM/XZ/dak2Q3gg5Zy/XWOakdOPAE9xaAPWqvNJ/vcwwPw7wDMmJ+fXls/9EwfcrnLak/NtJEHKcYQK0HaFggx62H3GoFJM6F+2ky8QTg4U5/9VI6UPmj9/KFhzx9m8SxUtn9/7l55fBDA/wTwnwEs59owbIwJwA8CeKP1nV+frh9+acgkfHOuLVsMEfb0bW39UH5srxrRhwzfBPBr5zlW49sTJIZZCdMAPmrk80bTnjOvSUKwO2FMlZ0AfitTVgYBRGAr7ECsQGAAtGhNDCIwZyYhgfk8Jg1JHe1PRCH7+crYK3e+3/arHf0wQs6edWWfZxHAO9Ftz0ETO1GDVokhpCAJLDt9Yx1cACH8HIAfyawbBvVYPgQNYgbA86a92iKlPEkl52PtEFh3TXdqMokV05ZN3bHFuwHMA/xfFirbYCyiUWMsAY5zJvatAPb2yqpHbK/rvZ6L+XGic8VMxJps01rToDWOqxcgq1WTwgBssfwOYhJbXrOEkMNmAB8B8F1ZB4VWL0odn5EqbGb9jr2JDZq8zcV46bilEBJg0e03CzMQejXKWoyWz9SLG0IABWMBrAGwAgDV1qvZxN2Wc+x2MUgCSCyCI9t09VT4ommPGmYyDiAFD1YgVkD7uck6rvn5wwDuB7CVQSDgjOTksB+vnMnkqGShrMjfAMIe89zIMjvzZuj5KLm0ZUes9hTj5W8YQlgXexO7NHm7Ad5k2vpHAA5bE37YGMucawkA38OgT/csl/Wul7FYuebuPu3rGac+cQchoH3VGRKeK0WLj/UPBPC3+xHCpXEVUn7M60+zsLbd9qdOMmgjgU8X46X2RDh/jt4R60seP1gNIRCA7wfw4+ZnJTl5xdPRnwdJY08hXjqd9bpBG2+LZfHOcjg3x6BstAQxe0wds7pnEo2LIKkJYP1pgLYC8JrBzFYAL042j3XdClY7dLqqMgBiYFf2LGu19QFc1XH6k/rxfHRoFUpBMDO4wwmr90XXA/gvJmYAgo4kq0d81XqgHJ7ZkxFC6E9tCr3yrSA6nbMKvPOIA/WDGae0M4LVi+Xw7J/bY9v2KtcbC+wqAG+fqR/+5JhjLAHaaM8OTmNR3gDyKgB0k309pXKQo+cee+i243AlPPPLfSw2BWDZLBaXO27Q0Z1yOHc89spfZojdBP1EOZw7buYN4zWCfspU6vHJiA6WW2d+m7Q+JDmZB3MnCFKIlmZ9knNgpi4fgHLKIcYKz/ZhJWI+zkRbjZVyw1Tj6Iu5SPUOc22dgSpAWwWrGABawVpb2baaL8x7SbM57gCMiCeMFZgSOX9Sk/g+ANdmllcQN/5XMV56XLA6AeZssrCfNOaFCp8BYbGPPDHk57EJAWDZI07mKJuQhWjpcCQKj2rhv9PIeJftFo4YY2HcOYB5HkTrALq6VVg7bYKl+RXwOhNkAzGfZqJNYPAYfSPq7QMhjevoPoSgLR29LGSQ0x8Cs5hon/0CQHsAPgZmAeoSwmUmqOGEMN04YqL219xjBYMWC9HKZwvxylcY5AHETKITOPJU6zQBBzVJjcH5GTqPdmkGaQG9T0HcaSb/jZl5bnxJ6gbjeA6gKoBS6FWuBHAi9CvZva7IzFcBvU/qKGYSelzFGEUKxFoDwHz1unGjzB/K5C5V9FgxXvlsIamfSmMIouNYCx2tSITzAGpGvoPkSRcw/j3jxCQiM3k8T7XOejp5LDKEYGJKtk8/bIyFcfUgoA9pyHUAiqFX3TndOHz2XBlfu9t0u2bGcpMZs9X2TRj9zFshmX6qyz3BbP1hEijGK99I4yPUVsL/x7JWxrYQiIne05Wueqoczv2NJq9oovMtI2xOhS8LnP4/vMhmD5s4wBFLJa7IFMT4kpKJtptJeYpJbgOARnHdLQBOTNePZr7pNstP3sskklXGM0YEkIjmqztG5p+t2Mxd5v+NQtL8A181apokA6gbOWozOT3u+tCXIRBGsckkRKlsZZWgbQd3Tb/Yy0jGYX0MJE02im8C8Fh+8SDWtzERiPVs9jcmrD2fhQTAotHTvD7FmRz/kSYfA4iU8KYsslt6LbkLPYTQCqYz3+8dHVs7rn2BWJ1hEi0T0IsAKMEJa/LIrHjC/P5id0wT+BVLbbZkK1ToT5rVlrYBgNTqKS3lnSbKfONM/fBXOvoIcb1lsx20CM1WjJvNRP1O8/OrAB5FmkobZiXEzcJ6bbIFtyHNiR8E8A0Af29chM53Fyvb3paZwcS8P0hWXiLwIoNqAJoAIku2dlDtMqxspAE0BSdh2kZSjDTrYFAbx6cXrJAjsJAY80xYC6JblQjMhKduFIDojWZ8jjFos2nPutVbCMQAGgAagpP8ZGRNnq2jP2/+fdyQ1M0A3m7GsY609uKPMbx2Yh3SLMxtxuV5FMDfIi2o6tx/obL9sZn6LAOI6sWNH85iKZX2mV8FwEYP70QaZwGA3zD/DtSrEcj0OTOTv4G0DmR8QjCTbIdZiQHwUiGuPcYk2obJWnnFJHBiR9n5gqzXc6D8pDkbB4XMZ70+SzuFadpxa9bhIKk/FsuZnwLgE/P1xnTUpm2dHL+fNF/MCCFHBv8awH3dmAQDaZqsDeCrgy0KKrf9qR8i1h8FcLv55Yp5ZgzgkZxZ/c6O4HX0kKfaZ5nEslHAOPecmNLoPTidrJcamsCZy6BiWdJKeDd2JrpOnh4nXhHLCaA3FXwG4GMArTVK76O3GKcKkwUSOnlJCd8QAorna1mOsqhm6rNYqGz/SNZkpHUU/wbAe5AWiwFAVjPxB+hfPLQVwHuRZmAyOe02AdjfRJqly56XZT5U25/6cPb7SvvMr1jteZP1nd9CWsfxcwBen9Or4wD2DZnP9yCtb7nPWHUM4BakdS9PGQtqjBhC2qg7rGDYM4KTllkZ2hkZzFV3QLCCJon1tQOX0i9ThXj5WDOYbgMoMWg7OI1rTzZewWJl265ORiJePtYsTC8yaAOIrrRIimDcCgAoxksHc5OuAOBXAHw3gHIn6MQMI9gdJp5ytv8MElsA/bMAtlhp+AqA7zVBtbcbNyAVKajTZl+1HjeWVzMjA1u2ALC+dkBnMl9Xe/kyGLVMZ9fcaGRaD5Twvrfb3vaj49yiWVibTZY03aDjg1rKmxkSDLqpFcyUASwp0VG9bRmxexzvU/DfdoHxEUpltrMvEVgxjk2m0xWAfgbAh7O4h8EOpIVD/2BW5zzuN1ZAqftYvs5M6j3W/ddY+igEJ1fmYi3KBHjXmNgJkJaE/3oqx3P0agXg+wd0fSuA/wHg+m67AAA/ZPT5owT+/IhIc48gt1i+315A143CJpli2jhb3dnzudgrltBJE+DjGXm1CjNXdm3D1F0AY0mwWjEMCgZdTaxYsIJgpRgZIfBpoZOVjMCMFfCDAN4GUBnA0+X22V8rt8/+OgEPARSYgbl/snl8gN8t3qtJbgHwNcHJ5wDawySEWd3uBPCDgjWU8KGEr9BJNaIRJPUDxrwNMzLIw5Zrv79fZBSbhXVrke4N2JHI4i8BdDODQKy/XohXjozjFlZbJ6GEP2X9qiFY7+sYabJwSyILUCLIPncZPQwL8coBezUm1j2fMRApEdQHycqyCn2zGHpGB36YSUbE/BVi/WUTXPXTFZY+Mtk8gcnmCftWNxhzvmqC7c9JTj4L4BEmKgP0c537c6fACpYbaH/SeZhe5wHwmOhX0+waPZ3pFUCZXv1LY73mUQbwSwBuYxIlAI8I1p8H8DCTKBhd/oixFEZbCEaRr7J8wSMAtbIBsoRcGHCv8GITApPQxHofk9wBAC1/amcxWjpiBHxdOrn0LJNIwHwSRNcB2KxkcYJTy2YSwEbjs+81boRarGzL+vGTKfPyUpA0/ngiWvg8AKFk4btDr3wdQFcZd+IT/XxJBr3B0+Gjngp/T+pkXgn/9lgWJ5jE9UahfhLA/zWEuh5pOTgAPit1e5EhWjmLRaJ/Kji51HEEBu1sBdPvoTRtu5VJ/DzAgWB1opDU/9RTrRqTGKcNRKyDLOXPIHg63JOYiDpDvHm6cfjraUZrGwC8lYlA0Ee9pHkGwHx3RfC93gjByMdPGbO92edv2f6MjBCyu74+tYCav+up6KsAvFgWAyX87zYXfAjAf8gFKt9vLAgIVgd81f5LT8fPJUKujeXEeiZxl7XKSosQglybAhN/EwTILtvSe4RWL/mq/YdSx0eU8F8feRPbjT6vA/C9M/XDz6ck14mZf4+xWliq6BueDj8ltTqthNiUiEJLC/8dSMvD756uH/7SOFkGApEdgJu3g4VWPn1b7ucM+y5BVFYR89FOAQx4s7FkCETXmt+9AiC2rptqBjPrmUQN6V6MwBDCMTOxsoZvQbp5CILVgxPh/AuaxHoAVAoXDsay9JQmeRWArfXChqsmW8f72ey6FC3/hp80Tpv0/JOtYG0c+uX/bv5+B4C1UsenVyauvNkyzZcYojPJFyrXZvKcBrCuj2znzOcSZhnEdwC8y8jdB9gHUPdV+HsT4fzTTCIek5QEgcmiB+Ul4WF4lWwQb87s61K0gGZh7U1ZkJVJaMH6hDI1CpFX7Vl8CvHSqEzJjlpx46eFSQXn8ImZ+uxv9bGMAeD5Svv0Z8AcAvA8OfHH9eL6t5j5UawXN1wDYO9EuGDcopkf7pgaOvzMRDj3JIGbAWipWRCfjLyJ38zmlokDiQHPFZbMhG1++Sr87Ylw7gWAFUBPJnLz1zTJLAZ1SybDiSgNCTSDmZ/MAuIT0dInPNU8AXACUCORE39QL657E4ApBr0LwJcHWXtebnVaY/FD0w7OzJhNJQuV7b/Una89/tn7LwEhJAJ8RHdXsW3pCqQUQK8zq8b+NDqv9urUApOJLG6dahydXSxvuzbzKQX4QBZQnK4fxmJl25tN+gfFuPZFXzWPZtWNUjeXgqT5YNuvvhtAkHjFNwJ4uU9K7dkgqX9L6AipScfzhXi5HfkTRxmU7Qx9A4C/USKwzegoy9jkZPvm1IQ9Z6w+N1Of/dwlzjKUNYly5k6ZfRS+FnJn5JWni/Hy84zenaZDfHgrqEeJp5qngJn5NLBIt2uSHKUEsRGdLdS838iks7pH3sRWAKfGJQQAhcQrXUNanRN+oLSOInPIeyamn7S+4KnwCAMeQJLQWCJe+6LZqkyJKOxcWz+0t516QjsBbDdyerUYL39N6vBYmuFgFOPlx2OvdMCKF41bVCasxfhQMV5+QupwxejVYpA0Hmj7azJCuBG9ZdjXmtUfkpO/91XjW0JHiWkTEXhR8PQzmuRbAdxn0twYhxASy4TkPtF1YXynfvgxXMT8fhZY9HR4OOkWcFwNgJQIqmxcAcnqZQCJ1MnLiexYZNsBPELQ17Bx0zzV3oveopq3ZFFmT7X3x7LkIU3/McBVqeODlvu0G+kW7x5ITr5OnHhMsm5kV/B1a4FYPcXkXW3k+EYAXxFaKSVE3g3IT6TdA+R7AsDnL23OWjc8HdeNWe8xUQBQNRGFH2oU1y96qv08wAuCx/JcqpYeaaGjNjG/xER3cxpHKRfj5cZi5Zpdxi9mX4UvAYiZuqlNTd6Vk82j/WKGg5BIHdf6sxSfwoBNbcWk/qAm6ZmYDhGrNYL1CyolBAhW2wBQszDDJjaUuTB7/Lj+KpMMjUvp+0lDEuu9THLXeVMz62f9pN5kkpFx2YuFuPZs28/Wa7oym68miHs3mEsAVJDUvyQ4UUYnYwC+4KQqOXnMEMJmE6Csj3YZGEEmb7by9TYhaGuFyCmHuASEoIvR4r52x9ykTQBEo7ihkw4jrU6mihAez/bTsBEYg67oZhgW91ntE2zKh4n5WORVikpMVk0cBcS6lDM7b+iXcpM6mQWoYQKaCkCbARJaH9VdMW0xaVDL/CWV5cZ79IBEydpJ2dndR7igbdZjQWj195X26c8C4MivXhHLidsSGbyPWAsGvade2vhEIgp/Ok4ptyZ5g/V/CVAioF9WEHcDKDQL67ZU2qcPgHGd6a4qRQt7UpK0U6ysV6NXxHzK4+jT+es5ff7TgwjBU815M4aNVM4kcjGj9QBopj7Li+VtV3b2f2i9n4ka6BZ0eUwkiPUSRltSwwihxkRt06YYQCR1ZKdhZ7KA5EztEBYr23emuXmeK4WLTxKrY+1gpiODUrRwRmi1N9PgRnHDLUjrL0YQAvjVjIGZqNRHAf1StPhp45dz6FfvAWi9Fai52BV1Wqr2HMCLAE0DdCOx5lhOXG+aFgVJ/RUAsa+ap4HpmpXXltzZ5ciLUrXnmKSyrKHrO/LySh9Wwm8bvx4ELaWObP91HfoX5cwbpm0YWUUAeQL6iHXNFgCyGC8fbwYznRQ0sVbGd+/wSylafJxBG1K3Z2KdEt49lh8qLwHhWoOvjwWq8SgATcA6qaMTbUyuVcJ/O4ANkSz/hODkz8YjJZrumvkrrwCIpY6/qaT3IQAUy4nXpy4Y3WH6d1Sq9ikmmfSLUa7Cy1wsRMt96kYoJPCrGFBHIXS8xCTqFgnYu0uzCL7Zr8E3Z3NEsD4IUN3ogEkfkodzKyVXi5ZZaBroFKbpldy87WYowLtMm4LIK/+oSWe3zVhRK5gpKfJ2dc2o0sbpAcTu5ZTiAEPcZxT1in7XV9pn/mMWa4i8yh8ydQjBuwR6qpkkpQEn2s3AVVp4JWK1jUmAwKd91VgAKJa63SLmY0y0ywRHPRDt7AasJNCzPZfWGuK7giHfl67I2lrlPPv6Zj9l0mndfNu6TqU/86Il1Ekz2Q82g5l05x9hfbpy9uzxF+X22a8CeBJAsV7adIcSlXtMEPK8doyubnMWlTR5kwC01O3E0+19DPmpZmH6jQCmBSd3C1YbrEj9kBhCdwNcKV48wKDYT9rfjmTJFJnxHQD+ApQWcxHr55kkIduE1DVZV9vnpJDUFvtYASEDjUHuhkkzhtazIyZiqx2ZpcJ2XQvAS2b8MyLTAEKmCyvQM8/Oan9M2TVFA3wnmWXSGDRdK236lQHWU4fLhY4HWpw5QuC6ZWZdTaxMmanMNyT75La8rl5hTUByICEASEwGYTcAtIKZq016EcT8ipWSiwl8ltOQ2BbBSpu0oX1dv0NGEiZZ6yMcArOJTnGt34RkUH5fhCnUIruyLSvvZgLXGVQFaKYdzFQA1ErRfE60LHDuLj6JVRbprLZe3+xlWDRyEgAKQVJ7pRVM7mcSu614yBfHCCqeky3yk9qrVJhucloAdq1gpRlpVou4E/BVYMTWHeJV9lubdHOUa1BsTbB+yFeJ5ndMUocQbD1Izfok11eNC64spez5PKA9dhCyRzf0AFfFPlxGkCqOQwhaaHVYySyAJ94Qe+UsIGdNHqGNwH1cwE47W2GHrGQpIYBnu5Hn8jVdc1/vM/54ApAi6EOAuAfAutCrbIap1hLgfTlCyAaXAD5ZjJc+22cQJZgLRpgHB6zQqs9Aad1zKS+ZyUQAjiHdRhyEfvV1U40jp3qtIdJISUboCzgQe0zZ9psUi5nbw0BJ6ogF65eVIQSkdfVfGhWOsPXK9DuWOloG9CwgbgHwutCrXmGCWygktceNTmmCejXjaxMLWmVmilaQq0Pgjjs30OXSY8ZnhE0AGqLY554Xo3q3X0BfD2mTYQGeK0WLzw7oS3adkpycGhSbsQmBPR0diGUxWzFuagfT6wCcrrRO2UqzZHym0vn6tKtcvZRgdUKZphLrdZrkJuPDHbbMKk2sDxmK8lrBzK2Wj3goN0hk+lAl5vly++yf9RlEmcVKTKyAz81l9bUNmYkqlqmWneiiiPXBLPrMoHsB/J01eMr4jDEAn0k2L4Ns86tSZjrHABST8AG221EZcxGo5EhTmSKzbzGJWxh0dbOw9g3m77VitPhSNtEE65OqY7XIVZa/Ehv/vXkBk36Y1SPA3MjCGpzWrQyafJcLBIYGpbpWaZ/5xT66nG1ELBj5HB/GeB2BBfHKKXTr9tfEsvDuUE5gvnItBCcQnCizv8GUNBNfLIUdosjKU+191iTcaKK+EDrZ30MI3TJnaOHdYmUYvn2OCcjptUy0lUkuEOtG7lMj1ovEep5YrwwYeG2loLKPMpWK2YPOWIT1rGWi39cobpicq+7IqkC14CQypFA3fu2llm2/lYlTEk5CwWqZ0c35Ump2j1R2Tnem5s3vWOrkm12W995r5HOIWDctJU4GubTjLiDobnCyPxdCCFaEs6tjTHRVIotxIoswpfIQrBI+9/i4S0sI4BNZe6SOzhLrVu7TzPRZ6GSOWEdjEYKn2itSxw9ZJtH9MOXMZrNIZg4lZmfcOBaCJuaImM939dJ+0jiSRYA1xG7DdEmQNF62FEn5SeMQujsvsxOhG37SOI5zd2qa05dobdufvB3dTVyx+YSG+FbMGQpJn6Diruz389UdmFtzA2qlzZrRLV0VOsk2VKlCUn/CTHgAuLXtT/6AYW7MG1IAoCgNyiVjLg8xgS/WHn979deRV5ZM4jqrL0fGW/1obY4wdTpe9W9a17zDEOkzpiTaTFrb6uoE88YPhYAVgTFf3dH3c6EQOnmuy55iN8zkn6vuQORNIPImPEDsvIyEAAFl2kTrQn/NdUaWlPskAFYSr0TDzgQRvT6sYF+HD1jacSuB35sFJOaqOzFX3QnrxKIxVx3G3JrRMhqg1NrTYZuYTxoz7W4zERaDpG5HlFUhWj6RpXyY6AbjYhxikvn8sxZQ+zshaL/6fQAWBnyWYW3w6tU++dZGYV2+3RUm6tRJSBUdyoi0EC0dIdYvWVbFTwhOtmX1HDnZ0rjSnauet2wHXnt2zY1oFNZtZaJOybWnw0NjtMv2s+1cvgri2inrd5Opi6AOWEE95nODeauLU40pj/PNenkq/LZlIdzRKKzftjyRbgFantiKVrB2PRPdchn5gD0d7c1+aBTWvx7pSc5n+3zmQm9N5haOLF1mAFEhXv5WJCceUSTvobSe/X4zIR6E2a9wtroTlXCuCDrnBOB+RtZVjeL678pHfg2WALwwahAAHQF8CunORbP68FGCbltnBWjBqmmO4Cqbai6YgGQ+isylcOGRenHTxwAuKvK+p17c8H4AX2gF0509A6Vo8WoAm8vh3BP9GJVBu418/tD8ajqWpZ/N2kjAvkJSO5Z9V7BaKSa1/9P0p28l6ADA7QD9MoA/M/KNzlZ3wtOxIlZrxtGGRmHdPRhQdQbgefS+T2EY6okotJfKW7OCsxuUKPwngLOagr2FZOXkmD5tYnzaE7lYUJ3ABxl0cxbUKkWLT5rxYRODtAkgWRUhEPxmYe26IfKo4cJqZbiQ1I6FwZp9psbFVyL4RaTnH8wC2JjI4sfRfU/IZSGEQrR8ICxVlgCeUiL4kXpxw9dbwXTPgSilaHEDgB+LvfKjpWj+5LiEEHtJay5I6p8J/eouhlhvNrz8AtKy4Qdgthm3/KnXdyfnMMKmW1rB9IeJVT8T5aWZ+uwYhEAJQR+xTXFivY/TDIO2LBxNzEeYyN7UtN9SuI5yFuKVvc1g3RNaePcSeHMrmP73SMtos8MsJlvB9F0A1pXDuX5HezcBKrWC6Z8XrBYAHCNWd2oSP2NWeeWp9hc91Vo2mRlmEkkhrv1dLEpvT2ThXoALSHfOTRGr9Ujf5AMA05rk3eMEqVrB9P1mh2I//LeZ+uyYhEDbkZZORwCuIlZ3Anif+VvsqdYXvaRVM30ZlWI2pcts51QVk1CC1TOKvMzqmAvi2kEmGedIIHefsbG2FUz/K2I1aOft55GWgZ8vlKdaK55qfzGWpR3pIbX8PmJVA/AisbpGgz5AaSD2csURlJ80z0odPaJE8C6Ab20F0z/WjfMBACZawfS9AH2MoL89LJaSJ4SESUSlaPH5WJY+n8jgJ0zYcAvSbcA/AoAFKzBRAdbJOEMIYTux3jKgEVMYXZJrAnJsn6+Y1RYo67smGMZHlXVduo37nICSYpLk6/Zn27J6LzFDsLoRwH+1TFphBvVgvzYS61kmWRCsbwLwu4Z0CgSeMlfMF+P6Q8Y/zgJrodBxVIyXfr8uN+4A6Bpz27cg3RkZpwekCNEbqR9cB0vQ7xgkPwJ/EmOWPGsS76yXNt5trAOJzolFBAAninH9Yasvcmion7Jj0CDRm0tPiNUBUJYx4qO5grEeN6N7nNq43gJtBvjjQ/q75wIJQTOJpBjXH4rlxAfT4DYD6QEkcUYCJpvyHZeJEDSTUEHS/MtmofAuo8vvQ/qKwGyxfR2Aqxg0SeAWhpSD56O4CYCm0PHJUrT4t5G/phzJ4u2a5I0Apon1dNd/EpnSNQTr/b3KJctWgUSAc/eBZ6p2HcZ7m46SOnkpS4kCQKBbWaqqhxAIvN8uzijEyy/0ScMoAO1CvPI0wJ9q+9V3MMRmAq83pyWZt1QRKA1gdtqoSU6m+/fJL8a1T7eD6gcZcmt2gAeTgGC1txDXHvBU8xC6W8jNYbR6xVfNFyfC+T9qB5PfpYR/E4PWErjc+2xh4gn6JGl1MCffQSm+nDOvp4aTgCwzieyEqEoiihViZfWd54VODpWipS/7vX3Jj3E5d1/jMonJ3PgkvgpfiGWpmZJ1vAfWrk8AKEbLx1dKm4wYxLbRUUQZWO3w0rMYeRB5zmQMp0fsNRjQPw0g8lTz0EQ493utYPr7tPBuZhMPIfCSr1qf0ZAlixD8IWM36nkY47sKQBQktee1kL/f9qv3McRmYj2J9HjA9PVyQCR08qVStHBqmBvm9VmN20wiLMQrLwnwEjO/ooTXAHAFC69T3086icGaifkFycmDPTfV4UkNcXLE6sSUmshjEYKvWgcT4Z3I2M1XrQP9JrqnWi9pcPbslUK8cqTPwR4KQNtPGmcFq99R5EOTuItJToNSqZPWEVgfI8ZTsF4w4unwIANVAr9Sipe/oIRf1CTeycJbD4BIRXNSJ39Vipc+Rxy3TMlpJoMYoAaxmihF83+hhXciFsW3MtGbmaTMng3NmljFBJwm1s/5ut3zvkpPtTM5DFv5tWDdGDYGng5PavJOMUQBBAZrNs9PiJUi5q97HD1ZiuYfSOvju32xxhgC2o4tkGkfUbpl3H524ifNWU8UHwYgPI4ey8d3CvHyq14wlX3/yKgYgtThCrO25TFQ3wTrenY/S4Z6oGzO7R8DCInjVima/5NEFlqKgyVOF7YaMf9DMVn5k5Y/9eN2bGbA2OkxnocxvssAQk+HtVK0lOnyfSy87AQmkIrqBHzV09H/LkULc8O2sPcjhARAk4mKUrWWJ3T0NYCeB+A1C+uzAzQoSOpHPNUKAbRNbrYzEOX22S8ZUztA99Tgfm/TOYXxSp51kNTmPNX8uDFl24LVfJ/B1MVo8eUCiY+b1OSKqQvvV00WM4mW0HGlHJ75a4AeDP3JDUoE6wFwkNRnPdVaQFq732ljpX36E0jPy6sJHatyeObvAHq6WVh/O8BiIpz7FtKVtWlOnEpyZnMboDqTmCpGSwcKJOYA/E3oT84oEWwAwAKqWQwXzL5fXjQZlo78qu3TH0W6n0SjtwKzJ7xgxmCg0pfbZ7+UyOKp2CvvBCjhtOSapY7OFuLlOQANgl5O33XQ2xdrjIHew3FEtX36I2aVO5V31aRu1yvhmd8F4JuAb4+Vx0RUbZ/+mBm/46PSjqVwfj9Av4C0UC4ZLg/O3D9bhiuDZNOnf2Z+UItJlCaihScZdMDoeQhgSbCKm8GUtFzWnrfTDnruEHmO+m6qy6C20HFsdPmhZmH9rizgXg7PPA+gTuAzTGJobYc3wARpAbQidMIS8XLmxxfj5WyAyVOtV6WOQqRbiRvWTkL2VeuQSXMU0L8OO3NPajrd1DIycCJ0XJOIHjYmcp1BYb+VX+rwLKWvMC8CqOs0YNWvlDRO2VsHvmq/lPaLJrXwpwGwp1onpI5aAJqWqca+au0xyq41icBX7UUjm3mAha9aR4xPnu1YU32eWwNISh0llFoz2n42sW77qpURUcQpgbDVhkdM/IYHkG22MrWHmMbsq9YhwUlN6OQIiFS2LVvoeMlXrUUAPqfxlha6O+/yYwwAK/ahG6Z9a/K/N5mGhtTxs+bezdwORwZIme9PAFgcZdp7qj1vxrtsEWQ/eTQARNmr/ywZLvY5MGRY/xSxagAgqdrKvHKuG9xmjpnEtd32hS/n7tvvuUPlOeK72ZzNdHkvAFWMl0+wGS9ftWaNvBMzT3k1hJBN1jqTYE4n4ATSzS5z2YrDgGcmc2galEWK2Rw2URgUO7BWS4X+ZabnKC+TiDlVsqwEs96nY5pJJpw+N7tuUJWh2VFGy5rkJIAJqdvK0+05pCWYBZ3WLyToFhMpTbKAbglozfxcNbKBJhmY9FYd/d9Xkb3YZplJKE4VuSR1W5tnCwa0JllBt/7eXvUSTbIMjEz5jnpfBmuSPrFGoBonrZw/p1FcWUG3DLiWu5c9xpkesdW+GfO3gvludxxBEZOcQP8j0xlArElOm++WRugHM0ni9LrAql3oBx/dY+hsGZb7pCmH9Y+18CMAEbFumvGbMOPTYCFKDLGr4yKp1qmcbPo9d9jzMEabM11eMbpcDZLagnXvaROsbWDES5W8IZH9xFoV2gACTpVMZEyeBVnQuwXUnuRyRPZg2A60PHm00S0Synav6QHXLRrBDSvC6LhHVlt87piopKznJL1M3DkCLet7xN0JGpt7tjG4kjOTafZGoRbS8xuydyQqiwjC3L2yNyyN2nMfW88Y1IamIb/AmkhskXVofXSf71op2M44xtY4hbnx1eZ3K+Z5UR9/OEJan+KNoR+cG+9hSHIyz2QY4dz3LgzsnykzV0HSmCrGK0eL8ZJnyIjb/lQr9Ks/BVBWh3DYU63GgLGznztMnhjxXViWYqbLUXocXCd+lOlbq08KfixCgDXZE3Mjz6S/hPUQO6Vml6lmjaZR6cQxCSFTlBWrk/1Mw4wQYst3Tsa4rxEY2UdjW+W0PXX2deveujthyLOuGedAUmXJSVrPppxVoHJp08TIQYxBohrDd/iZuAB5OUJQfca333cjqy/adgWtfvRTbGX9PX9ve5xH6Yeto6uRhy3Dfs8Y1j8AqEZe5aeL8cqDbX/qVWuS7Yy8yo8SKy89bTr6qtBx23qX6KDnjnoexmizrcuZPtpzIBniXo5FCHlBZkInK5qrB0yyS/H6MY3+1Y6D2ruq4g5kL3bpjVbrAVZFv2fG1v/H3UTD1kDZ50vwkPucT/+GPVv3IW89KmI/ZIxHtW/U9mBG/zclDRs7dR66NE4bz7mveUXcToA+Vi9ufAeAh9GtBv0AsdpiUpDLvmo9aOJcPOK548yZccddWfpII3TpvAhh3IH8p45hJHepZXMhz74YROswJmbqhzFf3fEms37cjPS0oqwycksachcIksafFOKVQ0OCnJdal89LHz03xA4Oq4IoxCu1RJb2aBJbGLQurV8DiLFA0Mt+XP9WIWl8zry7M8Jr7A3PjhAcHC4eqNw+87fNwoYwlsW3aRI7AKoifWPVAanjI+X2mQcIWDAvt0n+KXXOEYKDwyoJQbBqFePlvb6qJwA9AaI0S8O8RKyWBauTIGpx+rIj7QjBweGfMZiE56lm3Vf8AnoDdp55u1WWaWk7QnBw+OcNjXS/T8McldY5VRvdfH8DaRrxn1wQ3hGCg8MqDQR0i90iixDyxVxDC4AcITg4/PMhBIVulWVWTJaljccqAHqtgpjZDbGDgwOAy3t+vIODgyMEBwcHRwgODg6OEBwcHBwhODg4OEJwcHBwhODg4OAIwcHBwRGCg4ODIwQHBwdHCA4ODo4QHBwcHBwhODg4OEJwcHBwhODg4OAIwcHBwRGCg4ODIwQHBwdHCA4ODo4QHBwcHCE4ODg4QnBwcHCE4ODg4AjBwcHBEYKDg4MjBAcHh39c/L8BAK4LInlOaUveAAAAAElFTkSuQmCC";c.frustumCulled=!1;c.visible=!1;G_3.add(c);G_4.domElement.addEventListener("mousedown",onClick1,!0);G_4.domElement.addEventListener("mouseup",onClick,!0);G_4.domElement.addEventListener("mousemove",onClick2,!0);animate();window.Promise=window.ES6Promise;ReadyForRect();a&&ViewCubeInit(d)}function ShowAxis(c){G_48.visible=c}function ShowScene(c){G_34.visible=c}function ReadyForRect(){window.onload=function(){document.onmousedown=function(c){if(GLE_bRect&&!GLE_bRecting){GLE_bRecting=!0;var a=c.clientX,d=c.clientY,e=document.createElement("div");e.className="tempDiv";e.style.left=c.clientX+"px";e.style.top=c.clientY+"px";e.style.cssText="border: 3px dashed blue;background: #5a72f8;position: absolute;width: 0;height: 0;filter: alpha(opacity:10);opacity: 0.1";document.onmousemove=function(c){document.body.appendChild(e);0==c.buttons?(e.parentNode.removeChild(e),document.onmousemove=null,document.onmouseup=null,a=c.clientX,d=c.clientY,GLE_bRecting=!1):(e.style.left=Math.min(c.clientX,a)+"px",e.style.top=Math.min(c.clientY,d)+"px",e.style.width=Math.abs(a-c.clientX)+"px",e.style.height=Math.abs(d-c.clientY)+"px",document.onmouseup=function(){var g,l,m,n;a<c.clientX?(g=a,m=c.clientX-a):(g=c.clientX,m=a-c.clientX);d<c.clientY?(l=d,n=c.clientY-d):(l=c.clientY,n=d-c.clientY);RectCheck(GLE_RectMode,g,l,m,n);e.parentNode.removeChild(e);document.onmousemove=null;document.onmouseup=null;GLE_bRecting=!1})}}}}}function CloseRectCheck(){GLE_bRect=!1;document.onmousemove=null;document.onmouseup=null;GLE_bRecting=!1}function StartRectCheck(c){GLE_RectMode=c;GLE_bRect=!0}function HideLogo(){GLE_bLogo=!1}function SetBackGroundImg(c){var a=new GLE.TextureLoader;G_3.ge("back").material.uniforms.texture1.value=a.load(c);G_3.ge("back").visible=!0}function RemoveBackGroundImg(){G_3.ge("back").material.uniforms.texture1.value=null;G_3.ge("back").visible=!1}function onWindowResize(){G_2.aspect=G_0.offsetWidth/G_0.offsetHeight;G_2.ux();GLE_topCamera.aspect=G_0.offsetWidth/G_0.offsetHeight;GLE_topCamera.ux();G_4.setSize(G_0.offsetWidth,G_0.offsetHeight);G_6=new GLE.Wt(G_0.offsetWidth,G_0.offsetHeight)}function SetPrimitiveView(c,a){GLE_PrimitiveViewAngle=c;GLE_PrimitiveViewDistance=a}function SetUnit(c){GLE_Unit=c}function SetRenderMode(c){GLE_RenderMode=c}function GetCameraDistance(){return M_distance([G_35.position.x,G_35.position.y,G_35.position.z],[G_2.position.x,G_2.position.y,G_2.position.z])}function animate(){var c=GetCameraDistance();0<c&&(G_5.zd=1<c/G_56?1*GLE_zd:GLE_zd*c/G_56);.3>c&&(G_5.zd=.3*GLE_zd);requestAnimationFrame(animate);render();G_21&&G_1.update();G_28&&G_5.update()}function LodProcess(){for(var c=0;c<G_8.length;c++)for(var a=0;a<G_8[c].length;a++)G_34.ge(G_10[c]+"_"+G_8[c][a].model)&&G_8[c][a].bbox&&G_2.getWorldPosition().distanceTo(G_35.position)}function render(){G_7&&(G_4.setViewport(0,0,G_0.offsetWidth,G_0.offsetHeight),G_4.render(G_3,G_2),TN.update())}function mapProcess(){G_4.setViewport(G_0.offsetWidth-200,0,200,200);G_4.render(G_3,GLE_topCamera)}function ik0(c){}function GetMeshById(c){var a;a=c.toString().split("_");var d=parseInt(a[1]);for(c=0;c<G_10.length;c++)if(a[0]==G_10[c])for(var e=0;e<G_8[c].length;e++)for(var g=0;g<G_8[c][e].ids.length/3;g++)if(d==G_8[c][e].ids[3*g]){a=new Float32Array(3*(G_8[c][e].ids[3*g+2]-G_8[c][e].ids[3*g+1]));for(var d=G_34.ge(G_10[c]+"_"+G_8[c][e].model).geometry.attributes.position.array,h=G_8[c][e].ids[3*g+1];h<G_8[c][e].ids[3*g+2];h++){var l=h-G_8[c][e].ids[3*g+1];a[3*l]=d[3*h];a[3*l+1]=d[3*h+1];a[3*l+2]=d[3*h+2]}return a}}function ik1(c){if(G_7){G_58=(new Date).getTime();G_7=!1;G_3.ge("back").visible=!1;var a=new GLE.Vector2;a.x=(c.pageX-G_4.domElement.getBoundingClientRect().left)/G_4.domElement.offsetWidth*2-1;a.y=2*-((c.pageY-G_4.domElement.getBoundingClientRect().top)/G_4.domElement.offsetHeight)+1;G_16.sa(a,G_2);c=[];for(a=0;a<G_8.length;a++)for(var d=0;d<G_8[a].length;d++){var e=G_34.ge(G_10[a]+"_"+G_8[a][d].model);c.push(e)}c=G_16.is(c,!1);G_7=!0;G_3.ge("back").material.uniforms.texture1.value&&(G_3.ge("back").visible=!0);0<c.length?OnClickPosition(G_35.position.x+","+G_35.position.y+","+G_35.position.z+","+G_35.rotation.x+","+G_35.rotation.y+","+G_35.rotation.z+","+c[0].point.x+","+c[0].point.y+","+c[0].point.z):OnClickBlank()}}function RectCheck(c,a,d,e,g){if(G_7){G_7=!1;G_3.ge("back").visible=!1;G_3.ge("logo")&&(G_3.ge("logo").visible=!1);G_3.ge("LightActor")&&(G_3.ge("LightActor").visible=!1);var h;if(h=G_48.visible?!0:!1)G_48.visible=!1;for(var l=0;l<G_8.length;l++)for(var m=0;m<G_8[l].length;m++){var n=G_34.ge(G_10[l]+"_"+G_8[l][m].model);1==GLE_RenderMode&&(n.ge("edge").visible=!1);n.material.uniforms.bid.value=1;1==c&&(n.material.wireframe=!0)}G_4.sr(0,1);G_4.render(G_3,G_2,G_6);var q=new Uint8Array(4*e*g);G_4.rls(G_6,a-G_4.domElement.getBoundingClientRect().left,G_6.height-(d-G_4.domElement.getBoundingClientRect().top)-g,1*e,1*g,q);for(l=0;l<G_8.length;l++)for(m=0;m<G_8[l].length;m++)n=G_34.ge(G_10[l]+"_"+G_8[l][m].model),n.material.uniforms.bid.value=2;G_4.render(G_3,G_2,G_6);m=new Uint8Array(4*e*g);G_4.rls(G_6,a-G_4.domElement.getBoundingClientRect().left,G_6.height-(d-G_4.domElement.getBoundingClientRect().top)-g,1*e,g,m);a="";for(l=0;l<q.length/4;l++)if(0!=q[4*l]||0!=q[4*l+1]||0!=q[4*l+2])d=q[4*l]-1,d=G_10[d]+"_"+G_8[d][256*q[4*l+1]+q[4*l+2]].ids[3*(m[4*l+1]<<8|m[4*l+2])],-1===a.indexOf(d)&&(a+="#",a+=d);a=a.substr(1,a.length-1);h&&(G_48.visible=!0);for(l=0;l<G_8.length;l++)for(m=0;m<G_8[l].length;m++)n=G_34.ge(G_10[l]+"_"+G_8[l][m].model),1==GLE_RenderMode&&(n.ge("edge").visible=!0),n.material.uniforms.bid.value=0,1==c&&(n.material.wireframe=!1);G_4.sr(G_29,GLE_BACK_ALPHA);G_7=!0;G_3.ge("back").material.uniforms.texture1.value&&(G_3.ge("back").visible=!0);G_3.ge("logo")&&(G_3.ge("logo").visible=!0);G_3.ge("LightActor")&&(G_3.ge("LightActor").visible=!0);OnSelectionChanged(a)}}function ik2(c){if(G_7){var a=new GLE.Vector2;a.x=(c.pageX-G_4.domElement.getBoundingClientRect().left)/G_4.domElement.offsetWidth*2-1;a.y=2*-((c.pageY-G_4.domElement.getBoundingClientRect().top)/G_4.domElement.offsetHeight)+1;G_16.sa(a,G_2);var d=[];G_34.traverse(function(c){c instanceof GLE.Mesh&&-1<c.name.indexOf("ACT_")&&d.push(c)});if(0<d.length&&(a=G_16.is(d,!0),0<a.length)){for(var e=0;e<GLE_RightArray.length;e++)32==GLE_RightArray[e]&&0;OnAnchorClick(a[0].object.name.substr(4,a[0].object.name.length-4));return}G_7=!1;G_3.ge("back").visible=!1;G_3.ge("logo")&&(G_3.ge("logo").visible=!1);G_3.ge("LightActor")&&(G_3.ge("LightActor").visible=!1);if(needAxis=G_48.visible?!0:!1)G_48.visible=!1;for(e=0;e<G_8.length;e++)for(var g=0;g<G_8[e].length;g++){var h=G_34.ge(G_10[e]+"_"+G_8[e][g].model);1==GLE_RenderMode&&(h.ge("edge").visible=!1);h.material.uniforms.bid.value=1}G_4.autoClear=!0;G_4.sr(0,1);G_4.render(G_3,G_2,G_6);e=new Uint8Array(4);G_4.rls(G_6,c.pageX-G_4.domElement.getBoundingClientRect().left,G_6.height-(c.pageY-G_4.domElement.getBoundingClientRect().top),1,1,e);if(0==e[0]&&0==e[1]&&0==e[2]){needAxis&&(G_48.visible=!0);for(e=0;e<G_8.length;e++)for(g=0;g<G_8[e].length;g++)h=G_34.ge(G_10[e]+"_"+G_8[e][g].model),1==GLE_RenderMode&&(h.ge("edge").visible=!0),h.material.uniforms.bid.value=0;G_4.sr(G_29,GLE_BACK_ALPHA);G_7=!0;e=G_3.ge("back").material.uniforms;e.texture1.value&&(G_3.ge("back").visible=!0);G_3.ge("logo")&&(G_3.ge("logo").visible=!0);G_3.ge("LightActor")&&(G_3.ge("LightActor").visible=!0);OnClickBlank()}else if(0!=e[0]||0!=e[1]||0!=e[2]){var a=e[0]-1,l=256*e[1]+e[2],m=G_34.ge(G_10[a]+"_"+G_8[a][l].model);m.material.uniforms.bid.value=2;for(e=0;e<G_8.length;e++)for(g=0;g<G_8[e].length;g++)h=G_34.ge(G_10[e]+"_"+G_8[e][g].model);m.visible=!0;G_4.render(G_3,G_2,G_6);e=new Uint8Array(4);G_4.rls(G_6,c.pageX-G_4.domElement.getBoundingClientRect().left,G_6.height-(c.pageY-G_4.domElement.getBoundingClientRect().top),1,1,e);c=G_8[a][l].ids[3*(e[1]<<8|e[2])];needAxis&&(G_48.visible=!0);for(e=0;e<G_8.length;e++)for(g=0;g<G_8[e].length;g++)h=G_34.ge(G_10[e]+"_"+G_8[e][g].model),1==GLE_RenderMode&&(h.ge("edge").visible=!0),h.material.uniforms.bid.value=0;G_4.sr(G_29,GLE_BACK_ALPHA);G_7=!0;e=G_3.ge("back").material.uniforms;e.texture1.value&&(G_3.ge("back").visible=!0);G_3.ge("logo")&&(G_3.ge("logo").visible=!0);G_3.ge("LightActor")&&(G_3.ge("LightActor").visible=!0);OnSelectionChanged(G_10[a]+"_"+c)}}}function ik3(c){if(G_7){var a=new GLE.Vector2;a.x=(c.pageX-G_4.domElement.getBoundingClientRect().left)/G_4.domElement.offsetWidth*2-1;a.y=2*-((c.pageY-G_4.domElement.getBoundingClientRect().top)/G_4.domElement.offsetHeight)+1;G_16.sa(a,G_2);var d=[];G_34.traverse(function(c){c instanceof GLE.Mesh&&-1<c.name.indexOf("ACT_")&&d.push(c)});if(0<d.length){var e=G_16.is(d,!0);if(0<e.length){OnAnchorClick(e[0].object.name.substr(4,e[0].object.name.length-4));return}}G_7=!1;G_3.ge("back").visible=!1;G_3.ge("logo")&&(G_3.ge("logo").visible=!1);G_3.ge("LightActor")&&(G_3.ge("LightActor").visible=!1);if(needAxis=G_48.visible?!0:!1)G_48.visible=!1;for(a=0;a<G_8.length;a++)for(var g=0;g<G_8[a].length;g++){var h=G_34.ge(G_10[a]+"_"+G_8[a][g].model);1==GLE_RenderMode&&(h.ge("edge").visible=!1);h.material.uniforms.bid.value=1}G_4.autoClear=!0;G_4.sr(0,1);G_4.render(G_3,G_2,G_6);e=new Uint8Array(4);G_4.rls(G_6,c.pageX-G_4.domElement.getBoundingClientRect().left,G_6.height-(c.pageY-G_4.domElement.getBoundingClientRect().top),1,1,e);if(0==e[0]&&0==e[1]&&0==e[2]){needAxis&&(G_48.visible=!0);for(a=0;a<G_8.length;a++)for(g=0;g<G_8[a].length;g++)h=G_34.ge(G_10[a]+"_"+G_8[a][g].model),1==GLE_RenderMode&&(h.ge("edge").visible=!0),h.material.uniforms.bid.value=0;G_4.sr(G_29,GLE_BACK_ALPHA);G_7=!0;a=G_3.ge("back").material.uniforms;a.texture1.value&&(G_3.ge("back").visible=!0);G_3.ge("logo")&&(G_3.ge("logo").visible=!0);G_3.ge("LightActor")&&(G_3.ge("LightActor").visible=!0);OnClickBlank()}else{var l=e[0]-1,m=256*e[1]+e[2],e=G_34.ge(G_10[l]+"_"+G_8[l][m].model);e.material.uniforms.bid.value=2;for(a=0;a<G_8.length;a++)for(g=0;g<G_8[a].length;g++)h=G_34.ge(G_10[a]+"_"+G_8[a][g].model);e.visible=!0;G_4.render(G_3,G_2,G_6);a=new Uint8Array(4);G_4.rls(G_6,c.pageX-G_4.domElement.getBoundingClientRect().left,G_6.height-(c.pageY-G_4.domElement.getBoundingClientRect().top),1,1,a);m=G_8[l][m].ids[3*(a[1]<<8|a[2])];needAxis&&(G_48.visible=!0);for(a=0;a<G_8.length;a++)for(g=0;g<G_8[a].length;g++)h=G_34.ge(G_10[a]+"_"+G_8[a][g].model),1==GLE_RenderMode&&(h.ge("edge").visible=!0),h.material.uniforms.bid.value=0;G_4.sr(G_29,GLE_BACK_ALPHA);G_7=!0;a=G_3.ge("back").material.uniforms;a.texture1.value&&(G_3.ge("back").visible=!0);a=new GLE.Vector2;a.x=(c.pageX-G_4.domElement.getBoundingClientRect().left)/G_4.domElement.offsetWidth*2-1;a.y=2*-((c.pageY-G_4.domElement.getBoundingClientRect().top)/G_4.domElement.offsetHeight)+1;G_16.sa(a,G_2);c=[];c.push(e);e=G_16.is(c,!1);0<e.length?OnClickPosition(G_35.position.x+","+G_35.position.y+","+G_35.position.z+","+G_35.rotation.x+","+G_35.rotation.y+","+G_35.rotation.z+","+e[0].point.x+","+e[0].point.y+","+e[0].point.z):OnClickBlank();G_3.ge("logo")&&(G_3.ge("logo").visible=!0);G_3.ge("LightActor")&&(G_3.ge("LightActor").visible=!0);OnSelectionChanged(G_10[l]+"_"+m)}}}function ik4(c,a){a||(a=1);1==a&&1<G_50.length&&4==G_49&&ClearMeasure();1==a&&2<G_50.length&&5==G_49&&ClearMeasure();if(!(G_50.length>2*a-1&&4==G_49||G_50.length>3*a-1&&5==G_49))if(GLE_AutoCorrection){G_7=!1;G_3.ge("back").visible=!1;if(needAxis=G_48.visible?!0:!1)G_48.visible=!1;for(var d=0;d<G_8.length;d++)for(var e=0;e<G_8[d].length;e++){var g=G_34.ge(G_10[d]+"_"+G_8[d][e].model);1==GLE_RenderMode&&(g.ge("edge").visible=!1);g.material.uniforms.bid.value=1}for(d=0;d<G_50.length/2;d++)G_34.ge("result"+d)&&(G_34.ge("result"+d).visible=!1),G_34.ge("angle"+d)&&(G_34.ge("angle"+d).visible=!1);G_34.ge("mypoint")&&(G_34.ge("mypoint").visible=!1);G_4.sr(0,1);G_4.render(G_3,G_2,G_6);d=new Uint8Array(4);G_4.rls(G_6,c.pageX-G_4.domElement.getBoundingClientRect().left,G_6.height-(c.pageY-G_4.domElement.getBoundingClientRect().top),1,1,d);if(0==d[0]&&0==d[1]&&0==d[2]){needAxis&&(G_48.visible=!0);for(d=0;d<G_8.length;d++)for(e=0;e<G_8[d].length;e++)g=G_34.ge(G_10[d]+"_"+G_8[d][e].model),1==GLE_RenderMode&&(g.ge("edge").visible=!0),g.material.uniforms.bid.value=0;for(d=0;d<G_50.length/2;d++)G_34.ge("result"+d)&&(G_34.ge("result"+d).visible=!0),G_34.ge("angle"+d)&&(G_34.ge("angle"+d).visible=!0);G_34.ge("mypoint")&&(G_34.ge("mypoint").visible=!0);G_4.sr(G_29,GLE_BACK_ALPHA);G_7=!0;d=G_3.ge("back").material.uniforms;d.texture1.value&&(G_3.ge("back").visible=!0)}else{var h=d[0]-1,l=256*d[1]+d[2],m=G_34.ge(G_10[h]+"_"+G_8[h][l].model);m.material.uniforms.bid.value=2;for(d=0;d<G_8.length;d++)for(e=0;e<G_8[d].length;e++)G_34.ge(G_10[d]+"_"+G_8[d][e].model);m.visible=!0;G_4.render(G_3,G_2,G_6);d=new Uint8Array(4);G_4.rls(G_6,c.pageX-G_4.domElement.getBoundingClientRect().left,G_6.height-(c.pageY-G_4.domElement.getBoundingClientRect().top),1,1,d);l=G_10[h]+"_"+G_8[h][l].ids[3*(d[1]<<8|d[2])];needAxis&&(G_48.visible=!0);for(d=0;d<G_8.length;d++)for(e=0;e<G_8[d].length;e++)g=G_34.ge(G_10[d]+"_"+G_8[d][e].model),1==GLE_RenderMode&&(g.ge("edge").visible=!0),g.material.uniforms.bid.value=0;G_4.sr(G_29,GLE_BACK_ALPHA);G_7=!0;d=G_3.ge("back").material.uniforms;d.texture1.value&&(G_3.ge("back").visible=!0);d=new GLE.Vector2;d.x=(c.pageX-G_4.domElement.getBoundingClientRect().left)/G_4.domElement.offsetWidth*2-1;d.y=2*-((c.pageY-G_4.domElement.getBoundingClientRect().top)/G_4.domElement.offsetHeight)+1;G_16.sa(d,G_2);h=[];h.push(m);h=G_16.is(h,!1);if(0<h.length){m=[];for(d=0;d<G_10.length;d++)for(e=0;e<G_8[d].length;e++)for(var g=G_34.ge(G_10[d]+"_"+G_8[d][e].model),g=g.geometry.attributes.position.array,n=0;n<G_8[d][e].ids.length/3;n++){var q;q=l.toString().split("_");if(q[0]==G_10[d]&&parseInt(q[1])==G_8[d][e].ids[3*n])for(q=G_8[d][e].ids[3*n+1];q<G_8[d][e].ids[3*n+2];q++)m.push(g[3*q]),m.push(g[3*q+1]),m.push(g[3*q+2])}new GLE.Geometry;e=new GLE.Vector3(h[0].point.x,h[0].point.y,h[0].point.z);d=new GLE.Matrix4;e.applyMatrix4(d.getInverse(G_35.matrixWorld));l=e.x;d=e.y;g=e.z;l-=G_36.position.x;d-=G_36.position.y;g-=G_36.position.z;e=Infinity;h=new GLE.Vector3(0,0,0);g=new GLE.Vector3(l,d,g);for(d=0;d<m.length/3;d++)l=new GLE.Vector3(m[3*d],m[3*d+1],m[3*d+2]),g.distanceTo(l)<e&&(e=g.distanceTo(l),h=l);for(d=0;d<G_50.length/2;d++)G_34.ge("result"+d)&&(G_34.ge("result"+d).visible=!0),G_34.ge("angle"+d)&&(G_34.ge("angle"+d).visible=!0);G_34.ge("mypoint")&&(G_34.ge("mypoint").visible=!0);G_50.push(h);G_34.remove(G_34.ge("mypoint"));G_34.remove(G_34.ge("myline"));if(4==G_49){if(DrawPoints(G_50,"0xff9900"),DrawLineSegments(G_50),1<G_50.length&&(d=[],d.push(G_50[1]),d.push(new GLE.Vector3(G_50[0].x,G_50[1].y,G_50[1].z)),DrawDashLineSegments(d,"#ff0000","x"),d=[],d.push(new GLE.Vector3(G_50[0].x,G_50[1].y,G_50[1].z)),d.push(new GLE.Vector3(G_50[0].x,G_50[0].y,G_50[1].z)),DrawDashLineSegments(d,"#00ff00","y"),d=[],d.push(new GLE.Vector3(G_50[0].x,G_50[0].y,G_50[1].z)),d.push(new GLE.Vector3(G_50[0].x,G_50[0].y,G_50[0].z)),DrawDashLineSegments(d,"#0000ff","z")),0==G_50.length%2){d=G_50.length/2-1;m=new GLE.Vector3(G_50[2*d].x,G_50[2*d].y,G_50[2*d].z);e=new GLE.Vector3(G_50[2*d+1].x,G_50[2*d+1].y,G_50[2*d+1].z);l=new GLE.Vector3((m.x+e.x)/2,(m.y+e.y)/2,(m.z+e.z)/2);h=(m.distanceTo(e)/1E3).toFixed(3)+"\u7c73";DrawWords(l,h,"result"+d,"#ff9900");l=new GLE.Vector3(G_50[2*d].x,G_50[2*d+1].y,G_50[2*d+1].z);h=new GLE.Vector3(G_50[2*d+1].x,G_50[2*d+1].y,G_50[2*d+1].z);g=new GLE.Vector3((l.x+h.x)/2,(l.y+h.y)/2,(l.z+h.z)/2);n=(l.distanceTo(h)/1E3).toFixed(3)+"\u7c73";DrawWords0(g,n,"result"+(d+1),"#ff0000");g=new GLE.Vector3(G_50[2*d].x,G_50[2*d+1].y,G_50[2*d+1].z);n=new GLE.Vector3(G_50[2*d].x,G_50[2*d].y,G_50[2*d+1].z);q=new GLE.Vector3((g.x+n.x)/2,(g.y+n.y)/2,(g.z+n.z)/2);var z=(g.distanceTo(n)/1E3).toFixed(3)+"\u7c73";DrawWords0(q,z,"result"+(d+2),"#00ff00");q=new GLE.Vector3(G_50[2*d].x,G_50[2*d].y,G_50[2*d+1].z);var z=new GLE.Vector3(G_50[2*d].x,G_50[2*d].y,G_50[2*d].z),F=new GLE.Vector3((q.x+z.x)/2,(q.y+z.y)/2,(q.z+z.z)/2),C=(q.distanceTo(z)/1E3).toFixed(3)+"\u7c73";DrawWords0(F,C,"result"+(d+3),"#0000ff");for(d=0;d<GLE_RightArray.length;d++)if(15==GLE_RightArray[d])return;OnMeasureResult((m.distanceTo(e)/1E3).toFixed(3)+","+(l.distanceTo(h)/1E3).toFixed(3)+","+(g.distanceTo(n)/1E3).toFixed(3)+","+(q.distanceTo(z)/1E3).toFixed(3))}}else if(DrawPoints(G_50),0==G_50.length%3){d=G_50.length/3-1;m=new GLE.Vector3(G_50[3*d].x,G_50[3*d].y,G_50[3*d].z);e=new GLE.Vector3(G_50[3*d+1].x,G_50[3*d+1].y,G_50[3*d+1].z);g=new GLE.Vector3(G_50[3*d+2].x,G_50[3*d+2].y,G_50[3*d+2].z);l=new GLE.Vector3((m.x+e.x+g.x)/3,(m.y+e.y+g.y)/3,(m.z+e.z+g.z)/3);h=M_GetAngle([m.x,m.y,m.z],[e.x,e.y,e.z],[g.x,g.y,g.z]).toFixed(3)+"\u00b0";DrawWords(l,h,"result"+d);DrawLineSegments1([m,e,g],"angle"+d);for(d=0;d<GLE_RightArray.length;d++)if(15==GLE_RightArray[d])return;OnMeasureResult(M_GetAngle([m.x,m.y,m.z],[e.x,e.y,e.z],[g.x,g.y,g.z]).toFixed(3))}}else OnClickBlank()}}else{G_7=!1;G_3.ge("back").visible=!1;d=new GLE.Vector2;d.x=(c.pageX-G_4.domElement.getBoundingClientRect().left)/G_4.domElement.offsetWidth*2-1;d.y=2*-((c.pageY-G_4.domElement.getBoundingClientRect().top)/G_4.domElement.offsetHeight)+1;G_16.sa(d,G_2);h=[];for(d=0;d<G_8.length;d++)for(e=0;e<G_8[d].length;e++)g=G_34.ge(G_10[d]+"_"+G_8[d][e].model),h.push(g);h=G_16.is(h,!1);G_7=!0;d=G_3.ge("back").material.uniforms;d.texture1.value&&(G_3.ge("back").visible=!0);if(0<h.length)if(new GLE.Geometry,e=new GLE.Vector3(h[0].point.x,h[0].point.y,h[0].point.z),d=new GLE.Matrix4,e.applyMatrix4(d.getInverse(G_35.matrixWorld)),l=e.x,d=e.y,g=e.z,l-=G_36.position.x,d-=G_36.position.y,g-=G_36.position.z,G_50.push(new GLE.Vector3(l,d,g)),G_34.remove(G_34.ge("mypoint")),G_34.remove(G_34.ge("myline")),4==G_49){if(DrawPoints(G_50,"0xff9900"),DrawLineSegments(G_50),1<G_50.length&&(d=[],d.push(G_50[1]),d.push(new GLE.Vector3(G_50[0].x,G_50[1].y,G_50[1].z)),DrawDashLineSegments(d,"#ff0000","x"),d=[],d.push(new GLE.Vector3(G_50[0].x,G_50[1].y,G_50[1].z)),d.push(new GLE.Vector3(G_50[0].x,G_50[0].y,G_50[1].z)),DrawDashLineSegments(d,"#00ff00","y"),d=[],d.push(new GLE.Vector3(G_50[0].x,G_50[0].y,G_50[1].z)),d.push(new GLE.Vector3(G_50[0].x,G_50[0].y,G_50[0].z)),DrawDashLineSegments(d,"#0000ff","z")),0==G_50.length%2){d=G_50.length/2-1;m=new GLE.Vector3(G_50[2*d].x,G_50[2*d].y,G_50[2*d].z);e=new GLE.Vector3(G_50[2*d+1].x,G_50[2*d+1].y,G_50[2*d+1].z);l=new GLE.Vector3((m.x+e.x)/2,(m.y+e.y)/2,(m.z+e.z)/2);h=(m.distanceTo(e)/1E3).toFixed(3)+"\u7c73";DrawWords(l,h,"result"+d,"#ff9900");l=new GLE.Vector3(G_50[2*d].x,G_50[2*d+1].y,G_50[2*d+1].z);h=new GLE.Vector3(G_50[2*d+1].x,G_50[2*d+1].y,G_50[2*d+1].z);g=new GLE.Vector3((l.x+h.x)/2,(l.y+h.y)/2,(l.z+h.z)/2);n=(l.distanceTo(h)/1E3).toFixed(3)+"\u7c73";DrawWords0(g,n,"result"+(d+1),"#ff0000");g=new GLE.Vector3(G_50[2*d].x,G_50[2*d+1].y,G_50[2*d+1].z);n=new GLE.Vector3(G_50[2*d].x,G_50[2*d].y,G_50[2*d+1].z);q=new GLE.Vector3((g.x+n.x)/2,(g.y+n.y)/2,(g.z+n.z)/2);z=(g.distanceTo(n)/1E3).toFixed(3)+"\u7c73";DrawWords0(q,z,"result"+(d+2),"#00ff00");q=new GLE.Vector3(G_50[2*d].x,G_50[2*d].y,G_50[2*d+1].z);z=new GLE.Vector3(G_50[2*d].x,G_50[2*d].y,G_50[2*d].z);F=new GLE.Vector3((q.x+z.x)/2,(q.y+z.y)/2,(q.z+z.z)/2);C=(q.distanceTo(z)/1E3).toFixed(3)+"\u7c73";DrawWords0(F,C,"result"+(d+3),"#0000ff");for(d=0;d<GLE_RightArray.length;d++)if(15==GLE_RightArray[d])return;OnMeasureResult((m.distanceTo(e)/1E3).toFixed(3)+","+(l.distanceTo(h)/1E3).toFixed(3)+","+(g.distanceTo(n)/1E3).toFixed(3)+","+(q.distanceTo(z)/1E3).toFixed(3))}}else if(DrawPoints(G_50),0==G_50.length%3){d=G_50.length/3-1;m=new GLE.Vector3(G_50[3*d].x,G_50[3*d].y,G_50[3*d].z);e=new GLE.Vector3(G_50[3*d+1].x,G_50[3*d+1].y,G_50[3*d+1].z);g=new GLE.Vector3(G_50[3*d+2].x,G_50[3*d+2].y,G_50[3*d+2].z);l=new GLE.Vector3((m.x+e.x+g.x)/3,(m.y+e.y+g.y)/3,(m.z+e.z+g.z)/3);h=M_GetAngle([m.x,m.y,m.z],[e.x,e.y,e.z],[g.x,g.y,g.z]).toFixed(3)+"\u00b0";DrawWords(l,h,"result"+d);DrawLineSegments1([m,e,g],"angle"+d);for(d=0;d<GLE_RightArray.length;d++)if(15==GLE_RightArray[d])return;OnMeasureResult(M_GetAngle([m.x,m.y,m.z],[e.x,e.y,e.z],[g.x,g.y,g.z]).toFixed(3))}}}function ik5(c){if(G_7){G_58=(new Date).getTime();G_7=!1;G_3.ge("back").visible=!1;G_34.ge("myline")&&(G_34.ge("myline").visible=!1);G_34.ge("mytrig")&&(G_34.ge("mytrig").visible=!1);if(needAxis=G_48.visible?!0:!1)G_48.visible=!1;for(var a=0;a<G_8.length;a++)for(var d=0;d<G_8[a].length;d++){var e=G_34.ge(G_10[a]+"_"+G_8[a][d].model);1==GLE_RenderMode&&(e.ge("edge").visible=!1);e.material.uniforms.bid.value=1}G_4.sr(0,1);G_4.render(G_3,G_2,G_6);a=new Uint8Array(4);G_4.rls(G_6,c.pageX-G_4.domElement.getBoundingClientRect().left,G_6.height-(c.pageY-G_4.domElement.getBoundingClientRect().top),1,1,a);if(0==a[0]&&0==a[1]&&0==a[2]){needAxis&&(G_48.visible=!0);for(a=0;a<G_8.length;a++)for(d=0;d<G_8[a].length;d++)e=G_34.ge(G_10[a]+"_"+G_8[a][d].model),1==GLE_RenderMode&&(e.ge("edge").visible=!0),e.material.uniforms.bid.value=0;G_4.sr(G_29,GLE_BACK_ALPHA);G_34.ge("myline")&&(G_34.ge("myline").visible=!0);G_34.ge("mytrig")&&(G_34.ge("mytrig").visible=!0);G_7=!0;a=G_3.ge("back").material.uniforms;a.texture1.value&&(G_3.ge("back").visible=!0)}else{var g=a[0]-1,h=256*a[1]+a[2],l=G_34.ge(G_10[g]+"_"+G_8[g][h].model);l.material.uniforms.bid.value=2;for(a=0;a<G_8.length;a++)for(d=0;d<G_8[a].length;d++)G_34.ge(G_10[a]+"_"+G_8[a][d].model);l.visible=!0;G_4.render(G_3,G_2,G_6);a=new Uint8Array(4);G_4.rls(G_6,c.pageX-G_4.domElement.getBoundingClientRect().left,G_6.height-(c.pageY-G_4.domElement.getBoundingClientRect().top),1,1,a);h=G_8[g][h].ids[3*(a[1]<<8|a[2])];needAxis&&(G_48.visible=!0);for(a=0;a<G_8.length;a++)for(d=0;d<G_8[a].length;d++)e=G_34.ge(G_10[a]+"_"+G_8[a][d].model),1==GLE_RenderMode&&(e.ge("edge").visible=!0),e.material.uniforms.bid.value=0;G_4.sr(G_29,GLE_BACK_ALPHA);G_34.ge("myline")&&(G_34.ge("myline").visible=!0);G_34.ge("mytrig")&&(G_34.ge("mytrig").visible=!0);G_7=!0;a=G_3.ge("back").material.uniforms;a.texture1.value&&(G_3.ge("back").visible=!0);a=new GLE.Vector2;a.x=(c.pageX-G_4.domElement.getBoundingClientRect().left)/G_4.domElement.offsetWidth*2-1;a.y=2*-((c.pageY-G_4.domElement.getBoundingClientRect().top)/G_4.domElement.offsetHeight)+1;G_16.sa(a,G_2);a=[];a.push(l);a=G_16.is(a,!1);if(0<a.length){a=new GLE.Vector3(a[0].point.x,a[0].point.y,a[0].point.z);c=new GLE.Matrix4;a.applyMatrix4(c.getInverse(G_35.matrixWorld));var l=a.x,m=a.y,n=a.z,l=l-G_36.position.x,m=m-G_36.position.y,n=n-G_36.position.z;c=[];for(a=0;a<G_10.length;a++)if(G_10[g]==G_10[a])for(d=0;d<G_8[a].length;d++)for(var q=0;q<G_8[a][d].ids.length/3;q++)if(h==G_8[a][d].ids[3*q])for(var e=G_34.ge(G_10[a]+"_"+G_8[a][d].model),e=e.geometry.attributes.position.array,z=G_8[a][d].ids[3*q+1];z<G_8[a][d].ids[3*q+2];z++){var F=new GLE.Vector3(e[3*z],e[3*z+1],e[3*z+2]);c.push(F)}if(6==G_49){g=[];for(a=d=0;a<c.length/3;a++)M_JudgePlane([c[3*a].x,c[3*a].y,c[3*a].z],[c[3*a+1].x,c[3*a+1].y,c[3*a+1].z],[c[3*a+2].x,c[3*a+2].y,c[3*a+2].z],[l,m,n])&&(g.push(new GLE.Vector3(c[3*a].x,c[3*a].y,c[3*a].z)),g.push(new GLE.Vector3(c[3*a+1].x,c[3*a+1].y,c[3*a+1].z)),g.push(new GLE.Vector3(c[3*a+2].x,c[3*a+2].y,c[3*a+2].z)),d+=M_GetArea([c[3*a].x,c[3*a].y,c[3*a].z],[c[3*a+1].x,c[3*a+1].y,c[3*a+1].z],[c[3*a+2].x,c[3*a+2].y,c[3*a+2].z]));G_34.remove(G_34.ge("areaResult"));G_34.remove(G_34.ge("mytrig"));G_34.remove(G_34.ge("area"));$("#area-canvas").remove();$("#areaResult-canvas").remove();DrawTrigs(g);h=new GLE.Vector3(0,0,0);for(a=n=m=l=0;a<g.length;a++)l+=g[a].x,m+=g[a].y,n+=g[a].z;h.x=l/g.length;h.y=m/g.length;h.z=n/g.length;a=(parseFloat(d)/1E6).toFixed(3)+"\u5e73\u65b9\u7c73";DrawWords(h,a,"areaResult");for(a=0;a<GLE_RightArray.length;a++)if(15==GLE_RightArray[a])return;OnMeasureResult((parseFloat(d)/1E6).toFixed(3))}if(7==G_49){g=[];for(a=d=0;a<c.length/3;a++)g.push(new GLE.Vector3(c[3*a].x,c[3*a].y,c[3*a].z)),g.push(new GLE.Vector3(c[3*a+1].x,c[3*a+1].y,c[3*a+1].z)),g.push(new GLE.Vector3(c[3*a+2].x,c[3*a+2].y,c[3*a+2].z)),d+=M_GetArea([c[3*a].x,c[3*a].y,c[3*a].z],[c[3*a+1].x,c[3*a+1].y,c[3*a+1].z],[c[3*a+2].x,c[3*a+2].y,c[3*a+2].z]);G_34.remove(G_34.ge("areaResult"));G_34.remove(G_34.ge("mytrig"));G_34.remove(G_34.ge("area"));$("#area-canvas").remove();$("#areaResult-canvas").remove();DrawTrigs(g);h=new GLE.Vector3(0,0,0);for(a=n=m=l=0;a<g.length;a++)l+=g[a].x,m+=g[a].y,n+=g[a].z;h.x=l/g.length;h.y=m/g.length;h.z=n/g.length;a=(parseFloat(d)/1E6).toFixed(3)+"\u5e73\u65b9\u7c73";DrawWords(h,a,"areaResult");for(a=0;a<GLE_RightArray.length;a++)if(15==GLE_RightArray[a])return;OnMeasureResult((parseFloat(d)/1E6).toFixed(3))}if(8==G_49){g=[];for(a=d=0;a<c.length/3;a++)g.push(new GLE.Vector3(c[3*a].x,c[3*a].y,c[3*a].z)),g.push(new GLE.Vector3(c[3*a+1].x,c[3*a+1].y,c[3*a+1].z)),g.push(new GLE.Vector3(c[3*a+2].x,c[3*a+2].y,c[3*a+2].z)),d+=CalculateVolume(new GLE.Vector3(c[3*a].x,c[3*a].y,c[3*a].z),new GLE.Vector3(c[3*a+1].x,c[3*a+1].y,c[3*a+1].z),new GLE.Vector3(c[3*a+2].x,c[3*a+2].y,c[3*a+2].z));G_34.remove(G_34.ge("areaResult"));G_34.remove(G_34.ge("mytrig"));G_34.remove(G_34.ge("area"));$("#area-canvas").remove();$("#areaResult-canvas").remove();DrawTrigs(g);h=new GLE.Vector3(0,0,0);q=new GLE.Vector3(g[0].x,g[0].y,g[0].z);e=new GLE.Vector3(g[0].x,g[0].y,g[0].z);for(a=n=m=l=0;a<g.length;a++)l+=g[a].x,m+=g[a].y,n+=g[a].z,g[a].x<q.x&&(q.x=g[a].x),g[a].y<q.y&&(q.y=g[a].y),g[a].z<q.z&&(q.z=g[a].z),g[a].x>e.x&&(e.x=g[a].x),g[a].y>e.y&&(e.y=g[a].y),g[a].z>e.z&&(e.z=g[a].z);h.x=l/g.length;h.y=m/g.length;h.z=n/g.length;g=(parseFloat(d)/1E9).toFixed(3);DrawWords(h,g+"\u7acb\u65b9\u7c73","areaResult");for(a=0;a<GLE_RightArray.length;a++)if(15==GLE_RightArray[a])return;OnMeasureResult(g)}if(9==G_49){g=[];for(a=d=0;a<c.length/3;a++)g.push(new GLE.Vector3(c[3*a].x,c[3*a].y,c[3*a].z)),g.push(new GLE.Vector3(c[3*a+1].x,c[3*a+1].y,c[3*a+1].z)),g.push(new GLE.Vector3(c[3*a+2].x,c[3*a+2].y,c[3*a+2].z)),d+=CalculateVolume(new GLE.Vector3(c[3*a].x,c[3*a].y,c[3*a].z),new GLE.Vector3(c[3*a+1].x,c[3*a+1].y,c[3*a+1].z),new GLE.Vector3(c[3*a+2].x,c[3*a+2].y,c[3*a+2].z));G_34.remove(G_34.ge("areaResult"));G_34.remove(G_34.ge("mytrig"));G_34.remove(G_34.ge("area"));$("#area-canvas").remove();$("#areaResult-canvas").remove();DrawTrigs(g);h=new GLE.Vector3(0,0,0);q=new GLE.Vector3(g[0].x,g[0].y,g[0].z);e=new GLE.Vector3(g[0].x,g[0].y,g[0].z);for(a=n=m=l=0;a<g.length;a++)l+=g[a].x,m+=g[a].y,n+=g[a].z,g[a].x<q.x&&(q.x=g[a].x),g[a].y<q.y&&(q.y=g[a].y),g[a].z<q.z&&(q.z=g[a].z),g[a].x>e.x&&(e.x=g[a].x),g[a].y>e.y&&(e.y=g[a].y),g[a].z>e.z&&(e.z=g[a].z);h.x=l/g.length;h.y=m/g.length;h.z=n/g.length;g=d/1E9;a=(G_52/1E3*g).toFixed(3)+"\u5428";DrawWords(h,a,"areaResult");for(a=0;a<GLE_RightArray.length;a++)if(15==GLE_RightArray[a])return;OnMeasureResult((G_52/1E3*g).toFixed(3))}}else OnClickBlank()}}}function DrawPoints(c,a){var d=new GLE.Geometry,e=new GLE.Mal({color:16750848}),d=new GLE.Mesh(d,e);d.name="mypoint";G_34.add(d);for(e=0;e<c.length;e++){var g=new GLE.SphereBufferGeometry(.5,16,8),h=new GLE.Mesh(g,new GLE.Mal({color:16711680}));a&&(h=new GLE.Mesh(g,new GLE.Mal({color:16750848})));h.scale.x=60;h.scale.y=60;h.scale.z=60;h.position.x=c[e].x;h.position.y=c[e].y;h.position.z=c[e].z;h.material.transparent=!0;h.material.side=GLE.DoubleSide;h.material.alphaTest=.1;h.material.depthTest=!1;h.material.depthWrite=!1;h.renderOrder=10;d.add(h)}}function DrawLineSegments(c,a){var d=new GLE.Geometry,e=new GLE.LineBasicMaterial({color:16750848});a&&(e=new GLE.LineBasicMaterial({color:a}));for(var g=0;g<c.length;g++)d.vertices.push(c[g]);d=new GLE.LineSegments(d,e);d.material.transparent=!0;d.material.side=GLE.DoubleSide;d.material.alphaTest=.1;d.material.depthTest=!1;d.material.depthWrite=!1;d.renderOrder=10;d.name="myline";G_34.add(d)}function DrawDashLineSegments(c,a,d){var e=new GLE.Geometry,g=new GLE.LineBasicMaterial({color:16750848});a&&(g=new GLE.LineBasicMaterial({color:a}));a=[];a.push(new GLE.Vector3(c[0].x,c[0].y,c[0].z));a.push(new GLE.Vector3(c[1].x,c[1].y,c[1].z));if("x"==d)for(a[0].x>a[1].x&&(c=a[0].x,a[0].x=a[1].x,a[1].x=c),c=0;150*c+a[0].x<a[1].x;c++)e.vertices.push(new GLE.Vector3(a[0].x+150*c,a[0].y,a[0].z)),a[0].x+150*c+100>a[1].x?e.vertices.push(new GLE.Vector3(a[1].x,a[0].y,a[0].z)):e.vertices.push(new GLE.Vector3(a[0].x+150*c+100,a[0].y,a[0].z));else if("y"==d)for(a[0].y>a[1].y&&(c=a[0].y,a[0].y=a[1].y,a[1].y=c),c=0;150*c+a[0].y<a[1].y;c++)e.vertices.push(new GLE.Vector3(a[0].x,a[0].y+150*c,a[0].z)),a[0].y+150*c+100>a[1].y?e.vertices.push(new GLE.Vector3(a[0].x,a[1].y,a[0].z)):e.vertices.push(new GLE.Vector3(a[0].x,a[0].y+150*c+100,a[0].z));else if("z"==d)for(a[0].z>a[1].z&&(c=a[0].z,a[0].z=a[1].z,a[1].z=c),c=0;150*c+a[0].z<a[1].z;c++)e.vertices.push(new GLE.Vector3(a[0].x,a[0].y,a[0].z+150*c)),a[0].z+150*c+100>a[1].z?e.vertices.push(new GLE.Vector3(a[0].x,a[0].y,a[1].z)):e.vertices.push(new GLE.Vector3(a[0].x,a[0].y,a[0].z+150*c+100));e=new GLE.LineSegments(e,g);e.material.transparent=!0;e.material.side=GLE.DoubleSide;e.material.alphaTest=.1;e.material.depthTest=!1;e.material.depthWrite=!1;e.renderOrder=10;G_34.ge("myline").add(e)}function DrawLineSegments1(c,a){for(var d=new GLE.Geometry,e=new GLE.LineBasicMaterial({color:16711935}),g=0;g<c.length;g++)d.vertices.push(c[g]);d=new GLE.Line(d,e);d.material.transparent=!0;d.material.side=GLE.DoubleSide;d.material.alphaTest=.1;d.material.depthTest=!1;d.material.depthWrite=!1;d.renderOrder=10;d.name=a;G_34.add(d)}function DrawLines(c){for(var a=new GLE.Geometry,d=new GLE.LineBasicMaterial({color:16711935}),e=0;e<c.length;e++)a.vertices.push(c[e]);c=new GLE.LineLoop(a,d);c.material.transparent=!0;c.material.side=GLE.DoubleSide;c.material.alphaTest=.1;c.material.depthTest=!1;c.material.depthWrite=!1;c.renderOrder=10;c.name="myline";G_34.add(c)}function DrawMesh(c){var a=new GLE.BufferGeometry;a.addAttribute("position",(new GLE.Float32BufferAttribute(c,3)).onUpload(disposeArray));c=new GLE.Mesh(a,new GLE.Mal({color:255}));c.material.depthTest=!1;c.material.depthWrite=!1;c.renderOrder=10;G_34.add(c)}function DrawTrigs(c){for(var a=new GLE.Geometry,d=0;d<c.length/3;d++)a.vertices.push(c[3*d]),a.vertices.push(c[3*d+1]),a.vertices.push(c[3*d+2]),a.faces.push(new GLE.Face3(3*d,3*d+1,3*d+2));c=new GLE.Mal({color:255});a.computeBoundingSphere();a=new GLE.Mesh(a,c);a.material.transparent=!0;a.material.side=GLE.DoubleSide;a.material.alphaTest=.1;a.material.depthTest=!1;a.material.depthWrite=!1;a.material.opacity=.3;a.renderOrder=19;a.name="mytrig";G_34.add(a)}function DrawWords(c,a,d,e){var g='\x3ccanvas id\x3d"'+d+'-canvas" height\x3d"32" width\x3d"128" style\x3d"display:block;position: absolute;top:0px;"\x3e\x3c/canvas\x3e';null==G_0?document.getElementsByTagName("body")[0].innerHTML+=g:$("#"+G_15).append(g);g=document.getElementById(d+"-canvas");g.style.zIndex="-1";G_18=g.getContext("2d");g=new GLE.Texture(g);G_18.font="20px Arial";G_18.fillStyle=e?e:"#ff0000";G_18.textAlign="center";G_18.fillText(a,64,24);g.needsUpdate=!0;a=new GLE.PlaneGeometry(2E3,640);e=new GLE.Mal;a=new GLE.Mesh(a,e);a.rotation.x=.5*Math.PI;a.position.x=c.x;a.position.y=c.y;a.position.z=c.z;a.material.map=g;a.material.transparent=!0;a.material.map.needsUpdate=!0;a.material.side=GLE.DoubleSide;a.material.alphaTest=.5;a.material.depthTest=!1;a.material.depthWrite=!1;a.renderOrder=10;a.rotation.y-=G_35.rotation.z;a.name=d;G_34.add(a)}function DrawWords0(c,a,d,e){var g='\x3ccanvas id\x3d"'+d+'-canvas" height\x3d"32" width\x3d"128" style\x3d"display:block;position: absolute;top:0px;"\x3e\x3c/canvas\x3e';null==G_0?document.getElementsByTagName("body")[0].innerHTML+=g:$("#"+G_15).append(g);g=document.getElementById(d+"-canvas");g.style.zIndex="-1";G_18=g.getContext("2d");g=new GLE.Texture(g);G_18.font="20px Arial";G_18.fillStyle=e?e:"#ff0000";G_18.textAlign="center";G_18.fillText(a,64,24);g.needsUpdate=!0;a=new GLE.PlaneGeometry(1700,544);e=new GLE.Mal;a=new GLE.Mesh(a,e);a.rotation.x=.5*Math.PI;a.position.x=c.x;a.position.y=c.y;a.position.z=c.z;a.material.map=g;a.material.transparent=!0;a.material.map.needsUpdate=!0;a.material.side=GLE.DoubleSide;a.material.alphaTest=.5;a.material.depthTest=!1;a.material.depthWrite=!1;a.renderOrder=10;a.rotation.y-=G_35.rotation.z;a.name=d;G_34.add(a)}function ClearMeasure(){G_34.remove(G_34.ge("mypoint"));G_34.remove(G_34.ge("myline"));G_34.remove(G_34.ge("area"));G_34.remove(G_34.ge("areaResult"));G_34.remove(G_34.ge("mytrig"));$("#area-canvas").remove();$("#areaResult-canvas").remove();for(var c=0;c<G_50.length/2+3;c++)$("#result"+c+"-canvas").remove(),G_34.remove(G_34.ge("result"+c));for(c=0;c<G_50.length/2;c++)G_34.remove(G_34.ge("angle"+c));G_50=[]}var mytime=0,currentPoint=null;function onClick2(c){GLE_cubeScene&&ReSetCubeActorColor()}function onClick1(c){currentPoint=c}function onClick(c){if(currentPoint&&c.clientX){var a=Math.abs(currentPoint.clientX-c.clientX),d=Math.abs(currentPoint.clientY-c.clientY);if(!(50<Math.sqrt(a*a+d*d))&&(mytime=(new Date).valueOf(),G_23))if(0==G_49)ik0(c);else if(1==G_49)ik1(c);else if(2==G_49)ik2(c);else if(3==G_49)ik3(c);else if(4==G_49||5==G_49){for(a=0;a<GLE_RightArray.length;a++)if(13==GLE_RightArray[a])return;ik4(c)}else if(6==G_49||7==G_49||8==G_49||9==G_49){for(a=0;a<GLE_RightArray.length;a++)if(13==GLE_RightArray[a])return;ik5(c)}}}function transformMat4(c,a,d){var e=a[0],g=a[1];a=a[2];var h=d[3]*e+d[7]*g+d[11]*a+d[15],h=h||1;c[0]=(d[0]*e+d[4]*g+d[8]*a+d[12])/h;c[1]=(d[1]*e+d[5]*g+d[9]*a+d[13])/h;c[2]=(d[2]*e+d[6]*g+d[10]*a+d[14])/h;return c}function CalculateVolume(c,a,d){return 1/6*(-(d.x*a.y*c.z)+a.x*d.y*c.z+d.x*c.y*a.z-c.x*d.y*a.z-a.x*c.y*d.z+c.x*a.y*d.z)}function CalcCamera(c){if(c){c=new GLE.Vector3(G_2.position.x,G_2.position.y,G_2.position.z);var a=new GLE.Matrix4;c.applyMatrix4(a.getInverse(G_35.matrixWorld));var a=new GLE.Vector3(G_2.getWorldDirection().x,G_2.getWorldDirection().y,G_2.getWorldDirection().z),d=new GLE.Matrix4;a.applyMatrix4(d.getInverse(G_35.matrixWorld));a=new GLE.By(500,500,500);d=new GLE.Mal({color:16776960});a=new GLE.Mesh(a,d);a.position.x=c.x;a.position.y=c.y;a.position.z=c.z;G_35.add(a);c=new GLE.By(100,100,100);d=new GLE.Mal({color:16711680});c=new GLE.Mesh(c,d);c.position.y=300;a.add(c);a.rotation.z=-G_35.rotation.z;mapUpdate1()}else mapUpdate0()}function AddModel(c,a,d){GLE_bNeedCamera=0==d?d:!0;d=c.lastIndexOf("/");G_13=c.substr(0,d+1);$.getJSON(c,function(d){if("glb"==d[0].type){var e=new GLE.Lr,h=new GLE.Gr(e),l=c.indexOf("/");G_131=c.substr(0,l+1);l=[];l=d[0].model.split("/");h.load(G_13+l[1],function(c){G_8.push([]);G_10.push("GLB_"+a);G_12.push("");G_9.push([]);c=c.scene;c.scale.x=1E3;c.scale.y=1E3;c.scale.z=1E3;c.rotation.x=Math.PI/2;c.children[0].name="GLB_"+a;G_34.add(c);.01>G_53.min.x&&.01>G_53.min.y&&.01>G_53.min.z&&.01>G_53.max.x&&.01>G_53.max.y&&.01>G_53.max.z&&(G_53=(new GLE.Box3).st(c,!0));if(G_22){var d=new GLE.Box3Helper(G_53,16711680);G_34.add(d)}c.traverse(function(c){c instanceof GLE.Mesh?(c.name="GLB_"+a,c.material.side=GLE.DoubleSide,G_11.length<G_10.length&&G_11.push(c.material),G_32=G_53.getSize().length(),G_7=!0,GLE_bNeedCamera&&ZoomFitAll()):c.name="GLB_"+a});G_23=!0;OnLoadModelEnd(a)});e.onLoad=function(){G_23=!0}}else e=new GLE.LineBasicMaterial({color:6710886}),G_10.push(a),G_8.push(d),GLE_LoadNum=d.length,G_7=!1,LoadId2(d,G_13+"ids/"+d[0].model+".glb",a,e,0)})}function disposeArray(){this.array=null}function disposeArray1(){}function LoadId3(c,a,d,e,g,h,l,m){a.file(g+".pos").async("arraybuffer").then(function(n){a.file(g+".mati").async("arraybuffer").then(function(q){a.file(g+".color").async("arraybuffer").then(function(z){a.file(g+".id").async("arraybuffer").then(function(F){a.file(g+".normal").async("arraybuffer").then(function(a){var t=new Uint32Array(n),C=new Uint32Array(q),K=new Uint8Array(z),H=new Uint32Array(F);a=new Uint8Array(a);for(var A=new Uint8Array(K.length/4*3),G=new Uint8Array(K.length),E=new Float32Array(3*t.length),N=0;N<G.length;N++)G[N]=255;for(var O=-1,N=0;N<G_10.length;N++)if(h==G_10[N]){O=N;break}G_8[O][m].ids=H;parseInt(65536*(O+1)+m);for(var v=[],N=0;N<H.length/3;N++){var L=parseInt(N/256),x=N-256*L;v.push(H[3*N]);v.push(0);for(j=H[3*N+1];j<H[3*N+2];j++)A[3*j]=255,A[3*j+1]=L,A[3*j+2]=x}G_8[O][m].vstate=v;for(N=0;N<t.length;N++)H=t[N],H=[d[3*H+0],d[3*H+1],d[3*H+2]],v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=C[N],0<e.length&&16*L<e.length&&(v[0]=e[16*L+0],v[1]=e[16*L+1],v[2]=e[16*L+2],v[3]=e[16*L+3],v[4]=e[16*L+4],v[5]=e[16*L+5],v[6]=e[16*L+6],v[7]=e[16*L+7],v[8]=e[16*L+8],v[9]=e[16*L+9],v[10]=e[16*L+10],v[11]=e[16*L+11],v[12]=e[16*L+12],v[13]=e[16*L+13],v[14]=e[16*L+14],v[15]=e[16*L+15]),H=transformMat4(H,H,v),E[3*N+0]=H[0]*GLE_Unit,E[3*N+1]=H[1]*GLE_Unit,E[3*N+2]=H[2]*GLE_Unit,isNaN(H[0])&&(E[3*N+0]=0,E[3*N+1]=0,E[3*N+2]=0);(new GLE.Box3).setFromArray(E);new GLE.TextureLoader;t={bid:{value:0},mc:{value:parseInt(65536*(O+1)+m)},color:{value:new GLE.Vector4(1,1,1,1)},bclip:{value:!1},clip1:{value:new GLE.Vector4(0,0,0,0)},clip2:{value:new GLE.Vector4(0,0,0,0)},clip3:{value:new GLE.Vector4(0,0,0,0)},clip4:{value:new GLE.Vector4(0,0,0,0)},clip5:{value:new GLE.Vector4(0,0,0,0)},clip6:{value:new GLE.Vector4(0,0,0,0)}};t=new GLE.ShaderMaterial({uniforms:t,vertexShader:" \r\n                                varying vec3 vid;  \r\n                                attribute vec3 id; \r\n                                varying vec4 vcolor;  \r\n                                attribute vec4 acolor; \r\n                                varying vec4 fcolor;  \r\n                                attribute vec4 pcolor; \r\n                                varying vec3 vPosition; \r\n                                varying vec3 vNormal; \r\n                                attribute vec3 anormal; \r\n                                void main(){ \r\n                                    vid \x3d id;   \r\n                                    vNormal \x3d anormal;   \r\n                                    vcolor \x3d acolor;   \r\n                                    fcolor \x3d pcolor;   \r\n                                    vPosition \x3d position; \r\n                                    vec4 mvPosition \x3d projectionMatrix*modelViewMatrix * vec4( position, 1.0 ); \r\n                                    gl_Position \x3d mvPosition;}",fragmentShader:" \r\n                                uniform int bid; \r\n                                uniform int mc; \r\n                                uniform vec4 color; \r\n                                uniform bool bclip; \r\n                                uniform vec4 clip1; \r\n                                uniform vec4 clip2; \r\n                                uniform vec4 clip3; \r\n                                uniform vec4 clip4; \r\n                                uniform vec4 clip5; \r\n                                uniform vec4 clip6; \r\n                                varying vec3 vid; \r\n                                varying vec4 vcolor; \r\n                                varying vec4 fcolor; \r\n                                varying vec3 vPosition; \r\n                                varying vec3 vNormal; \r\n                                void main(void){ \r\n                                    if(bid \x3d\x3d 0){ \r\n                                        if(bclip)   \r\n                                        {   \r\n                                            if (length(clip1) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip1;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                            if (length(clip2) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip2;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                            if (length(clip3) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip3;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                            if (length(clip4) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip4;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                            if (length(clip5) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip5;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                            if (length(clip6) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip6;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                        }   \r\n                                        vec3 lightADirection \x3d normalize(vec3(0,10000,5000)); \r\n                                            float lightWeightA \x3d max(dot(vNormal/vec3(255.0,255.0,255.0), lightADirection) * 0.4, 0.0);  \r\n                                            vec3 lightBDirection \x3d normalize(vec3(0,-10000,5000)); \r\n                                            float lightWeightB \x3d max(dot(vNormal/vec3(255.0,255.0,255.0), lightBDirection) * 0.4, 0.0);  \r\n                                            vec3 lightCDirection \x3d normalize(vec3(10000,0,5000)); \r\n                                            float lightWeightC \x3d max(dot(vNormal/vec3(255.0,255.0,255.0), lightCDirection) * 0.3, 0.0);  \r\n                                            vec3 lightDDirection \x3d normalize(vec3(-10000,0,5000)); \r\n                                            float lightWeightD \x3d max(dot(vNormal/vec3(255.0,255.0,255.0), lightDDirection) * 0.3, 0.0);  \r\n                                            float lightWeighting \x3d lightWeightA + lightWeightB+lightWeightC + lightWeightD + 0.45;   \r\n                                        if(vcolor.r\x3c254.99 || vcolor.g\x3c254.99 || vcolor.b\x3c254.99){  \r\n                                            gl_FragColor \x3d vec4(lightWeighting*vcolor.r / 255.0, lightWeighting*vcolor.g / 255.0, lightWeighting*vcolor.b / 255.0, vcolor.a / 255.0);    \r\n                                        }else if(vcolor.a\x3c254.99){ \r\n                                            gl_FragColor \x3d vec4(fcolor.r / 255.0, fcolor.g / 255.0, fcolor.b / 255.0, fcolor.a / 255.0)*vec4(lightWeighting,lightWeighting,lightWeighting,vcolor.a/255.0);  \r\n                                        }   \r\n                                        else   \r\n                                        {   \r\n                                            gl_FragColor \x3dvec4(lightWeighting*fcolor.r / 255.0, lightWeighting*fcolor.g / 255.0,lightWeighting*fcolor.b / 255.0, fcolor.a / 255.0) * color*1.0; }   \r\n                                    }   \r\n                                    else if (bid \x3d\x3d 1) \r\n                                    {\r\n                                        int r \x3d mc / 65536;\r\n                                        int g \x3d (mc - r * 65536) / 256;\r\n                                        int b \x3d mc - r * 65536 - g * 256;\r\n                                        gl_FragColor \x3d vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, 1.0);\r\n                                    }\r\n                                    else {\r\n                                        gl_FragColor \x3d vec4(vid.r / 255.0, vid.g / 255.0, vid.b / 255.0, 1.0);\r\n                                    }\r\n                                }",side:GLE.DoubleSide,transparent:!0});C=new GLE.BufferGeometry;C.addAttribute("position",(new GLE.Float32BufferAttribute(E,3)).onUpload(disposeArray1));C.addAttribute("anormal",(new GLE.Uint8BufferAttribute(a,3)).onUpload(disposeArray));C.addAttribute("id",(new GLE.Uint8BufferAttribute(A,3)).onUpload(disposeArray));C.addAttribute("acolor",(new GLE.Uint8BufferAttribute(G,4)).onUpload(disposeArray1));C.addAttribute("pcolor",(new GLE.Uint8BufferAttribute(K,4)).onUpload(disposeArray1));new GLE.PointsMaterial({color:16711680});K=new GLE.Mesh(C,t);K.name=h+"_"+g;K.frustumCulled=!1;G_34.add(K);K=(new GLE.Box3).st(K);.01>Math.abs(G_53.min.x)&&.01>Math.abs(G_53.min.y)&&.01>Math.abs(G_53.min.z)&&.01>Math.abs(G_53.max.x)&&.01>Math.abs(G_53.max.y)&&.01>Math.abs(G_53.max.z)&&(G_53=K);K.min.x<G_53.min.x&&(G_53.min.x=K.min.x);K.min.y<G_53.min.y&&(G_53.min.y=K.min.y);K.min.z<G_53.min.z&&(G_53.min.z=K.min.z);K.max.x>G_53.max.x&&(G_53.max.x=K.max.x);K.max.y>G_53.max.y&&(G_53.max.y=K.max.y);K.max.z>G_53.max.z&&(G_53.max.z=K.max.z);GLE_LoadNum--;G_22&&(K=new GLE.Box3Helper(K,16711680),G_34.add(K));if(1==m||0==m%20)GLE_bNeedCamera&&ZoomFitAll(),G_4.render(G_3,G_2);0==GLE_LoadNum?(OnLoadModelProcess(1-GLE_LoadNum/c.length),GetBBox(),GLE_bNeedCamera&&ZoomFitAll(),UpdateOrder(),G_7=!0,OnLoadModelEnd(h)):(m++,OnLoadModelProcess(1-GLE_LoadNum/c.length),LoadId2(c,G_13+"ids/"+c[m].model+".glb",h,l,m))})})})})})}function LoadId4(c,a,d,e,g,h,l,m){a.file(g+".pos").async("arraybuffer").then(function(n){a.file(g+".mati").async("arraybuffer").then(function(q){a.file(g+".color").async("arraybuffer").then(function(z){a.file(g+".id").async("arraybuffer").then(function(F){a.file(g+".edge").async("arraybuffer").then(function(C){a.file(g+".edgei").async("arraybuffer").then(function(a){var t=new Uint32Array(n),K=new Uint32Array(q),H=new Uint8Array(z),A=new Uint32Array(F),G=new Uint32Array(C),E=new Uint32Array(a),N=new Uint8Array(H.length/4*3),O=new Uint8Array(H.length);a=new Float32Array(3*t.length);for(var v=0;v<O.length;v++)O[v]=255;for(var L=-1,v=0;v<G_10.length;v++)if(h==G_10[v]){L=v;break}G_8[L][m].ids=A;G_8[L][m].eids=E;E=[];parseInt(65536*(L+1)+m);for(v=0;v<A.length/3;v++){var x=parseInt(v/256),B=v-256*x;E.push(A[3*v]);E.push(0);for(j=A[3*v+1];j<A[3*v+2];j++)N[3*j]=255,N[3*j+1]=x,N[3*j+2]=B}G_8[L][m].vstate=E;for(v=0;v<t.length;v++)A=t[v],A=[d[3*A+0],d[3*A+1],d[3*A+2]],E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],x=K[v],0<e.length&&16*x<e.length&&(E[0]=e[16*x+0],E[1]=e[16*x+1],E[2]=e[16*x+2],E[3]=e[16*x+3],E[4]=e[16*x+4],E[5]=e[16*x+5],E[6]=e[16*x+6],E[7]=e[16*x+7],E[8]=e[16*x+8],E[9]=e[16*x+9],E[10]=e[16*x+10],E[11]=e[16*x+11],E[12]=e[16*x+12],E[13]=e[16*x+13],E[14]=e[16*x+14],E[15]=e[16*x+15]),A=transformMat4(A,A,E),a[3*v+0]=A[0]*GLE_Unit,a[3*v+1]=A[1]*GLE_Unit,a[3*v+2]=A[2]*GLE_Unit;new GLE.TextureLoader;v={bid:{value:0},mc:{value:parseInt(65536*(L+1)+m)},color:{value:new GLE.Vector4(1,1,1,1)},bclip:{value:!1},clip1:{value:new GLE.Vector4(0,0,0,0)},clip2:{value:new GLE.Vector4(0,0,0,0)},clip3:{value:new GLE.Vector4(0,0,0,0)},clip4:{value:new GLE.Vector4(0,0,0,0)},clip5:{value:new GLE.Vector4(0,0,0,0)},clip6:{value:new GLE.Vector4(0,0,0,0)}};v=new GLE.ShaderMaterial({uniforms:v,vertexShader:" \r\n                                varying vec3 vid;  \r\n                                attribute vec3 id; \r\n                                varying vec4 vcolor;  \r\n                                attribute vec4 acolor; \r\n                                varying vec4 fcolor;  \r\n                                attribute vec4 pcolor; \r\n                                varying vec3 vPosition; \r\n                                void main(){ \r\n                                    vid \x3d id;   \r\n                                    vcolor \x3d acolor;   \r\n                                    fcolor \x3d pcolor;   \r\n                                    vPosition \x3d position; \r\n                                    vec4 mvPosition \x3d modelViewMatrix * vec4( position, 1.0 ); \r\n                                    gl_Position \x3d projectionMatrix * mvPosition;}",fragmentShader:" \r\n                                uniform int bid; \r\n                                uniform int mc; \r\n                                uniform vec4 color; \r\n                                uniform bool bclip; \r\n                                uniform vec4 clip1; \r\n                                uniform vec4 clip2; \r\n                                uniform vec4 clip3; \r\n                                uniform vec4 clip4; \r\n                                uniform vec4 clip5; \r\n                                uniform vec4 clip6; \r\n                                varying vec3 vid; \r\n                                varying vec4 vcolor; \r\n                                varying vec4 fcolor; \r\n                                varying vec3 vPosition; \r\n                                void main(void){ \r\n                                    if(bid \x3d\x3d 0){ \r\n                                        if(bclip)   \r\n                                        {   \r\n                                            if (length(clip1) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip1;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                            if (length(clip2) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip2;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                            if (length(clip3) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip3;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                            if (length(clip4) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip4;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                            if (length(clip5) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip5;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                            if (length(clip6) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip6;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                        }   \r\n                                        if(vcolor.r\x3c254.99 || vcolor.g\x3c254.99 || vcolor.b\x3c254.99){  \r\n                                            gl_FragColor \x3d vec4(vcolor.r / 255.0, vcolor.g / 255.0, vcolor.b / 255.0, vcolor.a / 255.0);    \r\n                                        }else if(vcolor.a\x3c254.99){ \r\n                                            gl_FragColor \x3d vec4(fcolor.r / 255.0, fcolor.g / 255.0, fcolor.b / 255.0, fcolor.a / 255.0)*vec4(1.0,1.0,1.0,vcolor.a/255.0);  \r\n                                        }   \r\n                                        else   \r\n                                        {   \r\n                                            gl_FragColor \x3dvec4(fcolor.r / 255.0, fcolor.g / 255.0,fcolor.b / 255.0, fcolor.a / 255.0) * color;    \r\n                                        }   \r\n                                    }   \r\n                                    else if (bid \x3d\x3d 1) \r\n                                    {\r\n                                        int r \x3d mc / 65536;\r\n                                        int g \x3d (mc - r * 65536) / 256;\r\n                                        int b \x3d mc - r * 65536 - g * 256;\r\n                                        gl_FragColor \x3d vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, 1.0);\r\n                                    }\r\n                                    else {\r\n                                        gl_FragColor \x3d vec4(vid.r / 255.0, vid.g / 255.0, vid.b / 255.0, 1.0);\r\n                                    }\r\n                                }",side:GLE.DoubleSide,transparent:!0});t=new GLE.BufferGeometry;t.addAttribute("position",(new GLE.Float32BufferAttribute(a,3)).onUpload(disposeArray1));t.addAttribute("id",(new GLE.Uint8BufferAttribute(N,3)).onUpload(disposeArray));t.addAttribute("acolor",(new GLE.Uint8BufferAttribute(O,4)).onUpload(disposeArray1));t.addAttribute("pcolor",(new GLE.Uint8BufferAttribute(H,4)).onUpload(disposeArray1));new GLE.PointsMaterial({color:16711680});H={color:{value:new GLE.Vector4(.5,0,.5,.5)}};new GLE.ShaderMaterial({uniforms:H,vertexShader:" \r\n                                void main(){ \r\n                                    vec3 position1 \x3d vec3(position.x,position.y,position.z);  \r\n                                    vec4 mvPosition \x3d modelViewMatrix * vec4( position1, 1.0 ); \r\n                                    gl_Position \x3d projectionMatrix * mvPosition;}",fragmentShader:"   \r\n                                uniform vec4 color; \r\n                                void main(void){ \r\n                                        gl_FragColor \x3d color;  \r\n                                }",side:GLE.FrontSide});H=new GLE.Mesh(t,v);H.name=h+"_"+g;H.frustumCulled=!1;H.castShadow=!1;G_34.add(H);N=new Float32Array(3*G.length);for(v=0;v<G.length;v++)N[3*v]=a[3*G[v]],N[3*v+1]=a[3*G[v]+1],N[3*v+2]=a[3*G[v]+2];G=new GLE.BufferGeometry;G.addAttribute("position",(new GLE.Float32BufferAttribute(N,3)).onUpload(disposeArray1));G=new GLE.LineSegments(G,l);G.name="edge";G.material.depthTest=!0;G.material.depthWrite=!0;G.renderOrder=100;G.frustumCulled=!1;H.add(G);G=(new GLE.Box3).st(H);.01>Math.abs(G_53.min.x)&&.01>Math.abs(G_53.min.y)&&.01>Math.abs(G_53.min.z)&&.01>Math.abs(G_53.max.x)&&.01>Math.abs(G_53.max.y)&&.01>Math.abs(G_53.max.z)&&(G_53=G);G.min.x<G_53.min.x&&(G_53.min.x=G.min.x);G.min.y<G_53.min.y&&(G_53.min.y=G.min.y);G.min.z<G_53.min.z&&(G_53.min.z=G.min.z);G.max.x>G_53.max.x&&(G_53.max.x=G.max.x);G.max.y>G_53.max.y&&(G_53.max.y=G.max.y);G.max.z>G_53.max.z&&(G_53.max.z=G.max.z);GLE_LoadNum--;if(1==m||0==m%20)GLE_bNeedCamera&&ZoomFitAll(),G_4.render(G_3,G_2);0==GLE_LoadNum?(OnLoadModelProcess(1-GLE_LoadNum/c.length),GetBBox(),GLE_bNeedCamera&&ZoomFitAll(),UpdateOrder(),G_7=!0,OnLoadModelEnd(h)):(G_22&&(G=new GLE.Box3Helper(G_53,16711680),G_34.add(G)),m++,OnLoadModelProcess(1-GLE_LoadNum/c.length),LoadId2(c,G_13+"ids/"+c[m].model+".glb",h,l,m))})})})})})})}
function LoadId5(c,a,d,e,g,h,l,m){a.file(g+".pos").async("arraybuffer").then(function(n){a.file(g+".mati").async("arraybuffer").then(function(q){a.file(g+".color").async("arraybuffer").then(function(z){a.file(g+".id").async("arraybuffer").then(function(F){a.file(g+".normal").async("arraybuffer").then(function(C){a.file(g+".tex").async("arraybuffer").then(function(t){a.file(g+".tpos").async("arraybuffer").then(function(I){a.file(g+".tnum").async("arraybuffer").then(function(a){var H=new Uint32Array(n),A=new Uint32Array(q),G=new Uint8Array(z),E=new Uint32Array(F),K=new Uint8Array(C),O=new Uint8Array(G.length/4*3),v=new Uint8Array(G.length),L=new Float32Array(3*H.length),x=new Float32Array(t),B=new Uint32Array(I),p=new Uint16Array(a);a=new Uint8Array(2*p.length);for(var D=0;D<p.length;D++)a[2*D]=p[D],a[2*D+1]=p[D];p=new Float32Array(2*B.length);for(D=0;D<B.length;D++){var T=B[D];p[2*D+0]=x[2*T+0];p[2*D+1]=x[2*T+1]}for(D=0;D<v.length;D++)v[D]=255;x=-1;for(D=0;D<G_10.length;D++)if(h==G_10[D]){x=D;break}G_8[x][m].ids=E;parseInt(65536*(x+1)+m);B=[];for(D=0;D<E.length/3;D++){var T=parseInt(D/256),U=D-256*T;B.push(E[3*D]);B.push(0);for(j=E[3*D+1];j<E[3*D+2];j++)O[3*j]=255,O[3*j+1]=T,O[3*j+2]=U}G_8[x][m].vstate=B;for(D=0;D<H.length;D++)E=H[D],E=[d[3*E+0],d[3*E+1],d[3*E+2]],B=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T=A[D],0<e.length&&16*T<e.length&&(B[0]=e[16*T+0],B[1]=e[16*T+1],B[2]=e[16*T+2],B[3]=e[16*T+3],B[4]=e[16*T+4],B[5]=e[16*T+5],B[6]=e[16*T+6],B[7]=e[16*T+7],B[8]=e[16*T+8],B[9]=e[16*T+9],B[10]=e[16*T+10],B[11]=e[16*T+11],B[12]=e[16*T+12],B[13]=e[16*T+13],B[14]=e[16*T+14],B[15]=e[16*T+15]),E=transformMat4(E,E,B),L[3*D+0]=E[0]*GLE_Unit,L[3*D+1]=E[1]*GLE_Unit,L[3*D+2]=E[2]*GLE_Unit,isNaN(E[0])&&(L[3*D+0]=0,L[3*D+1]=0,L[3*D+2]=0);H=new GLE.TextureLoader;A={bid:{value:0},mc:{value:parseInt(65536*(x+1)+m)},color:{value:new GLE.Vector4(1,1,1,1)},bclip:{value:!1},clip1:{value:new GLE.Vector4(0,0,0,0)},clip2:{value:new GLE.Vector4(0,0,0,0)},clip3:{value:new GLE.Vector4(0,0,0,0)},clip4:{value:new GLE.Vector4(0,0,0,0)},clip5:{value:new GLE.Vector4(0,0,0,0)},clip6:{value:new GLE.Vector4(0,0,0,0)}};E="";if(G_8[x][m].textures&&1<G_8[x][m].textures.length)for(G_8[x][m].textures.splice(0,1),D=0;D<G_8[x][m].textures.length;D++)0==D?(A.texture0={value:null},A.texture0.value=H.load(G_13+G_8[x][m].textures[D]),E+="uniform sampler2D texture0;",A.texture0.value.wrapS=A.texture0.value.wrapT=GLE.RepeatWrapping):1==D?(A.texture1={value:null},A.texture1.value=H.load(G_13+G_8[x][m].textures[D]),E+="uniform sampler2D texture1;",A.texture1.value.wrapS=A.texture1.value.wrapT=GLE.RepeatWrapping):2==D?(A.texture2={value:null},A.texture2.value=H.load(G_13+G_8[x][m].textures[D]),E+="uniform sampler2D texture2;",A.texture2.value.wrapS=A.texture2.value.wrapT=GLE.RepeatWrapping):3==D?(A.texture3={value:null},A.texture3.value=H.load(G_13+G_8[x][m].textures[D]),E+="uniform sampler2D texture3;",A.texture3.value.wrapS=A.texture3.value.wrapT=GLE.RepeatWrapping):4==D?(A.texture4={value:null},A.texture4.value=H.load(G_13+G_8[x][m].textures[D]),E+="uniform sampler2D texture4;",A.texture4.value.wrapS=A.texture4.value.wrapT=GLE.RepeatWrapping):5==D?(A.texture5={value:null},A.texture5.value=H.load(G_13+G_8[x][m].textures[D]),E+="uniform sampler2D texture5;",A.texture5.value.wrapS=A.texture5.value.wrapT=GLE.RepeatWrapping):6==D?(A.texture6={value:null},A.texture6.value=H.load(G_13+G_8[x][m].textures[D]),E+="uniform sampler2D texture6;",A.texture6.value.wrapS=A.texture6.value.wrapT=GLE.RepeatWrapping):7==D?(A.texture7={value:null},A.texture7.value=H.load(G_13+G_8[x][m].textures[D]),E+="uniform sampler2D texture7;",A.texture7.value.wrapS=A.texture7.value.wrapT=GLE.RepeatWrapping):8==D?(A.texture8={value:null},A.texture8.value=H.load(G_13+G_8[x][m].textures[D]),E+="uniform sampler2D texture8;",A.texture8.value.wrapS=A.texture8.value.wrapT=GLE.RepeatWrapping):9==D?(A.texture9={value:null},A.texture9.value=H.load(G_13+G_8[x][m].textures[D]),E+="uniform sampler2D texture9;",A.texture9.value.wrapS=A.texture9.value.wrapT=GLE.RepeatWrapping):10==D?(A.texture10={value:null},A.texture10.value=H.load(G_13+G_8[x][m].textures[D]),E+="uniform sampler2D texture10;",A.texture10.value.wrapS=A.texture10.value.wrapT=GLE.RepeatWrapping):11==D?(A.texture11={value:null},A.texture11.value=H.load(G_13+G_8[x][m].textures[D]),E+="uniform sampler2D texture11;",A.texture11.value.wrapS=A.texture11.value.wrapT=GLE.RepeatWrapping):12==D?(A.texture12={value:null},A.texture12.value=H.load(G_13+G_8[x][m].textures[D]),E+="uniform sampler2D texture12;",A.texture12.value.wrapS=A.texture12.value.wrapT=GLE.RepeatWrapping):13==D?(A.texture13={value:null},A.texture13.value=H.load(G_13+G_8[x][m].textures[D]),E+="uniform sampler2D texture13;",A.texture13.value.wrapS=A.texture13.value.wrapT=GLE.RepeatWrapping):14==D?(A.texture14={value:null},A.texture14.value=H.load(G_13+G_8[x][m].textures[D]),E+="uniform sampler2D texture14;",A.texture14.value.wrapS=A.texture14.value.wrapT=GLE.RepeatWrapping):15==D&&(A.texture15={value:null},A.texture15.value=H.load(G_13+G_8[x][m].textures[D]),E+="uniform sampler2D texture15;",A.texture15.value.wrapS=A.texture15.value.wrapT=GLE.RepeatWrapping);E+="varying vec2 vUv; \r\n                            varying vec2 tnum;  \r\n                                uniform int bid; \r\n                                uniform int mc; \r\n                                uniform vec4 color; \r\n                                uniform bool bclip; \r\n                                uniform vec4 clip1; \r\n                                uniform vec4 clip2; \r\n                                uniform vec4 clip3; \r\n                                uniform vec4 clip4; \r\n                                uniform vec4 clip5; \r\n                                uniform vec4 clip6; \r\n                                varying vec3 vid; \r\n                                varying vec4 vcolor; \r\n                                varying vec4 fcolor; \r\n                                varying vec3 vPosition; \r\n                                varying vec3 vNormal; \r\n                                void main(void){ \r\n                                    if(bid \x3d\x3d 0){ \r\n                                        if(bclip)   \r\n                                        {   \r\n                                            if (length(clip1) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip1;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                            if (length(clip2) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip2;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                            if (length(clip3) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip3;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                            if (length(clip4) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip4;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                            if (length(clip5) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip5;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                            if (length(clip6) \x3e 0.001)  \r\n                                            {   \r\n                                                vec4 c1 \x3d clip6;  \r\n                                                vec3 x \x3d vPosition; \r\n                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                if (distance1 \x3c 0.0)    \r\n                                                {   \r\n                                                    discard;    \r\n                                                }   \r\n                                            }   \r\n                                        }   \r\n                                        vec3 lightADirection \x3d normalize(vec3(0,10000,10000)); \r\n                                            float lightWeightA \x3d max(dot(vNormal/vec3(255.0,255.0,255.0), lightADirection) * 0.4, 0.0);  \r\n                                            vec3 lightBDirection \x3d normalize(vec3(0,-10000,10000)); \r\n                                            float lightWeightB \x3d max(dot(vNormal/vec3(255.0,255.0,255.0), lightBDirection) * 0.4, 0.0);  \r\n                                            float lightWeighting \x3d lightWeightA + lightWeightB + 0.3;   \r\n                                        if(vcolor.r\x3c254.99 || vcolor.g\x3c254.99 || vcolor.b\x3c254.99){  \r\n                                            gl_FragColor \x3d vec4(lightWeighting*vcolor.r / 255.0, lightWeighting*vcolor.g / 255.0, lightWeighting*vcolor.b / 255.0, vcolor.a / 255.0);    \r\n                                        }else if(vcolor.a\x3c254.99){ \r\n                                            gl_FragColor \x3d vec4(fcolor.r / 255.0, fcolor.g / 255.0, fcolor.b / 255.0, fcolor.a / 255.0)*vec4(lightWeighting,lightWeighting,lightWeighting,vcolor.a/255.0);  \r\n                                        }   \r\n                                        else   \r\n                                        {   \r\n                                            float tvalue \x3d float(tnum.x);   \r\n                                            if(tvalue \x3c 0.01){    \r\n                                                gl_FragColor \x3dvec4(lightWeighting*fcolor.r / 255.0, lightWeighting*fcolor.g / 255.0,lightWeighting*fcolor.b / 255.0, fcolor.a / 255.0) * color; \r\n                                            }";G_8[x][m].textures&&0<G_8[x][m].textures.length&&0<G_8[x][m].textures[0].length&&(1==G_8[x][m].textures.length&&(E+="else if(tvalue \x3e 0.99 \x26\x26 tvalue \x3c 1.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture0, vUv);       \r\n                                                    }"),2==G_8[x][m].textures.length&&(E+="else if(tvalue \x3e 0.99 \x26\x26 tvalue \x3c 1.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture0, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 1.99 \x26\x26 tvalue \x3c 2.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture1, vUv);       \r\n                                                    }"),3==G_8[x][m].textures.length&&(E+="else if(tvalue \x3e 0.99 \x26\x26 tvalue \x3c 1.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture0, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 1.99 \x26\x26 tvalue \x3c 2.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture1, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 2.99 \x26\x26 tvalue \x3c 3.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture2, vUv);       \r\n                                                    } \r\n                                                    "),4==G_8[x][m].textures.length&&(E+="else if(tvalue \x3e 0.99 \x26\x26 tvalue \x3c 1.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture0, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 1.99 \x26\x26 tvalue \x3c 2.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture1, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 2.99 \x26\x26 tvalue \x3c 3.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture2, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 3.99 \x26\x26 tvalue \x3c 4.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture3, vUv);       \r\n                                                    } \r\n                                                    "),5==G_8[x][m].textures.length&&(E+="else if(tvalue \x3e 0.99 \x26\x26 tvalue \x3c 1.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture0, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 1.99 \x26\x26 tvalue \x3c 2.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture1, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 2.99 \x26\x26 tvalue \x3c 3.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture2, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 3.99 \x26\x26 tvalue \x3c 4.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture3, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 4.99 \x26\x26 tvalue \x3c 5.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture4, vUv);       \r\n                                                    } \r\n                                                    "),6==G_8[x][m].textures.length&&(E+="else if(tvalue \x3e 0.99 \x26\x26 tvalue \x3c 1.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture0, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 1.99 \x26\x26 tvalue \x3c 2.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture1, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 2.99 \x26\x26 tvalue \x3c 3.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture2, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 3.99 \x26\x26 tvalue \x3c 4.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture3, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 4.99 \x26\x26 tvalue \x3c 5.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture4, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 5.99 \x26\x26 tvalue \x3c 6.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture5, vUv);       \r\n                                                    } \r\n                                                     "),7==G_8[x][m].textures.length&&(E+="else if(tvalue \x3e 0.99 \x26\x26 tvalue \x3c 1.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture0, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 1.99 \x26\x26 tvalue \x3c 2.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture1, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 2.99 \x26\x26 tvalue \x3c 3.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture2, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 3.99 \x26\x26 tvalue \x3c 4.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture3, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 4.99 \x26\x26 tvalue \x3c 5.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture4, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 5.99 \x26\x26 tvalue \x3c 6.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture5, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 6.99 \x26\x26 tvalue \x3c 7.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture6, vUv);       \r\n                                                    } \r\n                                                     "),8==G_8[x][m].textures.length&&(E+="else if(tvalue \x3e 0.99 \x26\x26 tvalue \x3c 1.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture0, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 1.99 \x26\x26 tvalue \x3c 2.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture1, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 2.99 \x26\x26 tvalue \x3c 3.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture2, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 3.99 \x26\x26 tvalue \x3c 4.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture3, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 4.99 \x26\x26 tvalue \x3c 5.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture4, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 5.99 \x26\x26 tvalue \x3c 6.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture5, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 6.99 \x26\x26 tvalue \x3c 7.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture6, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 7.99 \x26\x26 tvalue \x3c 8.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture7, vUv);       \r\n                                                    } \r\n                                                    "),9==G_8[x][m].textures.length&&(E+="else if(tvalue \x3e 0.99 \x26\x26 tvalue \x3c 1.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture0, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 1.99 \x26\x26 tvalue \x3c 2.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture1, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 2.99 \x26\x26 tvalue \x3c 3.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture2, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 3.99 \x26\x26 tvalue \x3c 4.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture3, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 4.99 \x26\x26 tvalue \x3c 5.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture4, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 5.99 \x26\x26 tvalue \x3c 6.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture5, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 6.99 \x26\x26 tvalue \x3c 7.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture6, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 7.99 \x26\x26 tvalue \x3c 8.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture7, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 8.99 \x26\x26 tvalue \x3c 9.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture8, vUv);       \r\n                                                    } \r\n                                                    "),10==G_8[x][m].textures.length&&(E+="else if(tvalue \x3e 0.99 \x26\x26 tvalue \x3c 1.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture0, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 1.99 \x26\x26 tvalue \x3c 2.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture1, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 2.99 \x26\x26 tvalue \x3c 3.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture2, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 3.99 \x26\x26 tvalue \x3c 4.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture3, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 4.99 \x26\x26 tvalue \x3c 5.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture4, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 5.99 \x26\x26 tvalue \x3c 6.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture5, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 6.99 \x26\x26 tvalue \x3c 7.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture6, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 7.99 \x26\x26 tvalue \x3c 8.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture7, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 8.99 \x26\x26 tvalue \x3c 9.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture8, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 9.99 \x26\x26 tvalue \x3c 10.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture9, vUv);       \r\n                                                    } \r\n                                                    "),11==G_8[x][m].textures.length&&(E+="else if(tvalue \x3e 0.99 \x26\x26 tvalue \x3c 1.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture0, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 1.99 \x26\x26 tvalue \x3c 2.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture1, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 2.99 \x26\x26 tvalue \x3c 3.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture2, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 3.99 \x26\x26 tvalue \x3c 4.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture3, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 4.99 \x26\x26 tvalue \x3c 5.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture4, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 5.99 \x26\x26 tvalue \x3c 6.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture5, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 6.99 \x26\x26 tvalue \x3c 7.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture6, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 7.99 \x26\x26 tvalue \x3c 8.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture7, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 8.99 \x26\x26 tvalue \x3c 9.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture8, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 9.99 \x26\x26 tvalue \x3c 10.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture9, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 10.99 \x26\x26 tvalue \x3c 11.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture10, vUv);       \r\n                                                    } \r\n                                                    "),12==G_8[x][m].textures.length&&(E+="else if(tvalue \x3e 0.99 \x26\x26 tvalue \x3c 1.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture0, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 1.99 \x26\x26 tvalue \x3c 2.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture1, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 2.99 \x26\x26 tvalue \x3c 3.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture2, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 3.99 \x26\x26 tvalue \x3c 4.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture3, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 4.99 \x26\x26 tvalue \x3c 5.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture4, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 5.99 \x26\x26 tvalue \x3c 6.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture5, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 6.99 \x26\x26 tvalue \x3c 7.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture6, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 7.99 \x26\x26 tvalue \x3c 8.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture7, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 8.99 \x26\x26 tvalue \x3c 9.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture8, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 9.99 \x26\x26 tvalue \x3c 10.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture9, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 10.99 \x26\x26 tvalue \x3c 11.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture10, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 11.99 \x26\x26 tvalue \x3c 12.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture11, vUv);       \r\n                                                    } \r\n                                                    "),13==G_8[x][m].textures.length&&(E+="else if(tvalue \x3e 0.99 \x26\x26 tvalue \x3c 1.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture0, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 1.99 \x26\x26 tvalue \x3c 2.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture1, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 2.99 \x26\x26 tvalue \x3c 3.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture2, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 3.99 \x26\x26 tvalue \x3c 4.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture3, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 4.99 \x26\x26 tvalue \x3c 5.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture4, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 5.99 \x26\x26 tvalue \x3c 6.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture5, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 6.99 \x26\x26 tvalue \x3c 7.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture6, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 7.99 \x26\x26 tvalue \x3c 8.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture7, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 8.99 \x26\x26 tvalue \x3c 9.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture8, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 9.99 \x26\x26 tvalue \x3c 10.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture9, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 10.99 \x26\x26 tvalue \x3c 11.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture10, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 11.99 \x26\x26 tvalue \x3c 12.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture11, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 12.99 \x26\x26 tvalue \x3c 13.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture12, vUv);       \r\n                                                    } \r\n                                                    "),14==G_8[x][m].textures.length&&(E+="else if(tvalue \x3e 0.99 \x26\x26 tvalue \x3c 1.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture0, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 1.99 \x26\x26 tvalue \x3c 2.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture1, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 2.99 \x26\x26 tvalue \x3c 3.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture2, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 3.99 \x26\x26 tvalue \x3c 4.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture3, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 4.99 \x26\x26 tvalue \x3c 5.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture4, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 5.99 \x26\x26 tvalue \x3c 6.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture5, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 6.99 \x26\x26 tvalue \x3c 7.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture6, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 7.99 \x26\x26 tvalue \x3c 8.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture7, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 8.99 \x26\x26 tvalue \x3c 9.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture8, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 9.99 \x26\x26 tvalue \x3c 10.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture9, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 10.99 \x26\x26 tvalue \x3c 11.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture10, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 11.99 \x26\x26 tvalue \x3c 12.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture11, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 12.99 \x26\x26 tvalue \x3c 13.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture12, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 13.99 \x26\x26 tvalue \x3c 14.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture13, vUv);       \r\n                                                    } \r\n                                                     "),15==G_8[x][m].textures.length&&(E+="else if(tvalue \x3e 0.99 \x26\x26 tvalue \x3c 1.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture0, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 1.99 \x26\x26 tvalue \x3c 2.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture1, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 2.99 \x26\x26 tvalue \x3c 3.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture2, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 3.99 \x26\x26 tvalue \x3c 4.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture3, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 4.99 \x26\x26 tvalue \x3c 5.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture4, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 5.99 \x26\x26 tvalue \x3c 6.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture5, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 6.99 \x26\x26 tvalue \x3c 7.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture6, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 7.99 \x26\x26 tvalue \x3c 8.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture7, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 8.99 \x26\x26 tvalue \x3c 9.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture8, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 9.99 \x26\x26 tvalue \x3c 10.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture9, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 10.99 \x26\x26 tvalue \x3c 11.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture10, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 11.99 \x26\x26 tvalue \x3c 12.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture11, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 12.99 \x26\x26 tvalue \x3c 13.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture12, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 13.99 \x26\x26 tvalue \x3c 14.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture13, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 14.99 \x26\x26 tvalue \x3c 15.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture14, vUv);       \r\n                                                    } \r\n                                                    "),16==G_8[x][m].textures.length&&(E+="else if(tvalue \x3e 0.99 \x26\x26 tvalue \x3c 1.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture0, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 1.99 \x26\x26 tvalue \x3c 2.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture1, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 2.99 \x26\x26 tvalue \x3c 3.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture2, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 3.99 \x26\x26 tvalue \x3c 4.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture3, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 4.99 \x26\x26 tvalue \x3c 5.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture4, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 5.99 \x26\x26 tvalue \x3c 6.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture5, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 6.99 \x26\x26 tvalue \x3c 7.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture6, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 7.99 \x26\x26 tvalue \x3c 8.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture7, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 8.99 \x26\x26 tvalue \x3c 9.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture8, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 9.99 \x26\x26 tvalue \x3c 10.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture9, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 10.99 \x26\x26 tvalue \x3c 11.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture10, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 11.99 \x26\x26 tvalue \x3c 12.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture11, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 12.99 \x26\x26 tvalue \x3c 13.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture12, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 13.99 \x26\x26 tvalue \x3c 14.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture13, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 14.99 \x26\x26 tvalue \x3c 15.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture14, vUv);       \r\n                                                    } \r\n                                                    else if(tvalue \x3e 15.99 \x26\x26 tvalue \x3c 16.01){    \r\n                                                        gl_FragColor \x3d texture2D(texture15, vUv);       \r\n                                                    } "));D=new GLE.ShaderMaterial({uniforms:A,vertexShader:" \r\n                                varying vec2 vUv;   \r\n                                varying vec2 tnum;  \r\n                                attribute vec2 num; \r\n                                varying vec3 vid;  \r\n                                attribute vec3 id; \r\n                                varying vec4 vcolor;  \r\n                                attribute vec4 acolor; \r\n                                varying vec4 fcolor;  \r\n                                attribute vec4 pcolor; \r\n                                varying vec3 vPosition; \r\n                                varying vec3 vNormal; \r\n                                attribute vec3 anormal; \r\n                                void main(){ \r\n                                    vUv \x3d uv; \r\n                                    tnum \x3d num; \r\n                                    vid \x3d id;   \r\n                                    vNormal \x3d anormal;   \r\n                                    vcolor \x3d acolor;   \r\n                                    fcolor \x3d pcolor;   \r\n                                    vPosition \x3d position; \r\n                                    vec4 mvPosition \x3d projectionMatrix*modelViewMatrix * vec4( position, 1.0 ); \r\n                                    gl_Position \x3d mvPosition;}",fragmentShader:E+"else {  \r\n                                                gl_FragColor \x3dvec4(lightWeighting*fcolor.r / 255.0, lightWeighting*fcolor.g / 255.0,lightWeighting*fcolor.b / 255.0, fcolor.a / 255.0) * color;     \r\n                                            }   \r\n                                             }   \r\n                                    }   \r\n                                    else if (bid \x3d\x3d 1) \r\n                                    {\r\n                                        int r \x3d mc / 65536;\r\n                                        int g \x3d (mc - r * 65536) / 256;\r\n                                        int b \x3d mc - r * 65536 - g * 256;\r\n                                        gl_FragColor \x3d vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, 1.0);\r\n                                    }\r\n                                    else {\r\n                                        gl_FragColor \x3d vec4(vid.r / 255.0, vid.g / 255.0, vid.b / 255.0, 1.0);\r\n                                    }\r\n                                }",side:GLE.DoubleSide,transparent:!0});H=new GLE.BufferGeometry;H.addAttribute("position",(new GLE.Float32BufferAttribute(L,3)).onUpload(disposeArray1));H.addAttribute("anormal",(new GLE.Uint8BufferAttribute(K,3)).onUpload(disposeArray));H.addAttribute("id",(new GLE.Uint8BufferAttribute(O,3)).onUpload(disposeArray));H.addAttribute("acolor",(new GLE.Uint8BufferAttribute(v,4)).onUpload(disposeArray1));H.addAttribute("pcolor",(new GLE.Uint8BufferAttribute(G,4)).onUpload(disposeArray1));H.addAttribute("uv",(new GLE.Float32BufferAttribute(p,2)).onUpload(disposeArray));H.addAttribute("num",(new GLE.Uint8BufferAttribute(a,2)).onUpload(disposeArray));new GLE.PointsMaterial({color:16711680});G=new GLE.Mesh(H,D);G.name=h+"_"+g;G.frustumCulled=!1;G.castShadow=!0;G_34.add(G);G=(new GLE.Box3).st(G);.01>Math.abs(G_53.min.x)&&.01>Math.abs(G_53.min.y)&&.01>Math.abs(G_53.min.z)&&.01>Math.abs(G_53.max.x)&&.01>Math.abs(G_53.max.y)&&.01>Math.abs(G_53.max.z)&&(G_53=G);G.min.x<G_53.min.x&&(G_53.min.x=G.min.x);G.min.y<G_53.min.y&&(G_53.min.y=G.min.y);G.min.z<G_53.min.z&&(G_53.min.z=G.min.z);G.max.x>G_53.max.x&&(G_53.max.x=G.max.x);G.max.y>G_53.max.y&&(G_53.max.y=G.max.y);G.max.z>G_53.max.z&&(G_53.max.z=G.max.z);GLE_LoadNum--;if(1==m||0==m%20)GLE_bNeedCamera&&ZoomFitAll(),G_4.render(G_3,G_2);0==GLE_LoadNum?(OnLoadModelProcess(1-GLE_LoadNum/c.length),GetBBox(),GLE_bNeedCamera&&ZoomFitAll(),UpdateOrder(),G_7=!0,OnLoadModelEnd(h)):(G_22&&(G=new GLE.Box3Helper(G_53,16711680),G_34.add(G)),m++,OnLoadModelProcess(1-GLE_LoadNum/c.length),LoadId2(c,G_13+"ids/"+c[m].model+".glb",h,l,m))})})})})})})})})}function LoadId2(c,a,d,e,g){JSZipUtils.getBinaryContent(a,function(h,l){JSZip.loadAsync(l).then(function(h){var l=a.lastIndexOf("/"),m=a.lastIndexOf("."),z=a.substr(l+1,m-l-1);h.file(z+".ver").async("arraybuffer").then(function(a){if(h.file(z+".mat"))h.file(z+".mat").async("arraybuffer").then(function(l){var m=new Float32Array(a);l=new Float32Array(l);h.file(z+".normal")||(GLE_RenderMode=1);0==GLE_RenderMode?LoadId3(c,h,m,l,z,d,e,g):1==GLE_RenderMode?LoadId4(c,h,m,l,z,d,e,g):h.file(z+".tex")?LoadId5(c,h,m,l,z,d,e,g):(GLE_RenderMode=0,LoadId3(c,h,m,l,z,d,e,g))});else{var l=new Float32Array(a),m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];h.file(z+".normal")||(GLE_RenderMode=1);0==GLE_RenderMode?LoadId3(c,h,l,m,z,d,e,g):1==GLE_RenderMode?LoadId4(c,h,l,m,z,d,e,g):h.file(z+".tex")?LoadId5(c,h,l,m,z,d,e,g):(GLE_RenderMode=0,LoadId3(c,h,l,m,z,d,e,g))}})})})}function LoadTest(c){JSZipUtils.getBinaryContent(c,function(a,d){JSZip.loadAsync(d).then(function(a){var d=c.lastIndexOf("/"),e=c.lastIndexOf("."),l=c.substr(d+1,e-d-1);a.file(l+".ver").async("arraybuffer").then(function(c){a.file(l+".mat").async("arraybuffer").then(function(d){a.file(l+".pos").async("arraybuffer").then(function(e){a.file(l+".mati").async("arraybuffer").then(function(g){a.file(l+".color").async("arraybuffer").then(function(h){a.file(l+".id").async("arraybuffer").then(function(m){a.file(l+".edge").async("arraybuffer").then(function(n){a.file(l+".edgei").async("arraybuffer").then(function(a){var l=new GLE.LineBasicMaterial({color:6710886}),t=new Float32Array(c),q=new Float32Array(d),C=new Uint32Array(e),z=new Uint32Array(g),F=new Uint8Array(h),I=new Uint32Array(m),v=new Uint32Array(n);new Uint32Array(a);var L=new Uint8Array(F.length/4*3),x=new Uint8Array(F.length);a=new Float32Array(3*C.length);for(var B=0;B<x.length;B++)x[B]=255;for(B=0;B<G_10.length&&tag!=G_10[B];B++);for(var p=[],B=0;B<I.length/3;B++){var D=parseInt(B/256),T=B-256*D;p.push(I[3*B]);p.push(0);for(j=I[3*B+1];j<I[3*B+2];j++)L[3*j]=255,L[3*j+1]=D,L[3*j+2]=T}for(B=0;B<C.length;B++)I=C[B],I=[t[3*I+0],t[3*I+1],t[3*I+2]],p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],D=z[B],0<q.length&&16*D<q.length&&(p[0]=q[16*D+0],p[1]=q[16*D+1],p[2]=q[16*D+2],p[3]=q[16*D+3],p[4]=q[16*D+4],p[5]=q[16*D+5],p[6]=q[16*D+6],p[7]=q[16*D+7],p[8]=q[16*D+8],p[9]=q[16*D+9],p[10]=q[16*D+10],p[11]=q[16*D+11],p[12]=q[16*D+12],p[13]=q[16*D+13],p[14]=q[16*D+14],p[15]=q[16*D+15]),I=transformMat4(I,I,p),a[3*B+0]=I[0],a[3*B+1]=I[1],a[3*B+2]=I[2];new GLE.TextureLoader;B={bid:{value:0},mc:{value:65537},color:{value:new GLE.Vector4(1,1,1,1)},bclip:{value:!1},clip1:{value:new GLE.Vector4(0,0,0,0)},clip2:{value:new GLE.Vector4(0,0,0,0)},clip3:{value:new GLE.Vector4(0,0,0,0)},clip4:{value:new GLE.Vector4(0,0,0,0)},clip5:{value:new GLE.Vector4(0,0,0,0)},clip6:{value:new GLE.Vector4(0,0,0,0)}};B=new GLE.ShaderMaterial({uniforms:B,vertexShader:" \r\n                                                varying lowp vec3 vid;  \r\n                                                attribute lowp vec3 id; \r\n                                                varying lowp vec4 vcolor;  \r\n                                                attribute lowp vec4 acolor; \r\n                                                varying lowp vec4 fcolor;  \r\n                                                attribute lowp vec4 pcolor; \r\n                                                varying vec3 vPosition; \r\n                                                void main(){ \r\n                                                    vid \x3d id;   \r\n                                                    vcolor \x3d acolor;   \r\n                                                    fcolor \x3d pcolor;   \r\n                                                    vPosition \x3d position; \r\n                                                    vec4 mvPosition \x3d modelViewMatrix * vec4( position, 1.0 ); \r\n                                                    gl_Position \x3d projectionMatrix * mvPosition;}",fragmentShader:" \r\n                                                uniform int bid; \r\n                                                uniform int mc; \r\n                                                uniform vec4 color; \r\n                                                uniform bool bclip; \r\n                                                uniform vec4 clip1; \r\n                                                uniform vec4 clip2; \r\n                                                uniform vec4 clip3; \r\n                                                uniform vec4 clip4; \r\n                                                uniform vec4 clip5; \r\n                                                uniform vec4 clip6; \r\n                                                varying lowp vec3 vid; \r\n                                                varying lowp vec4 vcolor; \r\n                                                varying lowp vec4 fcolor; \r\n                                                varying vec3 vPosition; \r\n                                                void main(void){ \r\n                                                    if(bid \x3d\x3d 0){ \r\n                                                        if(bclip)   \r\n                                                        {   \r\n                                                            if (length(clip1) \x3e 0.001)  \r\n                                                            {   \r\n                                                                vec4 c1 \x3d clip1;  \r\n                                                                vec3 x \x3d vPosition; \r\n                                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                                if (distance1 \x3c 0.0)    \r\n                                                                {   \r\n                                                                    discard;    \r\n                                                                }   \r\n                                                            }   \r\n                                                            if (length(clip2) \x3e 0.001)  \r\n                                                            {   \r\n                                                                vec4 c1 \x3d clip2;  \r\n                                                                vec3 x \x3d vPosition; \r\n                                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                                if (distance1 \x3c 0.0)    \r\n                                                                {   \r\n                                                                    discard;    \r\n                                                                }   \r\n                                                            }   \r\n                                                            if (length(clip3) \x3e 0.001)  \r\n                                                            {   \r\n                                                                vec4 c1 \x3d clip3;  \r\n                                                                vec3 x \x3d vPosition; \r\n                                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                                if (distance1 \x3c 0.0)    \r\n                                                                {   \r\n                                                                    discard;    \r\n                                                                }   \r\n                                                            }   \r\n                                                            if (length(clip4) \x3e 0.001)  \r\n                                                            {   \r\n                                                                vec4 c1 \x3d clip4;  \r\n                                                                vec3 x \x3d vPosition; \r\n                                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                                if (distance1 \x3c 0.0)    \r\n                                                                {   \r\n                                                                    discard;    \r\n                                                                }   \r\n                                                            }   \r\n                                                            if (length(clip5) \x3e 0.001)  \r\n                                                            {   \r\n                                                                vec4 c1 \x3d clip5;  \r\n                                                                vec3 x \x3d vPosition; \r\n                                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                                if (distance1 \x3c 0.0)    \r\n                                                                {   \r\n                                                                    discard;    \r\n                                                                }   \r\n                                                            }   \r\n                                                            if (length(clip6) \x3e 0.001)  \r\n                                                            {   \r\n                                                                vec4 c1 \x3d clip6;  \r\n                                                                vec3 x \x3d vPosition; \r\n                                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                                if (distance1 \x3c 0.0)    \r\n                                                                {   \r\n                                                                    discard;    \r\n                                                                }   \r\n                                                            }   \r\n                                                        }   \r\n                                                        if(vcolor.r\x3c254.99 || vcolor.g\x3c254.99 || vcolor.b\x3c254.99){  \r\n                                                            gl_FragColor \x3d vec4(vcolor.r / 255.0, vcolor.g / 255.0, vcolor.b / 255.0, vcolor.a / 255.0);    \r\n                                                        }else if(vcolor.a\x3c254.99){ \r\n                                                            gl_FragColor \x3d vec4(fcolor.r / 255.0, fcolor.g / 255.0, fcolor.b / 255.0, fcolor.a / 255.0)*vec4(1.0,1.0,1.0,vcolor.a/255.0);  \r\n                                                        }   \r\n                                                        else   \r\n                                                        {   \r\n                                                            gl_FragColor \x3dvec4(fcolor.r / 255.0, fcolor.g / 255.0, fcolor.b / 255.0, fcolor.a / 255.0) * color;    \r\n                                                        }   \r\n                                                    }   \r\n                                                    else if (bid \x3d\x3d 1) \r\n                                                    {\r\n                                                        int r \x3d mc / 65536;\r\n                                                        int g \x3d (mc - r * 65536) / 256;\r\n                                                        int b \x3d mc - r * 65536 - g * 256;\r\n                                                        gl_FragColor \x3d vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, 1.0);\r\n                                                    }\r\n                                                    else {\r\n                                                        gl_FragColor \x3d vec4(vid.r / 255.0, vid.g / 255.0, vid.b / 255.0, 1.0);\r\n                                                    }\r\n                                                }",side:GLE.DoubleSide,transparent:!0});t=new GLE.BufferGeometry;t.addAttribute("position",(new GLE.Float32BufferAttribute(a,3)).onUpload(disposeArray1));t.addAttribute("id",(new GLE.Uint8BufferAttribute(L,3)).onUpload(disposeArray));t.addAttribute("acolor",(new GLE.Uint8BufferAttribute(x,4)).onUpload(disposeArray1));t.addAttribute("pcolor",(new GLE.Uint8BufferAttribute(F,4)).onUpload(disposeArray1));new GLE.Mal({color:16711680});new GLE.PointsMaterial({color:16711680});F=new GLE.Mesh(t,B);G_34.add(F);L=new Float32Array(3*v.length);for(B=0;B<v.length;B++)L[3*B]=a[3*v[B]],L[3*B+1]=a[3*v[B]+1],L[3*B+2]=a[3*v[B]+2];v={color:{value:new GLE.Vector4(.5,.5,.5,.5)}};new GLE.ShaderMaterial({uniforms:v,vertexShader:" \r\n                                                void main(){ \r\n                                                    vec3 position1 \x3d vec3(position.x,position.y,position.z);  \r\n                                                    vec4 mvPosition \x3d modelViewMatrix * vec4( position1, 1.0 ); \r\n                                                    gl_Position \x3d projectionMatrix * mvPosition;}",fragmentShader:"   \r\n                                                uniform vec4 color; \r\n                                                void main(void){ \r\n                                                        gl_FragColor \x3d color;  \r\n                                                }",side:GLE.FrontSide});v=new GLE.BufferGeometry;v.addAttribute("position",(new GLE.Float32BufferAttribute(L,3)).onUpload(disposeArray1));l=new GLE.LineSegments(v,l);l.name="edge";F.add(l);l=(new GLE.Box3).st(F);.01>Math.abs(G_53.min.x)&&.01>Math.abs(G_53.min.y)&&.01>Math.abs(G_53.min.z)&&.01>Math.abs(G_53.max.x)&&.01>Math.abs(G_53.max.y)&&.01>Math.abs(G_53.max.z)&&(G_53=l);l.min.x<G_53.min.x&&(G_53.min.x=l.min.x);l.min.y<G_53.min.y&&(G_53.min.y=l.min.y);l.min.z<G_53.min.z&&(G_53.min.z=l.min.z);l.max.x>G_53.max.x&&(G_53.max.x=l.max.x);l.max.y>G_53.max.y&&(G_53.max.y=l.max.y);l.max.z>G_53.max.z&&(G_53.max.z=l.max.z);G_22&&(l=new GLE.Box3Helper(G_53,16711680),G_34.add(l));GetBBox();ZoomFitAll();UpdateOrder();G_7=!0;OnLoadModelEnd("test")})})})})})})})})})})}function LoadTest1(c){JSZipUtils.getBinaryContent(c,function(a,d){JSZip.loadAsync(d).then(function(a){var d=c.lastIndexOf("/"),e=c.lastIndexOf("."),l=c.substr(d+1,e-d-1);a.file(l+".ver").async("arraybuffer").then(function(c){a.file(l+".mat").async("arraybuffer").then(function(d){a.file(l+".pos").async("arraybuffer").then(function(e){a.file(l+".mati").async("arraybuffer").then(function(g){a.file(l+".color").async("arraybuffer").then(function(h){a.file(l+".edge").async("arraybuffer").then(function(a){new GLE.LineBasicMaterial({color:6710886});var l=new Float32Array(c),m=new Float32Array(d),n=new Uint32Array(e),q=new Uint32Array(g),A=new Uint8Array(h);a=new Uint32Array(a);for(var C=new Float32Array(3*n.length),z=0;z<n.length;z++){var F=n[z],F=[l[3*F+0],l[3*F+1],l[3*F+2]],O=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],v=q[z];0<m.length&&16*v<m.length&&(O[0]=m[16*v+0],O[1]=m[16*v+1],O[2]=m[16*v+2],O[3]=m[16*v+3],O[4]=m[16*v+4],O[5]=m[16*v+5],O[6]=m[16*v+6],O[7]=m[16*v+7],O[8]=m[16*v+8],O[9]=m[16*v+9],O[10]=m[16*v+10],O[11]=m[16*v+11],O[12]=m[16*v+12],O[13]=m[16*v+13],O[14]=m[16*v+14],O[15]=m[16*v+15]);F=transformMat4(F,F,O);C[3*z+0]=F[0];C[3*z+1]=F[1];C[3*z+2]=F[2]}new GLE.TextureLoader;z={bid:{value:0},mc:{value:65537},color:{value:new GLE.Vector4(1,1,1,1)},bclip:{value:!1},clip1:{value:new GLE.Vector4(0,0,0,0)},clip2:{value:new GLE.Vector4(0,0,0,0)},clip3:{value:new GLE.Vector4(0,0,0,0)},clip4:{value:new GLE.Vector4(0,0,0,0)},clip5:{value:new GLE.Vector4(0,0,0,0)},clip6:{value:new GLE.Vector4(0,0,0,0)}};z=new GLE.ShaderMaterial({uniforms:z,vertexShader:" \r\n                                                varying lowp vec3 vid;  \r\n                                                attribute lowp vec3 id; \r\n                                                varying lowp vec4 vcolor;  \r\n                                                attribute lowp vec4 acolor; \r\n                                                varying lowp vec4 fcolor;  \r\n                                                attribute lowp vec4 pcolor; \r\n                                                varying vec3 vPosition; \r\n                                                void main(){ \r\n                                                    vid \x3d id;   \r\n                                                    vcolor \x3d acolor;   \r\n                                                    fcolor \x3d pcolor;   \r\n                                                    vPosition \x3d position; \r\n                                                    vec4 mvPosition \x3d modelViewMatrix * vec4( position, 1.0 ); \r\n                                                    gl_Position \x3d projectionMatrix * mvPosition;}",fragmentShader:" \r\n                                                uniform int bid; \r\n                                                uniform int mc; \r\n                                                uniform vec4 color; \r\n                                                uniform bool bclip; \r\n                                                uniform vec4 clip1; \r\n                                                uniform vec4 clip2; \r\n                                                uniform vec4 clip3; \r\n                                                uniform vec4 clip4; \r\n                                                uniform vec4 clip5; \r\n                                                uniform vec4 clip6; \r\n                                                varying lowp vec3 vid; \r\n                                                varying lowp vec4 vcolor; \r\n                                                varying lowp vec4 fcolor; \r\n                                                varying vec3 vPosition; \r\n                                                void main(void){ \r\n                                                    gl_FragColor \x3dvec4(fcolor.r / 255.0, fcolor.g / 255.0, fcolor.b / 255.0, fcolor.a / 255.0);  \r\n                                                    return; \r\n                                                    if(bid \x3d\x3d 0){ \r\n                                                        if(bclip)   \r\n                                                        {   \r\n                                                            if (length(clip1) \x3e 0.001)  \r\n                                                            {   \r\n                                                                vec4 c1 \x3d clip1;  \r\n                                                                vec3 x \x3d vPosition; \r\n                                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                                if (distance1 \x3c 0.0)    \r\n                                                                {   \r\n                                                                    discard;    \r\n                                                                }   \r\n                                                            }   \r\n                                                            if (length(clip2) \x3e 0.001)  \r\n                                                            {   \r\n                                                                vec4 c1 \x3d clip2;  \r\n                                                                vec3 x \x3d vPosition; \r\n                                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                                if (distance1 \x3c 0.0)    \r\n                                                                {   \r\n                                                                    discard;    \r\n                                                                }   \r\n                                                            }   \r\n                                                            if (length(clip3) \x3e 0.001)  \r\n                                                            {   \r\n                                                                vec4 c1 \x3d clip3;  \r\n                                                                vec3 x \x3d vPosition; \r\n                                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                                if (distance1 \x3c 0.0)    \r\n                                                                {   \r\n                                                                    discard;    \r\n                                                                }   \r\n                                                            }   \r\n                                                            if (length(clip4) \x3e 0.001)  \r\n                                                            {   \r\n                                                                vec4 c1 \x3d clip4;  \r\n                                                                vec3 x \x3d vPosition; \r\n                                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                                if (distance1 \x3c 0.0)    \r\n                                                                {   \r\n                                                                    discard;    \r\n                                                                }   \r\n                                                            }   \r\n                                                            if (length(clip5) \x3e 0.001)  \r\n                                                            {   \r\n                                                                vec4 c1 \x3d clip5;  \r\n                                                                vec3 x \x3d vPosition; \r\n                                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                                if (distance1 \x3c 0.0)    \r\n                                                                {   \r\n                                                                    discard;    \r\n                                                                }   \r\n                                                            }   \r\n                                                            if (length(clip6) \x3e 0.001)  \r\n                                                            {   \r\n                                                                vec4 c1 \x3d clip6;  \r\n                                                                vec3 x \x3d vPosition; \r\n                                                                float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz); \r\n                                                                if (distance1 \x3c 0.0)    \r\n                                                                {   \r\n                                                                    discard;    \r\n                                                                }   \r\n                                                            }   \r\n                                                        }   \r\n                                                        if(vcolor.r\x3c254.99 || vcolor.g\x3c254.99 || vcolor.b\x3c254.99){  \r\n                                                            gl_FragColor \x3d vec4(vcolor.r / 255.0, vcolor.g / 255.0, vcolor.b / 255.0, vcolor.a / 255.0);    \r\n                                                        }else if(vcolor.a\x3c254.99){ \r\n                                                            gl_FragColor \x3d vec4(fcolor.r / 255.0, fcolor.g / 255.0, fcolor.b / 255.0, fcolor.a / 255.0)*vec4(1.0,1.0,1.0,vcolor.a/255.0);  \r\n                                                        }   \r\n                                                        else   \r\n                                                        {   \r\n                                                            gl_FragColor \x3dvec4(fcolor.r / 255.0, fcolor.g / 255.0, fcolor.b / 255.0, fcolor.a / 255.0) * color;    \r\n                                                        }   \r\n                                                    }   \r\n                                                    else if (bid \x3d\x3d 1) \r\n                                                    {\r\n                                                        int r \x3d mc / 65536;\r\n                                                        int g \x3d (mc - r * 65536) / 256;\r\n                                                        int b \x3d mc - r * 65536 - g * 256;\r\n                                                        gl_FragColor \x3d vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, 1.0);\r\n                                                    }\r\n                                                    else {\r\n                                                        gl_FragColor \x3d vec4(vid.r / 255.0, vid.g / 255.0, vid.b / 255.0, 1.0);\r\n                                                    }\r\n                                                }",side:GLE.DoubleSide,transparent:!0});l=new GLE.BufferGeometry;l.addAttribute("position",(new GLE.Float32BufferAttribute(C,3)).onUpload(disposeArray1));l.addAttribute("pcolor",(new GLE.Uint8BufferAttribute(A,4)).onUpload(disposeArray1));(new GLE.Mal({color:11184810})).side=GLE.DoubleSide;A=new GLE.Mesh(l,z);G_34.add(A);for(var l=new Float32Array(3*a.length),z=0;z<a.length;z++)l[3*z]=C[3*a[z]],l[3*z+1]=C[3*a[z]+1],l[3*z+2]=C[3*a[z]+2];a=new GLE.LineBasicMaterial({color:6710886});C=new GLE.BufferGeometry;C.addAttribute("position",(new GLE.Float32BufferAttribute(l,3)).onUpload(disposeArray1));a=new GLE.LineSegments(C,a);a.name="edge";A.add(a);a=(new GLE.Box3).st(A);.01>Math.abs(G_53.min.x)&&.01>Math.abs(G_53.min.y)&&.01>Math.abs(G_53.min.z)&&.01>Math.abs(G_53.max.x)&&.01>Math.abs(G_53.max.y)&&.01>Math.abs(G_53.max.z)&&(G_53=a);a.min.x<G_53.min.x&&(G_53.min.x=a.min.x);a.min.y<G_53.min.y&&(G_53.min.y=a.min.y);a.min.z<G_53.min.z&&(G_53.min.z=a.min.z);a.max.x>G_53.max.x&&(G_53.max.x=a.max.x);a.max.y>G_53.max.y&&(G_53.max.y=a.max.y);a.max.z>G_53.max.z&&(G_53.max.z=a.max.z);G_22&&(a=new GLE.Box3Helper(G_53,16711680),G_34.add(a));GetBBox();ZoomFitAll();UpdateOrder();G_7=!0;OnLoadModelEnd("test")})})})})})})})})}function SetPivot(c){var a;a=c.toString().split(",");if(!(2>a.length)){G_35.rotation.x=parseFloat(a[3]);G_35.rotation.y=parseFloat(a[4]);G_35.rotation.z=parseFloat(a[5]);G_35.position.x=parseFloat(a[0]);G_35.position.y=parseFloat(a[1]);G_35.position.z=parseFloat(a[2]);G_35.uld(!0);var d=new GLE.Vector3(parseFloat(a[6]),parseFloat(a[7]),parseFloat(a[8])),e=new GLE.Matrix4;d.applyMatrix4(e.getInverse(G_35.matrixWorld));G_36.position.x-=d.x;G_36.position.y-=d.y;G_36.position.z-=d.z;G_35.position.x=parseFloat(a[6]);G_35.position.y=parseFloat(a[7]);G_35.position.z=parseFloat(a[8]);GLE_lastPivot=c}}function ReSetPivot(){GLE_lastPivot.toString().split(",");var c=G_53.getCenter();c.applyMatrix4(G_34.matrixWorld);SetPivot(G_35.position.x+","+G_35.position.y+","+G_35.position.z+","+G_35.rotation.x+","+G_35.rotation.y+","+G_35.rotation.z+","+c.x+","+c.y+","+c.z)}function ZoomFitAll(c,a){if(c){G_53=new GLE.Box3;G_53.min.x=0;G_53.min.y=0;G_53.min.z=0;G_53.max.x=0;G_53.max.y=0;for(var d=G_53.max.z=0;d<G_8.length;d++)for(var e=0;e<G_8[d].length;e++){var g=G_34.ge(G_10[d]+"_"+G_8[d][e].model);g&&(g=(new GLE.Box3).st(g),.01>Math.abs(G_53.min.x)&&.01>Math.abs(G_53.min.y)&&.01>Math.abs(G_53.min.z)&&.01>Math.abs(G_53.max.x)&&.01>Math.abs(G_53.max.y)&&.01>Math.abs(G_53.max.z)&&(G_53=g),g.min.x<G_53.min.x&&(G_53.min.x=g.min.x),g.min.y<G_53.min.y&&(G_53.min.y=g.min.y),g.min.z<G_53.min.z&&(G_53.min.z=g.min.z),g.max.x>G_53.max.x&&(G_53.max.x=g.max.x),g.max.y>G_53.max.y&&(G_53.max.y=g.max.y),g.max.z>G_53.max.z&&(G_53.max.z=g.max.z))}}d=G_53.getCenter();G_32=G_53.getSize().length();G_48.scale.x=G_32/1E4;G_48.scale.y=G_32/1E4;G_48.scale.z=G_32/1E4;G_2.position.copy(d);G_2.position.y-=G_32*GLE_PrimitiveViewDistance;G_2.near=G_32/1E4;G_2.far=1E4*G_32;G_2.ux();G_2.lookAt(d);GLE_topCamera.position.copy(d);GLE_topCamera.position.y-=G_32*GLE_PrimitiveViewDistance;GLE_topCamera.near=G_32/1E4;GLE_topCamera.far=1E4*G_32;GLE_topCamera.ux();GLE_topCamera.lookAt(d);a?(ReSetPivot(),(new TN.Tn(G_35.position)).to({x:d.x,y:d.y,z:d.z},400).delay(0).easing(TN.Easing.Linear.None).start(),(new TN.Tn(G_35.rotation)).to({x:Math.PI*GLE_PrimitiveViewAngle/180,y:0,z:Math.PI/4},400).delay(0).easing(TN.Easing.Linear.None).start()):(G_35.position.x=d.x,G_35.position.y=d.y,G_35.position.z=d.z,G_36.position.x=0,G_36.position.y=0,G_36.position.z=0,SetPivot("0,0,0,0,0,0,"+d.x+","+d.y+","+d.z),G_35.rotation.x=Math.PI*GLE_PrimitiveViewAngle/180,G_35.rotation.y=0,G_35.rotation.z=Math.PI/4);new GLE.CameraHelper(G_2);G_56=M_distance([G_35.position.x,G_35.position.y,G_35.position.z],[G_2.position.x,G_2.position.y,G_2.position.z])}function GetIdImage(c){var a;a=c.toString().split("#");ShowActors(a);MyZoom(GetIdBox(c));render();c=G_4.domElement;return Canvas2Image.getImage(c,c.width,c.height)}function MyZoom(c){var a=c.getCenter();c=c.getSize().length();G_2.position.copy(a);G_2.position.y-=c/.8;G_2.ux();G_2.lookAt(a);G_35.position.x=a.x;G_35.position.y=a.y;G_35.position.z=a.z;G_36.position.x=0;G_36.position.y=0;G_36.position.z=0;SetPivot("0,0,0,0,0,0,"+a.x+","+a.y+","+a.z);G_35.rotation.x=Math.PI/4;G_35.rotation.y=0;G_35.rotation.z=Math.PI/4;G_48.visible=!1}function ZoomFit(c,a){GLE_lastPivot.toString().split(",");var d=c.getCenter();d.applyMatrix4(G_34.matrixWorld);SetPivot(G_35.position.x+","+G_35.position.y+","+G_35.position.z+","+G_35.rotation.x+","+G_35.rotation.y+","+G_35.rotation.z+","+d.x+","+d.y+","+d.z);(new TN.Tn(G_35.rotation)).to({x:Math.PI/4,y:0,z:Math.PI/4},400).delay(0).easing(TN.Easing.Linear.None).start();c.getCenter();c.getSize().length();(new TN.Tn(G_35.position)).to({x:G_2.position.x,y:G_2.position.y+100*a,z:G_2.position.z},400).delay(0).easing(TN.Easing.Linear.None).start()}function OnAnchorClick(c){}function OnLoadSceneEnd(){}function OnLoadModelProcess(c){}function OnLoadModelEnd(c){}function OnSelectionChanged(c){}function OnClickPosition(c){}function OnClickBlank(){}function OnMeasureResult(c){}function ShowBox(c){G_22=c}function SetModelWireFrame(c){for(var a=-1,d=0;d<G_10.length;d++){if(G_10[d]=="GLB_"+c){G_34.ge("GLB_"+c).traverse(function(c){c instanceof GLE.Mesh&&(c.material.wireframe=!0)});return}if(G_10[d]==c){a=d;break}}if(!(0>a))if(0==GLE_RenderMode)for(c=G_8[a],d=0;d<c.length;d++)G_34.ge(G_10[a]+"_"+c[d].model).material.wireframe=!0;else SetModelAlpha(c,0)}function SetModelNomal(c){for(var a=-1,d=0;d<G_10.length;d++){if(G_10[d]=="GLB_"+c){G_34.ge("GLB_"+c).traverse(function(c){c instanceof GLE.Mesh&&(c.material.wireframe=!1)});return}if(G_10[d]==c){a=d;break}}if(!(0>a))if(0==GLE_RenderMode)for(c=G_8[a],d=0;d<c.length;d++)G_34.ge(G_10[a]+"_"+c[d].model).material.wireframe=!1;else SetModelAlpha(c,1)}function RemoveModel(c){for(var a=-1,d=0;d<G_10.length;d++){if(G_10[d]=="GLB_"+c){G_34.remove(G_34.ge("GLB_"+c));G_10.splice(d,1);G_11.splice(d,1);G_12.splice(d,1);G_8.splice(d,1);G_9.splice(d,1);G_53=new GLE.Box3;G_53.min.x=0;G_53.min.y=0;G_53.min.z=0;G_53.max.x=0;G_53.max.y=0;G_53.max.z=0;ZoomFitAll();return}if(G_10[d]==c){a=d;break}}if(!(0>a)){for(var e=G_8[a],d=0;d<e.length;d++){var g=G_34.ge(c+"_"+e[d].model);G_34.remove(g);g.geometry.dispose();g.material.dispose()}G_10.splice(a,1);G_11.splice(a,1);G_12.splice(a,1);G_8.splice(a,1);G_9.splice(a,1);GLE.Cache.clear()}}function ClearScene(){if(G_23){for(var c=[],a=0;a<G_34.children.length;a++)-1<G_34.children[a].name.indexOf("ACT_")&&c.push(G_34.children[a].name);for(a=0;a<c.length;a++){var d=G_34.ge(c[a]);G_34.remove(d)}for(a=0;a<G_8.length;a++)for(c=0;c<G_8[a].length;c++)d=G_34.ge(G_10[a]+"_"+G_8[a][c].model),G_34.remove(d),d.geometry.dispose(),d.material.dispose();G_10=[];G_8=[];G_11=[];G_12=[];G_9=[];G_44=[];G_19=!1;G_23=!0;G_14=[];G_54=[];G_92=[];G_53=new GLE.Box3;G_53.min.x=0;G_53.min.y=0;G_53.min.z=0;G_53.max.x=0;G_53.max.y=0;G_53.max.z=0;ZoomFitAll();GLE.Cache.clear()}}function SetBackgroundImage(c){if("undefined"==typeof c)return!1;viewer&&(viewer._backImg=new Image,viewer._backImg.src=c,viewer._userAction=!0);return!0}var jsPathstr=document.scripts,jsPathstr=jsPathstr[jsPathstr.length-1].src.substring(0,jsPathstr[jsPathstr.length-1].src.lastIndexOf("/")+1);function UpdateOrder(){for(var c=0;c<G_10.length;c++)for(var a=0;a<G_8[c].length;a++){var d=G_34.ge(G_10[c]+"_"+G_8[c][a].model);101==G_8[c][a].type&&(d.renderOrder=2);350==G_8[c][a].type&&(d.renderOrder=2);560==G_8[c][a].type&&(d.renderOrder=3.3);310==G_8[c][a].type&&(d.renderOrder=3.6);99==G_8[c][a].type&&(d.renderOrder=1);351==G_8[c][a].type&&(d.renderOrder=4);667==G_8[c][a].type&&(d.renderOrder=3.5);453==G_8[c][a].type&&(d.renderOrder=3.4);213==G_8[c][a].type&&(d.renderOrder=2.8)}GLE_bVerify&&(G_28=!1,$.getJSON(jsPathstr+"token.json",function(c){var a="",d="",e="";$.each(c,function(c,g){a=g.macaddress;d=g.client_id;e=g.xhrurl;$.ajax({type:"POST",url:e,data:{client_id:""+d+"",macaddress:""+a+""},datatype:"jsonp",beforeSend:function(){},success:function(c){c="[object String]"===Object.prototype.toString.call(c)?JSON.parse(c):c;c=uncMe(c.Code,"123qwe!!!").split("|");var a=c[0],d=c[1],e=c[2],g=(new Date).Format("yyyy-MM-dd");if(a==g)if(a=$.trim(e),"glendale"==d)if(-1<a.indexOf("0")){GLE_bVerify=!1;G_28=!0;c=c[3].split(",");for(d=0;d<c.length;d++)GLE_RightArray.push(parseInt(c[d]));for(d=0;d<GLE_RightArray.length;d++)if(46==GLE_RightArray[d]&&G_3.ge("logo")){G_3.ge("logo").visible=!0;return}G_3.ge("logo")&&((G_3.ge("logo").visible=GLE_bLogo)||G_3.remove(G_3.ge("logo")))}else G_28=!1,G_3.ge("logo")&&(G_3.ge("logo").visible=!0);else G_28=!1,G_3.ge("logo")&&(G_3.ge("logo").visible=!0);else G_28=!1,G_3.ge("logo")&&(G_3.ge("logo").visible=!0)},complete:function(c,a){},error:function(){G_28=!1;G_3.ge("logo")&&(G_3.ge("logo").visible=!0)}})})}))}Date.prototype.Format=function(c){var a={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(c)&&(c=c.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in a)(new RegExp("("+d+")")).test(c)&&(c=c.replace(RegExp.$1,1==RegExp.$1.length?a[d]:("00"+a[d]).substr((""+a[d]).length)));return c};function ShowSpace(c){for(var a=0;a<G_10.length;a++)for(var d=0;d<G_8[a].length;d++)if("454"==G_8[a][d].type){var e=G_8[a][d].model;G_20&&(e=e.replace("big/","small/"));G_34.ge(e)&&(G_34.ge(e).visible=!1,G_34.ge(e).visible=c)}}function SetAllPrimitiveColor(c,a,d,e){for(var g=0;g<G_10.length;g++)for(var h=0;h<G_8[g].length;h++){for(var l=G_34.ge(G_10[g]+"_"+G_8[g][h].model),m=l.geometry.attributes.pcolor.array,n=0;n<G_8[g][h].ids.length/3;n++)for(var q=G_8[g][h].ids[3*n+1];q<G_8[g][h].ids[3*n+2];q++)m[4*q]=c,m[4*q+1]=a,m[4*q+2]=d,m[4*q+3]=e;l.geometry.attributes.pcolor.needsUpdate=!0}}function SetPrimitiveColor(c,a,d,e,g){var h=!0;if(0>a||0>d||0>e)h=!1;c=c.toString().split("#");for(var l=0;l<G_10.length;l++)for(var m=0;m<G_8[l].length;m++){for(var n=G_34.ge(G_10[l]+"_"+G_8[l][m].model),q=n.geometry.attributes.pcolor.array,z=0;z<G_8[l][m].ids.length/3;z++)for(var F=0;F<c.length;F++){var C;C=c[F].toString().split("_");if(C[0]==G_10[l]&&parseInt(C[1])==G_8[l][m].ids[3*z])for(C=G_8[l][m].ids[3*z+1];C<G_8[l][m].ids[3*z+2];C++)h&&(q[4*C]=a,q[4*C+1]=d,q[4*C+2]=e),q[4*C+3]=g}n.geometry.attributes.pcolor.needsUpdate=!0}}function ClearHighLightActors(){for(var c=G_34.ge("LightActor"),a=0;a<c.children.length;a++)c.remove(c.children[a]),a--}function HighLightActor(c,a,d,e){c=c.toString().split("#");a="#"+(16777216+(a<<16)+(d<<8)+e).toString(16).slice(1);d=[];for(e=0;e<G_10.length;e++)for(var g=0;g<G_8[e].length;g++)for(var h=G_34.ge(G_10[e]+"_"+G_8[e][g].model).geometry.attributes.position.array,l=0;l<G_8[e][g].ids.length/3;l++)for(var m=0;m<c.length;m++){var n;n=c[m].toString().split("_");if(n[0]==G_10[e]&&parseInt(n[1])==G_8[e][g].ids[3*l])for(n=G_8[e][g].ids[3*l+1];n<G_8[e][g].ids[3*l+2];n++){var q=new GLE.Vector3(h[3*n],h[3*n+1],h[3*n+2]);d.push(q)}}c=new GLE.Geometry;for(e=0;e<d.length/3;e++)c.vertices.push(d[3*e]),c.vertices.push(d[3*e+1]),c.vertices.push(d[3*e+2]),c.faces.push(new GLE.Face3(3*e,3*e+1,3*e+2));a=new GLE.Mal({color:a});c.computeBoundingSphere();c=new GLE.Mesh(c,a);c.material.transparent=!0;c.material.side=GLE.DoubleSide;c.material.alphaTest=.1;c.material.depthTest=!1;c.material.depthWrite=!1;c.material.opacity=.3;c.renderOrder=19;G_34.ge("LightActor").add(c)}function SetActorColor(c,a,d,e){c=c.toString().split("#");for(var g=0;g<G_10.length;g++)for(var h=0;h<G_8[g].length;h++){for(var l=G_34.ge(G_10[g]+"_"+G_8[g][h].model),m=l.geometry.attributes.acolor.array,n=0;n<G_8[g][h].ids.length/3;n++)for(var q=0;q<c.length;q++){var z;z=c[q].toString().split("_");if(z[0]==G_10[g]&&parseInt(z[1])==G_8[g][h].ids[3*n])for(z=G_8[g][h].ids[3*n+1];z<G_8[g][h].ids[3*n+2];z++)m[4*z]=a,m[4*z+1]=d,m[4*z+2]=e}l.geometry.attributes.acolor.needsUpdate=!0}}function SetActorAlpha(c,a){var d;d=c.toString().split("#");for(var e=0;e<G_10.length;e++)for(var g=0;g<G_8[e].length;g++){for(var h=G_34.ge(G_10[e]+"_"+G_8[e][g].model),l=h.geometry.attributes.acolor.array,m=0;m<G_8[e][g].ids.length/3;m++)for(var n=0;n<d.length;n++){var q;q=d[n].toString().split("_");if(q[0]==G_10[e]&&parseInt(q[1])==G_8[e][g].ids[3*m])for(q=G_8[e][g].ids[3*m+1];q<G_8[e][g].ids[3*m+2];q++)l[4*q+3]=parseInt(255*a)}h.geometry.attributes.acolor.needsUpdate=!0}}function SetActorPosition(c,a){var d;d=c.toString().split("#");(16777471).toString(16).slice(1);for(var e=[],g=[],h=0;h<G_10.length;h++)for(var l=0;l<G_8[h].length;l++)for(var m=G_34.ge(G_10[h]+"_"+G_8[h][l].model),n=m.geometry.attributes.position.array,q=0;q<G_8[h][l].ids.length/3;q++)for(var z=0;z<d.length;z++){var F;F=d[z].toString().split("_");if(F[0]==G_10[h]&&parseInt(F[1])==G_8[h][l].ids[3*q])for(F=G_8[h][l].ids[3*q+1];F<G_8[h][l].ids[3*q+2];F++)m=new GLE.Vector3(n[3*F],n[3*F+1],n[3*F+2]),e.push(m),g.push(n[3*F]),g.push(n[3*F+1]),g.push(n[3*F+2])}e=(new GLE.Box3).setFromArray(g).getCenter();new GLE.Matrix4;e.applyMatrix4(G_34.matrixWorld);h=new GLE.Matrix4;e.applyMatrix4(h.getInverse(G_35.matrixWorld));var g=G_35.position.x,C=G_35.position.y,t=G_35.position.z,I=G_35.rotation.x,K=G_35.rotation.y,H=G_35.rotation.z;F=a.toString().split(",");SetCamera(F[0]+","+F[1]+","+F[2]+","+F[3]+","+F[4]+","+F[5]);render();var A=new GLE.Vector3(parseFloat(F[6]),parseFloat(F[7]),parseFloat(F[8])),h=new GLE.Matrix4;A.applyMatrix4(h.getInverse(G_35.matrixWorld));for(h=0;h<G_10.length;h++)for(l=0;l<G_8[h].length;l++){m=G_34.ge(G_10[h]+"_"+G_8[h][l].model);n=m.geometry.attributes.position.array;1==GLE_RenderMode&&m.ge("edge");for(q=0;q<G_8[h][l].ids.length/3;q++)for(z=0;z<d.length;z++)if(F=d[z].toString().split("_"),F[0]==G_10[h]&&parseInt(F[1])==G_8[h][l].ids[3*q])for(F=G_8[h][l].ids[3*q+1];F<G_8[h][l].ids[3*q+2];F++)n[3*F]+=A.x-e.x,n[3*F+1]+=A.y-e.y,n[3*F+2]+=A.z-e.z;m.geometry.attributes.position.needsUpdate=!0}G_35.position.x=g;G_35.position.y=C;G_35.position.z=t;G_35.rotation.x=I;G_35.rotation.y=K;G_35.rotation.z=H}function SetActorVisible(c,a){var d;d=c.toString().split("#");for(var e=0;e<G_10.length;e++)for(var g=0;g<G_8[e].length;g++){var h=G_34.ge(G_10[e]+"_"+G_8[e][g].model),l=h.geometry.attributes.position.array,m=null;1==GLE_RenderMode&&(m=h.ge("edge").geometry.attributes.position.array);for(var n=0;n<G_8[e][g].ids.length/3;n++)for(var q=0;q<d.length;q++){var z;z=d[q].toString().split("_");if(z[0]==G_10[e]&&parseInt(z[1])==G_8[e][g].ids[3*n])if(z=G_8[e][g].vstate[2*n+1],a){if(0==z)return;for(z=G_8[e][g].ids[3*n+1];z<G_8[e][g].ids[3*n+2];z++)l[3*z]*=1E6,l[3*z+1]*=1E6,l[3*z+2]*=1E6;if(1==GLE_RenderMode)for(z=G_8[e][g].eids[3*n+1];z<G_8[e][g].eids[3*n+2];z++)m[3*z]*=1E6,m[3*z+1]*=1E6,m[3*z+2]*=1E6;G_8[e][g].vstate[2*n+1]=0}else{if(1==z)return;for(z=G_8[e][g].ids[3*n+1];z<G_8[e][g].ids[3*n+2];z++)l[3*z]/=1E6,l[3*z+1]/=1E6,l[3*z+2]/=1E6;if(1==GLE_RenderMode)for(z=G_8[e][g].eids[3*n+1];z<G_8[e][g].eids[3*n+2];z++)m[3*z]/=1E6,m[3*z+1]/=1E6,m[3*z+2]/=1E6;G_8[e][g].vstate[2*n+1]=1}}h.geometry.attributes.position.needsUpdate=!0;1==GLE_RenderMode&&(h.ge("edge").geometry.attributes.position.needsUpdate=!0)}}function ResetPopOut(c){PopOut(0)}function GetIdBox(c){c=c.toString().split("#");for(var a=[],d=0;d<G_10.length;d++)for(var e=0;e<G_8[d].length;e++)for(var g=0;g<G_8[d][e].ids.length/3;g++)for(var h=G_34.ge(G_10[d]+"_"+G_8[d][e].model).geometry.attributes.position.array,l=0;l<c.length;l++){var m;m=c[l].toString().split("_");if(m[0]==G_10[d]&&parseInt(m[1])==G_8[d][e].ids[3*g])for(m=G_8[d][e].ids[3*g+1];m<G_8[d][e].ids[3*g+2];m++)a.push(h[3*m]),a.push(h[3*m+1]),a.push(h[3*m+2])}return(new GLE.Box3).setFromArray(a)}function GetBBox(){for(var c=0;c<G_10.length;c++)for(var a=0;a<G_8[c].length;a++){for(var d=[],e=0;e<G_8[c][a].ids.length/3;e++){for(var g=G_34.ge(G_10[c]+"_"+G_8[c][a].model).geometry.attributes.position.array,h=[],l=G_8[c][a].ids[3*e+1];l<G_8[c][a].ids[3*e+2];l++)h.push(g[3*l]),h.push(g[3*l+1]),h.push(g[3*l+2]);g=(new GLE.Box3).setFromArray(h).getCenter();d.push(g.x);d.push(g.y);d.push(g.z)}G_8[c][a].bbox=d}}function MinModel(){for(var c=[],a=[],d=0;d<G_10.length;d++)for(var e=0;e<G_8[d].length;e++)for(var g=0;g<G_8[d][e].ids.length/3;g++){for(var h=G_34.ge(G_10[d]+"_"+G_8[d][e].model).geometry.attributes.position.array,l=[],m=G_8[d][e].ids[3*g+1];m<G_8[d][e].ids[3*g+2];m++)l.push(h[3*m]),l.push(h[3*m+1]),l.push(h[3*m+2]);var l=(new GLE.Box3).setFromArray(l),h=[l.min.x,l.min.y,l.min.z],n=[l.max.x,l.max.y,l.max.z],l=n[0]-h[0],m=n[1]-h[1],h=n[2]-h[2];3E4>Math.sqrt(l*l+m*m+h*h)&&a.push(G_8[d][e].ids[3*g]);c.push(G_8[d][e].ids[3*g])}}function PopOut(c){for(var a=(c-G_27)/(G_32/1E5),d=G_53.getCenter(),e=0;e<G_10.length;e++)for(var g=0;g<G_8[e].length;g++)for(var h=0;h<G_8[e][g].ids.length/3;h++){var l=G_34.ge(G_10[e]+"_"+G_8[e][g].model),m=l.geometry.attributes.position.array,n=null;1==GLE_RenderMode&&(n=l.ge("edge").geometry.attributes.position.array);for(var q=G_8[e][g].ids[3*h+1];q<G_8[e][g].ids[3*h+2];q++)m[3*q]+=(G_8[e][g].bbox[3*h]-d.x)*a,m[3*q+1]+=(G_8[e][g].bbox[3*h+1]-d.y)*a,m[3*q+2]+=(G_8[e][g].bbox[3*h+2]-d.z)*a;if(1==GLE_RenderMode){for(q=G_8[e][g].eids[3*h+1];q<G_8[e][g].eids[3*h+2];q++)n[3*q]+=G_8[e][g].bbox[3*h]*a,n[3*q+1]+=G_8[e][g].bbox[3*h+1]*a,n[3*q+2]+=G_8[e][g].bbox[3*h+2]*a;l.ge("edge").geometry.attributes.position.needsUpdate=!0}l.geometry.attributes.position.needsUpdate=!0;G_27=c}}function M_normalize(c,a){var d=a[0],e=a[1],g=a[2],d=d*d+e*e+g*g;0<d&&(d=1/Math.sqrt(d),c[0]=a[0]*d,c[1]=a[1]*d,c[2]=a[2]*d);return c}function M_dot(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]}function M_cross(c,a,d){var e=a[0],g=a[1];a=a[2];var h=d[0],l=d[1];d=d[2];c[0]=g*d-a*l;c[1]=a*h-e*d;c[2]=e*l-g*h;return c}function M_subtract(c,a,d){c[0]=a[0]-d[0];c[1]=a[1]-d[1];c[2]=a[2]-d[2];return c}function M_JudgePlane(c,a,d,e){var g=[0,0,0];M_subtract(g,a,c);var h=[0,0,0];M_subtract(h,d,a);a=[0,0,0];M_cross(a,g,h);g=[0,0,0];M_normalize(g,a);c=M_dot(c,g);return.01>Math.abs(M_dot(e,g)-c)}function M_distance(c,a){var d=a[0]-c[0],e=a[1]-c[1],g=a[2]-c[2];return Math.sqrt(d*d+e*e+g*g)}function M_GetArea(c,a,d){var e=M_distance(c,a);c=M_distance(c,d);a=M_distance(a,d);d=(e+c+a)/2;return Math.sqrt(d*(d-e)*(d-c)*(d-a))}function M_GetAngle(c,a,d){var e=M_distance(c,a);c=M_distance(c,d);a=M_distance(a,d);return 180*Math.acos((e*e+a*a-c*c)/(2*e*a))/3.1415926}function SetSelectState(c){G_17=c}function SetAutoCorrection(c){for(var a=0;a<GLE_RightArray.length;a++)if(14==GLE_RightArray[a])return;GLE_AutoCorrection=c}function GetViewImage(c){var a=G_2,d=GetCamera();ZoomFitAll(!0);"top"==c?(G_35.rotation.x=Math.PI/2,G_35.rotation.y=0,G_35.rotation.z=0):"bottom"==c?(G_35.rotation.x=-Math.PI/2,G_35.rotation.y=0,G_35.rotation.z=0):"front"==c?(G_35.rotation.x=0,G_35.rotation.y=0,G_35.rotation.z=0):"back"==c?(G_35.rotation.x=0,G_35.rotation.y=0,G_35.rotation.z=Math.PI):"left"==c?(G_35.rotation.x=0,G_35.rotation.y=0,G_35.rotation.z=Math.PI/2):"right"==c&&(G_35.rotation.x=0,G_35.rotation.y=0,G_35.rotation.z=-Math.PI/2);render();SetCamera(d);G_2=a;c=G_4.domElement;Canvas2Image.saveAsPNG(c,c.width,c.height);return Canvas2Image.getImage(c,c.width,c.height)}function SetViewPort(c){ReSetPivot();var a=G_53.getCenter();(new TN.Tn(G_35.position)).to({x:a.x,y:a.y,z:a.z},400).delay(0).easing(TN.Easing.Linear.None).start();"top"==c?(new TN.Tn(G_35.rotation)).to({x:Math.PI/2,y:0,z:0},400).delay(0).easing(TN.Easing.Linear.None).start():"bottom"==c?(new TN.Tn(G_35.rotation)).to({x:-Math.PI/2,y:0,z:0},400).delay(0).easing(TN.Easing.Linear.None).start():"front"==c?(new TN.Tn(G_35.rotation)).to({x:0,y:0,z:0},400).delay(0).easing(TN.Easing.Linear.None).start():"back"==c?(new TN.Tn(G_35.rotation)).to({x:0,y:0,z:Math.PI},400).delay(0).easing(TN.Easing.Linear.None).start():"left"==c?(new TN.Tn(G_35.rotation)).to({x:0,y:0,z:Math.PI/2},400).delay(0).easing(TN.Easing.Linear.None).start():"right"==c&&(new TN.Tn(G_35.rotation)).to({x:0,y:0,z:-Math.PI/2},400).delay(0).easing(TN.Easing.Linear.None).start()}function AddAnchor(c,a,d,e,g,h){for(var l=0;l<GLE_RightArray.length;l++)if(29==GLE_RightArray[l])return;var l=G_35.position.x,m=G_35.position.y,n=G_35.position.z,q=G_35.rotation.x,z=G_35.rotation.y,F=G_35.rotation.z;c=c.toString().split(",");SetCamera(c[0]+","+c[1]+","+c[2]+","+c[3]+","+c[4]+","+c[5]);render();c=new GLE.Vector3(parseFloat(c[6]),parseFloat(c[7]),parseFloat(c[8]));var C=new GLE.Matrix4;c.applyMatrix4(C.getInverse(G_35.matrixWorld));new GLE.By(0,0,0);new GLE.Mal({color:16711680});a=(new GLE.TextureLoader).load(a);d=new GLE.PlaneGeometry(1E3*d,1E3*e);C=new GLE.Mal;d=new GLE.Mesh(d,C);d.rotation.x=.5*Math.PI;d.position.x=c.x;d.position.y=c.y;d.position.z=c.z+500*e;d.position.x-=G_36.position.x;d.position.y-=G_36.position.y;d.position.z-=G_36.position.z;d.material.transparent=!0;d.material.map=a;d.material.map.needsUpdate=!0;d.material.side=GLE.DoubleSide;d.material.alphaTest=.5;h&&(d.material.depthTest=!1,d.material.depthWrite=!1,d.renderOrder=10);e="0x"+(33554431).toString(16).slice(1);d.material.color.setHex(e);d.rotation.y-=G_35.rotation.z;d.name="ACT_"+g;G_34.add(d);GLE_anchorArray.push("ACT_"+g);G_35.position.x=l;G_35.position.y=m;G_35.position.z=n;G_35.rotation.x=q;G_35.rotation.y=z;G_35.rotation.z=F;render()}function UpdateAnchor(c,a,d,e){for(var g=0;g<GLE_RightArray.length;g++)if(30==GLE_RightArray[g])return;var g=G_35.ge("ACT_"+c).geometry._bufferGeometry.attributes.position,h=G_35.ge("ACT_"+c);G_35.ge("ACT_"+c).position.z-=g.array[1];G_35.ge("ACT_"+c).position.z+=500*d;g.array[0]=500*-a;g.array[1]=500*d;g.array[2]=0;g.array[3]=500*-a;g.array[4]=500*-d;g.array[5]=0;g.array[6]=500*a;g.array[7]=500*d;g.array[8]=0;g.array[9]=500*-a;g.array[10]=500*-d;g.array[11]=0;g.array[12]=500*a;g.array[13]=500*-d;g.array[14]=0;g.array[15]=500*a;g.array[16]=500*d;g.array[17]=0;c=(new GLE.TextureLoader).load(e);h.material.map=c;h.material.map.needsUpdate=!0;g.needsUpdate=!0}function SetAnchorSize(c,a,d){a||(a=1);d||(d=1);for(var e=0;e<GLE_RightArray.length;e++)if(30==GLE_RightArray[e])return;e=G_35.ge("ACT_"+c).geometry._bufferGeometry.attributes.position;G_35.ge("ACT_"+c).position.z-=e.array[1];G_35.ge("ACT_"+c).position.z+=500*d;e.array[0]=500*-a;e.array[1]=500*d;e.array[2]=0;e.array[3]=500*-a;e.array[4]=500*-d;e.array[5]=0;e.array[6]=500*a;e.array[7]=500*d;e.array[8]=0;e.array[9]=500*-a;e.array[10]=500*-d;e.array[11]=0;e.array[12]=500*a;e.array[13]=500*-d;e.array[14]=0;e.array[15]=500*a;e.array[16]=500*d;e.array[17]=0;e.needsUpdate=!0}function AddAnchor1(c,a,d,e,g,h){for(var l=0;l<GLE_RightArray.length;l++)if(29==GLE_RightArray[l])return;var l=G_35.position.x,m=G_35.position.y,n=G_35.position.z,q=G_35.rotation.x,z=G_35.rotation.y,F=G_35.rotation.z;c=c.toString().split(",");SetCamera(c[0]+","+c[1]+","+c[2]+","+c[3]+","+c[4]+","+c[5]);render();c=new GLE.Vector3(parseFloat(c[6]),parseFloat(c[7]),parseFloat(c[8]));var C=new GLE.Matrix4;c.applyMatrix4(C.getInverse(G_35.matrixWorld));new GLE.By(0,0,0);new GLE.Mal({color:16711680});a=(new GLE.TextureLoader).load(a);d=new GLE.PlaneGeometry(1E3*d,1E3*e);C=new GLE.Mal;d=new GLE.Mesh(d,C);var C=new GLE.Geometry,t=new GLE.Vector3;C.vertices.push(t);t=new GLE.PointsMaterial({size:60,sizeAttenuation:!1,map:a,alphaTest:.5,transparent:!0});C=new GLE.Points(C,t);C.renderOrder=1;C.name="ACT_"+g;G_34.add(C);C.rotation.x=.5*Math.PI;C.position.x=c.x;C.position.y=c.y;C.position.z=c.z;C.position.x-=G_36.position.x;C.position.y-=G_36.position.y;C.position.z-=G_36.position.z;C.rotation.y-=G_35.rotation.z;d.rotation.x=.5*Math.PI;d.position.x=c.x;d.position.y=c.y;d.position.z=c.z+500*e;d.position.x-=G_36.position.x;d.position.y-=G_36.position.y;d.position.z-=G_36.position.z;d.material.transparent=!0;d.material.map=a;d.material.map.needsUpdate=!0;d.material.side=GLE.DoubleSide;d.material.alphaTest=.5;h&&(d.material.depthTest=!1,d.material.depthWrite=!1,d.renderOrder=10);e="0x"+(33554431).toString(16).slice(1);d.material.color.setHex(e);d.rotation.y-=G_35.rotation.z;d.name="ACT_"+g;GLE_anchorArray.push("ACT_"+g);G_35.position.x=l;G_35.position.y=m;G_35.position.z=n;G_35.rotation.x=q;G_35.rotation.y=z;G_35.rotation.z=F}function RemoveAnchor(c){for(var a=0;a<GLE_RightArray.length;a++)if(30==GLE_RightArray[a])return;G_34.remove(G_35.ge("ACT_"+c))}function ClearAnchor(){for(var c=0;c<GLE_RightArray.length;c++)if(30==GLE_RightArray[c])return;for(c=0;c<GLE_anchorArray.length;c++)G_35.ge(GLE_anchorArray[c])&&G_34.remove(G_35.ge(GLE_anchorArray[c]));GLE_anchorArray=[]}function ShowAnchor(c,a){for(var d=0;d<GLE_RightArray.length;d++)if(31==GLE_RightArray[d])return;G_34.ge("ACT_"+c).visible=a}function ShowAllAnchor(c){for(var a=0;a<G_34.children.length;a++)-1<G_34.children[a].name.indexOf("ACT_")&&(G_34.children[a].visible=c)}function SetBackGroundColor(c,a,d,e){G_29="#"+(16777216+(c<<16)+(a<<8)+d).toString(16).slice(1);GLE_BACK_ALPHA="undefined"==typeof e?1:e;G_4.sr(G_29,GLE_BACK_ALPHA)}function ReSetBackGroundColor(){G_4.sr(G_29,GLE_BACK_ALPHA)}function SaveImage(){render();var c=G_4.domElement;Canvas2Image.saveAsPNG(c,c.width,c.height)}function GetImage(){var c=G_4.domElement;return Canvas2Image.getImage(c,c.width,c.height)}function SetLight(c,a,d,e){c="0x"+(16777216+(c<<16)+(a<<8)+d).toString(16).slice(1);G_30.color.setHex(c);G_31.color.setHex(c);G_30.intensity=2*e;G_31.intensity=2*e}function ResetLight(){G_30.color.setHex(16777215);G_31.color.setHex(16777215);G_30.intensity=2;G_31.intensity=2}function GetTypeById(c){c=c.toString().split("#");for(var a=0;a<G_10.length;a++)for(var d=0;d<G_8[a].length;d++){G_34.ge(G_10[a]+"_"+G_8[a][d].model);for(var e=0;e<G_8[a][d].ids.length/3;e++)for(var g=0;g<c.length;g++){var h;h=c[g].toString().split("_");if(h[0]==G_10[a]&&parseInt(h[1])==G_8[a][d].ids[3*e])return G_8[a][d].type}}}function SetTypeColor(c,a,d,e){for(var g=[],h=0;h<G_8[0].length;h++)G_8[0][h].type==c&&g.push(G_8[0][h]);G_14.push([a,d,e,255]);for(h=0;h<G_14.length;h++)G_18.fillStyle="rgba("+G_14[h][0]+","+G_14[h][1]+","+G_14[h][2]+",1.0)",G_18.fillRect(h,127,1,1);c=1/256+(G_14.length-1)/128;a=1/256;for(h=0;h<g.length;h++){d=G_3.ge(g[h].model);e=d.geometry.attributes.uv.array;for(var l=0;l<e.length/2;l++)e[2*l]=c,e[2*l+1]=a;d.geometry.attributes.uv.needsUpdate=!0;d.material.map.needsUpdate=!0}}function SetModelPosition(c,a,d,e){d=-1;for(a=0;a<G_10.length;a++){if(G_10[a]=="GLB_"+c){G_34.ge("GLB_"+c).traverse(function(c){});return}if(G_10[a]==c){d=a;break}}if(!(0>d))for(c=G_8[d],a=0;a<c.length;a++)G_3.ge(c[a].model)&&(d=G_3.ge(c[a].model),d.position.z-=1E3),G_3.ge(c[a].model.replace("big/","small/"))&&(d=G_3.ge(c[a].model.replace("big/","small/")),d.position.z-=1E3)}function SetModelRotation(c,a,d,e){d=-1;for(a=0;a<G_10.length;a++){if(G_10[a]=="GLB_"+c){G_34.ge("GLB_"+c).traverse(function(c){});return}if(G_10[a]==c){d=a;break}}if(!(0>d))for(c=G_8[d],a=0;a<c.length;a++)G_3.ge(c[a].model)&&(d=G_3.ge(c[a].model),d.rotation.z-=.2),G_3.ge(c[a].model.replace("big/","small/"))&&(d=G_3.ge(c[a].model.replace("big/","small/")),d.rotation.z-=.2)}function SetModelScale(c,a,d,e){d=-1;for(a=0;a<G_10.length;a++){if(G_10[a]=="GLB_"+c){G_34.ge("GLB_"+c).traverse(function(c){});return}if(G_10[a]==c){d=a;break}}if(!(0>d))for(c=G_8[d],a=0;a<c.length;a++)G_3.ge(c[a].model)&&(d=G_3.ge(c[a].model),d.scale.z*=1.2),G_3.ge(c[a].model.replace("big/","small/"))&&(d=G_3.ge(c[a].model.replace("big/","small/")),d.scale.z*=1.2)}function SetModelAlpha(c,a){for(var d=-1,e=0;e<G_10.length;e++){if(G_10[e]=="GLB_"+c){G_34.ge("GLB_"+c).traverse(function(c){c instanceof GLE.Mesh&&(c.material.opacity=a,c.material.transparent=!0)});return}if(G_10[e]==c){d=e;break}}if(!(0>d))for(var g=G_8[d],e=0;e<g.length;e++)G_34.ge(G_10[d]+"_"+g[e].model).material.uniforms.color.value.w=a}function SetModelColor(c,a,d,e){for(var g=-1,h=0;h<G_10.length;h++){if(G_10[h]=="GLB_"+c){G_34.ge("GLB_"+c).traverse(function(c){if(c instanceof GLE.Mesh){var g="0x"+(16777216+(a<<16)+(d<<8)+e).toString(16).slice(1);c.material.emissive.setHex(g);255==a&&255==d&&255==e&&c.material.emissive.setHex("0x000000")}});return}if(G_10[h]==c){g=h;break}}if(!(0>g))for(c=G_8[g],h=0;h<c.length;h++){var l=G_34.ge(G_10[g]+"_"+c[h].model);l.material.uniforms.color.value.x=a/255;l.material.uniforms.color.value.y=d/255;l.material.uniforms.color.value.z=e/255}}function SetModelVisible(c,a){for(var d=-1,e=0;e<G_10.length;e++){if(G_10[e]=="GLB_"+c){d=G_34.ge("GLB_"+c);d.visible=a;d.traverse(function(c){c instanceof GLE.Mesh&&(c.visible=a)});return}if(G_10[e]==c){d=e;break}}if(!(0>d))for(e=0;e<G_8[d].length;e++){var g=G_34.ge(G_10[d]+"_"+G_8[d][e].model),h=g.geometry.attributes.position.array,l=null;1==GLE_RenderMode&&(l=g.ge("edge").geometry.attributes.position.array);for(var m=0;m<G_8[d][e].ids.length/3;m++){var n=G_8[d][e].vstate[2*m+1];if(a){if(0!=n){for(n=G_8[d][e].ids[3*m+1];n<G_8[d][e].ids[3*m+2];n++)h[3*n]*=1E6,h[3*n+1]*=1E6,h[3*n+2]*=1E6;if(1==GLE_RenderMode)for(n=G_8[d][e].eids[3*m+1];n<G_8[d][e].eids[3*m+2];n++)l[3*n]*=1E6,l[3*n+1]*=1E6,l[3*n+2]*=1E6;G_8[d][e].vstate[2*m+1]=0}}else if(1!=n){for(n=G_8[d][e].ids[3*m+1];n<G_8[d][e].ids[3*m+2];n++)h[3*n]/=1E6,h[3*n+1]/=1E6,h[3*n+2]/=1E6;if(1==GLE_RenderMode)for(n=G_8[d][e].eids[3*m+1];n<G_8[d][e].eids[3*m+2];n++)l[3*n]/=1E6,l[3*n+1]/=1E6,l[3*n+2]/=1E6;G_8[d][e].vstate[2*m+1]=1}}g.geometry.attributes.position.needsUpdate=!0;1==GLE_RenderMode&&(g.ge("edge").geometry.attributes.position.needsUpdate=!0)}}function ResetClip(){var c=Object.freeze([]);G_4.cs=c;for(c=0;c<G_8.length;c++)for(var a=0;a<G_8[c].length;a++){var d=G_34.ge(G_10[c]+"_"+G_8[c][a].model);d.material.uniforms.bclip.value=!1;d.material.uniforms.clip1.value=new GLE.Vector4(0,0,0,0);d.material.uniforms.clip2.value=new GLE.Vector4(0,0,0,0);d.material.uniforms.clip3.value=new GLE.Vector4(0,0,0,0);d.material.uniforms.clip4.value=new GLE.Vector4(0,0,0,0);d.material.uniforms.clip5.value=new GLE.Vector4(0,0,0,0);d.material.uniforms.clip6.value=new GLE.Vector4(0,0,0,0)}G_24=!1}function MyClip(){var c=new GLE.Vector3(Math.cos(G_35.rotation.z),Math.sin(G_35.rotation.z)*Math.cos(G_35.rotation.x),Math.sin(G_35.rotation.z)*Math.sin(G_35.rotation.x));G_38=new GLE.Plane(c,-G_36.position.x-1*(G_53.min.x+G_41*(G_53.max.x-G_53.min.x)));G_38.translate(G_35.position);c=new GLE.Vector3(-Math.cos(G_35.rotation.z),-Math.sin(G_35.rotation.z)*Math.cos(G_35.rotation.x),-Math.sin(G_35.rotation.z)*Math.sin(G_35.rotation.x));G_381=new GLE.Plane(c,-G_36.position.x-1*(G_53.min.x+G_411*(G_53.max.x-G_53.min.x)));G_381.translate(G_35.position);var a=new GLE.Vector3(Math.cos(G_35.rotation.z),Math.sin(G_35.rotation.z),0),c=new GLE.Vector3(0,0,1),d=Math.PI/2;a.applyAxisAngle(c,d);a=new GLE.Vector3(a.x,a.y*Math.cos(G_35.rotation.x),a.y*Math.sin(G_35.rotation.x));G_39=new GLE.Plane(a,-G_36.position.y-1*(G_53.min.y+G_42*(G_53.max.y-G_53.min.y)));G_39.translate(G_35.position);a=new GLE.Vector3(-Math.cos(G_35.rotation.z),-Math.sin(G_35.rotation.z),0);c=new GLE.Vector3(0,0,1);d=Math.PI/2;a.applyAxisAngle(c,d);a=new GLE.Vector3(a.x,a.y*Math.cos(G_35.rotation.x),a.y*Math.sin(G_35.rotation.x));G_391=new GLE.Plane(a,-G_36.position.y-1*(G_53.min.y+G_421*(G_53.max.y-G_53.min.y)));G_391.translate(G_35.position);c=new GLE.Vector3(0,Math.sin(-G_35.rotation.x),Math.cos(-G_35.rotation.x));G_40=new GLE.Plane(c,-G_36.position.z-1*(G_53.min.z+G_43*(G_53.max.z-G_53.min.z)));G_40.translate(G_35.position);c=new GLE.Vector3(0,-Math.sin(-G_35.rotation.x),-Math.cos(-G_35.rotation.x));G_401=new GLE.Plane(c,-G_36.position.z-1*(G_53.min.z+G_431*(G_53.max.z-G_53.min.z)));G_401.translate(G_35.position);G_4.cs=[G_38,G_39,G_40,G_381,G_391,G_401]}function PlateClip(c,a){"x-min"==c&&(G_41=a);"y-min"==c&&(G_42=a);"z-min"==c&&(G_43=a);"x-max"==c&&(G_411=a);"y-max"==c&&(G_421=a);"z-max"==c&&(G_431=a);MyClip();for(var d=0;d<G_8.length;d++)for(var e=0;e<G_8[d].length;e++){var g=G_34.ge(G_10[d]+"_"+G_8[d][e].model);g.material.uniforms.bclip.value=!0;g.material.uniforms.clip1.value=new GLE.Vector4(1,0,0,-G_53.min.x-G_41*(G_53.max.x-G_53.min.x));g.material.uniforms.clip2.value=new GLE.Vector4(-1,0,0,G_53.max.x-G_411*(G_53.max.x-G_53.min.x));g.material.uniforms.clip3.value=new GLE.Vector4(0,1,0,-G_53.min.y-G_42*(G_53.max.y-G_53.min.y));g.material.uniforms.clip4.value=new GLE.Vector4(0,-1,0,G_53.max.y-G_421*(G_53.max.y-G_53.min.y));g.material.uniforms.clip5.value=new GLE.Vector4(0,0,1,-G_53.min.z-G_43*(G_53.max.z-G_53.min.z));g.material.uniforms.clip6.value=new GLE.Vector4(0,0,-1,G_53.max.z-G_431*(G_53.max.z-G_53.min.z))}G_24=!0}function ResetActor(c){c=c.toString().split("_");for(var a=parseInt(c[1]),d=0;d<G_10.length;d++)if(c[0]==G_10[d])for(var e=0;e<G_8[d].length;e++)for(var g=0;g<G_8[d][e].ids.length/3;g++)if(a==G_8[d][e].ids[3*g]){var h=G_34.ge(G_10[d]+"_"+G_8[d][e].model),l=h.geometry.attributes.acolor.array,m=h.geometry.attributes.position.array,n=null;1==GLE_RenderMode&&(n=h.ge("edge").geometry.attributes.position.array);for(var q=G_8[d][e].ids[3*g+1];q<G_8[d][e].ids[3*g+2];q++)l[4*q]=255,l[4*q+1]=255,l[4*q+2]=255,l[4*q+3]=255;if(0!=G_8[d][e].vstate[2*g+1]){for(q=G_8[d][e].ids[3*g+1];q<G_8[d][e].ids[3*g+2];q++)m[3*q]*=1E6,m[3*q+1]*=1E6,m[3*q+2]*=1E6;if(1==GLE_RenderMode)for(q=G_8[d][e].eids[3*g+1];q<G_8[d][e].eids[3*g+2];q++)n[3*q]*=1E6,n[3*q+1]*=1E6,n[3*q+2]*=1E6;G_8[d][e].vstate[2*g+1]=0}h.geometry.attributes.acolor.needsUpdate=!0;h.geometry.attributes.position.needsUpdate=!0;1==GLE_RenderMode&&(h.ge("edge").geometry.attributes.position.needsUpdate=!0)}}function ResetAllActor(c){for(var a=0;a<G_10.length;a++)if(!c||G_10[a]==c)for(var d=0;d<G_8[a].length;d++)for(var e=0;e<G_8[a][d].ids.length/3;e++){var g=G_34.ge(G_10[a]+"_"+G_8[a][d].model),h=g.geometry.attributes.acolor.array,l=g.geometry.attributes.position.array,m=null;1==GLE_RenderMode&&(m=g.ge("edge").geometry.attributes.position.array);for(var n=G_8[a][d].ids[3*e+1];n<G_8[a][d].ids[3*e+2];n++)h[4*n]=255,h[4*n+1]=255,h[4*n+2]=255,h[4*n+3]=255;if(0!=G_8[a][d].vstate[2*e+1]){for(n=G_8[a][d].ids[3*e+1];n<G_8[a][d].ids[3*e+2];n++)l[3*n]*=1E6,l[3*n+1]*=1E6,l[3*n+2]*=1E6;if(1==GLE_RenderMode)for(n=G_8[a][d].eids[3*e+1];n<G_8[a][d].eids[3*e+2];n++)m[3*n]*=1E6,m[3*n+1]*=1E6,m[3*n+2]*=1E6;G_8[a][d].vstate[2*e+1]=0}g.geometry.attributes.acolor.needsUpdate=!0;g.geometry.attributes.position.needsUpdate=!0;1==GLE_RenderMode&&(g.ge("edge").geometry.attributes.position.needsUpdate=!0)}}function GetCamera(){for(var c=0;c<GLE_RightArray.length;c++)if(33==GLE_RightArray[c])return;return G_35.position.x+","+G_35.position.y+","+G_35.position.z+","+G_35.rotation.x+","+G_35.rotation.y+","+G_35.rotation.z}function SetCamera(c){for(var a=0;a<GLE_RightArray.length;a++)if(34==GLE_RightArray[a])return;c=c.toString().split(",");G_35.position.x=parseFloat(c[0]);G_35.position.y=parseFloat(c[1]);G_35.position.z=parseFloat(c[2]);G_35.rotation.x=parseFloat(c[3]);G_35.rotation.y=parseFloat(c[4]);G_35.rotation.z=parseFloat(c[5]);return 0}function LatLonToVec(c,a,d){var e;e=Math.sin(GLE.Math.degToRad(c));var g=Math.cos(GLE.Math.degToRad(c)),h=6378137/Math.sqrt(1-.006694380004260835*e*e);c=(.9933056199957392*h+d)*e;e=(h+d)*g*Math.cos(GLE.Math.degToRad(a));a=(h+d)*g*Math.sin(GLE.Math.degToRad(a));console.log(e+","+a+","+c)}function GetVolumeById(c){var a;a=c.toString().split("_");var d=parseInt(a[1]);for(c=0;c<G_10.length;c++)if(a[0]==G_10[c])for(var e=0;e<G_8[c].length;e++)for(var g=0;g<G_8[c][e].ids.length/3;g++)if(d==G_8[c][e].ids[3*g]){a=G_34.ge(G_10[c]+"_"+G_8[c][e].model);d=a.geometry.attributes.position.array;a.geometry.attributes.acolor.needsUpdate=!0;a=[];for(var h=G_8[c][e].ids[3*g+1];h<G_8[c][e].ids[3*g+2];h++){var l=new GLE.Vector3(d[3*h],d[3*h+1],d[3*h+2]);a.push(l)}e=[];for(c=g=0;c<a.length/3;c++)e.push(new GLE.Vector3(a[3*c].x,a[3*c].y,a[3*c].z)),e.push(new GLE.Vector3(a[3*c+1].x,a[3*c+1].y,a[3*c+1].z)),e.push(new GLE.Vector3(a[3*c+2].x,a[3*c+2].y,a[3*c+2].z)),g+=CalculateVolume(new GLE.Vector3(a[3*c].x,a[3*c].y,a[3*c].z),new GLE.Vector3(a[3*c+1].x,a[3*c+1].y,a[3*c+1].z),new GLE.Vector3(a[3*c+2].x,a[3*c+2].y,a[3*c+2].z));return(parseFloat(g)/1E9).toFixed(3)}}function GetAreaById(c){var a;a=c.toString().split("_");var d=parseInt(a[1]);for(c=0;c<G_10.length;c++)if(a[0]==G_10[c])for(var e=0;e<G_8[c].length;e++)for(var g=0;g<G_8[c][e].ids.length/3;g++)if(d==G_8[c][e].ids[3*g]){a=G_34.ge(G_10[c]+"_"+G_8[c][e].model);d=a.geometry.attributes.position.array;a.geometry.attributes.acolor.needsUpdate=!0;a=[];for(var h=G_8[c][e].ids[3*g+1];h<G_8[c][e].ids[3*g+2];h++){var l=new GLE.Vector3(d[3*h],d[3*h+1],d[3*h+2]);a.push(l)}e=[];for(c=g=0;c<a.length/3;c++)e.push(new GLE.Vector3(a[3*c].x,a[3*c].y,a[3*c].z)),e.push(new GLE.Vector3(a[3*c+1].x,a[3*c+1].y,a[3*c+1].z)),e.push(new GLE.Vector3(a[3*c+2].x,a[3*c+2].y,a[3*c+2].z)),g+=M_GetArea([a[3*c].x,a[3*c].y,a[3*c].z],[a[3*c+1].x,a[3*c+1].y,a[3*c+1].z],[a[3*c+2].x,a[3*c+2].y,a[3*c+2].z]);return(parseFloat(g)/1E6).toFixed(3)}}function GetCenterPosById(c){var a;a=c.toString().split("_");var d=parseInt(a[1]);for(c=0;c<G_10.length;c++)if(a[0]==G_10[c])for(var e=0;e<G_8[c].length;e++)for(var g=0;g<G_8[c][e].ids.length/3;g++)if(d==G_8[c][e].ids[3*g]){d=G_34.ge(G_10[c]+"_"+G_8[c][e].model);a=d.geometry.attributes.position.array;d.geometry.attributes.acolor.needsUpdate=!0;for(var d=[],h=G_8[c][e].ids[3*g+1];h<G_8[c][e].ids[3*g+2];h++)d.push(a[3*h]),d.push(a[3*h+1]),d.push(a[3*h+2]);c=(new GLE.Box3).setFromArray(d).getCenter();new GLE.Matrix4;c.applyMatrix4(G_34.matrixWorld);return G_35.position.x+","+G_35.position.y+","+G_35.position.z+","+G_35.rotation.x+","+G_35.rotation.y+","+G_35.rotation.z+","+c.x+","+c.y+","+c.z}}function GetPosById(c){var a;a=c.toString().split("_");var d=parseInt(a[1]);for(c=0;c<G_10.length;c++)if(a[0]==G_10[c])for(var e=0;e<G_8[c].length;e++)for(var g=0;g<G_8[c][e].ids.length/3;g++)if(d==G_8[c][e].ids[3*g]){d=G_34.ge(G_10[c]+"_"+G_8[c][e].model);a=d.geometry.attributes.position.array;d.geometry.attributes.acolor.needsUpdate=!0;for(var d=[],h=G_8[c][e].ids[3*g+1];h<G_8[c][e].ids[3*g+2];h++)d.push(a[3*h]),d.push(a[3*h+1]),d.push(a[3*h+2]);var l=(new GLE.Box3).setFromArray(d);c=new GLE.Vector3(l.min.x,l.min.y,l.min.z);e=new GLE.Vector3(l.max.x,l.min.y,l.min.z);g=new GLE.Vector3(l.max.x,l.max.y,l.min.z);a=new GLE.Vector3(l.min.x,l.max.y,l.min.z);var d=new GLE.Vector3(l.min.x,l.min.y,l.max.z),h=new GLE.Vector3(l.max.x,l.min.y,l.max.z),m=new GLE.Vector3(l.max.x,l.max.y,l.max.z),n=new GLE.Vector3(l.min.x,l.max.y,l.max.z),l=l.getCenter();return c.x+","+c.y+","+c.z+","+e.x+","+e.y+","+e.z+","+g.x+","+g.y+","+g.z+","+a.x+","+a.y+","+a.z+","+d.x+","+d.y+","+d.z+","+h.x+","+h.y+","+h.z+","+m.x+","+m.y+","+m.z+","+n.x+","+n.y+","+n.z+","+l.x+","+l.y+","+l.z}}function ZoomTo(c,a){a||(a=1);var d;d=c.toString().split("_");for(var e=parseInt(d[1]),g=0;g<G_10.length;g++)if(d[0]==G_10[g])for(var h=0;h<G_8[g].length;h++)for(var l=0;l<G_8[g][h].ids.length/3;l++)if(e==G_8[g][h].ids[3*l]){e=G_34.ge(G_10[g]+"_"+G_8[g][h].model);d=e.geometry.attributes.position.array;e.geometry.attributes.acolor.needsUpdate=!0;for(var e=[],m=G_8[g][h].ids[3*l+1];m<G_8[g][h].ids[3*l+2];m++)e.push(d[3*m]),e.push(d[3*m+1]),e.push(d[3*m+2]);g=(new GLE.Box3).setFromArray(e);ZoomFit(g,a);g=new GLE.Box3Helper(g,16711680);g.material.depthTest=!1;g.material.depthWrite=!1;g.renderOrder=100;return}}function SetZoomSpeed(c){GLE_zd=G_5.zd=c}function SetRotateSpeed(c){G_5.rd=c}function SetRotateLimit(c){GLE_AngleLimit=c}function SetPanSpeed(c){GLE_PanSpeed=c}function DisableUpDown(){G_26=!1}function EnableUpDown(){G_26=!0}function ShowActors(c){for(var a=0;a<G_10.length;a++)for(var d=0;d<G_8[a].length;d++)for(var e=0;e<G_8[a][d].ids.length/3;e++){for(var g=G_10[a]+"_"+G_8[a][d].ids[3*e],h=!1,l=0;l<c.length;l++)if(c[l]==g){h=!0;break}if(h){if(l=G_8[a][d].vstate[2*e+1],0!=l){var g=G_34.ge(G_10[a]+"_"+G_8[a][d].model),h=g.geometry.attributes.position.array,m=null;1==GLE_RenderMode&&(m=g.ge("edge").geometry.attributes.position.array);for(l=G_8[a][d].ids[3*e+1];l<G_8[a][d].ids[3*e+2];l++)h[3*l]*=1E6,h[3*l+1]*=1E6,h[3*l+2]*=1E6;if(1==GLE_RenderMode)for(l=G_8[a][d].eids[3*e+1];l<G_8[a][d].eids[3*e+2];l++)m[3*l]*=1E6,m[3*l+1]*=1E6,m[3*l+2]*=1E6;G_8[a][d].vstate[2*e+1]=0;g.geometry.attributes.position.needsUpdate=!0;1==GLE_RenderMode&&(g.ge("edge").geometry.attributes.position.needsUpdate=!0)}}else if(l=G_8[a][d].vstate[2*e+1],0==l){g=G_34.ge(G_10[a]+"_"+G_8[a][d].model);h=g.geometry.attributes.position.array;m=null;1==GLE_RenderMode&&(m=g.ge("edge").geometry.attributes.position.array);for(l=G_8[a][d].ids[3*e+1];l<G_8[a][d].ids[3*e+2];l++)h[3*l]/=1E6,h[3*l+1]/=1E6,h[3*l+2]/=1E6;if(1==GLE_RenderMode)for(l=G_8[a][d].eids[3*e+1];l<G_8[a][d].eids[3*e+2];l++)m[3*l]/=1E6,m[3*l+1]/=1E6,m[3*l+2]/=1E6;G_8[a][d].vstate[2*e+1]=1;g.geometry.attributes.position.needsUpdate=!0;1==GLE_RenderMode&&(g.ge("edge").geometry.attributes.position.needsUpdate=!0)}}}function FlyAnimation(c,a){for(var d=0;d<GLE_RightArray.length;d++)if(35==GLE_RightArray[d])return;for(d=0;d<c.length;d++){var e;e=c[d].toString().split(",");var g=parseFloat(e[0]),h=parseFloat(e[1]),l=parseFloat(e[2]),m=parseFloat(e[3]),n=parseFloat(e[4]);e=parseFloat(e[5]);if(0<d&&1<c.length){var q;q=c[d-1].toString().split(",");var z=parseFloat(q[0]),F=parseFloat(q[1]),C=parseFloat(q[2]),t=parseFloat(q[3]),I=parseFloat(q[4]);q=parseFloat(q[5]);G_35.position.x=z;G_35.position.y=F;G_35.position.z=C;G_35.rotation.x=t;G_35.rotation.y=I;G_35.rotation.z=q;(new TN.Tn(G_35.position)).to({x:g,y:h,z:l},a/(c.length-1)).delay((d-1)*a/(c.length-1)).easing(TN.Easing.Linear.None).start();(new TN.Tn(G_35.rotation)).to({x:m,y:n,z:e},a/(c.length-1)).delay((d-1)*a/(c.length-1)).easing(TN.Easing.Linear.None).start()}else(new TN.Tn(G_35.position)).to({x:g,y:h,z:l},1).easing(TN.Easing.Linear.None).start(),(new TN.Tn(G_35.rotation)).to({x:m,y:n,z:e},1).easing(TN.Easing.Linear.None).start()}}function SetClickMode(c){G_49=c;ClearMeasure()}function SetThickness(c){G_52=c}!function(c,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):c.ES6Promise=a()}(this,function(){function c(){return function(){return process.nextTick(h)}}function a(){return"undefined"!=typeof da?function(){da(h)}:g()}function d(){var c=0,a=new ya(h),d=document.createTextNode("");return a.observe(d,{characterData:!0}),function(){d.data=c=++c%2}}function e(){var c=new MessageChannel;return c.port1.onmessage=h,function(){return c.port2.postMessage(0)}}function g(){var c=setTimeout;return function(){return c(h,1)}}function h(){for(var c=0;c<U;c+=2)(0,ha[c])(ha[c+1]),ha[c]=void 0,ha[c+1]=void 0;U=0}function l(){try{var c=require("vertx");return da=c.runOnLoop||c.runOnContext,a()}catch(va){return g()}}function m(c,a){var d=arguments,e=this,g=new this.constructor(q);void 0===g[la]&&x(g);var h=e._state;return h?!function(){var c=d[h-1];ka(function(){return v(h,g,c,e._result)})}():E(e,g,c,a),g}function n(c){if(c&&"object"==typeof c&&c.constructor===this)return c;var a=new this(q);return K(a,c),a}function q(){}function z(c){try{return c.then}catch(va){return ga.error=va,ga}}function F(c,a,d,e){try{c.call(a,d,e)}catch(y){return y}}function C(c,a,d){ka(function(c){var e=!1,g=F(d,a,function(d){e||(e=!0,a!==d?K(c,d):A(c,d))},function(a){e||(e=!0,G(c,a))},"Settle: "+(c._label||" unknown promise"));!e&&g&&(e=!0,G(c,g))},c)}function t(c,a){a._state===V?A(c,a._result):a._state===ba?G(c,a._result):E(a,void 0,function(a){return K(c,a)},function(a){return G(c,a)})}function I(c,a,d){a.constructor===c.constructor&&d===m&&a.constructor.resolve===n?t(c,a):d===ga?(G(c,ga.error),ga.error=null):void 0===d?A(c,a):"function"==typeof d?C(c,a,d):A(c,a)}function K(c,a){if(c===a)G(c,new TypeError("You cannot resolve a promise with itself"));else{var d=typeof a;null===a||"object"!==d&&"function"!==d?A(c,a):I(c,a,z(a))}}function H(c){c._onerror&&c._onerror(c._result);N(c)}function A(c,a){c._state===Z&&(c._result=a,c._state=V,0!==c._subscribers.length&&ka(N,c))}function G(c,a){c._state===Z&&(c._state=ba,c._result=a,ka(H,c))}function E(c,a,d,e){var g=c._subscribers,h=g.length;c._onerror=null;g[h]=a;g[h+V]=d;g[h+ba]=e;0===h&&c._state&&ka(N,c)}function N(c){var a=c._subscribers,d=c._state;if(0!==a.length){for(var e,g,h=c._result,l=0;l<a.length;l+=3)e=a[l],g=a[l+d],e?v(d,e,g,h):g(h);c._subscribers.length=0}}function O(){this.error=null}function v(c,a,d,e){var g="function"==typeof d,h=void 0,l=void 0,p=void 0,m=void 0;if(g){var n;try{n=d(e)}catch(Hb){n=(ua.error=Hb,ua)}if(h=n,h===ua?(m=!0,l=h.error,h.error=null):p=!0,a===h)return void G(a,new TypeError("A promises callback cannot return that same promise."))}else h=e,p=!0;a._state!==Z||(g&&p?K(a,h):m?G(a,l):c===V?A(a,h):c===ba&&G(a,h))}function L(c,a){try{a(function(a){K(c,a)},function(a){G(c,a)})}catch(aa){G(c,aa)}}function x(c){c[la]=Y++;c._state=void 0;c._result=void 0;c._subscribers=[]}function B(c,a){this._instanceConstructor=c;this.promise=new c(q);this.promise[la]||x(this.promise);T(a)?(this.length=a.length,this._remaining=a.length,this._result=Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(a),0===this._remaining&&A(this.promise,this._result))):G(this.promise,Error("Array Methods must be provided an Array"))}function p(c){this[la]=Y++;this._result=this._state=void 0;this._subscribers=[];if(q!==c){if("function"!=typeof c)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof p)L(this,c);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}var D=void 0,T=D=Array.isArray?Array.isArray:function(c){return"[object Array]"===Object.prototype.toString.call(c)},U=0,da=void 0,ia=void 0,ka=function(c,a){ha[U]=c;ha[U+1]=a;U+=2;2===U&&(ia?ia(h):W())},na=(D="undefined"!=typeof window?window:void 0)||{},ya=na.MutationObserver||na.WebKitMutationObserver,na="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Ea="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ha=Array(1E3),W=void 0,W=na?c():ya?d():Ea?e():void 0===D&&"function"==typeof require?l():g(),la=Math.random().toString(36).substring(16),Z=void 0,V=1,ba=2,ga=new O,ua=new O,Y=0;return B.prototype._enumerate=function(c){for(var a=0;this._state===Z&&a<c.length;a++)this._eachEntry(c[a],a)},B.prototype._eachEntry=function(c,a){var d=this._instanceConstructor,e=d.resolve;e===n?(e=z(c),e===m&&c._state!==Z?this._settledAt(c._state,a,c._result):"function"!=typeof e?(this._remaining--,this._result[a]=c):d===p?(d=new d(q),I(d,c,e),this._willSettleAt(d,a)):this._willSettleAt(new d(function(a){return a(c)}),a)):this._willSettleAt(e(c),a)},B.prototype._settledAt=function(c,a,d){var e=this.promise;e._state===Z&&(this._remaining--,c===ba?G(e,d):this._result[a]=d);0===this._remaining&&A(e,this._result)},B.prototype._willSettleAt=function(c,a){var d=this;E(c,void 0,function(c){return d._settledAt(V,a,c)},function(c){return d._settledAt(ba,a,c)})},p.all=function(c){return(new B(this,c)).promise},p.race=function(c){var a=this;return new a(T(c)?function(d,e){for(var g=c.length,h=0;h<g;h++)a.resolve(c[h]).then(d,e)}:function(c,a){return a(new TypeError("You must pass an array to race."))})},p.resolve=n,p.reject=function(c){var a=new this(q);return G(a,c),a},p._setScheduler=function(c){ia=c},p._setAsap=function(c){ka=c},p._asap=ka,p.prototype={constructor:p,then:m,"catch":function(c){return this.then(null,c)}},p.polyfill=function(){var c=void 0;if("undefined"!=typeof global)c=global;else if("undefined"!=typeof self)c=self;else try{c=Function("return this")()}catch(ra){throw Error("polyfill failed because global object is unavailable in this environment");}var a=c.Promise;if(a){var d=null;try{d=Object.prototype.toString.call(a.resolve())}catch(ra){}if("[object Promise]"===d&&!a.cast)return}c.Promise=p},p.Promise=p,p});GLE.Gr=function(){function c(c){this.manager=void 0!==c?c:GLE.DefaultLr}function a(){var c={};return{get:function(a){return c[a]},add:function(a,d){c[a]=d},remove:function(a){delete c[a]},removeAll:function(){c={}}}}function d(c){this.name=z.KHR_LIGHTS;this.lights={};c=(c.extensions&&c.extensions[z.KHR_LIGHTS]||{}).lights||{};for(var a in c){var d=c[a],e,g=(new GLE.Color).fromArray(d.color);switch(d.type){case "directional":e=new GLE.Dt(g);e.position.set(0,0,1);break;case "point":e=new GLE.PointLight(g);break;case "spot":e=new GLE.SpotLight(g);e.position.set(0,0,1);break;case "ambient":e=new GLE.AmbientLight(g)}e&&(void 0!==d.constantAttenuation&&(e.intensity=d.constantAttenuation),void 0!==d.linearAttenuation&&(e.distance=1/d.linearAttenuation),void 0!==d.quadraticAttenuation&&(e.decay=d.quadraticAttenuation),void 0!==d.fallOffAngle&&(e.angle=d.fallOffAngle),e.name=d.name||"light_"+a,this.lights[a]=e)}}function e(c){this.name=z.KHR_MATERIALS_COMMON}function g(c){this.name=z.KHR_BINARY_GT;this.body=this.content=null;var a=new DataView(c,0,C);this.header={magic:n(new Uint8Array(c.slice(0,4))),version:a.getUint32(4,!0),length:a.getUint32(8,!0)};for(var a=new DataView(c,C),d=0;d<a.byteLength;){var e=a.getUint32(d,!0),d=d+4,g=a.getUint32(d,!0),d=d+4;g===t.JSON?(g=new Uint8Array(c,C+d,e),this.content=n(g)):g===t.BIN&&(g=C+d,this.body=c.slice(g,g+e));d+=e}}function h(){return{name:z.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:"color map lightMap lightMapIntensity aoMap aoMapIntensity emissive emissiveIntensity emissiveMap bumpMap bumpScale normalMap displacementMap displacementScale displacementBias specularMap specular glossinessMap glossiness alphaMap envMap envMapIntensity refractionRatio".split(" "),getMaterialType:function(){return GLE.ShaderMaterial},extendParams:function(c,a,d){a=a.extensions[this.name];var e=GLE.ShaderLib.standard,g=GLE.UniformsUtils.clone(e.uniforms),h=e.fragmentShader.replace("#include \x3cspecularmap_fragment\x3e","").replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include \x3croughnessmap_pars_fragment\x3e","#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif").replace("#include \x3cmetalnessmap_pars_fragment\x3e","#ifdef USE_GLOSSINESSMAP\n\tuniform sampler2D glossinessMap;\n#endif").replace("#include \x3croughnessmap_fragment\x3e","vec3 specularFactor \x3d specular;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular \x3d texture2D( specularMap, vUv );\n\tspecularFactor *\x3d texelSpecular.rgb;\n#endif").replace("#include \x3cmetalnessmap_fragment\x3e","float glossinessFactor \x3d glossiness;\n#ifdef USE_GLOSSINESSMAP\n\tvec4 texelGlossiness \x3d texture2D( glossinessMap, vUv );\n\tglossinessFactor *\x3d texelGlossiness.a;\n#endif").replace("#include \x3clights_physical_fragment\x3e","PhysicalMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb;\nmaterial.specularRoughness \x3d clamp( 1.0 - glossinessFactor, 0.04, 1.0 );\nmaterial.specularColor \x3d specularFactor.rgb;");delete g.roughness;delete g.metalness;delete g.roughnessMap;delete g.metalnessMap;g.specular={value:(new GLE.Color).setHex(1118481)};g.glossiness={value:.5};g.specularMap={value:null};g.glossinessMap={value:null};c.vertexShader=e.vertexShader;c.fragmentShader=h;c.uniforms=g;c.defines={STANDARD:""};c.color=new GLE.Color(1,1,1);c.opacity=1;e=[];Array.isArray(a.diffuseFactor)&&(g=a.diffuseFactor,c.color.fromArray(g),c.opacity=g[3]);void 0!==a.diffuseTexture&&e.push(d.assignTexture(c,"map",a.diffuseTexture.index));c.emissive=new GLE.Color(0,0,0);c.glossiness=void 0!==a.glossinessFactor?a.glossinessFactor:1;c.specular=new GLE.Color(1,1,1);Array.isArray(a.specularFactor)&&c.specular.fromArray(a.specularFactor);void 0!==a.specularGlossinessTexture&&(a=a.specularGlossinessTexture.index,e.push(d.assignTexture(c,"glossinessMap",a)),e.push(d.assignTexture(c,"specularMap",a)));return Promise.all(e)},createMaterial:function(c){var a=new GLE.ShaderMaterial({defines:c.defines,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,uniforms:c.uniforms,fog:!0,lights:!0,opacity:c.opacity,transparent:c.transparent});a.isGTSpecularGlossinessMaterial=!0;a.color=c.color;a.map=void 0===c.map?null:c.map;a.lightMap=null;a.lightMapIntensity=1;a.aoMap=void 0===c.aoMap?null:c.aoMap;a.aoMapIntensity=1;a.emissive=c.emissive;a.emissiveIntensity=1;a.emissiveMap=void 0===c.emissiveMap?null:c.emissiveMap;a.bumpMap=void 0===c.bumpMap?null:c.bumpMap;a.bumpScale=1;a.normalMap=void 0===c.normalMap?null:c.normalMap;c.normalScale&&(a.normalScale=c.normalScale);a.displacementMap=null;a.displacementScale=1;a.displacementBias=0;a.specularMap=void 0===c.specularMap?null:c.specularMap;a.specular=c.specular;a.glossinessMap=void 0===c.glossinessMap?null:c.glossinessMap;a.glossiness=c.glossiness;a.alphaMap=null;a.envMap=void 0===c.envMap?null:c.envMap;a.envMapIntensity=1;a.refractionRatio=.98;a.extensions.derivatives=!0;return a},cloneMaterial:function(c){var a=c.clone();a.isGTSpecularGlossinessMaterial=!0;for(var d=this.specularGlossinessParams,e=0;e<d.length;e++)a[d[e]]=c[d[e]];return a},refreshUniforms:function(c,a,d,e,g,h){c=g.uniforms;a=g.defines;c.opacity.value=g.opacity;c.diffuse.value.copy(g.color);c.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity);c.map.value=g.map;c.specularMap.value=g.specularMap;c.alphaMap.value=g.alphaMap;c.lightMap.value=g.lightMap;c.lightMapIntensity.value=g.lightMapIntensity;c.aoMap.value=g.aoMap;c.aoMapIntensity.value=g.aoMapIntensity;var l;g.map?l=g.map:g.specularMap?l=g.specularMap:g.displacementMap?l=g.displacementMap:g.normalMap?l=g.normalMap:g.bumpMap?l=g.bumpMap:g.glossinessMap?l=g.glossinessMap:g.alphaMap?l=g.alphaMap:g.emissiveMap&&(l=g.emissiveMap);void 0!==l&&(l.isWt&&(l=l.texture),void 0!==l.matrix?(!0===l.matrixAutoUpdate&&(d=l.offset,e=l.repeat,h=l.center,l.matrix.setUvTransform(d.x,d.y,e.x,e.y,l.rotation,h.x,h.y)),c.uvTransform.value.copy(l.matrix)):(d=l.offset,e=l.repeat,c.offsetRepeat.value.set(d.x,d.y,e.x,e.y)));c.envMap.value=g.envMap;c.envMapIntensity.value=g.envMapIntensity;c.flipEnvMap.value=g.envMap&&g.envMap.isCubeTexture?-1:1;c.refractionRatio.value=g.refractionRatio;c.specular.value.copy(g.specular);c.glossiness.value=g.glossiness;c.glossinessMap.value=g.glossinessMap;c.emissiveMap.value=g.emissiveMap;c.bumpMap.value=g.bumpMap;c.normalMap.value=g.normalMap;c.displacementMap.value=g.displacementMap;c.displacementScale.value=g.displacementScale;c.displacementBias.value=g.displacementBias;null!==c.glossinessMap.value&&void 0===a.USE_GLOSSINESSMAP&&(a.USE_GLOSSINESSMAP="",a.USE_ROUGHNESSMAP="");null===c.glossinessMap.value&&void 0!==a.USE_GLOSSINESSMAP&&(delete a.USE_GLOSSINESSMAP,delete a.USE_ROUGHNESSMAP)}}}function l(c,a,d){if(!c)return Promise.resolve();var e,g=[];if("[object Array]"===Object.prototype.toString.call(c)){e=[];for(var h=c.length,l=0;l<h;l++){var m=a.call(d||this,c[l],l);m&&(m instanceof Promise?m=m.then(function(c,a){e[c]=a}.bind(this,l)):e[l]=m,g.push(m))}}else for(h in e={},c)c.hasOwnProperty(h)&&(m=a.call(d||this,c[h],h))&&(m instanceof Promise?m=m.then(function(c,a){e[c]=a}.bind(this,h)):e[h]=m,g.push(m));return Promise.all(g).then(function(){return e})}function m(c,a){return"string"!==typeof c||""===c?"":/^(https?:)?\/\//i.test(c)||/^data:.*,.*$/i.test(c)||/^blob:.*$/i.test(c)?c:a+c}function n(c){if(void 0!==window.TextDecoder)return(new TextDecoder).decode(c);for(var a="",d=0,e=c.length;d<e;d++)a+=String.fromCharCode(c[d]);return a}function q(c,d,e){this.json=c||{};this.extensions=d||{};this.options=e||{};this.cache=new a;this.textureLoader=new GLE.TextureLoader(this.options.manager);this.textureLoader.setCrossOrigin(this.options.crossOrigin);this.fileLoader=new GLE.FileLoader(this.options.manager);this.fileLoader.setResponseType("arraybuffer")}c.prototype={constructor:c,crossOrigin:"Anonymous",load:function(c,a,d,e){var g=this,h=void 0!==this.path?this.path:GLE.Loader.prototype.extractUrlBase(c);c.substr(c.lastIndexOf(".")+1);JSZipUtils.getBinaryContent(c,function(d,l){if(d)throw d;JSZip.loadAsync(l).then(function(a){var d=c.lastIndexOf("/"),e=c.lastIndexOf("."),d=c.substr(d+1,e-4);return a.file(d).async("arraybuffer")}).then(function(c){g.parse(c,h,a,e)})})},setCrossOrigin:function(c){this.crossOrigin=c},setPath:function(c){this.path=c},parse:function(c,a,l,m){var p={};if("string"!==typeof c)if(n(new Uint8Array(c,0,4))===F){try{p[z.KHR_BINARY_GT]=new g(c)}catch(D){m&&m(D);return}c=p[z.KHR_BINARY_GT].content}else c=n(new Uint8Array(c));""==c?l(null,data1,data2,data3):(c=JSON.parse(c),void 0===c.asset||2>c.asset.version[0]||(c.extensionsUsed&&(0<=c.extensionsUsed.indexOf(z.KHR_LIGHTS)&&(p[z.KHR_LIGHTS]=new d(c)),0<=c.extensionsUsed.indexOf(z.KHR_MATERIALS_COMMON)&&(p[z.KHR_MATERIALS_COMMON]=new e(c)),0<=c.extensionsUsed.indexOf(z.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS)&&(p[z.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]=new h)),(new q(c,p,{path:a||this.path||"",crossOrigin:this.crossOrigin,manager:this.manager})).parse(function(c,a,d,e){l({scene:c,scenes:a,cameras:d,animations:e})},m)))}};var z={KHR_BINARY_GT:"KHR_binary_glTF",KHR_LIGHTS:"KHR_lights",KHR_MATERIALS_COMMON:"KHR_materials_common",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness"};e.prototype.getMaterialType=function(c){switch(c.extensions[this.name].type){case "commonBlinn":case "commonPhong":return GLE.MeshPhongMaterial;case "commonLambert":return GLE.MeshLambertMaterial;default:return GLE.Mal}};e.prototype.extendParams=function(c,a,d){var e=a.extensions[this.name];a=[];var g=[];switch(e.type){case "commonBlinn":case "commonPhong":g.push("diffuseFactor","diffuseTexture","specularFactor","specularTexture","shininessFactor");break;case "commonLambert":g.push("diffuseFactor","diffuseTexture")}var h={};g.forEach(function(c){void 0!==e[c]&&(h[c]=e[c])});void 0!==h.diffuseFactor&&(c.color=(new GLE.Color).fromArray(h.diffuseFactor),c.opacity=h.diffuseFactor[3]);void 0!==h.diffuseTexture&&a.push(d.assignTexture(c,"map",h.diffuseTexture.index));void 0!==h.specularFactor&&(c.specular=(new GLE.Color).fromArray(h.specularFactor));void 0!==h.specularTexture&&a.push(d.assignTexture(c,"specularMap",h.specularTexture.index));void 0!==h.shininessFactor&&(c.shininess=h.shininessFactor);return Promise.all(a)};var F="glTF",C=12,t={JSON:1313821514,BIN:5130562},I={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},K={9728:GLE.Nr,9729:GLE.LinearFilter,9984:GLE.NearestMipMapNr,9985:GLE.LinearMipMapNr,9986:GLE.NearestMipMapLinearFilter,9987:GLE.LinearMipMapLinearFilter},H={33071:GLE.ClampToEdgeWrapping,33648:GLE.MirroredRepeatWrapping,10497:GLE.RepeatWrapping},A={6406:GLE.AlphaFormat,6407:GLE.RGBFormat,6408:GLE.RGBAFormat,6409:GLE.LuminanceFormat,6410:GLE.LuminanceAlphaFormat},G={5121:GLE.UnsignedByteType,32819:GLE.UnsignedShort4444Type,32820:GLE.UnsignedShort5551Type,33635:GLE.UnsignedShort565Type},E={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},N={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},O={CATMULLROMSPLINE:GLE.InterpolateSmooth,CUBICSPLINE:GLE.InterpolateSmooth,LINEAR:GLE.InterpolateLinear,STEP:GLE.InterpolateDiscrete};q.prototype._withDependencies=function(c){for(var a={},d=0;d<c.length;d++){var e=c[d],g="load"+e.charAt(0).toUpperCase()+e.slice(1),h=this.cache.get(e);void 0!==h?a[e]=h:this[g]&&(g=this[g](),this.cache.add(e,g),a[e]=g)}return l(a,function(c){return c})};q.prototype.parse=function(c,a){var d=this.json,e=this;this.cache.removeAll();this._withDependencies(["scenes","animations"]).then(function(g){var h=g.scenes||[],l=h[d.scene||0],p=g.animations||[];e.getDependencies("camera").then(function(a){c(l,h,a,p)})["catch"](a)})["catch"](a)};q.prototype.getDependency=function(c,a){var d=c+":"+a,e=this.cache.get(d);e||(e=this["load"+c.charAt(0).toUpperCase()+c.slice(1)](a),this.cache.add(d,e));return e};q.prototype.getDependencies=function(c){var a=this;return Promise.all((this.json[c+"s"]||[]).map(function(d,e){return a.getDependency(c,e)}))};q.prototype.loadBuffer=function(c){var a=this.json.buffers[c],d=this.fileLoader;if(void 0===a.uri&&0===c)return Promise.resolve(this.extensions[z.KHR_BINARY_GT].body);var e=this.options;return new Promise(function(c,g){d.load(m(a.uri,e.path),c,void 0,function(){g()})})};q.prototype.loadBufferView=function(c){var a=this.json.bufferViews[c];return this.getDependency("buffer",a.buffer).then(function(c){var d=a.byteOffset||0;return c.slice(d,d+(a.byteLength||0))})};q.prototype.loadAccessors=function(){var c=this,a=this.json;return l(a.accessors,function(d){return c.getDependency("bufferView",d.bufferView).then(function(c){var e=E[d.type],g=I[d.componentType],h=g.BYTES_PER_ELEMENT,l=a.bufferViews[d.bufferView].byteStride,m=!0===d.normalized;if(l&&l!==h*e)return c=new g(c),l=new GLE.InterleavedBuffer(c,l/h),new GLE.InterleavedBufferAttribute(l,e,d.byteOffset/h,m);c=new g(c,d.byteOffset,d.count*e);return new GLE.BufferAttribute(c,e,m)})})};q.prototype.loadTexture=function(c){var a=this.json,d=this.options,e=this.textureLoader,g=window.URL||window.webkitURL,h=a.textures[c],l=a.images[h.source],n=l.uri,t=!1;void 0!==l.bufferView&&(n=this.getDependency("bufferView",l.bufferView).then(function(c){t=!0;c=new Blob([c],{type:l.mimeType});return n=g.createObjectURL(c)}));return Promise.resolve(n).then(function(c){var a=GLE.Loader.Handlers.get(c)||e;return new Promise(function(e,g){a.load(m(c,d.path),e,void 0,g)})}).then(function(c){!0===t&&g.revokeObjectURL(n);c.flipY=!1;void 0!==h.name&&(c.name=h.name);c.format=void 0!==h.format?A[h.format]:GLE.RGBAFormat;c.type=void 0!==h.type?G[h.type]:GLE.UnsignedByteType;var d=(a.samplers||{})[h.sampler]||{};c.magFilter=K[d.magFilter]||GLE.LinearFilter;c.minFilter=K[d.minFilter]||GLE.LinearMipMapLinearFilter;c.wrapS=H[d.wrapS]||GLE.RepeatWrapping;c.wrapT=H[d.wrapT]||GLE.RepeatWrapping;return c})};q.prototype.assignTexture=function(c,a,d){return this.getDependency("texture",d).then(function(d){c[a]=d})};q.prototype.loadMaterials=function(){var c=this,a=this.extensions;return l(this.json.materials,function(d){var e,g={},h=d.extensions||{},l=[];if(h[z.KHR_MATERIALS_COMMON])h=a[z.KHR_MATERIALS_COMMON],e=h.getMaterialType(d),l.push(h.extendParams(g,d,c));else if(h[z.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS])h=a[z.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS],e=h.getMaterialType(d),l.push(h.extendParams(g,d,c));else if(void 0!==d.pbrMetallicRoughness){e=GLE.MeshStandardMaterial;h=d.pbrMetallicRoughness;g.color=new GLE.Color(1,1,1);g.opacity=1;if(Array.isArray(h.baseColorFactor)){var m=h.baseColorFactor;g.color.fromArray(m);g.opacity=m[3]}void 0!==h.baseColorTexture&&l.push(c.assignTexture(g,"map",h.baseColorTexture.index));g.metalness=void 0!==h.metallicFactor?h.metallicFactor:1;g.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1;void 0!==h.metallicRoughnessTexture&&(h=h.metallicRoughnessTexture.index,l.push(c.assignTexture(g,"metalnessMap",h)),l.push(c.assignTexture(g,"roughnessMap",h)))}else e=GLE.MeshPhongMaterial;!0===d.doubleSided&&(g.side=GLE.DoubleSide);h=d.alphaMode||"OPAQUE";"OPAQUE"!==h?(g.transparent=!0,"MASK"===h&&(g.alphaTest=void 0!==d.alphaCutoff?d.alphaCutoff:.5)):g.transparent=!1;void 0!==d.normalTexture&&(l.push(c.assignTexture(g,"normalMap",d.normalTexture.index)),g.normalScale=new GLE.Vector2(1,1),void 0!==d.normalTexture.scale&&g.normalScale.set(d.normalTexture.scale,d.normalTexture.scale));void 0!==d.occlusionTexture&&(l.push(c.assignTexture(g,"aoMap",d.occlusionTexture.index)),void 0!==d.occlusionTexture.strength&&(g.aoMapIntensity=d.occlusionTexture.strength));void 0!==d.emissiveFactor&&(e===GLE.Mal?g.color=(new GLE.Color).fromArray(d.emissiveFactor):g.emissive=(new GLE.Color).fromArray(d.emissiveFactor));void 0!==d.emissiveTexture&&(e===GLE.Mal?l.push(c.assignTexture(g,"map",d.emissiveTexture.index)):l.push(c.assignTexture(g,"emissiveMap",d.emissiveTexture.index)));return Promise.all(l).then(function(){var c;c=e===GLE.ShaderMaterial?a[z.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(g):new e(g);void 0!==d.name&&(c.name=d.name);c.normalScale&&(c.normalScale.x=-c.normalScale.x);c.map&&(c.map.encoding=GLE.sRGBEncoding);c.emissiveMap&&(c.emissiveMap.encoding=GLE.sRGBEncoding);d.extras&&(c.userData=d.extras);return c})})};q.prototype.loadGeometries=function(c){return this._withDependencies(["accessors"]).then(function(a){return l(c,function(c){var d=new GLE.BufferGeometry,e=c.attributes,g;for(g in e){var h=e[g];if(void 0===h)return;h=a.accessors[h];switch(g){case "POSITION":d.addAttribute("position",h);break;case "NORMAL":d.addAttribute("normal",h);break;case "TEXCOORD_0":case "TEXCOORD0":case "TEXCOORD":d.addAttribute("uv",h);break;case "TEXCOORD_1":d.addAttribute("uv2",h);break;case "COLOR_0":case "COLOR0":case "COLOR":d.addAttribute("color",h);break;case "WEIGHTS_0":case "WEIGHT":d.addAttribute("skinWeight",h);break;case "JOINTS_0":case "JOINT":d.addAttribute("skinIndex",h)}}void 0!==c.indices&&d.setIndex(a.accessors[c.indices]);return d})})};q.prototype.loadMeshes=function(){var c=this,a=this.json,d=this.extensions;return this._withDependencies(["accessors","materials"]).then(function(e){return l(a.meshes,function(a,g){var h=new GLE.Group,l=a.primitives||[];return c.loadGeometries(l).then(function(c){for(var p=0;p<l.length;p++){var m=l[p],n=c[p],t;t=void 0===m.material?G_55?new GLE.Mal({color:12369084,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:GLE.FrontSide}):new GLE.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:GLE.FrontSide}):e.materials[m.material];t.aoMap&&void 0===n.attributes.uv2&&void 0!==n.attributes.uv&&n.addAttribute("uv2",new GLE.BufferAttribute(n.attributes.uv.array,2));var q=void 0!==n.attributes.color,x=void 0===n.attributes.normal;if(q||x)t=t.isGTSpecularGlossinessMaterial?d[z.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(t):t.clone();q&&(t.vertexColors=GLE.VertexColors,t.needsUpdate=!0);x&&(t.flatShading=!0);var A;4===m.mode||void 0===m.mode?A=new GLE.Mesh(n,t):5===m.mode?(A=new GLE.Mesh(n,t),A.drawMode=GLE.TriangleStripDrawMode):6===m.mode?(A=new GLE.Mesh(n,t),A.drawMode=GLE.TriangleFanDrawMode):1===m.mode?A=new GLE.LineSegments(n,t):3===m.mode?A=new GLE.Line(n,t):2===m.mode?A=new GLE.LineLoop(n,t):0===m.mode&&(A=new GLE.Points(n,t));A.name=a.name||"mesh_"+g;if(void 0!==m.targets){n=A;t=a;var q=e,x=n.geometry,C=n.material,D=m.targets,v=x.morphAttributes;v.position=[];v.normal=[];C.morphTargets=!0;for(var F=0,H=D.length;F<H;F++){var E=D[F],G="morphTarget"+F,B,I;if(void 0!==E.POSITION){B=q.accessors[E.POSITION].clone();for(var K=x.attributes.position,N=0,y=B.count;N<y;N++)B.setXYZ(N,B.getX(N)+K.getX(N),B.getY(N)+K.getY(N),B.getZ(N)+K.getZ(N))}else x.attributes.position&&(B=x.attributes.position.clone());void 0!==B&&(B.name=G,v.position.push(B));if(void 0!==E.NORMAL)for(C.morphNormals=!0,I=q.accessors[E.NORMAL].clone(),E=x.attributes.normal,N=0,y=I.count;N<y;N++)I.setXYZ(N,I.getX(N)+E.getX(N),I.getY(N)+E.getY(N),I.getZ(N)+E.getZ(N));else void 0!==x.attributes.normal&&(I=x.attributes.normal.clone());void 0!==I&&(I.name=G,v.normal.push(I))}n.updateMorphTargets();if(void 0!==t.weights)for(F=0,H=t.weights.length;F<H;F++)n.morphTargetInfluences[F]=t.weights[F]}m.extras&&(A.userData=m.extras);if(1<l.length)A.name+="_"+p,h.add(A);else return A}return h})})})};q.prototype.loadCamera=function(c){var a;c=this.json.cameras[c];var d=c[c.type];if(d)return"perspective"===c.type?(a=d.aspectRatio||1,a=new GLE.Pa(GLE.Math.radToDeg(d.yfov*a),a,d.znear||1,d.zfar||2E6)):"orthographic"===c.type&&(a=new GLE.OrthographicCamera(d.xmag/-2,d.xmag/2,d.ymag/2,d.ymag/-2,d.znear,d.zfar)),void 0!==c.name&&(a.name=c.name),c.extras&&(a.userData=c.extras),Promise.resolve(a)};q.prototype.loadSkins=function(){var c=this.json;return this._withDependencies(["accessors"]).then(function(a){return l(c.skins,function(c){return{joints:c.joints,inverseBindMatrices:a.accessors[c.inverseBindMatrices]}})})};q.prototype.loadAnimations=function(){var c=this.json;return this._withDependencies(["accessors","nodes"]).then(function(a){return l(c.animations,function(c,d){for(var e=[],g=0;g<c.channels.length;g++){var h=c.channels[g],l=c.samplers[h.sampler];if(l){var h=h.target,m=void 0!==h.node?h.node:h.id,n=a.accessors[void 0!==c.parameters?c.parameters[l.input]:l.input],t=a.accessors[void 0!==c.parameters?c.parameters[l.output]:l.output],q=a.nodes[m];if(q){q.updateMatrix();q.matrixAutoUpdate=!0;switch(N[h.path]){case N.weights:m=GLE.NumberKeyframeTrack;break;case N.rotation:m=GLE.QuaternionKeyframeTrack;break;default:m=GLE.VectorKeyframeTrack}var x=q.name?q.name:q.uuid,l=void 0!==l.interpolation?O[l.interpolation]:GLE.InterpolateLinear,A=[];N[h.path]===N.weights?q.traverse(function(c){!0===c.isMesh&&!0===c.material.morphTargets&&A.push(c.name?c.name:c.uuid)}):A.push(x);q=0;for(x=A.length;q<x;q++)e.push(new m(A[q]+"."+N[h.path],GLE.AnimationUtils.arraySlice(n.array,0),GLE.AnimationUtils.arraySlice(t.array,0),l))}}}m=void 0!==c.name?c.name:"animation_"+d;return new GLE.AnimationClip(m,void 0,e)})})};q.prototype.loadNodes=function(){for(var c=this.json,a=this.extensions,d=this,e=c.nodes||[],g=c.skins||[],h={},m={},n=0;n<g.length;n++)for(var t=g[n].joints,q=0;q<t.length;++q)e[t[q]].isBone=!0;for(g=0;g<e.length;g++)n=e[g],void 0!==n.mesh&&(void 0===h[n.mesh]&&(h[n.mesh]=m[n.mesh]=0),h[n.mesh]++);return d._withDependencies(["meshes","skins","cameras"]).then(function(e){return l(c.nodes,function(c){if(!0===c.isBone)return new GLE.Bone;if(void 0!==c.mesh){var g=e.meshes[c.mesh].clone();1<h[c.mesh]&&(g.name+="_instance_"+m[c.mesh]++);return g}return void 0!==c.camera?d.getDependency("camera",c.camera):c.extensions&&c.extensions[z.KHR_LIGHTS]&&void 0!==c.extensions[z.KHR_LIGHTS].light?a[z.KHR_LIGHTS].lights[c.extensions[z.KHR_LIGHTS].light]:new GLE.Object3D}).then(function(a){return l(a,function(d,g){var h=c.nodes[g];void 0!==h.name&&(d.name=GLE.PropertyBinding.sanitizeNodeName(h.name));h.extras&&(d.userData=h.extras);if(void 0!==h.matrix){var l=new GLE.Matrix4;l.fromArray(h.matrix);d.applyMatrix(l)}else void 0!==h.translation&&d.position.fromArray(h.translation),void 0!==h.rotation&&d.quaternion.fromArray(h.rotation),void 0!==h.scale&&d.scale.fromArray(h.scale);if(void 0!==h.skin){for(var l=[],m=0<d.children.length?d.children:[d],p=0;p<m.length;p++){var n=m[p],t=e.skins[h.skin],q=n.geometry,x=n.material;x.skinning=!0;q=new GLE.SkinnedMesh(q,x);q.morphTargetInfluences=n.morphTargetInfluences;q.userData=n.userData;q.name=n.name;for(var n=[],x=[],A=0,C=t.joints.length;A<C;A++){var z=a[t.joints[A]];z&&(n.push(z),z=t.inverseBindMatrices.array,z=(new GLE.Matrix4).fromArray(z,16*A),x.push(z))}q.bind(new GLE.Skeleton(n,x),q.matrixWorld);l.push(q)}0<d.children.length?(d.remove.apply(d,d.children),d.add.apply(d,l)):d=l[0]}return d})})})};q.prototype.loadScenes=function(){function c(d,e,g){var h=g[d];e.add(h);d=a.nodes[d];if(d.children){d=d.children;e=0;for(var l=d.length;e<l;e++)c(d[e],h,g)}}var a=this.json,d=this.extensions;return this._withDependencies(["nodes"]).then(function(e){return l(a.scenes,function(a){var g=new GLE.Scene;void 0!==a.name&&(g.name=a.name);a.extras&&(g.userData=a.extras);for(var h=a.nodes||[],l=0,m=h.length;l<m;l++)c(h[l],g,e.nodes);g.traverse(function(c){c.material&&c.material.isGTSpecularGlossinessMaterial&&(c.onBeforeRender=d[z.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms)});a.extensions&&a.extensions[z.KHR_LIGHTS]&&void 0!==a.extensions[z.KHR_LIGHTS].light&&g.add(d[z.KHR_LIGHTS].lights[a.extensions[z.KHR_LIGHTS].light]);return g})})};return c}();var Stats=function(){function c(c){e.appendChild(c.dom);return c}function a(c){for(var a=0;a<e.children.length;a++)e.children[a].style.display=a===c?"block":"none";d=c}var d=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000";e.addEventListener("click",function(c){c.preventDefault();a(++d%e.children.length)},!1);var g=(performance||Date).now(),h=g,l=0,m=c(new Stats.Panel("FPS","#0ff","#002")),n=c(new Stats.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var q=c(new Stats.Panel("MB","#f08","#201"));a(0);return{REVISION:16,dom:e,addPanel:c,showPanel:a,begin:function(){g=(performance||Date).now()},end:function(){l++;var c=(performance||Date).now();n.update(c-g,200);if(c>h+1E3&&(m.update(1E3*l/(c-h),100),h=c,l=0,q)){var a=performance.memory;q.update(a.usedJSHeapSize/1048576,a.jsHeapSizeLimit/1048576)}return c},update:function(){g=this.end()},domElement:e,setMode:a}};Stats.Panel=function(c,a,d){var e=Infinity,g=0,h=Math.round,l=h(window.devicePixelRatio||1),m=80*l,n=48*l,q=3*l,z=2*l,F=3*l,C=15*l,t=74*l,I=30*l,K=document.createElement("canvas");K.width=m;K.height=n;K.style.cssText="width:80px;height:48px";var H=K.getContext("2d");H.font="bold "+9*l+"px Helvetica,Arial,sans-serif";H.textBaseline="top";H.fillStyle=d;H.fillRect(0,0,m,n);H.fillStyle=a;H.fillText(c,q,z);H.fillRect(F,C,t,I);H.fillStyle=d;H.globalAlpha=.9;H.fillRect(F,C,t,I);return{dom:K,update:function(n,G){e=Math.min(e,n);g=Math.max(g,n);H.fillStyle=d;H.globalAlpha=1;H.fillRect(0,0,m,C);H.fillStyle=a;H.fillText(h(n)+" "+c+" ("+h(e)+"-"+h(g)+")",q,z);H.drawImage(K,F+l,C,t-l,I,F,C,t-l,I);H.fillRect(F+t-l,C,l,I);H.fillStyle=d;H.globalAlpha=.9;H.fillRect(F+t-l,C,l,h((1-n/G)*I))}}};"object"===typeof module&&(module.exports=Stats);var Canvas2Image=function(){function c(c,a,d){var e=c.width,g=c.height;void 0==a&&(a=e);void 0==d&&(d=g);var h=document.createElement("canvas"),l=h.getContext("2d");h.width=a;h.height=d;l.drawImage(c,0,0,e,g,0,0,a,d);return h}function a(a,d,e,g){a=c(a,e,g);return a.toDataURL(d)}function d(c){var a=document.createElement("img");a.src=c;return a}function e(c){c=c.toLowerCase().replace(/jpg/i,"jpeg");return"image/"+c.match(/png|jpeg|bmp|gif/)[0]}function g(c){if(!window.btoa)throw"btoa undefined";var a="";if("string"==typeof c)a=c;else for(var d=0;d<c.length;d++)a+=String.fromCharCode(c[d]);return btoa(a)}function h(c){var a=c.width,d=c.height;return c.getContext("2d").getImageData(0,0,a,d)}var l=function(){var c=document.createElement("canvas"),a=c.getContext("2d");return{canvas:!!a,imageData:!!a.getImageData,dataURL:!!c.toDataURL,btoa:!!window.btoa}}(),m=function(c){var a=c.width,d=c.height,e=a*d*3,h=e+54,h=[66,77,h&255,h>>8&255,h>>16&255,h>>24&255,0,0,0,0,54,0,0,0],e=[40,0,0,0,a&255,a>>8&255,a>>16&255,a>>24&255,d&255,d>>8&255,d>>16&255,d>>24&255,1,0,24,0,0,0,0,0,e&255,e>>8&255,e>>16&255,e>>24&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=(4-3*a%4)%4;c=c.data;var m="",n=a<<2,q=String.fromCharCode;do{for(var z=n*(d-1),F="",v=0;v<a;v++)var L=v<<2,F=F+(q(c[z+L+2])+q(c[z+L+1])+q(c[z+L]));for(z=0;z<l;z++)F+=String.fromCharCode(0);m+=F}while(--d);return g(h.concat(e))+g(m)},n=function(d,g,n,q){if(l.canvas&&l.dataURL)if("string"==typeof d&&(d=document.getElementById(d)),void 0==q&&(q="png"),q=e(q),/bmp/.test(q))d=h(c(d,g,n)),d=m(d),document.location.href="data:image/octet-stream;base64,"+d;else return d=a(d,q,g,n)},q=function(d,g,n,q){l.canvas&&l.dataURL&&("string"==typeof d&&(d=document.getElementById(d)),void 0==q&&(q="png"),q=e(q),/bmp/.test(q)?(d=h(c(d,g,n)),g=m(d),document.location.href="data:image/octet-stream;base64,"+g):(g=a(d,q,g,n),d="bim_"+(new Date).getTime()+".png",n=g,g=document.createElementNS("http://www.w3.org/1999/xhtml","a"),g.href=n,g.download=d,d=document.createEvent("MouseEvents"),d.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),g.dispatchEvent(d)))},z=function(g,n,t,q){if(l.canvas&&l.dataURL){"string"==typeof g&&(g=document.getElementById(g));void 0==q&&(q="png");q=e(q);if(/bmp/.test(q))return g=h(c(g,n,t)),g=m(g),d("data:image/bmp;base64,"+g);g=a(g,q,n,t);return d(g)}};return{getImage:n,getPNG:function(c,a,d){return n(c,a,d,"png")},getJPEG:function(c,a,d){return n(c,a,d,"jpeg")},getGIF:function(c,a,d){return n(c,a,d,"gif")},getBMP:function(c,a,d){return n(c,a,d,"bmp")},saveAsImage:q,saveAsPNG:function(c,a,d){return q(c,a,d,"png")},saveAsJPEG:function(c,a,d){return q(c,a,d,"jpeg")},saveAsGIF:function(c,a,d){return q(c,a,d,"gif")},saveAsBMP:function(c,a,d){return q(c,a,d,"bmp")},convertToImage:z,convertToPNG:function(c,a,d){return z(c,a,d,"png")},convertToJPEG:function(c,a,d){return z(c,a,d,"jpeg")},convertToGIF:function(c,a,d){return z(c,a,d,"gif")},convertToBMP:function(c,a,d){return z(c,a,d,"bmp")}}}();GLE.Ts=function(c,a,d){function e(c){!1!==t.enabled&&(window.removeEventListener("keydown",e),H===I.NONE)&&(c.keyCode!==t.keys[I.ROTATE]||t.noRotate?c.keyCode!==t.keys[I.ZOOM]||t.noZoom?c.keyCode!==t.keys[I.PAN]||t.noPan||(H=I.PAN):H=I.ZOOM:H=I.ROTATE)}function g(c){var a=a||c;c=String.fromCharCode(a.keyCode||a.which||a.charCode);"A"==c&&(G_35.position.x+=.02*G_32);"S"==c&&(G_35.position.y+=.02*G_32);"W"==c&&(G_35.position.y-=.02*G_32);"D"==c&&(G_35.position.x-=.02*G_32)}function h(c){GLE_bRect||!1===t.enabled||(c.preventDefault(),c.stopPropagation(),H===I.NONE&&(H=c.button),H!==I.ROTATE||t.noRotate?H!==I.ZOOM||t.noZoom?H!==I.PAN||t.noPan||GLE_MouseMode||(x.copy(U(c.pageX,c.pageY)),B.copy(x)):GLE_MouseMode?(x.copy(U(c.pageX,c.pageY)),B.copy(x)):(N.copy(U(c.pageX,c.pageY)),O.copy(N)):(E.copy(da(c.pageX,c.pageY)),G.copy(E)),document.addEventListener("mousemove",l,!1),document.addEventListener("mouseup",m,!1),t.dispatchEvent(D))}function l(c){GLE_bRect||!1===t.enabled||(c.preventDefault(),c.stopPropagation(),H!==I.ROTATE||t.noRotate?H!==I.ZOOM||t.noZoom?H!==I.PAN||t.noPan||GLE_MouseMode||B.copy(U(c.pageX,c.pageY)):GLE_MouseMode?B.copy(U(c.pageX,c.pageY)):O.copy(U(c.pageX,c.pageY)):(G.copy(E),E.copy(da(c.pageX,c.pageY))))}function m(c){GLE_bRect||!1===t.enabled||(c.preventDefault(),c.stopPropagation(),H=I.NONE,document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",m),t.dispatchEvent(T))}function n(c){if(!1!==t.enabled){c.preventDefault();c.stopPropagation();switch(c.deltaMode){case 2:N.y-=.025*c.deltaY;break;case 1:N.y-=.01*c.deltaY;break;default:N.y-=2.5E-4*c.deltaY}t.dispatchEvent(D);t.dispatchEvent(T)}}function q(c){if(!1!==t.enabled){switch(c.touches.length){case 1:H=I.TOUCH_ROTATE;E.copy(da(c.touches[0].pageX,c.touches[0].pageY));G.copy(E);break;default:H=I.TOUCH_ZOOM_PAN;var a=c.touches[0].pageX-c.touches[1].pageX,d=c.touches[0].pageY-c.touches[1].pageY;L=v=Math.sqrt(a*a+d*d);x.copy(U((c.touches[0].pageX+c.touches[1].pageX)/2,(c.touches[0].pageY+c.touches[1].pageY)/2));B.copy(x)}t.dispatchEvent(D)}}function z(c){if(!1!==t.enabled)switch(c.preventDefault(),c.stopPropagation(),c.touches.length){case 1:G.copy(E);E.copy(da(c.touches[0].pageX,c.touches[0].pageY));break;default:var a=c.touches[0].pageX-c.touches[1].pageX,d=c.touches[0].pageY-c.touches[1].pageY;L=Math.sqrt(a*a+d*d);B.copy(U((c.touches[0].pageX+c.touches[1].pageX)/2,(c.touches[0].pageY+c.touches[1].pageY)/2))}}function F(c){if(!1!==t.enabled){switch(c.touches.length){case 0:H=I.NONE;break;case 1:H=I.TOUCH_ROTATE,E.copy(da(c.touches[0].pageX,c.touches[0].pageY)),G.copy(E)}t.dispatchEvent(T)}}function C(c){!1!==t.enabled&&c.preventDefault()}var t=this,I={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=c;this.domElement=void 0!==a?a:document;this.enabled=!0;this.screen={left:0,top:0,width:0,height:0};this.rd=1;this.zd=.5;this.pd=.3;this.sg=this.noPan=this.noZoom=this.noRotate=!1;this.dynamicDampingFactor=.2;this.minDistance=0;this.maxDistance=Infinity;this.keys=[65,83,68];this.target=new GLE.Vector3;var K=new GLE.Vector3,H=I.NONE,A=new GLE.Vector3,G=new GLE.Vector2,E=new GLE.Vector2;new GLE.Vector3;var N=new GLE.Vector2,O=new GLE.Vector2,v=0,L=0,x=new GLE.Vector2,B=new GLE.Vector2;_myPan=new GLE.Vector3;this.target0=this.target.clone();this.position0=this.object.position.clone();this.up0=this.object.up.clone();var p={type:"change"},D={type:"start"},T={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var c=this.domElement.getBoundingClientRect(),a=this.domElement.ownerDocument.documentElement;this.screen.left=c.left+window.pageXOffset-a.clientLeft;this.screen.top=c.top+window.pageYOffset-a.clientTop;this.screen.width=c.width;this.screen.height=c.height}};this.handleEvent=function(c){if("function"==typeof this[c.type])this[c.type](c)};var U=function(){var c=new GLE.Vector2;return function(a,d){c.set((a-t.screen.left)/t.screen.width,(d-t.screen.top)/t.screen.height);return c}}(),da=function(){var c=new GLE.Vector2;return function(a,d){c.set((a-.5*t.screen.width-t.screen.left)/(.5*t.screen.width),(t.screen.height+2*(t.screen.top-d))/t.screen.width);return c}}();this.rotateCamera=function(){new GLE.Vector3;new GLE.Quaternion;var c=new GLE.Vector3,a=new GLE.Vector3,d=new GLE.Vector3,e=new GLE.Vector3,g;return function(){e.set(E.x-G.x,E.y-G.y,0);if(g=e.length())G_58=(new Date).getTime(),A.copy(t.object.position).sub(t.target),c.copy(A).normalize(),a.copy(t.object.up).normalize(),d.crossVectors(a,c).normalize(),a.setLength(E.y-G.y),d.setLength(E.x-G.x),G_35.rotation.z+=(E.x-G.x)*this.rd,G_26&&(G_35.rotation.x-=(E.y-G.y)*this.rd,180/Math.PI*G_35.rotation.x<-GLE_AngleLimit&&(G_35.rotation.x=-GLE_AngleLimit*Math.PI/180),180/Math.PI*G_35.rotation.x>GLE_AngleLimit&&(G_35.rotation.x=GLE_AngleLimit*Math.PI/180)),G_24&&G_26&&MyClip();G.copy(E)}}();this.zoomCamera=function(){var c;if(H===I.TOUCH_ZOOM_PAN){c=v/L;if(1.001<c||.999>c)G_58=(new Date).getTime();G_35.position.y-=2E3*(1-c)*t.zd}else{c=1+(O.y-N.y)*t.zd*8;if(1.001<c||.999>c)G_58=(new Date).getTime();if(G_53){var a=G_53.getSize().length();G_35.position.y-=(1-c)*a*.2}else G_35.position.y-=1E4*(1-c);N.copy(O)}G_24&&MyClip()};this.panCamera=function(){var c=new GLE.Vector2;new GLE.Vector3;return function(){c.copy(B).sub(x);if(1E-5<c.lengthSq()){G_58=(new Date).getTime();(new GLE.Vector3(B.x/window.innerWidth*2-1,2*-(B.y/window.innerHeight)+1,.5)).unproject(G_2);(new GLE.Vector3(x.x/window.innerWidth*2-1,2*-(x.y/window.innerHeight)+1,.5)).unproject(G_2);var a=(new GLE.Vector3(G_35.position.x,G_35.position.y,G_35.position.z)).project(G_2);a.x+=.4*c.x*GLE_PanSpeed;a.y-=.4*c.y*GLE_PanSpeed;a=a.unproject(G_2);G_35.position.x=a.x;G_35.position.z=a.z;G_35.uld(!0);G_24&&MyClip();t.sg?x.copy(B):x.add(c.subVectors(B,x).multiplyScalar(t.dynamicDampingFactor))}}}();this.checkDistances=function(){t.noZoom&&t.noPan||(A.lengthSq()>t.maxDistance*t.maxDistance&&(t.object.position.addVectors(t.target,A.setLength(t.maxDistance)),N.copy(O)),A.lengthSq()<t.minDistance*t.minDistance&&(t.object.position.addVectors(t.target,A.setLength(t.minDistance)),N.copy(O)))};this.update=function(){t.noZoom||t.zoomCamera();t.noPan||t.panCamera();t.noRotate||t.rotateCamera()};this.reset=function(){H=I.NONE;t.target.copy(t.target0);t.object.position.copy(t.position0);t.object.up.copy(t.up0);A.subVectors(t.object.position,t.target);t.object.lookAt(t.target);t.dispatchEvent(p);K.copy(t.object.position)};this.dispose=function(){this.domElement.removeEventListener("contextmenu",C,!1);this.domElement.removeEventListener("mousedown",h,!1);this.domElement.removeEventListener("wheel",n,!1);this.domElement.removeEventListener("touchstart",q,!1);this.domElement.removeEventListener("touchend",F,!1);this.domElement.removeEventListener("touchmove",z,!1);document.removeEventListener("mousemove",l,!1);document.removeEventListener("mouseup",m,!1);window.removeEventListener("keydown",e,!1);window.removeEventListener("keyup",g,!1)};this.domElement.addEventListener("contextmenu",C,!1);this.domElement.addEventListener("mousedown",h,!1);this.domElement.addEventListener("wheel",n,!1);this.domElement.addEventListener("touchstart",q,!1);this.domElement.addEventListener("touchend",F,!1);this.domElement.addEventListener("touchmove",z,!1);window.addEventListener("keydown",e,!1);window.addEventListener("keyup",g,!1);this.handleResize();this.update()};GLE.Ts.prototype=Object.create(GLE.EventDispatcher.prototype);GLE.Ts.prototype.constructor=GLE.Ts;var TN=TN||function(){var c={},a={},d=0;return{getAll:function(){return Object.keys(c).map(function(a){return c[a]})},removeAll:function(){c={}},add:function(d){c[d.getId()]=d;a[d.getId()]=d},remove:function(d){delete c[d.getId()];delete a[d.getId()]},update:function(d,g){var e=Object.keys(c);if(0===e.length)return!1;for(d=void 0!==d?d:TN.now();0<e.length;){a={};for(var l=0;l<e.length;l++)!1!==c[e[l]].update(d)||g||delete c[e[l]];e=Object.keys(a)}return!0},nextId:function(){return d++}}}();TN.now="undefined"===typeof window&&"undefined"!==typeof process?function(){var c=process.hrtime();return 1E3*c[0]+c[1]/1E6}:"undefined"!==typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now.bind(window.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};function assign(c,a){for(var d=Object.keys(a),e=d.length,g=0;g<e;g+=1)c[d[g]]=a[d[g]];return c}TN.Tn=function(c){this._object=c;this._valuesStart={};this._valuesEnd={};this._valuesStartRepeat={};this._duration=1E3;this._repeat=0;this._repeatDelayTime=void 0;this._reversed=this._isPlaying=this._yoyo=!1;this._delayTime=0;this._startTime=null;this._easingFunction=TN.Easing.Linear.None;this._interpolationFunction=TN.Interpolation.Linear;this._chainedTns=[];this._onStartCallback=null;this._onStartCallbackFired=!1;this._onStopCallback=this._onCompleteCallback=this._onUpdateCallback=null;this._id=TN.nextId()};TN.Tn.prototype=assign(Object.create(Object.prototype),{getId:function(){return this._id},to:function(c,a){this._valuesEnd=c;void 0!==a&&(this._duration=a);return this},start:function(c){TN.add(this);this._isPlaying=!0;this._onStartCallbackFired=!1;this._startTime=void 0!==c?c:TN.now();this._startTime+=this._delayTime;for(var a in this._valuesEnd){if(this._valuesEnd[a]instanceof Array){if(0===this._valuesEnd[a].length)continue;this._valuesEnd[a]=[this._object[a]].concat(this._valuesEnd[a])}void 0!==this._object[a]&&(this._valuesStart[a]=this._object[a],!1===this._valuesStart[a]instanceof Array&&(this._valuesStart[a]*=1),this._valuesStartRepeat[a]=this._valuesStart[a]||0)}return this},stop:function(){if(!this._isPlaying)return this;TN.remove(this);this._isPlaying=!1;null!==this._onStopCallback&&this._onStopCallback.call(this._object,this._object);this.stopChainedTns();return this},end:function(){this.update(this._startTime+this._duration);return this},stopChainedTns:function(){for(var c=0,a=this._chainedTns.length;c<a;c++)this._chainedTns[c].stop()},delay:function(c){this._delayTime=c;return this},repeat:function(c){this._repeat=c;return this},repeatDelay:function(c){this._repeatDelayTime=c;return this},yoyo:function(c){this._yoyo=c;return this},easing:function(c){this._easingFunction=c;return this},interpolation:function(c){this._interpolationFunction=c;return this},chain:function(){this._chainedTns=arguments;return this},onStart:function(c){this._onStartCallback=c;return this},onUpdate:function(c){this._onUpdateCallback=c;return this},onComplete:function(c){this._onCompleteCallback=c;return this},onStop:function(c){this._onStopCallback=c;return this},update:function(c){var a,d,e;if(c<this._startTime)return!0;!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback.call(this._object,this._object),this._onStartCallbackFired=!0);d=(c-this._startTime)/this._duration;d=1<d?1:d;e=this._easingFunction(d);for(a in this._valuesEnd)if(void 0!==this._valuesStart[a]){var g=this._valuesStart[a]||0,h=this._valuesEnd[a];h instanceof Array?this._object[a]=this._interpolationFunction(h,e):("string"===typeof h&&(h="+"===h.charAt(0)||"-"===h.charAt(0)?g+parseFloat(h):parseFloat(h)),"number"===typeof h&&(this._object[a]=g+(h-g)*e))}null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._object,e);if(1===d)if(0<this._repeat){isFinite(this._repeat)&&this._repeat--;for(a in this._valuesStartRepeat)"string"===typeof this._valuesEnd[a]&&(this._valuesStartRepeat[a]+=parseFloat(this._valuesEnd[a])),this._yoyo&&(d=this._valuesStartRepeat[a],this._valuesStartRepeat[a]=this._valuesEnd[a],this._valuesEnd[a]=d),this._valuesStart[a]=this._valuesStartRepeat[a];this._yoyo&&(this._reversed=!this._reversed);this._startTime=void 0!==this._repeatDelayTime?c+this._repeatDelayTime:c+this._delayTime}else{null!==this._onCompleteCallback&&this._onCompleteCallback.call(this._object,this._object);c=0;for(a=this._chainedTns.length;c<a;c++)this._chainedTns[c].start(this._startTime+this._duration);return!1}return!0}});TN.Easing={Linear:{None:function(c){return c}},Quadratic:{In:function(c){return c*c},Out:function(c){return c*(2-c)},InOut:function(c){return 1>(c*=2)?.5*c*c:-.5*(--c*(c-2)-1)}},Cubic:{In:function(c){return c*c*c},Out:function(c){return--c*c*c+1},InOut:function(c){return 1>(c*=2)?.5*c*c*c:.5*((c-=2)*c*c+2)}},Quartic:{In:function(c){return c*c*c*c},Out:function(c){return 1- --c*c*c*c},InOut:function(c){return 1>(c*=2)?.5*c*c*c*c:-.5*((c-=2)*c*c*c-2)}},Quintic:{In:function(c){return c*c*c*c*c},Out:function(c){return--c*c*c*c*c+1},InOut:function(c){return 1>(c*=2)?.5*c*c*c*c*c:.5*((c-=2)*c*c*c*c+2)}},Sinusoidal:{In:function(c){return 1-Math.cos(c*Math.PI/2)},Out:function(c){return Math.sin(c*Math.PI/2)},InOut:function(c){return.5*(1-Math.cos(Math.PI*c))}},Exponential:{In:function(c){return 0===c?0:Math.pow(1024,c-1)},Out:function(c){return 1===c?1:1-Math.pow(2,-10*c)},InOut:function(c){return 0===c?0:1===c?1:1>(c*=2)?.5*Math.pow(1024,c-1):.5*(-Math.pow(2,-10*(c-1))+2)}},Circular:{In:function(c){return 1-Math.sqrt(1-c*c)},Out:function(c){return Math.sqrt(1- --c*c)},InOut:function(c){return 1>(c*=2)?-.5*(Math.sqrt(1-c*c)-1):.5*(Math.sqrt(1-(c-=2)*c)+1)}},Elastic:{In:function(c){return 0===c?0:1===c?1:-Math.pow(2,10*(c-1))*Math.sin(5*(c-1.1)*Math.PI)},Out:function(c){return 0===c?0:1===c?1:Math.pow(2,-10*c)*Math.sin(5*(c-.1)*Math.PI)+1},InOut:function(c){if(0===c)return 0;if(1===c)return 1;c*=2;return 1>c?-.5*Math.pow(2,10*(c-1))*Math.sin(5*(c-1.1)*Math.PI):.5*Math.pow(2,-10*(c-1))*Math.sin(5*(c-1.1)*Math.PI)+1}},Back:{In:function(c){return c*c*(2.70158*c-1.70158)},Out:function(c){return--c*c*(2.70158*c+1.70158)+1},InOut:function(c){return 1>(c*=2)?.5*c*c*(3.5949095*c-2.5949095):.5*((c-=2)*c*(3.5949095*c+2.5949095)+2)}},Bounce:{In:function(c){return 1-TN.Easing.Bounce.Out(1-c)},Out:function(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+.9375:7.5625*(c-=2.625/2.75)*c+.984375},InOut:function(c){return.5>c?.5*TN.Easing.Bounce.In(2*c):.5*TN.Easing.Bounce.Out(2*c-1)+.5}}};TN.Interpolation={Linear:function(c,a){var d=c.length-1,e=d*a,g=Math.floor(e),h=TN.Interpolation.Utils.Linear;return 0>a?h(c[0],c[1],e):1<a?h(c[d],c[d-1],d-e):h(c[g],c[g+1>d?d:g+1],e-g)},Bezier:function(c,a){for(var d=0,e=c.length-1,g=Math.pow,h=TN.Interpolation.Utils.Bernstein,l=0;l<=e;l++)d+=g(1-a,e-l)*g(a,l)*c[l]*h(e,l);return d},CatmullRom:function(c,a){var d=c.length-1,e=d*a,g=Math.floor(e),h=TN.Interpolation.Utils.CatmullRom;return c[0]===c[d]?(0>a&&(g=Math.floor(e=d*(1+a))),h(c[(g-1+d)%d],c[g],c[(g+1)%d],c[(g+2)%d],e-g)):0>a?c[0]-(h(c[0],c[0],c[1],c[1],-e)-c[0]):1<a?c[d]-(h(c[d],c[d],c[d-1],c[d-1],e-d)-c[d]):h(c[g?g-1:0],c[g],c[d<g+1?d:g+1],c[d<g+2?d:g+2],e-g)},Utils:{Linear:function(c,a,d){return(a-c)*d+c},Bernstein:function(c,a){var d=TN.Interpolation.Utils.Factorial;return d(c)/d(a)/d(c-a)},Factorial:function(){var c=[1];return function(a){var d=1;if(c[a])return c[a];for(var e=a;1<e;e--)d*=e;return c[a]=d}}(),CatmullRom:function(c,a,d,e,g){c=.5*(d-c);e=.5*(e-a);var h=g*g;return(2*a-2*d+c+e)*g*h+(-3*a+3*d-2*c-e)*h+c*g+a}}};(function(c){"function"===typeof define&&define.amd?define([],function(){return TN}):"undefined"!==typeof module&&"object"===typeof exports?module.exports=TN:void 0!==c&&(c.TN=TN)})(this);!function(c){"object"==typeof exports&&"undefined"!=typeof module?module.exports=c():"function"==typeof define&&define.amd?define([],c):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).JSZip=c()}(function(){return function a(d,e,g){function h(m,q){if(!e[m]){if(!d[m]){var n="function"==typeof require&&require;if(!q&&n)return n(m,!0);if(l)return l(m,!0);n=Error("Cannot find module '"+m+"'");throw n.code="MODULE_NOT_FOUND",n;}n=e[m]={exports:{}};d[m][0].call(n.exports,function(a){var e=d[m][1][a];return h(e?e:a)},n,n.exports,a,d,e,g)}return e[m].exports}for(var l="function"==typeof require&&require,m=0;m<g.length;m++)h(g[m]);return h}({1:[function(a,d,e){var g=a("./utils"),h=a("./support");e.encode=function(a){for(var d,e,h,l,F,C,t,I=[],K=0,H=a.length,A="string"!==g.getTypeOf(a);K<a.length;)t=H-K,A?(d=a[K++],e=K<H?a[K++]:0,h=K<H?a[K++]:0):(d=a.charCodeAt(K++),e=K<H?a.charCodeAt(K++):0,h=K<H?a.charCodeAt(K++):0),l=d>>2,F=(3&d)<<4|e>>4,C=1<t?(15&e)<<2|h>>6:64,t=2<t?63&h:64,I.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(l)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(F)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(C)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(t));return I.join("")};e.decode=function(a){var d,e,g,l,F,C=0,t=0;if("data:"===a.substr(0,5))throw Error("Invalid base64 input, it looks like a data url.");a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");l=3*a.length/4;if("\x3d"===a.charAt(a.length-1)&&l--,"\x3d"===a.charAt(a.length-2)&&l--,0!==l%1)throw Error("Invalid base64 input, bad content length.");var I;for(I=h.uint8array?new Uint8Array(0|l):Array(0|l);C<a.length;)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(C++)),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(C++)),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(C++)),F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(a.charAt(C++)),d=d<<2|e>>4,e=(15&e)<<4|l>>2,g=(3&l)<<6|F,I[t++]=d,64!==l&&(I[t++]=e),64!==F&&(I[t++]=g);return I}},{"./support":30,"./utils":32}],2:[function(a,d,e){function g(a,d,e,g,h){this.compressedSize=a;this.uncompressedSize=d;this.crc32=e;this.compression=g;this.compressedContent=h}var h=a("./external"),l=a("./stream/DataWorker"),m=a("./stream/DataLengthProbe"),n=a("./stream/Crc32Probe"),m=a("./stream/DataLengthProbe");g.prototype={getContentWorker:function(){var a=(new l(h.Promise.resolve(this.compressedContent))).pipe(this.compression.uncompressWorker()).pipe(new m("data_length")),d=this;return a.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw Error("Bug : uncompressed data size mismatch");}),a},getCompressedWorker:function(){return(new l(h.Promise.resolve(this.compressedContent))).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}};g.createWorkerFrom=function(a,d,e){return a.pipe(new n).pipe(new m("uncompressedSize")).pipe(d.compressWorker(e)).pipe(new m("compressedSize")).withStreamInfo("compression",d)};d.exports=g},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,d,e){var g=a("./stream/GenericWorker");e.STORE={magic:"\x00\x00",compressWorker:function(a){return new g("STORE compression")},uncompressWorker:function(){return new g("STORE decompression")}};e.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,d,e){var g=a("./utils"),h=function(){for(var a,d=[],e=0;256>e;e++){a=e;for(var g=0;8>g;g++)a=1&a?3988292384^a>>>1:a>>>1;d[e]=a}return d}();d.exports=function(a,d){if("undefined"==typeof a||!a.length)return 0;var e;if("string"!==g.getTypeOf(a)){var l=0+a.length;e=(0|d)^-1;for(var m=0;m<l;m++)e=e>>>8^h[255&(e^a[m])]}else for(l=0+a.length,e=(0|d)^-1,m=0;m<l;m++)e=e>>>8^h[255&(e^a.charCodeAt(m))];return e^=-1}},{"./utils":32}],5:[function(a,d,e){e.base64=!1;e.binary=!1;e.dir=!1;e.createFolders=!0;e.date=null;e.compression=null;e.compressionOptions=null;e.comment=null;e.unixPermissions=null;e.dosPermissions=null},{}],6:[function(a,d,e){a="undefined"!=typeof Promise?Promise:a("lie");d.exports={Promise:a}},{lie:58}],7:[function(a,d,e){function g(a,d){m.call(this,"FlateWorker/"+a);this._pako=null;this._pakoAction=a;this._pakoOptions=d;this.meta={}}d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array;var h=a("pako"),l=a("./utils"),m=a("./stream/GenericWorker"),n=d?"uint8array":"array";e.magic="\b\x00";l.inherits(g,m);g.prototype.processChunk=function(a){this.meta=a.meta;null===this._pako&&this._createPako();this._pako.push(l.transformTo(n,a.data),!1)};g.prototype.flush=function(){m.prototype.flush.call(this);null===this._pako&&this._createPako();this._pako.push([],!0)};g.prototype.cleanUp=function(){m.prototype.cleanUp.call(this);this._pako=null};g.prototype._createPako=function(){this._pako=new h[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var a=this;this._pako.onData=function(d){a.push({data:d,meta:a.meta})}};e.compressWorker=function(a){return new g("Deflate",a)};e.uncompressWorker=function(){return new g("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:59}],8:[function(a,d,e){function g(a,d,e,g){l.call(this,"ZipFileWorker");this.bytesWritten=0;this.zipComment=d;this.zipPlatform=e;this.encodeFileName=g;this.streamFiles=a;this.accumulate=!1;this.contentBuffer=[];this.dirRecords=[];this.entriesCount=this.currentSourceOffset=0;this.currentFile=null;this._sources=[]}var h=a("../utils"),l=a("../stream/GenericWorker"),m=a("../utf8"),n=a("../crc32"),q=a("../signature"),z=function(a,d){var e,g="";for(e=0;e<d;e++)g+=String.fromCharCode(255&a),a>>>=8;return g},F=function(a,d,e,g,l,C){var t,A;t=a.file;var H=a.compression,v=C!==m.utf8encode,G=h.transformTo("string",C(t.name)),x=h.transformTo("string",m.utf8encode(t.name)),B=t.comment;C=h.transformTo("string",C(B));var p=h.transformTo("string",m.utf8encode(B)),D=x.length!==t.name.length,F=p.length!==B.length,K=B="",I="";A=t.dir;var ia=t.date,ka=0,na=0,ya=0;d&&!e||(ka=a.crc32,na=a.compressedSize,ya=a.uncompressedSize);a=0;d&&(a|=8);v||!D&&!F||(a|=2048);d=0;A&&(d|=16);"UNIX"===l?(l=798,t=v=t.unixPermissions,A=(v||(t=A?16893:33204),(65535&t)<<16),d|=A):(l=20,d|=63&(t.dosPermissions||0));t=ia.getUTCHours();t=t<<6|ia.getUTCMinutes();t=t<<5|ia.getUTCSeconds()/2;A=ia.getUTCFullYear()-1980;A=A<<4|ia.getUTCMonth()+1;A=A<<5|ia.getUTCDate();D&&(K=z(1,1)+z(n(G),4)+x,B+="up"+z(K.length,2)+K);F&&(I=z(1,1)+z(n(C),4)+p,B+="uc"+z(I.length,2)+I);x="\n\x00"+z(a,2);x+=H.magic;x+=z(t,2);x+=z(A,2);x+=z(ka,4);x+=z(na,4);x+=z(ya,4);x+=z(G.length,2);x+=z(B.length,2);H=q.LOCAL_FILE_HEADER+x+G+B;g=q.CENTRAL_FILE_HEADER+z(l,2)+x+z(C.length,2)+"\x00\x00\x00\x00"+z(d,4)+z(g,4)+G+B+C;return{fileRecord:H,dirRecord:g}},C=function(a){return q.DATA_DESCRIPTOR+z(a.crc32,4)+z(a.compressedSize,4)+z(a.uncompressedSize,4)};h.inherits(g,l);g.prototype.push=function(a){var d=a.meta.percent||0,e=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(a):(this.bytesWritten+=a.data.length,l.prototype.push.call(this,{data:a.data,meta:{currentFile:this.currentFile,percent:e?(d+100*(e-g-1))/e:100}}))};g.prototype.openedSource=function(a){this.currentSourceOffset=this.bytesWritten;this.currentFile=a.file.name;var d=this.streamFiles&&!a.file.dir;d?(a=F(a,d,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName),this.push({data:a.fileRecord,meta:{percent:0}})):this.accumulate=!0};g.prototype.closedSource=function(a){this.accumulate=!1;var d=this.streamFiles&&!a.file.dir,e=F(a,d,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(e.dirRecord),d)this.push({data:C(a),meta:{percent:100}});else for(this.push({data:e.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null};g.prototype.flush=function(){for(var a=this.bytesWritten,d=0;d<this.dirRecords.length;d++)this.push({data:this.dirRecords[d],meta:{percent:100}});var d=this.dirRecords.length,e=this.bytesWritten-a,g=h.transformTo("string",(0,this.encodeFileName)(this.zipComment)),a=q.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+z(d,2)+z(d,2)+z(e,4)+z(a,4)+z(g.length,2)+g;this.push({data:a,meta:{percent:100}})};g.prototype.prepareNextSource=function(){this.previous=this._sources.shift();this.openedSource(this.previous.streamInfo);this.isPaused?this.previous.pause():this.previous.resume()};g.prototype.registerPrevious=function(a){this._sources.push(a);var d=this;return a.on("data",function(a){d.processChunk(a)}),a.on("end",function(){d.closedSource(d.previous.streamInfo);d._sources.length?d.prepareNextSource():d.end()}),a.on("error",function(a){d.error(a)}),this};g.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))};g.prototype.error=function(a){var d=this._sources;if(!l.prototype.error.call(this,a))return!1;for(var e=0;e<d.length;e++)try{d[e].error(a)}catch(H){}return!0};g.prototype.lock=function(){l.prototype.lock.call(this);for(var a=this._sources,d=0;d<a.length;d++)a[d].lock()};d.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,d,e){var g=a("../compressions"),h=a("./ZipFileWorker");e.generateWorker=function(a,d,e){var l=new h(d.streamFiles,e,d.platform,d.encodeFileName),m=0;try{a.forEach(function(a,e){m++;var h=e.options.compression||d.compression,n=g[h];if(!n)throw Error(h+" is not a valid compression method !");var h=e.dir,q=e.date;e._compressWorker(n,e.options.compressionOptions||d.compressionOptions||{}).withStreamInfo("file",{name:a,dir:h,date:q,comment:e.comment||"",unixPermissions:e.unixPermissions,dosPermissions:e.dosPermissions}).pipe(l)}),l.entriesCount=m}catch(F){l.error(F)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,d,e){function g(){if(!(this instanceof g))return new g;if(arguments.length)throw Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={};this.comment=null;this.root="";this.clone=function(){var a=new g,d;for(d in this)"function"!=typeof this[d]&&(a[d]=this[d]);return a}}g.prototype=a("./object");g.prototype.loadAsync=a("./load");g.support=a("./support");g.defaults=a("./defaults");g.version="3.1.5";g.loadAsync=function(a,d){return(new g).loadAsync(a,d)};g.external=a("./external");d.exports=g},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,d,e){function g(a){return new l.Promise(function(d,e){var g=a.decompressed.getContentWorker().pipe(new q);g.on("error",function(a){e(a)}).on("end",function(){g.streamInfo.crc32!==a.decompressed.crc32?e(Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}var h=a("./utils"),l=a("./external"),m=a("./utf8"),h=a("./utils"),n=a("./zipEntries"),q=a("./stream/Crc32Probe"),z=a("./nodejsUtils");d.exports=function(a,d){var e=this;return d=h.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:m.utf8decode}),z.isNode&&z.isStream(a)?l.Promise.reject(Error("JSZip can't accept a stream when loading a zip file.")):h.prepareContent("the loaded zip file",a,!0,d.optimizedBinaryString,d.base64).then(function(a){var e=new n(d);return e.load(a),e}).then(function(a){var e=[l.Promise.resolve(a)];a=a.files;if(d.checkCRC32)for(var h=0;h<a.length;h++)e.push(g(a[h]));return l.Promise.all(e)}).then(function(a){a=a.shift();for(var g=a.files,h=0;h<g.length;h++){var l=g[h];e.file(l.fileNameStr,l.decompressed,{binary:!0,optimizedBinaryString:!0,date:l.date,dir:l.dir,comment:l.fileCommentStr.length?l.fileCommentStr:null,unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions,createFolders:d.createFolders})}return a.zipComment.length&&(e.comment=a.zipComment),e})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,d,e){function g(a,d){h.call(this,"Nodejs stream input adapter for "+a);this._upstreamEnded=!1;this._bindStream(d)}e=a("../utils");var h=a("../stream/GenericWorker");e.inherits(g,h);g.prototype._bindStream=function(a){var d=this;this._stream=a;a.pause();a.on("data",function(a){d.push({data:a,meta:{percent:0}})}).on("error",function(a){d.isPaused?this.generatedError=a:d.error(a)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})};g.prototype.pause=function(){return!!h.prototype.pause.call(this)&&(this._stream.pause(),!0)};g.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)};d.exports=g},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,d,e){function g(a,d,e){h.call(this,d);this._helper=a;var g=this;a.on("data",function(a,d){g.push(a)||g._helper.pause();e&&e(d)}).on("error",function(a){g.emit("error",a)}).on("end",function(){g.push(null)})}var h=a("readable-stream").Readable;a("../utils").inherits(g,h);g.prototype._read=function(){this._helper.resume()};d.exports=g},{"../utils":32,"readable-stream":16}],14:[function(a,d,e){d.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(a,d){return new Buffer(a,d)},allocBuffer:function(a){return Buffer.alloc?Buffer.alloc(a):new Buffer(a)},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&"function"==typeof a.on&&"function"==typeof a.pause&&"function"==typeof a.resume}}},{}],15:[function(a,d,e){var g=a("./utf8"),h=a("./utils"),l=a("./stream/GenericWorker"),m=a("./stream/StreamHelper"),n=a("./defaults"),q=a("./compressedObject"),z=a("./zipObject"),F=a("./generate"),C=a("./nodejsUtils"),t=a("./nodejs/NodejsStreamInputAdapter"),I=function(a,d,e){var g,m=h.getTypeOf(d),A=h.extend(e||{},n);A.date=A.date||new Date;null!==A.compression&&(A.compression=A.compression.toUpperCase());"string"==typeof A.unixPermissions&&(A.unixPermissions=parseInt(A.unixPermissions,8));A.unixPermissions&&16384&A.unixPermissions&&(A.dir=!0);A.dosPermissions&&16&A.dosPermissions&&(A.dir=!0);A.dir&&(a=K(a));var E;if(E=A.createFolders)g=a,"/"===g.slice(-1)&&(g=g.substring(0,g.length-1)),E=g.lastIndexOf("/"),E=g=0<E?g.substring(0,E):"";E&&H.call(this,g,!0);m="string"===m&&!1===A.binary&&!1===A.base64;e&&"undefined"!=typeof e.binary||(A.binary=!m);(d instanceof q&&0===d.uncompressedSize||A.dir||!d||0===d.length)&&(A.base64=!1,A.binary=!0,d="",A.compression="STORE");d=d instanceof q||d instanceof l?d:C.isNode&&C.isStream(d)?new t(a,d):h.prepareContent(a,d,A.binary,A.optimizedBinaryString,A.base64);A=new z(a,d,A);this.files[a]=A},K=function(a){return"/"!==a.slice(-1)&&(a+="/"),a},H=function(a,d){return d="undefined"!=typeof d?d:n.createFolders,a=K(a),this.files[a]||I.call(this,a,null,{dir:!0,createFolders:d}),this.files[a]};d.exports={load:function(){throw Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");},forEach:function(a){var d,e,g;for(d in this.files)this.files.hasOwnProperty(d)&&(g=this.files[d],e=d.slice(this.root.length,d.length),e&&d.slice(0,this.root.length)===this.root&&a(e,g))},filter:function(a){var d=[];return this.forEach(function(e,g){a(e,g)&&d.push(g)}),d},file:function(a,d,e){if(1===arguments.length){if("[object RegExp]"===Object.prototype.toString.call(a)){var g=a;return this.filter(function(a,d){return!d.dir&&g.test(a)})}var h=this.files[this.root+a];return h&&!h.dir?h:null}return a=this.root+a,I.call(this,a,d,e),this},folder:function(a){if(!a)return this;if("[object RegExp]"===Object.prototype.toString.call(a))return this.filter(function(d,e){return e.dir&&a.test(d)});var d=H.call(this,this.root+a),e=this.clone();return e.root=d.name,e},remove:function(a){a=this.root+a;var d=this.files[a];if(d||("/"!==a.slice(-1)&&(a+="/"),d=this.files[a]),d&&!d.dir)delete this.files[a];else for(var d=this.filter(function(d,e){return e.name.slice(0,a.length)===a}),e=0;e<d.length;e++)delete this.files[d[e].name];return this},generate:function(a){throw Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");},generateInternalStream:function(a){var d,e={};try{if(e=h.extend(a||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:g.utf8encode}),e.type=e.type.toLowerCase(),e.compression=e.compression.toUpperCase(),"binarystring"===e.type&&(e.type="string"),!e.type)throw Error("No output type specified.");h.checkSupport(e.type);"darwin"!==e.platform&&"freebsd"!==e.platform&&"linux"!==e.platform&&"sunos"!==e.platform||(e.platform="UNIX");"win32"===e.platform&&(e.platform="DOS");d=F.generateWorker(this,e,e.comment||this.comment||"")}catch(N){d=new l("error"),d.error(N)}return new m(d,e.type||"string",e.mimeType)},generateAsync:function(a,d){return this.generateInternalStream(a).accumulate(d)},generateNodeStream:function(a,d){return a=a||{},a.type||(a.type="nodebuffer"),this.generateInternalStream(a).toNodejsStream(d)}}},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,d,e){d.exports=a("stream")},{stream:void 0}],17:[function(a,d,e){function g(a){h.call(this,a);for(var d=0;d<this.data.length;d++)a[d]&=255}var h=a("./DataReader");a("../utils").inherits(g,h);g.prototype.byteAt=function(a){return this.data[this.zero+a]};g.prototype.lastIndexOfSignature=function(a){var d=a.charCodeAt(0),e=a.charCodeAt(1),g=a.charCodeAt(2);a=a.charCodeAt(3);for(var h=this.length-4;0<=h;--h)if(this.data[h]===d&&this.data[h+1]===e&&this.data[h+2]===g&&this.data[h+3]===a)return h-this.zero;return-1};g.prototype.readAndCheckSignature=function(a){var d=a.charCodeAt(0),e=a.charCodeAt(1),g=a.charCodeAt(2);a=a.charCodeAt(3);var h=this.readData(4);return d===h[0]&&e===h[1]&&g===h[2]&&a===h[3]};g.prototype.readData=function(a){if(this.checkOffset(a),0===a)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,d};d.exports=g},{"../utils":32,"./DataReader":18}],18:[function(a,d,e){function g(a){this.data=a;this.length=a.length;this.zero=this.index=0}var h=a("../utils");g.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||0>a)throw Error("End of data reached (data length \x3d "+this.length+", asked index \x3d "+a+"). Corrupted zip ?");},setIndex:function(a){this.checkIndex(a);this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(a){},readInt:function(a){var d,e=0;this.checkOffset(a);for(d=this.index+a-1;d>=this.index;d--)e=(e<<8)+this.byteAt(d);return this.index+=a,e},readString:function(a){return h.transformTo("string",this.readData(a))},readData:function(a){},lastIndexOfSignature:function(a){},readAndCheckSignature:function(a){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}};d.exports=g},{"../utils":32}],19:[function(a,d,e){function g(a){h.call(this,a)}var h=a("./Uint8ArrayReader");a("../utils").inherits(g,h);g.prototype.readData=function(a){this.checkOffset(a);var d=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,d};d.exports=g},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,d,e){function g(a){h.call(this,a)}var h=a("./DataReader");a("../utils").inherits(g,h);g.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)};g.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero};g.prototype.readAndCheckSignature=function(a){var d=this.readData(4);return a===d};g.prototype.readData=function(a){this.checkOffset(a);var d=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,d};d.exports=g},{"../utils":32,"./DataReader":18}],21:[function(a,d,e){function g(a){h.call(this,a)}var h=a("./ArrayReader");a("../utils").inherits(g,h);g.prototype.readData=function(a){if(this.checkOffset(a),0===a)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,d};d.exports=g},{"../utils":32,"./ArrayReader":17}],22:[function(a,d,e){var g=a("../utils"),h=a("../support"),l=a("./ArrayReader"),m=a("./StringReader"),n=a("./NodeBufferReader"),q=a("./Uint8ArrayReader");d.exports=function(a){var d=g.getTypeOf(a);return g.checkSupport(d),"string"!==d||h.uint8array?"nodebuffer"===d?new n(a):h.uint8array?new q(g.transformTo("uint8array",a)):new l(g.transformTo("array",a)):new m(a)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,d,e){e.LOCAL_FILE_HEADER="PK\u0003\u0004";e.CENTRAL_FILE_HEADER="PK\u0001\u0002";e.CENTRAL_DIRECTORY_END="PK\u0005\u0006";e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\u0006\u0007";e.ZIP64_CENTRAL_DIRECTORY_END="PK\u0006\u0006";e.DATA_DESCRIPTOR="PK\u0007\b"},{}],24:[function(a,d,e){function g(a){h.call(this,"ConvertWorker to "+a);this.destType=a}var h=a("./GenericWorker"),l=a("../utils");l.inherits(g,h);g.prototype.processChunk=function(a){this.push({data:l.transformTo(this.destType,a.data),meta:a.meta})};d.exports=g},{"../utils":32,"./GenericWorker":28}],25:[function(a,d,e){function g(){h.call(this,"Crc32Probe");this.withStreamInfo("crc32",0)}var h=a("./GenericWorker"),l=a("../crc32");a("../utils").inherits(g,h);g.prototype.processChunk=function(a){this.streamInfo.crc32=l(a.data,this.streamInfo.crc32||0);this.push(a)};d.exports=g},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,d,e){function g(a){h.call(this,"DataLengthProbe for "+a);this.propName=a;this.withStreamInfo(a,0)}e=a("../utils");var h=a("./GenericWorker");e.inherits(g,h);g.prototype.processChunk=function(a){a&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+a.data.length);h.prototype.processChunk.call(this,a)};d.exports=g},{"../utils":32,"./GenericWorker":28}],27:[function(a,d,e){function g(a){l.call(this,"DataWorker");var d=this;this.dataIsReady=!1;this.max=this.index=0;this.data=null;this.type="";this._tickScheduled=!1;a.then(function(a){d.dataIsReady=!0;d.data=a;d.max=a&&a.length||0;d.type=h.getTypeOf(a);d.isPaused||d._tickAndRepeat()},function(a){d.error(a)})}var h=a("../utils"),l=a("./GenericWorker");h.inherits(g,l);g.prototype.cleanUp=function(){l.prototype.cleanUp.call(this);this.data=null};g.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,h.delay(this._tickAndRepeat,[],this)),!0)};g.prototype._tickAndRepeat=function(){this._tickScheduled=!1;this.isPaused||this.isFinished||(this._tick(),this.isFinished||(h.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))};g.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case "string":a=this.data.substring(this.index,d);break;case "uint8array":a=this.data.subarray(this.index,d);break;case "array":case "nodebuffer":a=this.data.slice(this.index,d)}return this.index=d,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})};d.exports=g},{"../utils":32,"./GenericWorker":28}],28:[function(a,d,e){function g(a){this.name=a||"default";this.streamInfo={};this.generatedError=null;this.extraStreamInfo={};this.isPaused=!0;this.isLocked=this.isFinished=!1;this._listeners={data:[],end:[],error:[]};this.previous=null}g.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(h){this.emit("error",h)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,d){return this._listeners[a].push(d),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null;this._listeners=[]},emit:function(a,d){if(this._listeners[a])for(var e=0;e<this._listeners[a].length;e++)this._listeners[a][e].call(this,d)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo;this.mergeStreamInfo();this.previous=a;var d=this;return a.on("data",function(a){d.processChunk(a)}),a.on("end",function(){d.end()}),a.on("error",function(a){d.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,d){return this.extraStreamInfo[a]=d,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw Error("The stream '"+this+"' has already been used.");this.isLocked=!0;this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -\x3e "+a:a}};d.exports=g},{}],29:[function(a,d,e){function g(a,d){var e,g=0,h;for(e=h=0;e<d.length;e++)h+=d[e].length;switch(a){case "string":return d.join("");case "array":return Array.prototype.concat.apply([],d);case "uint8array":h=new Uint8Array(h);for(e=0;e<d.length;e++)h.set(d[e],g),g+=d[e].length;return h;case "nodebuffer":return Buffer.concat(d);default:throw Error("concat : unsupported type '"+a+"'");}}function h(a,d){return new F.Promise(function(e,h){var l=[],n=a._internalType,t=a._outputType,q=a._mimeType;a.on("data",function(a,e){l.push(a);d&&d(e)}).on("error",function(a){l=[];h(a)}).on("end",function(){try{var a;a:{var d=g(n,l);switch(t){case "blob":a=m.newBlob(m.transformTo("arraybuffer",d),q);break a;case "base64":a=z.encode(d);break a;default:a=m.transformTo(t,d)}}e(a)}catch(L){h(L)}l=[]}).resume()})}function l(a,d,e){var g=d;switch(d){case "blob":case "arraybuffer":g="uint8array";break;case "base64":g="string"}try{this._internalType=g,this._outputType=d,this._mimeType=e,m.checkSupport(g),this._worker=a.pipe(new n(g)),a.lock()}catch(A){this._worker=new q("error"),this._worker.error(A)}}var m=a("../utils"),n=a("./ConvertWorker"),q=a("./GenericWorker"),z=a("../base64");e=a("../support");var F=a("../external"),C=null;if(e.nodestream)try{C=a("../nodejs/NodejsStreamOutputAdapter")}catch(t){}l.prototype={accumulate:function(a){return h(this,a)},on:function(a,d){var e=this;return"data"===a?this._worker.on(a,function(a){d.call(e,a.data,a.meta)}):this._worker.on(a,function(){m.delay(d,arguments,e)}),this},resume:function(){return m.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(a){if(m.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw Error(this._outputType+" is not supported by this method");return new C(this,{objectMode:"nodebuffer"!==this._outputType},a)}};d.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,d,e){if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,e.nodebuffer="undefined"!=typeof Buffer,e.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)e.blob=!1;else{d=new ArrayBuffer(0);try{e.blob=0===(new Blob([d],{type:"application/zip"})).size}catch(h){try{var g=new (self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);g.append(d);e.blob=0===g.getBlob("application/zip").size}catch(l){e.blob=!1}}}try{e.nodestream=!!a("readable-stream").Readable}catch(h){e.nodestream=!1}},{"readable-stream":16}],31:[function(a,d,e){function g(){q.call(this,"utf-8 decode");this.leftOver=null}function h(){q.call(this,"utf-8 encode")}var l=a("./utils"),m=a("./support"),n=a("./nodejsUtils"),q=a("./stream/GenericWorker"),z=Array(256);for(a=0;256>a;a++)z[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;z[254]=z[254]=1;e.utf8encode=function(a){if(m.nodebuffer)a=n.newBufferFrom(a,"utf-8");else{var d,e,g,h,l,q=a.length,z=0;for(h=0;h<q;h++)e=a.charCodeAt(h),55296===(64512&e)&&h+1<q&&(g=a.charCodeAt(h+1),56320===(64512&g)&&(e=65536+(e-55296<<10)+(g-56320),h++)),z+=128>e?1:2048>e?2:65536>e?3:4;d=m.uint8array?new Uint8Array(z):Array(z);for(h=l=0;l<z;h++)e=a.charCodeAt(h),55296===(64512&e)&&h+1<q&&(g=a.charCodeAt(h+1),56320===(64512&g)&&(e=65536+(e-55296<<10)+(g-56320),h++)),128>e?d[l++]=e:2048>e?(d[l++]=192|e>>>6,d[l++]=128|63&e):65536>e?(d[l++]=224|e>>>12,d[l++]=128|e>>>6&63,d[l++]=128|63&e):(d[l++]=240|e>>>18,d[l++]=128|e>>>12&63,d[l++]=128|e>>>6&63,d[l++]=128|63&e);a=d}return a};e.utf8decode=function(a){var d;if(m.nodebuffer)d=l.transformTo("nodebuffer",a).toString("utf-8");else{var e=a=l.transformTo(m.uint8array?"uint8array":"array",a),g,h,n,q=e.length;a=Array(2*q);for(g=h=0;g<q;)if(d=e[g++],128>d)a[h++]=d;else if(n=z[d],4<n)a[h++]=65533,g+=n-1;else{for(d&=2===n?31:3===n?15:7;1<n&&g<q;)d=d<<6|63&e[g++],n--;1<n?a[h++]=65533:65536>d?a[h++]=d:(d-=65536,a[h++]=55296|d>>10&1023,a[h++]=56320|1023&d)}d=(a.length!==h&&(a.subarray?a=a.subarray(0,h):a.length=h),l.applyFromCharCode(a))}return d};l.inherits(g,q);g.prototype.processChunk=function(a){var d=l.transformTo(m.uint8array?"uint8array":"array",a.data);if(this.leftOver&&this.leftOver.length){if(m.uint8array){var g=d,d=new Uint8Array(g.length+this.leftOver.length);d.set(this.leftOver,0);d.set(g,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}var h,g=d.length;g>d.length&&(g=d.length);for(h=g-1;0<=h&&128===(192&d[h]);)h--;g=0>h?g:0===h?g:h+z[d[h]]>g?h:g;h=d;g!==d.length&&(m.uint8array?(h=d.subarray(0,g),this.leftOver=d.subarray(g,d.length)):(h=d.slice(0,g),this.leftOver=d.slice(g,d.length)));this.push({data:e.utf8decode(h),meta:a.meta})};g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)};e.Utf8DecodeWorker=g;l.inherits(h,q);h.prototype.processChunk=function(a){this.push({data:e.utf8encode(a.data),meta:a.meta})};e.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,d,e){function g(a){return a}function h(a,d){for(var e=0;e<a.length;++e)d[e]=255&a.charCodeAt(e);return d}function l(a){var d=65536,g=e.getTypeOf(a),h=!0;if("uint8array"===g?h=K.applyCanBeUsed.uint8array:"nodebuffer"===g&&(h=K.applyCanBeUsed.nodebuffer),h)for(;1<d;)try{return K.stringifyByChunk(a,g,d)}catch(O){d=Math.floor(d/2)}return K.stringifyByChar(a)}function m(a,d){for(var e=0;e<a.length;e++)d[e]=a[e];return d}var n=a("./support"),q=a("./base64"),z=a("./nodejsUtils"),F=a("core-js/library/fn/set-immediate"),C=a("./external");e.newBlob=function(a,d){e.checkSupport("blob");try{return new Blob([a],{type:d})}catch(N){try{var g=new (self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(a),g.getBlob(d)}catch(O){throw Error("Bug : can't construct the Blob.");}}};var t;try{t=n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(A){t=!1}a=t;var I;try{I=n.nodebuffer&&1===String.fromCharCode.apply(null,z.allocBuffer(1)).length}catch(A){I=!1}var K={stringifyByChunk:function(a,d,e){var g=[],h=0,l=a.length;if(l<=e)return String.fromCharCode.apply(null,a);for(;h<l;)"array"===d||"nodebuffer"===d?g.push(String.fromCharCode.apply(null,a.slice(h,Math.min(h+e,l)))):g.push(String.fromCharCode.apply(null,a.subarray(h,Math.min(h+e,l)))),h+=e;return g.join("")},stringifyByChar:function(a){for(var d="",e=0;e<a.length;e++)d+=String.fromCharCode(a[e]);return d},applyCanBeUsed:{uint8array:a,nodebuffer:I}};e.applyFromCharCode=l;var H={};H.string={string:g,array:function(a){return h(a,Array(a.length))},arraybuffer:function(a){return H.string.uint8array(a).buffer},uint8array:function(a){return h(a,new Uint8Array(a.length))},nodebuffer:function(a){return h(a,z.allocBuffer(a.length))}};H.array={string:l,array:g,arraybuffer:function(a){return(new Uint8Array(a)).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return z.newBufferFrom(a)}};H.arraybuffer={string:function(a){return l(new Uint8Array(a))},array:function(a){return m(new Uint8Array(a),Array(a.byteLength))},arraybuffer:g,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return z.newBufferFrom(new Uint8Array(a))}};H.uint8array={string:l,array:function(a){return m(a,Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:g,nodebuffer:function(a){return z.newBufferFrom(a)}};H.nodebuffer={string:l,array:function(a){return m(a,Array(a.length))},arraybuffer:function(a){return H.nodebuffer.uint8array(a).buffer},uint8array:function(a){return m(a,new Uint8Array(a.length))},nodebuffer:g};e.transformTo=function(a,d){if(d||(d=""),!a)return d;e.checkSupport(a);var g=e.getTypeOf(d);return H[g][a](d)};e.getTypeOf=function(a){return"string"==typeof a?"string":"[object Array]"===Object.prototype.toString.call(a)?"array":n.nodebuffer&&z.isBuffer(a)?"nodebuffer":n.uint8array&&a instanceof Uint8Array?"uint8array":n.arraybuffer&&a instanceof ArrayBuffer?"arraybuffer":void 0};e.checkSupport=function(a){if(!n[a.toLowerCase()])throw Error(a+" is not supported by this platform");};e.MAX_VALUE_16BITS=65535;e.MAX_VALUE_32BITS=-1;e.pretty=function(a){var d,e,g="";for(e=0;e<(a||"").length;e++)d=a.charCodeAt(e),g+="\\x"+(16>d?"0":"")+d.toString(16).toUpperCase();return g};e.delay=function(a,d,e){F(function(){a.apply(e||null,d||[])})};e.inherits=function(a,d){var e=function(){};e.prototype=d.prototype;a.prototype=new e};e.extend=function(){var a,d,e={};for(a=0;a<arguments.length;a++)for(d in arguments[a])arguments[a].hasOwnProperty(d)&&"undefined"==typeof e[d]&&(e[d]=arguments[a][d]);return e};e.prepareContent=function(a,d,g,l,m){return C.Promise.resolve(d).then(function(a){return n.blob&&(a instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(a)))&&"undefined"!=typeof FileReader?new C.Promise(function(d,e){var g=new FileReader;g.onload=function(a){d(a.target.result)};g.onerror=function(a){e(a.target.error)};g.readAsArrayBuffer(a)}):a}).then(function(d){var t=e.getTypeOf(d);t?"arraybuffer"===t?d=e.transformTo("uint8array",d):"string"===t&&(m?d=q.decode(d):g&&!0!==l&&(t=null,d=(t=n.uint8array?new Uint8Array(d.length):Array(d.length),h(d,t)))):d=C.Promise.reject(Error("Can't read the data of '"+a+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"));return d})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"core-js/library/fn/set-immediate":36}],33:[function(a,d,e){function g(a){this.files=[];this.loadOptions=a}var h=a("./reader/readerFor"),l=a("./utils"),m=a("./signature"),n=a("./zipEntry"),q=(a("./utf8"),a("./support"));g.prototype={checkSignature:function(a){if(!this.reader.readAndCheckSignature(a)){this.reader.index-=4;var d=this.reader.readString(4);throw Error("Corrupted zip or bug: unexpected signature ("+l.pretty(d)+", expected "+l.pretty(a)+")");}},isSignature:function(a,d){var e=this.reader.index;this.reader.setIndex(a);var g=this.reader.readString(4)===d;return this.reader.setIndex(e),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2);this.diskWithCentralDirrt=this.reader.readInt(2);this.centralDirRecordsOnThisDisk=this.reader.readInt(2);this.centralDirRecords=this.reader.readInt(2);this.centralDirSize=this.reader.readInt(4);this.centralDirOffset=this.reader.readInt(4);this.zipCommentLength=this.reader.readInt(2);var a=this.reader.readData(this.zipCommentLength),a=l.transformTo(q.uint8array?"uint8array":"array",a);this.zipComment=this.loadOptions.decodeFileName(a)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8);this.reader.skip(4);this.diskNumber=this.reader.readInt(4);this.diskWithCentralDirrt=this.reader.readInt(4);this.centralDirRecordsOnThisDisk=this.reader.readInt(8);this.centralDirRecords=this.reader.readInt(8);this.centralDirSize=this.reader.readInt(8);this.centralDirOffset=this.reader.readInt(8);this.zip64ExtensibleData={};for(var a,d,e,g=this.zip64EndOfCentralSize-44;0<g;)a=this.reader.readInt(2),d=this.reader.readInt(4),e=this.reader.readData(d),this.zip64ExtensibleData[a]={id:a,length:d,value:e}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirrt=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw Error("Multi-volumes zip are not supported");},readLocalFiles:function(){var a,d;for(a=0;a<this.files.length;a++)d=this.files[a],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(m.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var a;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(m.CENTRAL_FILE_HEADER);)a=new n({zip64:this.zip64},this.loadOptions),a.readCentralPart(this.reader),this.files.push(a);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length);},readEndOfCentral:function(){var a=this.reader.lastIndexOfSignature(m.CENTRAL_DIRECTORY_END);if(0>a)throw this.isSignature(0,m.LOCAL_FILE_HEADER)?Error("Corrupted zip: can't find end of central directory"):Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(a);var d=a;if(this.checkSignature(m.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirrt===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,a=this.reader.lastIndexOfSignature(m.ZIP64_CENTRAL_DIRECTORY_LOCATOR),0>a)throw Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(a),this.checkSignature(m.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,m.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(m.ZIP64_CENTRAL_DIRECTORY_END),0>this.relativeOffsetEndOfZip64CentralDir))throw Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir);this.checkSignature(m.ZIP64_CENTRAL_DIRECTORY_END);this.readBlockZip64EndOfCentral()}a=this.centralDirOffset+this.centralDirSize;this.zip64&&(a+=20,a+=12+this.zip64EndOfCentralSize);a=d-a;if(0<a)this.isSignature(d,m.CENTRAL_FILE_HEADER)||(this.reader.zero=a);else if(0>a)throw Error("Corrupted zip: missing "+Math.abs(a)+" bytes.");},prepareReader:function(a){this.reader=h(a)},load:function(a){this.prepareReader(a);this.readEndOfCentral();this.readCentralDir();this.readLocalFiles()}};d.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(a,d,e){function g(a,d){this.options=a;this.loadOptions=d}var h=a("./reader/readerFor"),l=a("./utils"),m=a("./compressedObject"),n=a("./crc32"),q=a("./utf8"),z=a("./compressions"),F=a("./support");g.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},readLocalPart:function(a){var d,e;if(a.skip(22),this.fileNameLength=a.readInt(2),e=a.readInt(2),this.fileName=a.readData(this.fileNameLength),a.skip(e),-1===this.compressedSize||-1===this.uncompressedSize)throw Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize \x3d\x3d\x3d -1 || uncompressedSize \x3d\x3d\x3d -1)");var g;a:{e=this.compressionMethod;for(g in z)if(z.hasOwnProperty(g)&&z[g].magic===e){g=z[g];break a}g=null}if(d=g,null===d)throw Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new m(this.compressedSize,this.uncompressedSize,this.crc32,d,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2);a.skip(2);this.bitFlag=a.readInt(2);this.compressionMethod=a.readString(2);this.date=a.readDate();this.crc32=a.readInt(4);this.compressedSize=a.readInt(4);this.uncompressedSize=a.readInt(4);var d=a.readInt(2);if(this.extraFieldsLength=a.readInt(2),this.fileCommentLength=a.readInt(2),this.diskNumberrt=a.readInt(2),this.internalFileAttributes=a.readInt(2),this.externalFileAttributes=a.readInt(4),this.localHeaderOffset=a.readInt(4),this.isEncrypted())throw Error("Encrypted zip are not supported");a.skip(d);this.readExtraFields(a);this.parseZIP64ExtraField(a);this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.dosPermissions=this.unixPermissions=null;var a=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes);0===a&&(this.dosPermissions=63&this.externalFileAttributes);3===a&&(this.unixPermissions=this.externalFileAttributes>>16&65535);this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(a){this.extraFields[1]&&(a=h(this.extraFields[1].value),this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=a.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=a.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=a.readInt(8)),this.diskNumberrt===l.MAX_VALUE_32BITS&&(this.diskNumberrt=a.readInt(4)))},readExtraFields:function(a){var d,e,g,h=a.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});a.index<h;)d=a.readInt(2),e=a.readInt(2),g=a.readData(e),this.extraFields[d]={id:d,length:e,value:g}},handleUTF8:function(){var a=F.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=q.utf8decode(this.fileName),this.fileCommentStr=q.utf8decode(this.fileComment);else{var d=this.findExtraFieldUnicodePath();null!==d?this.fileNameStr=d:(d=l.transformTo(a,this.fileName),this.fileNameStr=this.loadOptions.decodeFileName(d));d=this.findExtraFieldUnicodeComment();null!==d?this.fileCommentStr=d:(a=l.transformTo(a,this.fileComment),this.fileCommentStr=this.loadOptions.decodeFileName(a))}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var d=h(a.value);return 1!==d.readInt(1)?null:n(this.fileName)!==d.readInt(4)?null:q.utf8decode(d.readData(a.length-5))}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var d=h(a.value);return 1!==d.readInt(1)?null:n(this.fileComment)!==d.readInt(4)?null:q.utf8decode(d.readData(a.length-5))}return null}};d.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,d,e){var g=a("./stream/StreamHelper"),h=a("./stream/DataWorker"),l=a("./utf8"),m=a("./compressedObject"),n=a("./stream/GenericWorker");a=function(a,d,e){this.name=a;this.dir=e.dir;this.date=e.date;this.comment=e.comment;this.unixPermissions=e.unixPermissions;this.dosPermissions=e.dosPermissions;this._data=d;this._dataBinary=e.binary;this.options={compression:e.compression,compressionOptions:e.compressionOptions}};a.prototype={internalStream:function(a){var d=null,e="string";try{if(!a)throw Error("No output type specified.");e=a.toLowerCase();a="string"===e||"text"===e;"binarystring"!==e&&"text"!==e||(e="string");var d=this._decompressWorker(),h=!this._dataBinary;h&&!a&&(d=d.pipe(new l.Utf8EncodeWorker));!h&&a&&(d=d.pipe(new l.Utf8DecodeWorker))}catch(K){d=new n("error"),d.error(K)}return new g(d,e,"")},async:function(a,d){return this.internalStream(a).accumulate(d)},nodeStream:function(a,d){return this.internalStream(a||"nodebuffer").toNodejsStream(d)},_compressWorker:function(a,d){if(this._data instanceof m&&this._data.compression.magic===a.magic)return this._data.getCompressedWorker();var e=this._decompressWorker();return this._dataBinary||(e=e.pipe(new l.Utf8EncodeWorker)),m.createWorkerFrom(e,a,d)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof n?this._data:new h(this._data)}};e=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"];for(var q=function(){throw Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");},z=0;z<e.length;z++)a.prototype[e[z]]=q;d.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,d,e){a("../modules/web.immediate");d.exports=a("../modules/_core").setImmediate},{"../modules/_core":40,"../modules/web.immediate":56}],37:[function(a,d,e){d.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},{}],38:[function(a,d,e){var g=a("./_is-object");d.exports=function(a){if(!g(a))throw TypeError(a+" is not an object!");return a}},{"./_is-object":51}],39:[function(a,d,e){var g={}.toString;d.exports=function(a){return g.call(a).slice(8,-1)}},{}],40:[function(a,d,e){a=d.exports={version:"2.3.0"};"number"==typeof __e&&(__e=a)},{}],41:[function(a,d,e){var g=a("./_a-function");d.exports=function(a,d,e){if(g(a),void 0===d)return a;switch(e){case 1:return function(e){return a.call(d,e)};case 2:return function(e,g){return a.call(d,e,g)};case 3:return function(e,g,h){return a.call(d,e,g,h)}}return function(){return a.apply(d,arguments)}}},{"./_a-function":37}],42:[function(a,d,e){d.exports=!a("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":45}],43:[function(a,d,e){e=a("./_is-object");var g=a("./_global").document,h=e(g)&&e(g.createElement);d.exports=function(a){return h?g.createElement(a):{}}},{"./_global":46,"./_is-object":51}],44:[function(a,d,e){var g=a("./_global"),h=a("./_core"),l=a("./_ctx"),m=a("./_hide"),n=function(a,d,e){var q,t,z=a&n.F,F=a&n.G,H=a&n.S,A=a&n.P,G=a&n.B,E=a&n.W,N=F?h:h[d]||(h[d]={}),O=N.prototype,H=F?g:H?g[d]:(g[d]||{}).prototype;F&&(e=d);for(q in e)(d=!z&&H&&void 0!==H[q])&&q in N||(t=d?H[q]:e[q],N[q]=F&&"function"!=typeof H[q]?e[q]:G&&d?l(t,g):E&&H[q]==t?function(a){var d=function(d,e,g){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(d);case 2:return new a(d,e)}return new a(d,e,g)}return a.apply(this,arguments)};return d.prototype=a.prototype,d}(t):A&&"function"==typeof t?l(Function.call,t):t,A&&((N.virtual||(N.virtual={}))[q]=t,a&n.R&&O&&!O[q]&&m(O,q,t)))};n.F=1;n.G=2;n.S=4;n.P=8;n.B=16;n.W=32;n.U=64;n.R=128;d.exports=n},{"./_core":40,"./_ctx":41,"./_global":46,"./_hide":47}],45:[function(a,d,e){d.exports=function(a){try{return!!a()}catch(h){return!0}}},{}],46:[function(a,d,e){a=d.exports="undefined"!=typeof window&&Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},{}],47:[function(a,d,e){var g=a("./_object-dp"),h=a("./_property-desc");d.exports=a("./_descriptors")?function(a,d,e){return g.f(a,d,h(1,e))}:function(a,d,e){return a[d]=e,a}},{"./_descriptors":42,"./_object-dp":52,"./_property-desc":53}],48:[function(a,d,e){d.exports=a("./_global").document&&document.documentElement},{"./_global":46}],49:[function(a,d,e){d.exports=!a("./_descriptors")&&!a("./_fails")(function(){return 7!=Object.defineProperty(a("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":42,"./_dom-create":43,"./_fails":45}],50:[function(a,d,e){d.exports=function(a,d,e){var g=void 0===e;switch(d.length){case 0:return g?a():a.call(e);case 1:return g?a(d[0]):a.call(e,d[0]);case 2:return g?a(d[0],d[1]):a.call(e,d[0],d[1]);case 3:return g?a(d[0],d[1],d[2]):a.call(e,d[0],d[1],d[2]);case 4:return g?a(d[0],d[1],d[2],d[3]):a.call(e,d[0],d[1],d[2],d[3])}return a.apply(e,d)}},{}],51:[function(a,d,e){d.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},{}],52:[function(a,d,e){var g=a("./_an-object"),h=a("./_ie8-dom-define"),l=a("./_to-primitive"),m=Object.defineProperty;e.f=a("./_descriptors")?Object.defineProperty:function(a,d,e){if(g(a),d=l(d,!0),g(e),h)try{return m(a,d,e)}catch(F){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(a[d]=e.value),a}},{"./_an-object":38,"./_descriptors":42,"./_ie8-dom-define":49,"./_to-primitive":55}],53:[function(a,d,e){d.exports=function(a,d){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:d}}},{}],54:[function(a,d,e){var g,h,l,m=a("./_ctx"),n=a("./_invoke"),q=a("./_html"),z=a("./_dom-create"),F=a("./_global"),C=F.process;e=F.setImmediate;var t=F.clearImmediate,I=F.MessageChannel,K=0,H={},A=function(){var a=+this;if(H.hasOwnProperty(a)){var d=H[a];delete H[a];d()}},G=function(a){A.call(a.data)};e&&t||(e=function(a){for(var d=[],e=1;arguments.length>e;)d.push(arguments[e++]);return H[++K]=function(){n("function"==typeof a?a:Function(a),d)},g(K),K},t=function(a){delete H[a]},"process"==a("./_cof")(C)?g=function(a){C.nextTick(m(A,a,1))}:I?(h=new I,l=h.port2,h.port1.onmessage=G,g=m(l.postMessage,l,1)):F.addEventListener&&"function"==typeof postMessage&&!F.importScripts?(g=function(a){F.postMessage(a+"","*")},F.addEventListener("message",G,!1)):g="onreadystatechange"in z("script")?function(a){q.appendChild(z("script")).onreadystatechange=function(){q.removeChild(this);A.call(a)}}:function(a){setTimeout(m(A,a,1),0)});d.exports={set:e,clear:t}},{"./_cof":39,"./_ctx":41,"./_dom-create":43,"./_global":46,"./_html":48,"./_invoke":50}],55:[function(a,d,e){var g=a("./_is-object");d.exports=function(a,d){if(!g(a))return a;var e,h;if(d&&"function"==typeof(e=a.toString)&&!g(h=e.call(a))||"function"==typeof(e=a.valueOf)&&!g(h=e.call(a))||!d&&"function"==typeof(e=a.toString)&&!g(h=e.call(a)))return h;throw TypeError("Can't convert object to primitive value");}},{"./_is-object":51}],56:[function(a,d,e){d=a("./_export");a=a("./_task");d(d.G+d.B,{setImmediate:a.set,clearImmediate:a.clear})},{"./_export":44,"./_task":54}],57:[function(a,d,e){(function(a){function e(){F=!0;for(var a,d,e=C.length;e;){d=C;C=[];for(a=-1;++a<e;)d[a]();e=C.length}F=!1}var g,m=a.MutationObserver||a.WebKitMutationObserver;if(m){var n=0,m=new m(e),q=a.document.createTextNode("");m.observe(q,{characterData:!0});g=function(){q.data=n=++n%2}}else if(a.setImmediate||"undefined"==typeof a.MessageChannel)g="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var d=a.document.createElement("script");d.onreadystatechange=function(){e();d.onreadystatechange=null;d.parentNode.removeChild(d);d=null};a.document.documentElement.appendChild(d)}:function(){setTimeout(e,0)};else{var z=new a.MessageChannel;z.port1.onmessage=e;g=function(){z.port2.postMessage(0)}}var F,C=[];d.exports=function(a){1!==C.push(a)||F||g()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],58:[function(a,d,e){function g(){}function h(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=K;this.queue=[];this.outcome=void 0;a!==g&&q(this,a)}function l(a,d,e){this.promise=a;"function"==typeof d&&(this.onFulfilled=d,this.callFulfilled=this.otherCallFulfilled);"function"==typeof e&&(this.onRejected=e,this.callRejected=this.otherCallRejected)}function m(a,d,e){F(function(){var g;try{g=d(e)}catch(N){return C.reject(a,N)}g===a?C.reject(a,new TypeError("Cannot resolve promise with itself")):C.resolve(a,g)})}function n(a){var d=a&&a.then;if(a&&("object"==typeof a||"function"==typeof a)&&"function"==typeof d)return function(){d.apply(a,arguments)}}function q(a,d){function e(d){h||(h=!0,C.reject(a,d))}function g(d){h||(h=!0,C.resolve(a,d))}var h=!1,l=z(function(){d(g,e)});"error"===l.status&&e(l.value)}function z(a,d){var e={};try{e.value=a(d),e.status="success"}catch(E){e.status="error",e.value=E}return e}var F=a("immediate"),C={},t=["REJECTED"],I=["FULFILLED"],K=["PENDING"];d.exports=h;h.prototype["catch"]=function(a){return this.then(null,a)};h.prototype.then=function(a,d){if("function"!=typeof a&&this.state===I||"function"!=typeof d&&this.state===t)return this;var e=new this.constructor(g);this.state!==K?m(e,this.state===I?a:d,this.outcome):this.queue.push(new l(e,a,d));return e};l.prototype.callFulfilled=function(a){C.resolve(this.promise,a)};l.prototype.otherCallFulfilled=function(a){m(this.promise,this.onFulfilled,a)};l.prototype.callRejected=function(a){C.reject(this.promise,a)};l.prototype.otherCallRejected=function(a){m(this.promise,this.onRejected,a)};C.resolve=function(a,d){var e=z(n,d);if("error"===e.status)return C.reject(a,e.value);if(e=e.value)q(a,e);else{a.state=I;a.outcome=d;for(var e=-1,g=a.queue.length;++e<g;)a.queue[e].callFulfilled(d)}return a};C.reject=function(a,d){a.state=t;a.outcome=d;for(var e=-1,g=a.queue.length;++e<g;)a.queue[e].callRejected(d);return a};h.resolve=function(a){return a instanceof this?a:C.resolve(new this(g),a)};h.reject=function(a){var d=new this(g);return C.reject(d,a)};h.all=function(a){function d(a,d){e.resolve(a).then(function(a){m[d]=a;++n!==h||l||(l=!0,C.resolve(x,m))},function(a){l||(l=!0,C.reject(x,a))})}var e=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var h=a.length,l=!1;if(!h)return this.resolve([]);for(var m=Array(h),n=0,q=-1,x=new this(g);++q<h;)d(a[q],q);return x};h.race=function(a){function d(a){e.resolve(a).then(function(a){l||(l=!0,C.resolve(n,a))},function(a){l||(l=!0,C.reject(n,a))})}var e=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var h=a.length,l=!1;if(!h)return this.resolve([]);for(var m=-1,n=new this(g);++m<h;)d(a[m]);return n}},{immediate:57}],59:[function(a,d,e){e=a("./lib/utils/common").assign;var g=a("./lib/deflate"),h=a("./lib/inflate");a=a("./lib/zlib/constants");var l={};e(l,g,h,a);d.exports=l},{"./lib/deflate":60,"./lib/inflate":61,"./lib/utils/common":62,"./lib/zlib/constants":65}],60:[function(a,d,e){function g(a){if(!(this instanceof g))return new g(a);a=this.options=m.assign({level:t,method:K,chunkSize:16384,windowBits:15,memLevel:8,strategy:I,to:""},a||{});a.raw&&0<a.windowBits?a.windowBits=-a.windowBits:a.gzip&&0<a.windowBits&&16>a.windowBits&&(a.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new z;this.strm.avail_out=0;var d=l.deflateInit2(this.strm,a.level,a.method,a.windowBits,a.memLevel,a.strategy);if(d!==C)throw Error(q[d]);if(a.header&&l.deflateSetHeader(this.strm,a.header),a.dictionary){var e;if(e="string"==typeof a.dictionary?n.string2buf(a.dictionary):"[object ArrayBuffer]"===F.call(a.dictionary)?new Uint8Array(a.dictionary):a.dictionary,d=l.deflateSetDictionary(this.strm,e),d!==C)throw Error(q[d]);this._dict_set=!0}}function h(a,d){var e=new g(d);if(e.push(a,!0),e.err)throw e.msg||q[e.err];return e.result}var l=a("./zlib/deflate"),m=a("./utils/common"),n=a("./utils/strings"),q=a("./zlib/messages"),z=a("./zlib/zstream"),F=Object.prototype.toString,C=0,t=-1,I=0,K=8;g.prototype.push=function(a,d){var e,g,h=this.strm,q=this.options.chunkSize;if(this.ended)return!1;g=d===~~d?d:!0===d?4:0;"string"==typeof a?h.input=n.string2buf(a):"[object ArrayBuffer]"===F.call(a)?h.input=new Uint8Array(a):h.input=a;h.next_in=0;h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new m.Buf8(q),h.next_out=0,h.avail_out=q),e=l.deflate(h,g),1!==e&&e!==C)return this.onEnd(e),this.ended=!0,!1;0!==h.avail_out&&(0!==h.avail_in||4!==g&&2!==g)||("string"===this.options.to?this.onData(n.buf2binstring(m.shrinkBuf(h.output,h.next_out))):this.onData(m.shrinkBuf(h.output,h.next_out)))}while((0<h.avail_in||0===h.avail_out)&&1!==e);return 4===g?(e=l.deflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===C):2!==g||(this.onEnd(C),h.avail_out=0,!0)};g.prototype.onData=function(a){this.chunks.push(a)};g.prototype.onEnd=function(a){a===C&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=m.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};e.Deflate=g;e.deflate=h;e.deflateRaw=function(a,d){return d=d||{},d.raw=!0,h(a,d)};e.gzip=function(a,d){return d=d||{},d.gzip=!0,h(a,d)}},{"./utils/common":62,"./utils/strings":63,"./zlib/deflate":67,"./zlib/messages":72,"./zlib/zstream":74}],61:[function(a,d,e){function g(a){if(!(this instanceof g))return new g(a);var d=this.options=m.assign({chunkSize:16384,windowBits:0,to:""},a||{});d.raw&&0<=d.windowBits&&16>d.windowBits&&(d.windowBits=-d.windowBits,0===d.windowBits&&(d.windowBits=-15));!(0<=d.windowBits&&16>d.windowBits)||a&&a.windowBits||(d.windowBits+=32);15<d.windowBits&&48>d.windowBits&&0===(15&d.windowBits)&&(d.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new F;this.strm.avail_out=0;a=l.inflateInit2(this.strm,d.windowBits);if(a!==q.Z_OK)throw Error(z[a]);this.header=new C;l.inflateGetHeader(this.strm,this.header)}function h(a,d){var e=new g(d);if(e.push(a,!0),e.err)throw e.msg||z[e.err];return e.result}var l=a("./zlib/inflate"),m=a("./utils/common"),n=a("./utils/strings"),q=a("./zlib/constants"),z=a("./zlib/messages"),F=a("./zlib/zstream"),C=a("./zlib/gzheader"),t=Object.prototype.toString;g.prototype.push=function(a,d){var e,g,h,z,C,F,v=this.strm,K=this.options.chunkSize,x=this.options.dictionary,B=!1;if(this.ended)return!1;g=d===~~d?d:!0===d?q.Z_FINISH:q.Z_NO_FLUSH;"string"==typeof a?v.input=n.binstring2buf(a):"[object ArrayBuffer]"===t.call(a)?v.input=new Uint8Array(a):v.input=a;v.next_in=0;v.avail_in=v.input.length;do{if(0===v.avail_out&&(v.output=new m.Buf8(K),v.next_out=0,v.avail_out=K),e=l.inflate(v,q.Z_NO_FLUSH),e===q.Z_NEED_DICT&&x&&(F="string"==typeof x?n.string2buf(x):"[object ArrayBuffer]"===t.call(x)?new Uint8Array(x):x,e=l.inflateSetDictionary(this.strm,F)),e===q.Z_BUF_ERROR&&!0===B&&(e=q.Z_OK,B=!1),e!==q.Z_STREAM_END&&e!==q.Z_OK)return this.onEnd(e),this.ended=!0,!1;v.next_out&&(0!==v.avail_out&&e!==q.Z_STREAM_END&&(0!==v.avail_in||g!==q.Z_FINISH&&g!==q.Z_SYNC_FLUSH)||("string"===this.options.to?(h=n.utf8border(v.output,v.next_out),z=v.next_out-h,C=n.buf2string(v.output,h),v.next_out=z,v.avail_out=K-z,z&&m.arraySet(v.output,v.output,h,z,0),this.onData(C)):this.onData(m.shrinkBuf(v.output,v.next_out))));0===v.avail_in&&0===v.avail_out&&(B=!0)}while((0<v.avail_in||0===v.avail_out)&&e!==q.Z_STREAM_END);return e===q.Z_STREAM_END&&(g=q.Z_FINISH),g===q.Z_FINISH?(e=l.inflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===q.Z_OK):g!==q.Z_SYNC_FLUSH||(this.onEnd(q.Z_OK),v.avail_out=0,!0)};g.prototype.onData=function(a){this.chunks.push(a)};g.prototype.onEnd=function(a){a===q.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=m.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};e.Inflate=g;e.inflate=h;e.inflateRaw=function(a,d){return d=d||{},d.raw=!0,h(a,d)};e.ungzip=h},{"./utils/common":62,"./utils/strings":63,"./zlib/constants":65,"./zlib/gzheader":68,"./zlib/inflate":70,"./zlib/messages":72,"./zlib/zstream":74}],62:[function(a,d,e){a="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(a){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var e=d.shift();if(e){if("object"!=typeof e)throw new TypeError(e+"must be non-object");for(var g in e)e.hasOwnProperty(g)&&(a[g]=e[g])}}return a};e.shrinkBuf=function(a,d){return a.length===d?a:a.subarray?a.subarray(0,d):(a.length=d,a)};var g={arraySet:function(a,d,e,g,h){if(d.subarray&&a.subarray)return void a.set(d.subarray(e,e+g),h);for(var l=0;l<g;l++)a[h+l]=d[e+l]},flattenChunks:function(a){var d,e,g,h,l;d=g=0;for(e=a.length;d<e;d++)g+=a[d].length;l=new Uint8Array(g);d=g=0;for(e=a.length;d<e;d++)h=a[d],l.set(h,g),g+=h.length;return l}},h={arraySet:function(a,d,e,g,h){for(var l=0;l<g;l++)a[h+l]=d[e+l]},flattenChunks:function(a){return[].concat.apply([],a)}};e.setTyped=function(a){a?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,g)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,h))};e.setTyped(a)},{}],63:[function(a,d,e){function g(a,d){if(65537>d&&(a.subarray&&m||!a.subarray&&l))return String.fromCharCode.apply(null,h.shrinkBuf(a,d));for(var e="",g=0;g<d;g++)e+=String.fromCharCode(a[g]);return e}var h=a("./common"),l=!0,m=!0;try{String.fromCharCode.apply(null,[0])}catch(q){l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(q){m=!1}var n=new h.Buf8(256);for(a=0;256>a;a++)n[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;n[254]=n[254]=1;e.string2buf=function(a){var d,e,g,l,m,n=a.length,q=0;for(l=0;l<n;l++)e=a.charCodeAt(l),55296===(64512&e)&&l+1<n&&(g=a.charCodeAt(l+1),56320===(64512&g)&&(e=65536+(e-55296<<10)+(g-56320),l++)),q+=128>e?1:2048>e?2:65536>e?3:4;d=new h.Buf8(q);for(l=m=0;m<q;l++)e=a.charCodeAt(l),55296===(64512&e)&&l+1<n&&(g=a.charCodeAt(l+1),56320===(64512&g)&&(e=65536+(e-55296<<10)+(g-56320),l++)),128>e?d[m++]=e:2048>e?(d[m++]=192|e>>>6,d[m++]=128|63&e):65536>e?(d[m++]=224|e>>>12,d[m++]=128|e>>>6&63,d[m++]=128|63&e):(d[m++]=240|e>>>18,d[m++]=128|e>>>12&63,d[m++]=128|e>>>6&63,d[m++]=128|63&e);return d};e.buf2binstring=function(a){return g(a,a.length)};e.binstring2buf=function(a){for(var d=new h.Buf8(a.length),e=0,g=d.length;e<g;e++)d[e]=a.charCodeAt(e);return d};e.buf2string=function(a,d){var e,h,l,m,q=d||a.length,z=Array(2*q);for(e=h=0;e<q;)if(l=a[e++],128>l)z[h++]=l;else if(m=n[l],4<m)z[h++]=65533,e+=m-1;else{for(l&=2===m?31:3===m?15:7;1<m&&e<q;)l=l<<6|63&a[e++],m--;1<m?z[h++]=65533:65536>l?z[h++]=l:(l-=65536,z[h++]=55296|l>>10&1023,z[h++]=56320|1023&l)}return g(z,h)};e.utf8border=function(a,d){var e;d=d||a.length;d>a.length&&(d=a.length);for(e=d-1;0<=e&&128===(192&a[e]);)e--;return 0>e?d:0===e?d:e+n[a[e]]>d?e:d}},{"./common":62}],64:[function(a,d,e){d.exports=function(a,d,e,m){var g=65535&a|0;a=a>>>16&65535|0;for(var h;0!==e;){h=2E3<e?2E3:e;e-=h;do g=g+d[m++]|0,a=a+g|0;while(--h);g%=65521;a%=65521}return g|a<<16|0}},{}],65:[function(a,d,e){d.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],66:[function(a,d,e){var g=function(){for(var a,d=[],e=0;256>e;e++){a=e;for(var g=0;8>g;g++)a=1&a?3988292384^a>>>1:a>>>1;d[e]=a}return d}();d.exports=function(a,d,e,n){e=n+e;for(a^=-1;n<e;n++)a=a>>>8^g[255&(a^d[n])];return a^-1}},{}],67:[function(a,d,e){function g(a,d){return a.msg=x[d],d}function h(a){for(var d=a.length;0<=--d;)a[d]=0}function l(a){var d=a.state,e=d.pending;e>a.avail_out&&(e=a.avail_out);0!==e&&(N.arraySet(a.output,d.pending_buf,d.pending_out,e,a.next_out),a.next_out+=e,d.pending_out+=e,a.total_out+=e,a.avail_out-=e,d.pending-=e,0===d.pending&&(d.pending_out=0))}function m(a,d){O._tr_flush_block(a,0<=a.block_start?a.block_start:-1,a.strstart-a.block_start,d);a.block_start=a.strstart;l(a.strm)}function n(a,d){a.pending_buf[a.pending++]=d}function q(a,d){a.pending_buf[a.pending++]=d>>>8&255;a.pending_buf[a.pending++]=255&d}function z(a,d){var e,g,h=a.max_chain_length,l=a.strstart,p=a.prev_length,m=a.nice_match,n=a.strstart>a.w_size-ga?a.strstart-(a.w_size-ga):0,y=a.window,q=a.w_mask,x=a.prev,t=a.strstart+ba,D=y[l+p-1],z=y[l+p];a.prev_length>=a.good_match&&(h>>=2);m>a.lookahead&&(m=a.lookahead);do if(e=d,y[e+p]===z&&y[e+p-1]===D&&y[e]===y[l]&&y[++e]===y[l+1]){l+=2;for(e++;y[++l]===y[++e]&&y[++l]===y[++e]&&y[++l]===y[++e]&&y[++l]===y[++e]&&y[++l]===y[++e]&&y[++l]===y[++e]&&y[++l]===y[++e]&&y[++l]===y[++e]&&l<t;);if(g=ba-(t-l),l=t-ba,g>p){if(a.match_start=d,p=g,g>=m)break;D=y[l+p-1];z=y[l+p]}}while((d=x[d&q])>n&&0!==--h);return p<=a.lookahead?p:a.lookahead}function F(a){var d,e,g,h,l=a.w_size;do{if(h=a.window_size-a.lookahead-a.strstart,a.strstart>=l+(l-ga)){N.arraySet(a.window,a.window,l,l,0);a.match_start-=l;a.strstart-=l;a.block_start-=l;d=e=a.hash_size;do g=a.head[--d],a.head[d]=g>=l?g-l:0;while(--e);d=e=l;do g=a.prev[--d],a.prev[d]=g>=l?g-l:0;while(--e);h+=l}if(0===a.strm.avail_in)break;d=a.strm;g=a.window;var p=a.strstart+a.lookahead,m=d.avail_in;if(e=(m>h&&(m=h),0===m?0:(d.avail_in-=m,N.arraySet(g,d.input,d.next_in,m,p),1===d.state.wrap?d.adler=v(d.adler,g,m,p):2===d.state.wrap&&(d.adler=L(d.adler,g,m,p)),d.next_in+=m,d.total_in+=m,m)),a.lookahead+=e,a.lookahead+a.insert>=V)for(h=a.strstart-a.insert,a.ins_h=a.window[h],a.ins_h=(a.ins_h<<a.hash_shift^a.window[h+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[h+V-1])&a.hash_mask,a.prev[h&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=h,h++,a.insert--,!(a.lookahead+a.insert<V)););}while(a.lookahead<ga&&0!==a.strm.avail_in)}function C(a,d){for(var e,g;;){if(a.lookahead<ga){if(F(a),a.lookahead<ga&&d===B)return ca;if(0===a.lookahead)break}if(e=0,a.lookahead>=V&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+V-1])&a.hash_mask,e=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==e&&a.strstart-e<=a.w_size-ga&&(a.match_length=z(a,e)),a.match_length>=V)if(g=O._tr_tally(a,a.strstart-a.match_start,a.match_length-V),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=V){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+V-1])&a.hash_mask,e=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else g=O._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(g&&(m(a,!1),0===a.strm.avail_out))return ca}return a.insert=a.strstart<V-1?a.strstart:V-1,d===p?(m(a,!0),0===a.strm.avail_out?aa:ra):a.last_lit&&(m(a,!1),0===a.strm.avail_out)?ca:va}function t(a,d){for(var e,g,h;;){if(a.lookahead<ga){if(F(a),a.lookahead<ga&&d===B)return ca;if(0===a.lookahead)break}if(e=0,a.lookahead>=V&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+V-1])&a.hash_mask,e=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=V-1,0!==e&&a.prev_length<a.max_lazy_match&&a.strstart-e<=a.w_size-ga&&(a.match_length=z(a,e),5>=a.match_length&&(a.strategy===da||a.match_length===V&&4096<a.strstart-a.match_start)&&(a.match_length=V-1)),a.prev_length>=V&&a.match_length<=a.prev_length){h=a.strstart+a.lookahead-V;g=O._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-V);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=h&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+V-1])&a.hash_mask,e=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);if(a.match_available=0,a.match_length=V-1,a.strstart++,g&&(m(a,!1),0===a.strm.avail_out))return ca}else if(a.match_available){if(g=O._tr_tally(a,0,a.window[a.strstart-1]),g&&m(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return ca}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(O._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<V-1?a.strstart:V-1,d===p?(m(a,!0),0===a.strm.avail_out?aa:ra):a.last_lit&&(m(a,!1),0===a.strm.avail_out)?ca:va}function I(a,d,e,g,h){this.good_length=a;this.max_lazy=d;this.nice_length=e;this.max_chain=g;this.func=h}function K(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=na;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new N.Buf16(2*la);this.dyn_dtree=new N.Buf16(2*(2*ha+1));this.bl_tree=new N.Buf16(2*(2*W+1));h(this.dyn_ltree);h(this.dyn_dtree);h(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new N.Buf16(Z+1);this.heap=new N.Buf16(2*Ea+1);h(this.heap);this.heap_max=this.heap_len=0;this.depth=new N.Buf16(2*Ea+1);h(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function H(a){var d;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=ka,d=a.state,d.pending=0,d.pending_out=0,0>d.wrap&&(d.wrap=-d.wrap),d.status=d.wrap?ua:Y,a.adler=2===d.wrap?0:1,d.last_flush=B,O._tr_init(d),D):g(a,T)}function A(a){var d=H(a);d===D&&(a=a.state,a.window_size=2*a.w_size,h(a.head),a.max_lazy_match=E[a.level].max_lazy,a.good_match=E[a.level].good_length,a.nice_match=E[a.level].nice_length,a.max_chain_length=E[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=V-1,a.match_available=0,a.ins_h=0);return d}function G(a,d,e,h,l,p){if(!a)return T;var w=1;if(d===U&&(d=6),0>h?(w=0,h=-h):15<h&&(w=2,h-=16),1>l||l>ya||e!==na||8>h||15<h||0>d||9<d||0>p||p>ia)return g(a,T);8===h&&(h=9);var m=new K;return a.state=m,m.strm=a,m.wrap=w,m.gzhead=null,m.w_bits=h,m.w_size=1<<m.w_bits,m.w_mask=m.w_size-1,m.hash_bits=l+7,m.hash_size=1<<m.hash_bits,m.hash_mask=m.hash_size-1,m.hash_shift=~~((m.hash_bits+V-1)/V),m.window=new N.Buf8(2*m.w_size),m.head=new N.Buf16(m.hash_size),m.prev=new N.Buf16(m.w_size),m.lit_bufsize=1<<l+6,m.pending_buf_size=4*m.lit_bufsize,m.pending_buf=new N.Buf8(m.pending_buf_size),m.d_buf=1*m.lit_bufsize,m.l_buf=3*m.lit_bufsize,m.level=d,m.strategy=p,m.method=e,A(a)}var E,N=a("../utils/common"),O=a("./trees"),v=a("./adler32"),L=a("./crc32"),x=a("./messages"),B=0,p=4,D=0,T=-2,U=-1,da=1,ia=4,ka=2,na=8,ya=9,Ea=286,ha=30,W=19,la=2*Ea+1,Z=15,V=3,ba=258,ga=ba+V+1,ua=42,Y=113,ca=1,va=2,aa=3,ra=4;E=[new I(0,0,0,0,function(a,d){var e=65535;for(e>a.pending_buf_size-5&&(e=a.pending_buf_size-5);;){if(1>=a.lookahead){if(F(a),0===a.lookahead&&d===B)return ca;if(0===a.lookahead)break}a.strstart+=a.lookahead;a.lookahead=0;var g=a.block_start+e;if((0===a.strstart||a.strstart>=g)&&(a.lookahead=a.strstart-g,a.strstart=g,m(a,!1),0===a.strm.avail_out)||a.strstart-a.block_start>=a.w_size-ga&&(m(a,!1),0===a.strm.avail_out))return ca}return a.insert=0,d===p?(m(a,!0),0===a.strm.avail_out?aa:ra):(a.strstart>a.block_start&&m(a,!1),ca)}),new I(4,4,8,4,C),new I(4,5,16,8,C),new I(4,6,32,32,C),new I(4,4,16,16,t),new I(8,16,32,32,t),new I(8,16,128,128,t),new I(8,32,128,256,t),new I(32,128,258,1024,t),new I(32,258,258,4096,t)];e.deflateInit=function(a,d){return G(a,d,na,15,8,0)};e.deflateInit2=G;e.deflateReset=A;e.deflateResetKeep=H;e.deflateSetHeader=function(a,d){return a&&a.state?2!==a.state.wrap?T:(a.state.gzhead=d,D):T};e.deflate=function(a,d){var e,u,x,t;if(!a||!a.state||5<d||0>d)return a?g(a,T):T;if(u=a.state,!a.output||!a.input&&0!==a.avail_in||666===u.status&&d!==p)return g(a,0===a.avail_out?-5:T);if(u.strm=a,e=u.last_flush,u.last_flush=d,u.status===ua)2===u.wrap?(a.adler=0,n(u,31),n(u,139),n(u,8),u.gzhead?(n(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),n(u,255&u.gzhead.time),n(u,u.gzhead.time>>8&255),n(u,u.gzhead.time>>16&255),n(u,u.gzhead.time>>24&255),n(u,9===u.level?2:2<=u.strategy||2>u.level?4:0),n(u,255&u.gzhead.os),u.gzhead.extra&&u.gzhead.extra.length&&(n(u,255&u.gzhead.extra.length),n(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(a.adler=L(a.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=69):(n(u,0),n(u,0),n(u,0),n(u,0),n(u,0),n(u,9===u.level?2:2<=u.strategy||2>u.level?4:0),n(u,3),u.status=Y)):(x=na+(u.w_bits-8<<4)<<8,x|=(2<=u.strategy||2>u.level?0:6>u.level?1:6===u.level?2:3)<<6,0!==u.strstart&&(x|=32),u.status=Y,q(u,x+(31-x%31)),0!==u.strstart&&(q(u,a.adler>>>16),q(u,65535&a.adler)),a.adler=1);if(69===u.status)if(u.gzhead.extra){for(x=u.pending;u.gzindex<(65535&u.gzhead.extra.length)&&(u.pending!==u.pending_buf_size||(u.gzhead.hcrc&&u.pending>x&&(a.adler=L(a.adler,u.pending_buf,u.pending-x,x)),l(a),x=u.pending,u.pending!==u.pending_buf_size));)n(u,255&u.gzhead.extra[u.gzindex]),u.gzindex++;u.gzhead.hcrc&&u.pending>x&&(a.adler=L(a.adler,u.pending_buf,u.pending-x,x));u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=73)}else u.status=73;if(73===u.status)if(u.gzhead.name){x=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>x&&(a.adler=L(a.adler,u.pending_buf,u.pending-x,x)),l(a),x=u.pending,u.pending===u.pending_buf_size)){t=1;break}t=u.gzindex<u.gzhead.name.length?255&u.gzhead.name.charCodeAt(u.gzindex++):0;n(u,t)}while(0!==t);u.gzhead.hcrc&&u.pending>x&&(a.adler=L(a.adler,u.pending_buf,u.pending-x,x));0===t&&(u.gzindex=0,u.status=91)}else u.status=91;if(91===u.status)if(u.gzhead.comment){x=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>x&&(a.adler=L(a.adler,u.pending_buf,u.pending-x,x)),l(a),x=u.pending,u.pending===u.pending_buf_size)){t=1;break}t=u.gzindex<u.gzhead.comment.length?255&u.gzhead.comment.charCodeAt(u.gzindex++):0;n(u,t)}while(0!==t);u.gzhead.hcrc&&u.pending>x&&(a.adler=L(a.adler,u.pending_buf,u.pending-x,x));0===t&&(u.status=103)}else u.status=103;if(103===u.status&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&l(a),u.pending+2<=u.pending_buf_size&&(n(u,255&a.adler),n(u,a.adler>>8&255),a.adler=0,u.status=Y)):u.status=Y),0!==u.pending){if(l(a),0===a.avail_out)return u.last_flush=-1,D}else if(0===a.avail_in&&(d<<1)-(4<d?9:0)<=(e<<1)-(4<e?9:0)&&d!==p)return g(a,-5);if(666===u.status&&0!==a.avail_in)return g(a,-5);if(0!==a.avail_in||0!==u.lookahead||d!==B&&666!==u.status){var y;if(2===u.strategy)a:{for(var z;;){if(0===u.lookahead&&(F(u),0===u.lookahead)){if(d===B){y=ca;break a}break}if(u.match_length=0,z=O._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++,z&&(m(u,!1),0===u.strm.avail_out)){y=ca;break a}}y=(u.insert=0,d===p?(m(u,!0),0===u.strm.avail_out?aa:ra):u.last_lit&&(m(u,!1),0===u.strm.avail_out)?ca:va)}else if(3===u.strategy)a:{var v,A;for(z=u.window;;){if(u.lookahead<=ba){if(F(u),u.lookahead<=ba&&d===B){y=ca;break a}if(0===u.lookahead)break}if(u.match_length=0,u.lookahead>=V&&0<u.strstart&&(A=u.strstart-1,v=z[A],v===z[++A]&&v===z[++A]&&v===z[++A])){for(e=u.strstart+ba;v===z[++A]&&v===z[++A]&&v===z[++A]&&v===z[++A]&&v===z[++A]&&v===z[++A]&&v===z[++A]&&v===z[++A]&&A<e;);u.match_length=ba-(e-A);u.match_length>u.lookahead&&(u.match_length=u.lookahead)}if(u.match_length>=V?(y=O._tr_tally(u,1,u.match_length-V),u.lookahead-=u.match_length,u.strstart+=u.match_length,u.match_length=0):(y=O._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++),y&&(m(u,!1),0===u.strm.avail_out)){y=ca;break a}}y=(u.insert=0,d===p?(m(u,!0),0===u.strm.avail_out?aa:ra):u.last_lit&&(m(u,!1),0===u.strm.avail_out)?ca:va)}else y=E[u.level].func(u,d);if(y!==aa&&y!==ra||(u.status=666),y===ca||y===aa)return 0===a.avail_out&&(u.last_flush=-1),D;if(y===va&&(1===d?O._tr_align(u):5!==d&&(O._tr_stored_block(u,0,0,!1),3===d&&(h(u.head),0===u.lookahead&&(u.strstart=0,u.block_start=0,u.insert=0))),l(a),0===a.avail_out))return u.last_flush=-1,D}return d!==p?D:0>=u.wrap?1:(2===u.wrap?(n(u,255&a.adler),n(u,a.adler>>8&255),n(u,a.adler>>16&255),n(u,a.adler>>24&255),n(u,255&a.total_in),n(u,a.total_in>>8&255),n(u,a.total_in>>16&255),n(u,a.total_in>>24&255)):(q(u,a.adler>>>16),q(u,65535&a.adler)),l(a),0<u.wrap&&(u.wrap=-u.wrap),0!==u.pending?D:1)};e.deflateEnd=function(a){var d;return a&&a.state?(d=a.state.status,d!==ua&&69!==d&&73!==d&&91!==d&&103!==d&&d!==Y&&666!==d?g(a,T):(a.state=null,d===Y?g(a,-3):D)):T};e.deflateSetDictionary=function(a,d){var e,g,l,p,m,n,x;g=d.length;if(!a||!a.state||(e=a.state,p=e.wrap,2===p||1===p&&e.status!==ua||e.lookahead))return T;1===p&&(a.adler=v(a.adler,d,g,0));e.wrap=0;g>=e.w_size&&(0===p&&(h(e.head),e.strstart=0,e.block_start=0,e.insert=0),m=new N.Buf8(e.w_size),N.arraySet(m,d,g-e.w_size,e.w_size,0),d=m,g=e.w_size);m=a.avail_in;n=a.next_in;x=a.input;a.avail_in=g;a.next_in=0;a.input=d;for(F(e);e.lookahead>=V;){g=e.strstart;l=e.lookahead-(V-1);do e.ins_h=(e.ins_h<<e.hash_shift^e.window[g+V-1])&e.hash_mask,e.prev[g&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=g,g++;while(--l);e.strstart=g;e.lookahead=V-1;F(e)}return e.strstart+=e.lookahead,e.block_start=e.strstart,e.insert=e.lookahead,e.lookahead=0,e.match_length=e.prev_length=V-1,e.match_available=0,a.next_in=n,a.input=x,a.avail_in=m,e.wrap=p,D};e.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":62,"./adler32":64,"./crc32":66,"./messages":72,"./trees":73}],68:[function(a,d,e){d.exports=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},{}],69:[function(a,d,e){d.exports=function(a,d){var e,g,h,q,z,F,C,t,I,K,H,A,G,E,N,O,v,L,x,B,p,D,T,U;e=a.state;g=a.next_in;T=a.input;h=g+(a.avail_in-5);q=a.next_out;U=a.output;z=q-(d-a.avail_out);F=q+(a.avail_out-257);C=e.dmax;t=e.wsize;I=e.whave;K=e.wnext;H=e.window;A=e.hold;G=e.bits;E=e.lencode;N=e.distcode;O=(1<<e.lenbits)-1;v=(1<<e.distbits)-1;a:do b:for(15>G&&(A+=T[g++]<<G,G+=8,A+=T[g++]<<G,G+=8),L=E[A&O];;){if(x=L>>>24,A>>>=x,G-=x,x=L>>>16&255,0===x)U[q++]=65535&L;else{if(!(16&x)){if(0===(64&x)){L=E[(65535&L)+(A&(1<<x)-1)];continue b}if(32&x){e.mode=12;break a}a.msg="invalid literal/length code";e.mode=30;break a}B=65535&L;(x&=15)&&(G<x&&(A+=T[g++]<<G,G+=8),B+=A&(1<<x)-1,A>>>=x,G-=x);15>G&&(A+=T[g++]<<G,G+=8,A+=T[g++]<<G,G+=8);L=N[A&v];c:for(;;){if(x=L>>>24,A>>>=x,G-=x,x=L>>>16&255,!(16&x)){if(0===(64&x)){L=N[(65535&L)+(A&(1<<x)-1)];continue c}a.msg="invalid distance code";e.mode=30;break a}if(p=65535&L,x&=15,G<x&&(A+=T[g++]<<G,G+=8,G<x&&(A+=T[g++]<<G,G+=8)),p+=A&(1<<x)-1,p>C){a.msg="invalid distance too far back";e.mode=30;break a}if(A>>>=x,G-=x,x=q-z,p>x){if(x=p-x,x>I&&e.sane){a.msg="invalid distance too far back";e.mode=30;break a}if(L=0,D=H,0===K){if(L+=t-x,x<B){B-=x;do U[q++]=H[L++];while(--x);L=q-p;D=U}}else if(K<x){if(L+=t+K-x,x-=K,x<B){B-=x;do U[q++]=H[L++];while(--x);if(L=0,K<B){x=K;B-=x;do U[q++]=H[L++];while(--x);L=q-p;D=U}}}else if(L+=K-x,x<B){B-=x;do U[q++]=H[L++];while(--x);L=q-p;D=U}for(;2<B;)U[q++]=D[L++],U[q++]=D[L++],U[q++]=D[L++],B-=3;B&&(U[q++]=D[L++],1<B&&(U[q++]=D[L++]))}else{L=q-p;do U[q++]=U[L++],U[q++]=U[L++],U[q++]=U[L++],B-=3;while(2<B);B&&(U[q++]=U[L++],1<B&&(U[q++]=U[L++]))}break}}break}while(g<h&&q<F);B=G>>3;g-=B;G-=B<<3;a.next_in=g;a.next_out=q;a.avail_in=g<h?5+(h-g):5-(g-h);a.avail_out=q<F?257+(F-q):257-(q-F);e.hold=A&(1<<G)-1;e.bits=G}},{}],70:[function(a,d,e){function g(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function h(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new t.Buf16(320);this.work=new t.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function l(a){var d;return a&&a.state?(d=a.state,a.total_in=a.total_out=d.total=0,a.msg="",d.wrap&&(a.adler=1&d.wrap),d.mode=N,d.last=0,d.havedict=0,d.dmax=32768,d.head=null,d.hold=0,d.bits=0,d.lencode=d.lendyn=new t.Buf32(O),d.distcode=d.distdyn=new t.Buf32(v),d.sane=1,d.back=-1,G):E}function m(a){var d;return a&&a.state?(d=a.state,d.wsize=0,d.whave=0,d.wnext=0,l(a)):E}function n(a,d){var e,g;return a&&a.state?(g=a.state,0>d?(e=0,d=-d):(e=(d>>4)+1,48>d&&(d&=15)),d&&(8>d||15<d)?E:(null!==g.window&&g.wbits!==d&&(g.window=null),g.wrap=e,g.wbits=d,m(a))):E}function q(a,d){var e,g;return a?(g=new h,a.state=g,g.window=null,e=n(a,d),e!==G&&(a.state=null),e):E}function z(a,d,e,g){var h;a=a.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new t.Buf8(a.wsize)),g>=a.wsize?(t.arraySet(a.window,d,e-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(h=a.wsize-a.wnext,h>g&&(h=g),t.arraySet(a.window,d,e-g,h,a.wnext),g-=h,g?(t.arraySet(a.window,d,e-g,g,0),a.wnext=g,a.whave=a.wsize):(a.wnext+=h,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=h))),0}var F,C,t=a("../utils/common"),I=a("./adler32"),K=a("./crc32"),H=a("./inffast"),A=a("./inftrees"),G=0,E=-2,N=1,O=852,v=592,L=!0;e.inflateReset=m;e.inflateReset2=n;e.inflateResetKeep=l;e.inflateInit=function(a){return q(a,15)};e.inflateInit2=q;e.inflate=function(a,d){var e,h,l,m,n,q,x,v,B,O,ha,W,la,Z,V,ba,ga,ua,Y,ca,va,aa,ra=0,y=new t.Buf8(4),ta=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return E;e=a.state;12===e.mode&&(e.mode=13);n=a.next_out;l=a.output;x=a.avail_out;m=a.next_in;h=a.input;q=a.avail_in;v=e.hold;B=e.bits;O=q;ha=x;va=G;a:for(;;)switch(e.mode){case N:if(0===e.wrap){e.mode=13;break}for(;16>B;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}if(2&e.wrap&&35615===v){e.check=0;y[0]=255&v;y[1]=v>>>8&255;e.check=K(e.check,y,2,0);B=v=0;e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&v)<<8)+(v>>8))%31){a.msg="incorrect header check";e.mode=30;break}if(8!==(15&v)){a.msg="unknown compression method";e.mode=30;break}if(v>>>=4,B-=4,ca=(15&v)+8,0===e.wbits)e.wbits=ca;else if(ca>e.wbits){a.msg="invalid window size";e.mode=30;break}e.dmax=1<<ca;a.adler=e.check=1;e.mode=512&v?10:12;B=v=0;break;case 2:for(;16>B;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}if(e.flags=v,8!==(255&e.flags)){a.msg="unknown compression method";e.mode=30;break}if(57344&e.flags){a.msg="unknown header flags set";e.mode=30;break}e.head&&(e.head.text=v>>8&1);512&e.flags&&(y[0]=255&v,y[1]=v>>>8&255,e.check=K(e.check,y,2,0));B=v=0;e.mode=3;case 3:for(;32>B;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}e.head&&(e.head.time=v);512&e.flags&&(y[0]=255&v,y[1]=v>>>8&255,y[2]=v>>>16&255,y[3]=v>>>24&255,e.check=K(e.check,y,4,0));B=v=0;e.mode=4;case 4:for(;16>B;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}e.head&&(e.head.xflags=255&v,e.head.os=v>>8);512&e.flags&&(y[0]=255&v,y[1]=v>>>8&255,e.check=K(e.check,y,2,0));B=v=0;e.mode=5;case 5:if(1024&e.flags){for(;16>B;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}e.length=v;e.head&&(e.head.extra_len=v);512&e.flags&&(y[0]=255&v,y[1]=v>>>8&255,e.check=K(e.check,y,2,0));B=v=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(W=e.length,W>q&&(W=q),W&&(e.head&&(ca=e.head.extra_len-e.length,e.head.extra||(e.head.extra=Array(e.head.extra_len)),t.arraySet(e.head.extra,h,m,W,ca)),512&e.flags&&(e.check=K(e.check,h,W,m)),q-=W,m+=W,e.length-=W),e.length))break a;e.length=0;e.mode=7;case 7:if(2048&e.flags){if(0===q)break a;W=0;do ca=h[m+W++],e.head&&ca&&65536>e.length&&(e.head.name+=String.fromCharCode(ca));while(ca&&W<q);if(512&e.flags&&(e.check=K(e.check,h,W,m)),q-=W,m+=W,ca)break a}else e.head&&(e.head.name=null);e.length=0;e.mode=8;case 8:if(4096&e.flags){if(0===q)break a;W=0;do ca=h[m+W++],e.head&&ca&&65536>e.length&&(e.head.comment+=String.fromCharCode(ca));while(ca&&W<q);if(512&e.flags&&(e.check=K(e.check,h,W,m)),q-=W,m+=W,ca)break a}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;16>B;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}if(v!==(65535&e.check)){a.msg="header crc mismatch";e.mode=30;break}B=v=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0);a.adler=e.check=0;e.mode=12;break;case 10:for(;32>B;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}a.adler=e.check=g(v);B=v=0;e.mode=11;case 11:if(0===e.havedict)return a.next_out=n,a.avail_out=x,a.next_in=m,a.avail_in=q,e.hold=v,e.bits=B,2;a.adler=e.check=1;e.mode=12;case 12:if(5===d||6===d)break a;case 13:if(e.last){v>>>=7&B;B-=7&B;e.mode=27;break}for(;3>B;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}switch(e.last=1&v,v>>>=1,--B,3&v){case 0:e.mode=14;break;case 1:Z=e;if(L){F=new t.Buf32(512);C=new t.Buf32(32);for(ba=0;144>ba;)Z.lens[ba++]=8;for(;256>ba;)Z.lens[ba++]=9;for(;280>ba;)Z.lens[ba++]=7;for(;288>ba;)Z.lens[ba++]=8;A(1,Z.lens,0,288,F,0,Z.work,{bits:9});for(ba=0;32>ba;)Z.lens[ba++]=5;A(2,Z.lens,0,32,C,0,Z.work,{bits:5});L=!1}Z.lencode=F;Z.lenbits=9;Z.distcode=C;Z.distbits=5;if(e.mode=20,6===d){v>>>=2;B-=2;break a}break;case 2:e.mode=17;break;case 3:a.msg="invalid block type",e.mode=30}v>>>=2;B-=2;break;case 14:v>>>=7&B;for(B-=7&B;32>B;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}if((65535&v)!==(v>>>16^65535)){a.msg="invalid stored block lengths";e.mode=30;break}if(e.length=65535&v,v=0,B=0,e.mode=15,6===d)break a;case 15:e.mode=16;case 16:if(W=e.length){if(W>q&&(W=q),W>x&&(W=x),0===W)break a;t.arraySet(l,h,m,W,n);q-=W;m+=W;x-=W;n+=W;e.length-=W;break}e.mode=12;break;case 17:for(;14>B;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}if(e.nlen=(31&v)+257,v>>>=5,B-=5,e.ndist=(31&v)+1,v>>>=5,B-=5,e.ncode=(15&v)+4,v>>>=4,B-=4,286<e.nlen||30<e.ndist){a.msg="too many length or distance symbols";e.mode=30;break}e.have=0;e.mode=18;case 18:for(;e.have<e.ncode;){for(;3>B;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}e.lens[ta[e.have++]]=7&v;v>>>=3;B-=3}for(;19>e.have;)e.lens[ta[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,aa={bits:e.lenbits},va=A(0,e.lens,0,19,e.lencode,0,e.work,aa),e.lenbits=aa.bits,va){a.msg="invalid code lengths set";e.mode=30;break}e.have=0;e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;ra=e.lencode[v&(1<<e.lenbits)-1],V=ra>>>24,ba=65535&ra,!(V<=B);){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}if(16>ba)v>>>=V,B-=V,e.lens[e.have++]=ba;else{if(16===ba){for(Z=V+2;B<Z;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}if(v>>>=V,B-=V,0===e.have){a.msg="invalid bit length repeat";e.mode=30;break}ca=e.lens[e.have-1];W=3+(3&v);v>>>=2;B-=2}else if(17===ba){for(Z=V+3;B<Z;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}v>>>=V;B-=V;ca=0;W=3+(7&v);v>>>=3;B-=3}else{for(Z=V+7;B<Z;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}v>>>=V;B-=V;ca=0;W=11+(127&v);v>>>=7;B-=7}if(e.have+W>e.nlen+e.ndist){a.msg="invalid bit length repeat";e.mode=30;break}for(;W--;)e.lens[e.have++]=ca}}if(30===e.mode)break;if(0===e.lens[256]){a.msg="invalid code -- missing end-of-block";e.mode=30;break}if(e.lenbits=9,aa={bits:e.lenbits},va=A(1,e.lens,0,e.nlen,e.lencode,0,e.work,aa),e.lenbits=aa.bits,va){a.msg="invalid literal/lengths set";e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,aa={bits:e.distbits},va=A(2,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,aa),e.distbits=aa.bits,va){a.msg="invalid distances set";e.mode=30;break}if(e.mode=20,6===d)break a;case 20:e.mode=21;case 21:if(6<=q&&258<=x){a.next_out=n;a.avail_out=x;a.next_in=m;a.avail_in=q;e.hold=v;e.bits=B;H(a,ha);n=a.next_out;l=a.output;x=a.avail_out;m=a.next_in;h=a.input;q=a.avail_in;v=e.hold;B=e.bits;12===e.mode&&(e.back=-1);break}for(e.back=0;ra=e.lencode[v&(1<<e.lenbits)-1],V=ra>>>24,Z=ra>>>16&255,ba=65535&ra,!(V<=B);){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}if(Z&&0===(240&Z)){ga=V;ua=Z;for(Y=ba;ra=e.lencode[Y+((v&(1<<ga+ua)-1)>>ga)],V=ra>>>24,Z=ra>>>16&255,ba=65535&ra,!(ga+V<=B);){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}v>>>=ga;B-=ga;e.back+=ga}if(v>>>=V,B-=V,e.back+=V,e.length=ba,0===Z){e.mode=26;break}if(32&Z){e.back=-1;e.mode=12;break}if(64&Z){a.msg="invalid literal/length code";e.mode=30;break}e.extra=15&Z;e.mode=22;case 22:if(e.extra){for(Z=e.extra;B<Z;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}e.length+=v&(1<<e.extra)-1;v>>>=e.extra;B-=e.extra;e.back+=e.extra}e.was=e.length;e.mode=23;case 23:for(;ra=e.distcode[v&(1<<e.distbits)-1],V=ra>>>24,Z=ra>>>16&255,ba=65535&ra,!(V<=B);){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}if(0===(240&Z)){ga=V;ua=Z;for(Y=ba;ra=e.distcode[Y+((v&(1<<ga+ua)-1)>>ga)],V=ra>>>24,Z=ra>>>16&255,ba=65535&ra,!(ga+V<=B);){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}v>>>=ga;B-=ga;e.back+=ga}if(v>>>=V,B-=V,e.back+=V,64&Z){a.msg="invalid distance code";e.mode=30;break}e.offset=ba;e.extra=15&Z;e.mode=24;case 24:if(e.extra){for(Z=e.extra;B<Z;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}e.offset+=v&(1<<e.extra)-1;v>>>=e.extra;B-=e.extra;e.back+=e.extra}if(e.offset>e.dmax){a.msg="invalid distance too far back";e.mode=30;break}e.mode=25;case 25:if(0===x)break a;if(W=ha-x,e.offset>W){if(W=e.offset-W,W>e.whave&&e.sane){a.msg="invalid distance too far back";e.mode=30;break}W>e.wnext?(W-=e.wnext,la=e.wsize-W):la=e.wnext-W;W>e.length&&(W=e.length);Z=e.window}else Z=l,la=n-e.offset,W=e.length;W>x&&(W=x);x-=W;e.length-=W;do l[n++]=Z[la++];while(--W);0===e.length&&(e.mode=21);break;case 26:if(0===x)break a;l[n++]=e.length;x--;e.mode=21;break;case 27:if(e.wrap){for(;32>B;){if(0===q)break a;q--;v|=h[m++]<<B;B+=8}if(ha-=x,a.total_out+=ha,e.total+=ha,ha&&(a.adler=e.check=e.flags?K(e.check,l,ha,n-ha):I(e.check,l,ha,n-ha)),ha=x,(e.flags?v:g(v))!==e.check){a.msg="incorrect data check";e.mode=30;break}B=v=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;32>B;){if(0===q)break a;q--;v+=h[m++]<<B;B+=8}if(v!==(4294967295&e.total)){a.msg="incorrect length check";e.mode=30;break}B=v=0}e.mode=29;case 29:va=1;break a;case 30:va=-3;break a;case 31:return-4;default:return E}return a.next_out=n,a.avail_out=x,a.next_in=m,a.avail_in=q,e.hold=v,e.bits=B,(e.wsize||ha!==a.avail_out&&30>e.mode&&(27>e.mode||4!==d))&&z(a,a.output,a.next_out,ha-a.avail_out)?(e.mode=31,-4):(O-=a.avail_in,ha-=a.avail_out,a.total_in+=O,a.total_out+=ha,e.total+=ha,e.wrap&&ha&&(a.adler=e.check=e.flags?K(e.check,l,ha,a.next_out-ha):I(e.check,l,ha,a.next_out-ha)),a.data_type=e.bits+(e.last?64:0)+(12===e.mode?128:0)+(20===e.mode||15===e.mode?256:0),(0===O&&0===ha||4===d)&&va===G&&(va=-5),va)};e.inflateEnd=function(a){if(!a||!a.state)return E;var d=a.state;return d.window&&(d.window=null),a.state=null,G};e.inflateGetHeader=function(a,d){var e;return a&&a.state?(e=a.state,0===(2&e.wrap)?E:(e.head=d,d.done=!1,G)):E};e.inflateSetDictionary=function(a,d){var e,g,h=d.length;return a&&a.state?(e=a.state,0!==e.wrap&&11!==e.mode?E:11===e.mode&&(g=1,g=I(g,d,h,0),g!==e.check)?-3:z(a,d,h,h)?(e.mode=31,-4):(e.havedict=1,G)):E};e.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":62,"./adler32":64,"./crc32":66,"./inffast":69,"./inftrees":71}],71:[function(a,d,e){var g=a("../utils/common"),h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],n=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];d.exports=function(a,d,e,C,t,I,K,H){var q,z,E,F,O,v,L,x,B=H.bits,p,D,T,U,da,ia,ka=0,na,ya=null,Ea=0,ha=new g.Buf16(16);F=new g.Buf16(16);var W=null,la=0;for(p=0;15>=p;p++)ha[p]=0;for(D=0;D<C;D++)ha[d[e+D]]++;U=B;for(T=15;1<=T&&0===ha[T];T--);if(U>T&&(U=T),0===T)return t[I++]=20971520,t[I++]=20971520,H.bits=1,0;for(B=1;B<T&&0===ha[B];B++);U<B&&(U=B);for(p=q=1;15>=p;p++)if(q<<=1,q-=ha[p],0>q)return-1;if(0<q&&(0===a||1!==T))return-1;F[1]=0;for(p=1;15>p;p++)F[p+1]=F[p]+ha[p];for(D=0;D<C;D++)0!==d[e+D]&&(K[F[d[e+D]]++]=D);if(0===a?(ya=W=K,O=19):1===a?(ya=h,Ea-=257,W=l,la-=257,O=256):(ya=m,W=n,O=-1),na=0,D=0,p=B,F=I,da=U,ia=0,E=-1,ka=1<<U,C=ka-1,1===a&&852<ka||2===a&&592<ka)return 1;for(;;){v=p-ia;K[D]<O?(L=0,x=K[D]):K[D]>O?(L=W[la+K[D]],x=ya[Ea+K[D]]):(L=96,x=0);q=1<<p-ia;B=z=1<<da;do z-=q,t[F+(na>>ia)+z]=v<<24|L<<16|x|0;while(0!==z);for(q=1<<p-1;na&q;)q>>=1;if(0!==q?(na&=q-1,na+=q):na=0,D++,0===--ha[p]){if(p===T)break;p=d[e+K[D]]}if(p>U&&(na&C)!==E){0===ia&&(ia=U);F+=B;da=p-ia;for(q=1<<da;da+ia<T&&(q-=ha[da+ia],!(0>=q));)da++,q<<=1;if(ka+=1<<da,1===a&&852<ka||2===a&&592<ka)return 1;E=na&C;t[E]=U<<24|da<<16|F-I|0}}return 0!==na&&(t[F+na]=p-ia<<24|4194304),H.bits=U,0}},{"../utils/common":62}],72:[function(a,d,e){d.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],73:[function(a,d,e){function g(a){for(var d=a.length;0<=--d;)a[d]=0}function h(a,d,e,g,h){this.static_tree=a;this.extra_bits=d;this.extra_base=e;this.elems=g;this.max_length=h;this.has_stree=a&&a.length}function l(a,d){this.dyn_tree=a;this.max_code=0;this.stat_desc=d}function m(a,d){a.pending_buf[a.pending++]=255&d;a.pending_buf[a.pending++]=d>>>8&255}function n(a,d,e){a.bi_valid>ka-e?(a.bi_buf|=d<<a.bi_valid&65535,m(a,a.bi_buf),a.bi_buf=d>>ka-a.bi_valid,a.bi_valid+=e-ka):(a.bi_buf|=d<<a.bi_valid&65535,a.bi_valid+=e)}function q(a,d,e){n(a,e[2*d],e[2*d+1])}function z(a,d){var e=0;do e|=1&a,a>>>=1,e<<=1;while(0<--d);return e>>>1}function F(a,d,e){var g,h=Array(ia+1),l=0;for(g=1;g<=ia;g++)h[g]=l=l+e[g-1]<<1;for(e=0;e<=d;e++)g=a[2*e+1],0!==g&&(a[2*e]=z(h[g]++,g))}function C(a){var d;for(d=0;d<D;d++)a.dyn_ltree[2*d]=0;for(d=0;d<T;d++)a.dyn_dtree[2*d]=0;for(d=0;d<U;d++)a.bl_tree[2*d]=0;a.dyn_ltree[2*na]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function t(a){8<a.bi_valid?m(a,a.bi_buf):0<a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf);a.bi_buf=0;a.bi_valid=0}function I(a,d,e,g){var h=2*d,l=2*e;return a[h]<a[l]||a[h]===a[l]&&g[d]<=g[e]}function K(a,d,e){for(var g=a.heap[e],h=e<<1;h<=a.heap_len&&(h<a.heap_len&&I(d,a.heap[h+1],a.heap[h],a.depth)&&h++,!I(d,g,a.heap[h],a.depth));)a.heap[e]=a.heap[h],e=h,h<<=1;a.heap[e]=g}function H(a,d,e){var g,h,l,m,w=0;if(0!==a.last_lit){do g=a.pending_buf[a.d_buf+2*w]<<8|a.pending_buf[a.d_buf+2*w+1],h=a.pending_buf[a.l_buf+w],w++,0===g?q(a,h,d):(l=Y[h],q(a,l+p+1,d),m=W[l],0!==m&&(h-=ca[l],n(a,h,m)),g--,l=256>g?ua[g]:ua[256+(g>>>7)],q(a,l,e),m=la[l],0!==m&&(g-=va[l],n(a,g,m)));while(w<a.last_lit)}q(a,na,d)}function A(a,d){var e,g,h,l=d.dyn_tree;g=d.stat_desc.static_tree;var m=d.stat_desc.has_stree,w=d.stat_desc.elems,n=-1;a.heap_len=0;a.heap_max=da;for(e=0;e<w;e++)0!==l[2*e]?(a.heap[++a.heap_len]=n=e,a.depth[e]=0):l[2*e+1]=0;for(;2>a.heap_len;)h=a.heap[++a.heap_len]=2>n?++n:0,l[2*h]=1,a.depth[h]=0,a.opt_len--,m&&(a.static_len-=g[2*h+1]);d.max_code=n;for(e=a.heap_len>>1;1<=e;e--)K(a,l,e);h=w;do e=a.heap[1],a.heap[1]=a.heap[a.heap_len--],K(a,l,1),g=a.heap[1],a.heap[--a.heap_max]=e,a.heap[--a.heap_max]=g,l[2*h]=l[2*e]+l[2*g],a.depth[h]=(a.depth[e]>=a.depth[g]?a.depth[e]:a.depth[g])+1,l[2*e+1]=l[2*g+1]=h,a.heap[1]=h++,K(a,l,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];var u,p,m=d.dyn_tree,w=d.max_code,q=d.stat_desc.static_tree,t=d.stat_desc.has_stree,v=d.stat_desc.extra_bits,x=d.stat_desc.extra_base,D=d.stat_desc.max_length,B=0;for(g=0;g<=ia;g++)a.bl_count[g]=0;m[2*a.heap[a.heap_max]+1]=0;for(e=a.heap_max+1;e<da;e++)h=a.heap[e],g=m[2*m[2*h+1]+1]+1,g>D&&(g=D,B++),m[2*h+1]=g,h>w||(a.bl_count[g]++,u=0,h>=x&&(u=v[h-x]),p=m[2*h],a.opt_len+=p*(g+u),t&&(a.static_len+=p*(q[2*h+1]+u)));if(0!==B){do{for(g=D-1;0===a.bl_count[g];)g--;a.bl_count[g]--;a.bl_count[g+1]+=2;a.bl_count[D]--;B-=2}while(0<B);for(g=D;0!==g;g--)for(h=a.bl_count[g];0!==h;)u=a.heap[--e],u>w||(m[2*u+1]!==g&&(a.opt_len+=(g-m[2*u+1])*m[2*u],m[2*u+1]=g),h--)}F(l,n,a.bl_count)}function G(a,d,e){var g,h,l=-1,m=d[1],w=0,n=7,u=4;0===m&&(n=138,u=3);d[2*(e+1)+1]=65535;for(g=0;g<=e;g++)h=m,m=d[2*(g+1)+1],++w<n&&h===m||(w<u?a.bl_tree[2*h]+=w:0!==h?(h!==l&&a.bl_tree[2*h]++,a.bl_tree[2*ya]++):10>=w?a.bl_tree[2*Ea]++:a.bl_tree[2*ha]++,w=0,l=h,0===m?(n=138,u=3):h===m?(n=6,u=3):(n=7,u=4))}function E(a,d,e){var g,h,l=-1,m=d[1],w=0,u=7,p=4;0===m&&(u=138,p=3);for(g=0;g<=e;g++)if(h=m,m=d[2*(g+1)+1],!(++w<u&&h===m)){if(w<p){do q(a,h,a.bl_tree);while(0!==--w)}else 0!==h?(h!==l&&(q(a,h,a.bl_tree),w--),q(a,ya,a.bl_tree),n(a,w-3,2)):10>=w?(q(a,Ea,a.bl_tree),n(a,w-3,3)):(q(a,ha,a.bl_tree),n(a,w-11,7));w=0;l=h;0===m?(u=138,p=3):h===m?(u=6,p=3):(u=7,p=4)}}function N(a){var d,e=4093624447;for(d=0;31>=d;d++,e>>>=1)if(1&e&&0!==a.dyn_ltree[2*d])return L;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return x;for(d=32;d<p;d++)if(0!==a.dyn_ltree[2*d])return x;return L}function O(a,d,e,g){n(a,(B<<1)+(g?1:0),3);t(a);m(a,e);m(a,~e);v.arraySet(a.pending_buf,a.window,d,e,a.pending);a.pending+=e}var v=a("../utils/common"),L=0,x=1,B=0,p=256,D=p+1+29,T=30,U=19,da=2*D+1,ia=15,ka=16,na=256,ya=16,Ea=17,ha=18,W=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],la=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ba=Array(2*(D+2));g(ba);var ga=Array(2*T);g(ga);var ua=Array(512);g(ua);var Y=Array(256);g(Y);var ca=Array(29);g(ca);var va=Array(T);g(va);var aa,ra,y,ta=!1;e._tr_init=function(a){if(!ta){var d,e,g,m=Array(ia+1);for(g=e=0;28>g;g++)for(ca[g]=e,d=0;d<1<<W[g];d++)Y[e++]=g;Y[e-1]=g;for(g=e=0;16>g;g++)for(va[g]=e,d=0;d<1<<la[g];d++)ua[e++]=g;for(e>>=7;g<T;g++)for(va[g]=e<<7,d=0;d<1<<la[g]-7;d++)ua[256+e++]=g;for(d=0;d<=ia;d++)m[d]=0;for(d=0;143>=d;)ba[2*d+1]=8,d++,m[8]++;for(;255>=d;)ba[2*d+1]=9,d++,m[9]++;for(;279>=d;)ba[2*d+1]=7,d++,m[7]++;for(;287>=d;)ba[2*d+1]=8,d++,m[8]++;F(ba,D+1,m);for(d=0;d<T;d++)ga[2*d+1]=5,ga[2*d]=z(d,5);aa=new h(ba,W,p+1,D,ia);ra=new h(ga,la,0,T,ia);y=new h([],Z,0,U,7);ta=!0}a.l_desc=new l(a.dyn_ltree,aa);a.d_desc=new l(a.dyn_dtree,ra);a.bl_desc=new l(a.bl_tree,y);a.bi_buf=0;a.bi_valid=0;C(a)};e._tr_stored_block=O;e._tr_flush_block=function(a,d,e,g){var h,l,m=0;if(0<a.level){2===a.strm.data_type&&(a.strm.data_type=N(a));A(a,a.l_desc);A(a,a.d_desc);G(a,a.dyn_ltree,a.l_desc.max_code);G(a,a.dyn_dtree,a.d_desc.max_code);A(a,a.bl_desc);for(m=U-1;3<=m&&0===a.bl_tree[2*V[m]+1];m--);m=(a.opt_len+=3*(m+1)+14,m);h=a.opt_len+3+7>>>3;l=a.static_len+3+7>>>3;l<=h&&(h=l)}else h=l=e+5;if(e+4<=h&&-1!==d)O(a,d,e,g);else if(4===a.strategy||l===h)n(a,2+(g?1:0),3),H(a,ba,ga);else{n(a,4+(g?1:0),3);d=a.l_desc.max_code+1;e=a.d_desc.max_code+1;m+=1;n(a,d-257,5);n(a,e-1,5);n(a,m-4,4);for(h=0;h<m;h++)n(a,a.bl_tree[2*V[h]+1],3);E(a,a.dyn_ltree,d-1);E(a,a.dyn_dtree,e-1);H(a,a.dyn_ltree,a.dyn_dtree)}C(a);g&&t(a)};e._tr_tally=function(a,d,e){return a.pending_buf[a.d_buf+2*a.last_lit]=d>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&d,a.pending_buf[a.l_buf+a.last_lit]=255&e,a.last_lit++,0===d?a.dyn_ltree[2*e]++:(a.matches++,d--,a.dyn_ltree[2*(Y[e]+p+1)]++,a.dyn_dtree[2*(256>d?ua[d]:ua[256+(d>>>7)])]++),a.last_lit===a.lit_bufsize-1};e._tr_align=function(a){n(a,2,3);q(a,na,ba);16===a.bi_valid?(m(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):8<=a.bi_valid&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)}},{"../utils/common":62}],74:[function(a,d,e){d.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},{}]},{},[10])(10)});!function(c){"object"==typeof exports?module.exports=c():"function"==typeof define&&define.amd?define(c):"undefined"!=typeof window?window.JSZipUtils=c():"undefined"!=typeof global?global.JSZipUtils=c():"undefined"!=typeof self&&(self.JSZipUtils=c())}(function(){return function a(d,e,g){function h(m,q){if(!e[m]){if(!d[m]){var n="function"==typeof require&&require;if(!q&&n)return n(m,!0);if(l)return l(m,!0);throw Error("Cannot find module '"+m+"'");}n=e[m]={exports:{}};d[m][0].call(n.exports,function(a){var e=d[m][1][a];return h(e?e:a)},n,n.exports,a,d,e,g)}return e[m].exports}for(var l="function"==typeof require&&require,m=0;m<g.length;m++)h(g[m]);return h}({1:[function(a,d){function e(){try{return new window.XMLHttpRequest}catch(l){}}var g={_getBinaryFromXHR:function(a){return a.response||a.responseText}},h=window.ActiveXObject?function(){var a;if(!(a=e()))a:{try{a=new window.ActiveXObject("Microsoft.XMLHTTP");break a}catch(m){}a=void 0}return a}:e;g.getBinaryContent=function(a,d){try{var e=h();e.open("GET",a,!0);"responseType"in e&&(e.responseType="arraybuffer");e.overrideMimeType&&e.overrideMimeType("text/plain; charset\x3dx-user-defined");e.onreadystatechange=function(){var h,l;if(4===e.readyState)if(200===e.status||0===e.status){l=h=null;try{h=g._getBinaryFromXHR(e)}catch(F){l=Error(F)}d(l,h)}else d(Error("Ajax error for "+a+" : "+this.status+" "+this.statusText),null)};e.send()}catch(q){d(Error(q),null)}};d.exports=g},{}]},{},[1])(1)});!function(c,a){"function"==typeof define&&define.amd?define(function(){return a(c)}):a(c)}(this,function(c){var a=function(){function a(a){return null==a?String(a):ca[va.call(a)]||"object"}function e(c){return"function"==a(c)}function g(a){return null!=a&&a==a.window}function h(c){return"object"==a(c)}function l(a){return h(a)&&!g(a)&&Object.getPrototypeOf(a)==Object.prototype}function m(a){var c=!!a&&"length"in a&&a.length,d=v.type(a);return"function"!=d&&!g(a)&&("array"==d||0===c||"number"==typeof c&&0<c&&c-1 in a)}function n(a){return T.call(a,function(a){return null!=a})}function q(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function z(a){return a in ka?ka[a]:ka[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function F(a,c){return"number"!=typeof c||na[q(a)]?c:c+"px"}function C(a){return"children"in a?U.call(a.children):v.map(a.childNodes,function(a){return 1==a.nodeType?a:void 0})}function t(a,c){var d,e=a?a.length:0;for(d=0;e>d;d++)this[d]=a[d];this.length=e;this.selector=c||""}function I(a,c,d){for(O in c)d&&(l(c[O])||ta(c[O]))?(l(c[O])&&!l(a[O])&&(a[O]={}),ta(c[O])&&!ta(a[O])&&(a[O]=[]),I(a[O],c[O],d)):c[O]!==N&&(a[O]=c[O])}function K(a,c){return null==c?v(a):v(a).filter(c)}function H(a,c,d,g){return e(c)?c.call(a,d,g):c}function A(a,c){var d=a.className||"",e=d&&d.baseVal!==N;return c===N?e?d.baseVal:d:void(e?d.baseVal=c:a.className=c)}function G(a){try{return a?"true"==a||("false"==a?!1:"null"==a?null:+a+""==a?+a:/^[\[\{]/.test(a)?v.parseJSON(a):a):a}catch(u){return a}}function E(a,c){c(a);for(var d=0,e=a.childNodes.length;e>d;d++)E(a.childNodes[d],c)}var N,O,v,L,x,B,p=[],D=p.concat,T=p.filter,U=p.slice,da=c.document,ia={},ka={},na={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},ya=/^\s*<(\w+|!)[^>]*>/,Ea=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ha=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,W=/^(?:body|html)$/i,la=/([A-Z])/g,Z="val css html text data width height offset".split(" "),V=da.createElement("table"),ba=da.createElement("tr"),ga={tr:da.createElement("tbody"),tbody:V,thead:V,tfoot:V,td:ba,th:ba,"*":da.createElement("div")},ua=/complete|loaded|interactive/,Y=/^[\w-]*$/,ca={},va=ca.toString,aa={},ra=da.createElement("div"),y={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},ta=Array.isArray||function(a){return a instanceof Array};return aa.matches=function(a,c){if(!c||!a||1!==a.nodeType)return!1;var d=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(d)return d.call(a,c);var e,d=a.parentNode,g=!d;return g&&(d=ra).appendChild(a),e=~aa.qsa(d,c).indexOf(a),g&&ra.removeChild(a),e},x=function(a){return a.replace(/-+(.)?/g,function(a,c){return c?c.toUpperCase():""})},B=function(a){return T.call(a,function(c,d){return a.indexOf(c)==d})},aa.fragment=function(a,c,d){var e,g,h;return Ea.test(a)&&(e=v(da.createElement(RegExp.$1))),e||(a.replace&&(a=a.replace(ha,"\x3c$1\x3e\x3c/$2\x3e")),c===N&&(c=ya.test(a)&&RegExp.$1),c in ga||(c="*"),h=ga[c],h.innerHTML=""+a,e=v.each(U.call(h.childNodes),function(){h.removeChild(this)})),l(d)&&(g=v(e),v.each(d,function(a,c){-1<Z.indexOf(a)?g[a](c):g.attr(a,c)})),e},aa.Z=function(a,c){return new t(a,c)},aa.isZ=function(a){return a instanceof aa.Z},aa.init=function(a,c){var d;if(!a)return aa.Z();if("string"==typeof a)if(a=a.trim(),"\x3c"==a[0]&&ya.test(a))d=aa.fragment(a,RegExp.$1,c),a=null;else{if(c!==N)return v(c).find(a);d=aa.qsa(da,a)}else{if(e(a))return v(da).ready(a);if(aa.isZ(a))return a;if(ta(a))d=n(a);else if(h(a))d=[a],a=null;else if(ya.test(a))d=aa.fragment(a.trim(),RegExp.$1,c),a=null;else{if(c!==N)return v(c).find(a);d=aa.qsa(da,a)}}return aa.Z(d,a)},v=function(a,c){return aa.init(a,c)},v.extend=function(a){var c,d=U.call(arguments,1);return"boolean"==typeof a&&(c=a,a=d.shift()),d.forEach(function(d){I(a,d,c)}),a},aa.qsa=function(a,c){var d,e="#"==c[0],g=!e&&"."==c[0],h=e||g?c.slice(1):c,l=Y.test(h);return a.getElementById&&l&&e?(d=a.getElementById(h))?[d]:[]:1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType?[]:U.call(l&&!e&&a.getElementsByClassName?g?a.getElementsByClassName(h):a.getElementsByTagName(c):a.querySelectorAll(c))},v.contains=da.documentElement.contains?function(a,c){return a!==c&&a.contains(c)}:function(a,c){for(;c&&(c=c.parentNode);)if(c===a)return!0;return!1},v.type=a,v.isFunction=e,v.isWindow=g,v.isArray=ta,v.isPlainObject=l,v.isEmptyObject=function(a){for(var c in a)return!1;return!0},v.isNumeric=function(a){var c=Number(a),d=typeof a;return null!=a&&"boolean"!=d&&("string"!=d||a.length)&&!isNaN(c)&&isFinite(c)||!1},v.inArray=function(a,c,d){return p.indexOf.call(c,a,d)},v.camelCase=x,v.trim=function(a){return null==a?"":String.prototype.trim.call(a)},v.uuid=0,v.support={},v.expr={},v.noop=function(){},v.map=function(a,c){var d,e,g=[];if(m(a))for(e=0;e<a.length;e++)d=c(a[e],e),null!=d&&g.push(d);else for(e in a)d=c(a[e],e),null!=d&&g.push(d);return 0<g.length?v.fn.concat.apply([],g):g},v.each=function(a,c){var d;if(m(a))for(d=0;d<a.length&&!1!==c.call(a[d],d,a[d]);d++);else for(d in a)if(!1===c.call(a[d],d,a[d]))break;return a},v.grep=function(a,c){return T.call(a,c)},c.JSON&&(v.parseJSON=JSON.parse),v.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,c){ca["[object "+c+"]"]=c.toLowerCase()}),v.fn={constructor:aa.Z,length:0,forEach:p.forEach,reduce:p.reduce,push:p.push,sort:p.sort,splice:p.splice,indexOf:p.indexOf,concat:function(){var a,c,d=[];for(a=0;a<arguments.length;a++)c=arguments[a],d[a]=aa.isZ(c)?c.toArray():c;return D.apply(aa.isZ(this)?this.toArray():this,d)},map:function(a){return v(v.map(this,function(c,d){return a.call(c,d,c)}))},slice:function(){return v(U.apply(this,arguments))},ready:function(a){return ua.test(da.readyState)&&da.body?a(v):da.addEventListener("DOMContentLoaded",function(){a(v)},!1),this},get:function(a){return a===N?U.call(this):this[0<=a?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return p.every.call(this,function(c,d){return!1!==a.call(c,d,c)}),this},filter:function(a){return e(a)?this.not(this.not(a)):v(T.call(this,function(c){return aa.matches(c,a)}))},add:function(a,c){return v(B(this.concat(v(a,c))))},is:function(a){return 0<this.length&&aa.matches(this[0],a)},not:function(a){var c=[];if(e(a)&&a.call!==N)this.each(function(d){a.call(this,d)||c.push(this)});else{var d="string"==typeof a?this.filter(a):m(a)&&e(a.item)?U.call(a):v(a);this.forEach(function(a){0>d.indexOf(a)&&c.push(a)})}return v(c)},has:function(a){return this.filter(function(){return h(a)?v.contains(this,a):v(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!h(a)?a:v(a)},last:function(){var a=this[this.length-1];return a&&!h(a)?a:v(a)},find:function(a){var c=this;return a?"object"==typeof a?v(a).filter(function(){var a=this;return p.some.call(c,function(c){return v.contains(c,a)})}):1==this.length?v(aa.qsa(this[0],a)):this.map(function(){return aa.qsa(this,a)}):v()},closest:function(a,c){var d=[],e="object"==typeof a&&v(a);return this.each(function(g,h){for(;h&&!(e?0<=e.indexOf(h):aa.matches(h,a));)h=h!==c&&!(null!=h&&h.nodeType==h.DOCUMENT_NODE)&&h.parentNode;h&&0>d.indexOf(h)&&d.push(h)}),v(d)},parents:function(a){for(var c=[],d=this;0<d.length;)d=v.map(d,function(a){return(a=a.parentNode)&&(null==a||a.nodeType!=a.DOCUMENT_NODE)&&0>c.indexOf(a)?(c.push(a),a):void 0});return K(c,a)},parent:function(a){return K(B(this.pluck("parentNode")),a)},children:function(a){return K(this.map(function(){return C(this)}),a)},contents:function(){return this.map(function(){return this.contentDocument||U.call(this.childNodes)})},siblings:function(a){return K(this.map(function(a,c){return T.call(C(c.parentNode),function(a){return a!==c})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return v.map(this,function(c){return c[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display="");if("none"==getComputedStyle(this,"").getPropertyValue("display")){var a=this.style,c;c=this.nodeName;var d,e;c=(ia[c]||(d=da.createElement(c),da.body.appendChild(d),e=getComputedStyle(d,"").getPropertyValue("display"),d.parentNode.removeChild(d),"none"==e&&(e="block"),ia[c]=e),ia[c]);a.display=c}})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var c=e(a);if(this[0]&&!c)var d=v(a).get(0),g=d.parentNode||1<this.length;return this.each(function(e){v(this).wrapAll(c?a.call(this,e):g?d.cloneNode(!0):d)})},wrapAll:function(a){if(this[0]){v(this[0]).before(a=v(a));for(var c;(c=a.children()).length;)a=c.first();v(a).append(this)}return this},wrapInner:function(a){var c=e(a);return this.each(function(d){var e=v(this),g=e.contents();d=c?a.call(this,d):a;g.length?g.wrapAll(d):e.append(d)})},unwrap:function(){return this.parent().each(function(){v(this).replaceWith(v(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var c=v(this);(a===N?"none"==c.css("display"):a)?c.show():c.hide()})},prev:function(a){return v(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return v(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return 0 in arguments?this.each(function(c){var d=this.innerHTML;v(this).empty().append(H(this,a,c,d))}):0 in this?this[0].innerHTML:null},text:function(a){return 0 in arguments?this.each(function(c){c=H(this,a,c,this.textContent);this.textContent=null==c?"":""+c}):0 in this?this.pluck("textContent").join(""):null},attr:function(a,c){var d;return"string"!=typeof a||1 in arguments?this.each(function(d){if(1===this.nodeType)if(h(a))for(O in a){var e=O;d=a[O];null==d?this.removeAttribute(e):this.setAttribute(e,d)}else e=a,d=H(this,c,d,this.getAttribute(a)),null==d?this.removeAttribute(e):this.setAttribute(e,d)}):0 in this&&1==this[0].nodeType&&null!=(d=this[0].getAttribute(a))?d:N},removeAttr:function(a){return this.each(function(){1===this.nodeType&&a.split(" ").forEach(function(a){this.removeAttribute(a)},this)})},prop:function(a,c){return a=y[a]||a,1 in arguments?this.each(function(d){this[a]=H(this,c,d,this[a])}):this[0]&&this[0][a]},removeProp:function(a){return a=y[a]||a,this.each(function(){delete this[a]})},data:function(a,c){var d="data-"+a.replace(la,"-$1").toLowerCase(),d=1 in arguments?this.attr(d,c):this.attr(d);return null!==d?G(d):N},val:function(a){return 0 in arguments?(null==a&&(a=""),this.each(function(c){this.value=H(this,a,c,this.value)})):this[0]&&(this[0].multiple?v(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(a){if(a)return this.each(function(c){var d=v(this);c=H(this,a,c,d.offset());var e=d.offsetParent().offset();c={top:c.top-e.top,left:c.left-e.left};"static"==d.css("position")&&(c.position="relative");d.css(c)});if(!this.length)return null;if(da.documentElement!==this[0]&&!v.contains(da.documentElement,this[0]))return{top:0,left:0};var d=this[0].getBoundingClientRect();return{left:d.left+c.pageXOffset,top:d.top+c.pageYOffset,width:Math.round(d.width),height:Math.round(d.height)}},css:function(c,d){if(2>arguments.length){var e=this[0];if("string"==typeof c)return e?e.style[x(c)]||getComputedStyle(e,"").getPropertyValue(c):void 0;if(ta(c)){if(!e)return;var g={},h=getComputedStyle(e,"");return v.each(c,function(a,c){g[c]=e.style[x(c)]||h.getPropertyValue(c)}),g}}var l="";if("string"==a(c))d||0===d?l=q(c)+":"+F(c,d):this.each(function(){this.style.removeProperty(q(c))});else for(O in c)c[O]||0===c[O]?l+=q(O)+":"+F(O,c[O])+";":this.each(function(){this.style.removeProperty(q(O))});return this.each(function(){this.style.cssText+=";"+l})},index:function(a){return a?this.indexOf(v(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return a?p.some.call(this,function(a){return this.test(A(a))},z(a)):!1},addClass:function(a){return a?this.each(function(c){if("className"in this){L=[];var d=A(this);H(this,a,c,d).split(/\s+/g).forEach(function(a){v(this).hasClass(a)||L.push(a)},this);L.length&&A(this,d+(d?" ":"")+L.join(" "))}}):this},removeClass:function(a){return this.each(function(c){if("className"in this){if(a===N)return A(this,"");L=A(this);H(this,a,c,L).split(/\s+/g).forEach(function(a){L=L.replace(z(a)," ")});A(this,L.trim())}})},toggleClass:function(a,c){return a?this.each(function(d){var e=v(this);H(this,a,d,A(this)).split(/\s+/g).forEach(function(a){(c===N?!e.hasClass(a):c)?e.addClass(a):e.removeClass(a)})}):this},scrollTop:function(a){if(this.length){var c="scrollTop"in this[0];return a===N?c?this[0].scrollTop:this[0].pageYOffset:this.each(c?function(){this.scrollTop=a}:function(){this.scrollTo(this.scrollX,a)})}},scrollLeft:function(a){if(this.length){var c="scrollLeft"in this[0];return a===N?c?this[0].scrollLeft:this[0].pageXOffset:this.each(c?function(){this.scrollLeft=a}:function(){this.scrollTo(a,this.scrollY)})}},position:function(){if(this.length){var a=this[0],c=this.offsetParent(),d=this.offset(),e=W.test(c[0].nodeName)?{top:0,left:0}:c.offset();return d.top-=parseFloat(v(a).css("margin-top"))||0,d.left-=parseFloat(v(a).css("margin-left"))||0,e.top+=parseFloat(v(c[0]).css("border-top-width"))||0,e.left+=parseFloat(v(c[0]).css("border-left-width"))||0,{top:d.top-e.top,left:d.left-e.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||da.body;a&&!W.test(a.nodeName)&&"static"==v(a).css("position");)a=a.offsetParent;return a})}},v.fn.detach=v.fn.remove,["width","height"].forEach(function(a){var c=a.replace(/./,function(a){return a[0].toUpperCase()});v.fn[a]=function(d){var e,h=this[0];return d===N?g(h)?h["inner"+c]:null!=h&&h.nodeType==h.DOCUMENT_NODE?h.documentElement["scroll"+c]:(e=this.offset())&&e[a]:this.each(function(c){h=v(this);h.css(a,H(this,d,c,h[a]()))})}}),["after","prepend","before","append"].forEach(function(d,e){var g=e%2;v.fn[d]=function(){var d,h,l=v.map(arguments,function(c){var e=[];return d=a(c),"array"==d?(c.forEach(function(a){return a.nodeType!==N?e.push(a):v.zepto.isZ(a)?e=e.concat(a.get()):void(e=e.concat(aa.fragment(a)))}),e):"object"==d||null==c?c:aa.fragment(c)}),m=1<this.length;return 1>l.length?this:this.each(function(a,d){h=g?d:d.parentNode;d=0==e?d.nextSibling:1==e?d.firstChild:2==e?d:null;var n=v.contains(da.documentElement,h);l.forEach(function(a){if(m)a=a.cloneNode(!0);else if(!h)return v(a).remove();h.insertBefore(a,d);n&&E(a,function(a){if(!(null==a.nodeName||"SCRIPT"!==a.nodeName.toUpperCase()||a.type&&"text/javascript"!==a.type||a.src)){var d=a.ownerDocument?a.ownerDocument.defaultView:c;d.eval.call(d,a.innerHTML)}})})})};v.fn[g?d+"To":"insert"+(e?"Before":"After")]=function(a){return v(a)[d](this),this}}),aa.Z.prototype=t.prototype=v.fn,aa.uniq=B,aa.deserializeValue=G,v.zepto=aa,v}();return c.Zepto=a,void 0===c.$&&(c.$=a),function(a){function d(a){return a._zid||(a._zid=C++)}function g(a,c,e,g){if(c=h(c),c.ns)var l=new RegExp("(?:^| )"+c.ns.replace(" "," .* ?")+"(?: |$)");return(H[d(a)]||[]).filter(function(a){return a&&(!c.e||a.e==c.e)&&(!c.ns||l.test(a.ns))&&(!e||d(a.fn)===d(e))&&(!g||a.sel==g)})}function h(a){a=(""+a).split(".");return{e:a[0],ns:a.slice(1).sort().join(" ")}}function l(a){return N[a]||G&&E[a]||a}function m(c,e,g,m,n,t,v){var p=d(c),x=H[p]||(H[p]=[]);e.split(/\s/).forEach(function(d){if("ready"==d)return a(document).ready(g);var e=h(d);e.fn=g;e.sel=n;e.e in N&&(g=function(c){var d=c.relatedTarget;return!d||d!==this&&!a.contains(this,d)?e.fn.apply(this,arguments):void 0});var p=(e.del=t)||g;e.proxy=function(a){if(a=q(a),!a.isImmediatePropagationStopped()){a.data=m;var d=p.apply(c,a._args==F?[a]:[a].concat(a._args));return!1===d&&(a.preventDefault(),a.stopPropagation()),d}};e.i=x.length;x.push(e);"addEventListener"in c&&c.addEventListener(l(e.e),e.proxy,e.del&&!G&&e.e in E||!!v)})}function n(a,c,e,h,m){var n=d(a);(c||"").split(/\s/).forEach(function(c){g(a,c,e,h).forEach(function(c){delete H[n][c.i];"removeEventListener"in a&&a.removeEventListener(l(c.e),c.proxy,c.del&&!G&&c.e in E||!!m)})})}function q(c,d){return(d||!c.isDefaultPrevented)&&(d||(d=c),a.each(x,function(a,e){var g=d[a];c[a]=function(){return this[e]=O,g&&g.apply(d,arguments)};c[e]=v}),c.timeStamp||(c.timeStamp=Date.now()),(d.defaultPrevented!==F?d.defaultPrevented:"returnValue"in d?!1===d.returnValue:d.getPreventDefault&&d.getPreventDefault())&&(c.isDefaultPrevented=O)),c}function z(a){var c,d={originalEvent:a};for(c in a)L.test(c)||a[c]===F||(d[c]=a[c]);return q(d,a)}var F,C=1,t=Array.prototype.slice,I=a.isFunction,K=function(a){return"string"==typeof a},H={},A={},G="onfocusin"in c,E={focus:"focusin",blur:"focusout"},N={mouseenter:"mouseover",mouseleave:"mouseout"};A.click=A.mousedown=A.mouseup=A.mousemove="MouseEvents";a.event={add:m,remove:n};a.proxy=function(c,e){var g=2 in arguments&&t.call(arguments,2);if(I(c)){var h=function(){return c.apply(e,g?g.concat(t.call(arguments)):arguments)};return h._zid=d(c),h}if(K(e))return g?(g.unshift(c[e],c),a.proxy.apply(null,g)):a.proxy(c[e],c);throw new TypeError("expected function");};a.fn.bind=function(a,c,d){return this.on(a,c,d)};a.fn.unbind=function(a,c){return this.off(a,c)};a.fn.one=function(a,c,d,e){return this.on(a,c,d,e,1)};var O=function(){return!0},v=function(){return!1},L=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,x={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(a,c,d){return this.on(c,a,d)};a.fn.undelegate=function(a,c,d){return this.off(c,a,d)};a.fn.live=function(c,d){return a(document.body).delegate(this.selector,c,d),this};a.fn.die=function(c,d){return a(document.body).undelegate(this.selector,c,d),this};a.fn.on=function(c,d,e,g,h){var l,p,q=this;return c&&!K(c)?(a.each(c,function(a,c){q.on(a,d,e,c,h)}),q):(K(d)||I(g)||!1===g||(g=e,e=d,d=F),(g===F||!1===e)&&(g=e,e=F),!1===g&&(g=v),q.each(function(q,v){h&&(l=function(a){return n(v,a.type,g),g.apply(this,arguments)});d&&(p=function(c){var e,h=a(c.target).closest(d,v).get(0);return h&&h!==v?(e=a.extend(z(c),{currentTarget:h,liveFired:v}),(l||g).apply(h,[e].concat(t.call(arguments,1)))):void 0});m(v,c,g,e,d,p||l)}))};a.fn.off=function(c,d,e){var g=this;return c&&!K(c)?(a.each(c,function(a,c){g.off(a,d,c)}),g):(K(d)||I(e)||!1===e||(e=d,d=F),!1===e&&(e=v),g.each(function(){n(this,c,e,d)}))};a.fn.trigger=function(c,d){return c=K(c)||a.isPlainObject(c)?a.Event(c):q(c),c._args=d,this.each(function(){c.type in E&&"function"==typeof this[c.type]?this[c.type]():"dispatchEvent"in this?this.dispatchEvent(c):a(this).triggerHandler(c,d)})};a.fn.triggerHandler=function(c,d){var e,h;return this.each(function(l,m){e=z(K(c)?a.Event(c):c);e._args=d;e.target=m;a.each(g(m,c.type||c),function(a,c){return h=c.proxy(e),e.isImmediatePropagationStopped()?!1:void 0})}),h};"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(c){a.fn[c]=function(a){return 0 in arguments?this.bind(c,a):this.trigger(c)}});a.Event=function(a,c){K(a)||(c=a,a=c.type);var d=document.createEvent(A[a]||"Events"),e=!0;if(c)for(var g in c)"bubbles"==g?e=!!c[g]:d[g]=c[g];return d.initEvent(a,e,!0),q(d)}}(a),function(a){function d(c,d,e,g){c.global?(c=d||G,e=a.Event(e),g=(a(c).trigger(e,g),!e.isDefaultPrevented())):g=void 0;return g}function g(c){c.global&&0===a.active++&&d(c,null,"ajaxStart")}function h(a,c){var e=c.context;return!1===c.beforeSend.call(e,a,c)||!1===d(c,e,"ajaxBeforeSend",[a,c])?!1:void d(c,e,"ajaxSend",[a,c])}function l(a,c,e,g){var h=e.context;e.success.call(h,a,"success",c);g&&g.resolveWith(h,[a,"success",c]);d(e,h,"ajaxSuccess",[c,e,a]);n("success",c,e)}function m(a,c,e,g,h){var l=g.context;g.error.call(l,e,c,a);h&&h.rejectWith(l,[e,c,a]);d(g,l,"ajaxError",[e,g,a||c]);n(c,e,g)}function n(c,e,g){var h=g.context;g.complete.call(h,e,c);d(g,h,"ajaxComplete",[e,g]);g.global&&!--a.active&&d(g,null,"ajaxStop")}function q(){}function z(a){return a&&(a=a.split(";",2)[0]),a&&(a==L?"html":a==v?"json":N.test(a)?"script":O.test(a)&&"xml")||"text"}function F(a,c){return""==c?a:(a+"\x26"+c).replace(/[&?]{1,2}/,"?")}function C(c){c.processData&&c.data&&"string"!=a.type(c.data)&&(c.data=a.param(c.data,c.traditional));!c.data||c.type&&"GET"!=c.type.toUpperCase()&&"jsonp"!=c.dataType||(c.url=F(c.url,c.data),c.data=void 0)}function t(c,d,e,g){return a.isFunction(d)&&(g=e,e=d,d=void 0),a.isFunction(e)||(g=e,e=void 0),{url:c,data:d,success:e,dataType:g}}function I(c,d,e,g){var h,l=a.isArray(d),m=a.isPlainObject(d);a.each(d,function(d,n){h=a.type(n);g&&(d=e?g:g+"["+(m||"object"==h||"array"==h?d:"")+"]");!g&&l?c.add(n.name,n.value):"array"==h||!e&&"object"==h?I(c,n,e,d):c.add(d,n)})}var K,H,A=+new Date,G=c.document,E=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,N=/^(?:text|application)\/javascript/i,O=/^(?:text|application)\/xml/i,v="application/json",L="text/html",x=/^\s*$/,B=G.createElement("a");B.href=c.location.href;a.active=0;a.ajaxJSONP=function(d,e){if(!("type"in d))return a.ajax(d);var g,n,q=d.jsonpCallback,p=(a.isFunction(q)?q():q)||"Zepto"+A++,t=G.createElement("script"),v=c[p],x=function(c){a(t).triggerHandler("error",c||"abort")},z={abort:x};return e&&e.promise(z),a(t).on("load error",function(h,q){clearTimeout(n);a(t).off().remove();"error"!=h.type&&g?l(g[0],z,d,e):m(null,q||"error",z,d,e);c[p]=v;g&&a.isFunction(v)&&v(g[0]);v=g=void 0}),!1===h(z,d)?(x("abort"),z):(c[p]=function(){g=arguments},t.src=d.url.replace(/\?(.+)=\?/,"?$1\x3d"+p),G.head.appendChild(t),0<d.timeout&&(n=setTimeout(function(){x("timeout")},d.timeout)),z)};a.ajaxSettings={type:"GET",beforeSend:q,success:q,error:q,complete:q,context:null,global:!0,xhr:function(){return new c.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:v,xml:"application/xml, text/xml",html:L,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:q};a.ajax=function(d){var e,n,p=a.extend({},d||{}),t=a.Deferred&&a.Deferred();for(K in a.ajaxSettings)void 0===p[K]&&(p[K]=a.ajaxSettings[K]);g(p);p.crossDomain||(e=G.createElement("a"),e.href=p.url,e.href=e.href,p.crossDomain=B.protocol+"//"+B.host!=e.protocol+"//"+e.host);p.url||(p.url=c.location.toString());-1<(n=p.url.indexOf("#"))&&(p.url=p.url.slice(0,n));C(p);var v=p.dataType;e=/\?.+=\?/.test(p.url);if(e&&(v="jsonp"),!1!==p.cache&&(d&&!0===d.cache||"script"!=v&&"jsonp"!=v)||(p.url=F(p.url,"_\x3d"+Date.now())),"jsonp"==v)return e||(p.url=F(p.url,p.jsonp?p.jsonp+"\x3d?":!1===p.jsonp?"":"callback\x3d?")),a.ajaxJSONP(p,t);var A;d=p.accepts[v];var D={};e=function(a,c){D[a.toLowerCase()]=[a,c]};var E=/^([\w-]+:)\/\//.test(p.url)?RegExp.$1:c.location.protocol,I=p.xhr();n=I.setRequestHeader;if(t&&t.promise(I),p.crossDomain||e("X-Requested-With","XMLHttpRequest"),e("Accept",d||"*/*"),(d=p.mimeType||d)&&(-1<d.indexOf(",")&&(d=d.split(",",2)[0]),I.overrideMimeType&&I.overrideMimeType(d)),(p.contentType||!1!==p.contentType&&p.data&&"GET"!=p.type.toUpperCase())&&e("Content-Type",p.contentType||"application/x-www-form-urlencoded"),p.headers)for(H in p.headers)e(H,p.headers[H]);if(I.setRequestHeader=e,I.onreadystatechange=function(){if(4==I.readyState){I.onreadystatechange=q;clearTimeout(A);var c,d=!1;if(200<=I.status&&300>I.status||304==I.status||0==I.status&&"file:"==E){if(v=v||z(p.mimeType||I.getResponseHeader("content-type")),"arraybuffer"==I.responseType||"blob"==I.responseType)c=I.response;else{c=I.responseText;try{c=p.dataFilter==q?c:p.dataFilter.call(p.context,c,v),"script"==v?(0,eval)(c):"xml"==v?c=I.responseXML:"json"==v&&(c=x.test(c)?null:a.parseJSON(c))}catch(Z){d=Z}if(d)return m(d,"parsererror",I,p,t)}l(c,I,p,t)}else m(I.statusText||null,I.status?"error":"abort",I,p,t)}},!1===h(I,p))return I.abort(),m(null,"abort",I,p,t),I;if(I.open(p.type,p.url,"async"in p?p.async:!0,p.username,p.password),p.xhrFields)for(H in p.xhrFields)I[H]=p.xhrFields[H];for(H in D)n.apply(I,D[H]);return 0<p.timeout&&(A=setTimeout(function(){I.onreadystatechange=q;I.abort();m(null,"timeout",I,p,t)},p.timeout)),I.send(p.data?p.data:null),I};a.get=function(){return a.ajax(t.apply(null,arguments))};a.post=function(){var c=t.apply(null,arguments);return c.type="POST",a.ajax(c)};a.getJSON=function(){var c=t.apply(null,arguments);return c.dataType="json",a.ajax(c)};a.fn.load=function(c,d,e){if(!this.length)return this;var g,h=this,l=c.split(/\s/);c=t(c,d,e);var m=c.success;return 1<l.length&&(c.url=l[0],g=l[1]),c.success=function(c){h.html(g?a("\x3cdiv\x3e").html(c.replace(E,"")).find(g):c);m&&m.apply(h,arguments)},a.ajax(c),this};var p=encodeURIComponent;a.param=function(c,d){var e=[];return e.add=function(c,d){a.isFunction(d)&&(d=d());null==d&&(d="");this.push(p(c)+"\x3d"+p(d))},I(e,c,d),e.join("\x26").replace(/%20/g,"+")}}(a),function(a){a.fn.serializeArray=function(){var c,d,h=[],l=function(a){return a.forEach?a.forEach(l):void h.push({name:c,value:a})};return this[0]&&a.each(this[0].elements,function(e,g){d=g.type;(c=g.name)&&"fieldset"!=g.nodeName.toLowerCase()&&!g.disabled&&"submit"!=d&&"reset"!=d&&"button"!=d&&"file"!=d&&("radio"!=d&&"checkbox"!=d||g.checked)&&l(a(g).val())}),h};a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(c){a.push(encodeURIComponent(c.name)+"\x3d"+encodeURIComponent(c.value))}),a.join("\x26")};a.fn.submit=function(c){if(0 in arguments)this.bind("submit",c);else if(this.length){var d=a.Event("submit");this.eq(0).trigger(d);d.isDefaultPrevented()||this.get(0).submit()}return this}}(a),function(){try{getComputedStyle(void 0)}catch(e){var a=getComputedStyle;c.getComputedStyle=function(c,d){try{return a(c,d)}catch(l){return null}}}}(),a});function des(c,a,d,e,g){var h=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],l=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],m=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],n=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],q=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],z=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],F=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],C=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];c=des_createKeys(c);var t=0,I,K,H,A,G,E,N,O,v,L,x,B,p,D=a.length,T=0,U=32==c.length?3:9;N=3==U?d?[0,32,2]:[30,-2,-2]:d?[0,32,2,62,30,-2,64,96,2]:[94,62,-2,32,64,2,30,-2,-2];a+="\x00\x00\x00\x00\x00\x00\x00\x00";tempresult=result="";1==e&&(O=g.charCodeAt(t++)<<24|g.charCodeAt(t++)<<16|g.charCodeAt(t++)<<8|g.charCodeAt(t++),L=g.charCodeAt(t++)<<24|g.charCodeAt(t++)<<16|g.charCodeAt(t++)<<8|g.charCodeAt(t++),t=0);for(;t<D;){d?(G=a.charCodeAt(t++)<<16|a.charCodeAt(t++),E=a.charCodeAt(t++)<<16|a.charCodeAt(t++)):(G=a.charCodeAt(t++)<<24|a.charCodeAt(t++)<<16|a.charCodeAt(t++)<<8|a.charCodeAt(t++),E=a.charCodeAt(t++)<<24|a.charCodeAt(t++)<<16|a.charCodeAt(t++)<<8|a.charCodeAt(t++));1==e&&(d?(G^=O,E^=L):(v=O,x=L,O=G,L=E));K=(G>>>4^E)&252645135;E^=K;G^=K<<4;K=(G>>>16^E)&65535;E^=K;G^=K<<16;K=(E>>>2^G)&858993459;G^=K;E^=K<<2;K=(E>>>8^G)&16711935;G^=K;E^=K<<8;K=(G>>>1^E)&1431655765;E^=K;G^=K<<1;G=G<<1|G>>>31;E=E<<1|E>>>31;for(I=0;I<U;I+=3){B=N[I+1];p=N[I+2];for(g=N[I];g!=B;g+=p)H=E^c[g],A=(E>>>4|E<<28)^c[g+1],K=G,G=E,E=K^(l[H>>>24&63]|n[H>>>16&63]|z[H>>>8&63]|C[H&63]|h[A>>>24&63]|m[A>>>16&63]|q[A>>>8&63]|F[A&63]);K=G;G=E;E=K}G=G>>>1|G<<31;E=E>>>1|E<<31;K=(G>>>1^E)&1431655765;E^=K;G^=K<<1;K=(E>>>8^G)&16711935;G^=K;E^=K<<8;K=(E>>>2^G)&858993459;G^=K;E^=K<<2;K=(G>>>16^E)&65535;E^=K;G^=K<<16;K=(G>>>4^E)&252645135;E^=K;G^=K<<4;1==e&&(d?(O=G,L=E):(G^=v,E^=x));tempresult=d?tempresult+String.fromCharCode(G>>>24,G>>>16&255,G>>>8&255,G&255,E>>>24,E>>>16&255,E>>>8&255,E&255):tempresult+String.fromCharCode(G>>>16&65535,G&65535,E>>>16&65535,E&65535);d?T+=16:T+=8;512==T&&(result+=tempresult,tempresult="",T=0)}return result+tempresult}function des_createKeys(c){pc2bytes0=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964];pc2bytes1=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697];pc2bytes2=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272];pc2bytes3=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144];pc2bytes4=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256];pc2bytes5=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488];pc2bytes6=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746];pc2bytes7=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568];pc2bytes8=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578];pc2bytes9=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488];pc2bytes10=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800];pc2bytes11=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744];pc2bytes12=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128];pc2bytes13=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261];for(var a=24<=c.length?3:1,d=Array(32*a),e=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],g,h,l=0,m=0,n,q=0;q<a;q++)for(left=c.charCodeAt(l++)<<24|c.charCodeAt(l++)<<16|c.charCodeAt(l++)<<8|c.charCodeAt(l++),right=c.charCodeAt(l++)<<24|c.charCodeAt(l++)<<16|c.charCodeAt(l++)<<8|c.charCodeAt(l++),n=(left>>>4^right)&252645135,right^=n,left^=n<<4,n=(right>>>-16^left)&65535,left^=n,right^=n<<-16,n=(left>>>2^right)&858993459,right^=n,left^=n<<2,n=(right>>>-16^left)&65535,left^=n,right^=n<<-16,n=(left>>>1^right)&1431655765,right^=n,left^=n<<1,n=(right>>>8^left)&16711935,left^=n,right^=n<<8,n=(left>>>1^right)&1431655765,right^=n,left^=n<<1,n=left<<8|right>>>20&240,left=right<<24|right<<8&16711680|right>>>8&65280|right>>>24&240,right=n,i=0;i<e.length;i++)e[i]?(left=left<<2|left>>>26,right=right<<2|right>>>26):(left=left<<1|left>>>27,right=right<<1|right>>>27),left&=-15,right&=-15,g=pc2bytes0[left>>>28]|pc2bytes1[left>>>24&15]|pc2bytes2[left>>>20&15]|pc2bytes3[left>>>16&15]|pc2bytes4[left>>>12&15]|pc2bytes5[left>>>8&15]|pc2bytes6[left>>>4&15],h=pc2bytes7[right>>>28]|pc2bytes8[right>>>24&15]|pc2bytes9[right>>>20&15]|pc2bytes10[right>>>16&15]|pc2bytes11[right>>>12&15]|pc2bytes12[right>>>8&15]|pc2bytes13[right>>>4&15],n=(h>>>16^g)&65535,d[m++]=g^n,d[m++]=h^n<<16;return d}function stringToHex(c){for(var a="",d="0123456789abcdef".split(""),e=0;e<c.length;e++)a+=d[c.charCodeAt(e)>>4]+d[c.charCodeAt(e)&15];return a}function HexTostring(c){for(var a="",d=0;d<c.length;d+=2)var e=parseInt(c.substring(d,d+2),16),a=a+String.fromCharCode(e);return a}function encMe(c,a){return stringToHex(des(a,c,1,0))}function uncMe(c,a){return des(a,HexTostring(c),0,0)}var GLE_cubeCamera,GLE_cubeScene,GLE_cubeRenderer,GLE_cubeControls,GLE_bCubeControls=0;function MapViewInit(){container=document.getElementById(G_15);GLE_cubeCamera=new GLE.Pa(45,1,.001,1E3);GLE_cubeScene=new GLE.Scene;GLE_cubeRenderer=new GLE.Wr({alpha:!0,antialias:!0,precision:"highp",preserveDrawingBuffer:!0});GLE_cubeRenderer.so(1*window.devicePixelRatio);GLE_cubeRenderer.setSize(200*G_0.offsetWidth/G_0.offsetHeight,200);GLE_cubeRenderer.sr(6710886,.8);G_0.appendChild(GLE_cubeRenderer.domElement);GLE_cubeRenderer.domElement.style.zIndex="99999";GLE_cubeRenderer.domElement.style.top="0px";GLE_cubeRenderer.domElement.style.right="0px";GLE_cubeRenderer.domElement.style.position="absolute";var c=new GLE.Geometry,a=new GLE.Mal({color:16711680});GLE_cubeParent=new GLE.Mesh(c,a);GLE_cubeScene.add(GLE_cubeParent);var d=new GLE.Vector3(0,0,0),c=new GLE.Geometry,a=new GLE.Mal({color:16711680}),c=new GLE.Mesh(c,a);c.name="mycube";GLE_cubeParent.add(c);var e=new Float32Array(18),a=2,e=[-15*a,-15*a,15*a,-15*a,-15*a,-15*a,15*a,-15*a,15*a,-15*a,-15*a,-15*a,15*a,-15*a,-15*a,15*a,-15*a,15*a],a=new Float32Array(12),a=[0,1,0,0,1,1,0,0,1,0,1,1],g={texture1:{value:null},color:{value:new GLE.Vector4(1,1,1,1)}},g=new GLE.ShaderMaterial({uniforms:g,vertexShader:"varying vec2 vUv;         void main(){                vUv \x3d uv;               vec4 mvPosition \x3d projectionMatrix*modelViewMatrix * vec4( position, 1.0 );             gl_Position \x3d mvPosition;           }",fragmentShader:"uniform sampler2D texture1;          uniform vec4 color;         varying vec2 vUv;           void main(void){                gl_FragColor \x3d texture2D(texture1, vUv)*color;            }",side:GLE.DoubleSide}),h=new GLE.BufferGeometry;h.addAttribute("position",new GLE.Float32BufferAttribute(e,3));h.addAttribute("uv",new GLE.Float32BufferAttribute(a,2));a=new GLE.Mesh(h,g);a.name="camera";a.material.depthTest=!0;a.material.depthWrite=!0;a.material.transparent=!0;a.material.side=GLE.DoubleSide;a.visible=!0;a.frustumCulled=!1;var l=a.material.uniforms,e=new Image;l.texture1.value=new GLE.Texture(e);e.onload=function(){l.texture1.value.needsUpdate=!0};c.add(a);e=new Float32Array(18);a=2;e=[-15*a,-15*a,15*a,-15*a,-15*a,-15*a,15*a,-15*a,15*a,-15*a,-15*a,-15*a,15*a,-15*a,-15*a,15*a,-15*a,15*a];a=new Float32Array(12);a=[0,1,0,0,1,1,0,0,1,0,1,1];g={texture1:{value:null},color:{value:new GLE.Vector4(1,1,1,1)}};g=new GLE.ShaderMaterial({uniforms:g,vertexShader:"varying vec2 vUv;         void main(){                vUv \x3d uv;               vec4 mvPosition \x3d projectionMatrix*modelViewMatrix * vec4( position, 1.0 );             gl_Position \x3d mvPosition;           }",fragmentShader:"uniform sampler2D texture1;          uniform vec4 color;         varying vec2 vUv;           void main(void){                gl_FragColor \x3d texture2D(texture1, vUv)*color;            }",side:GLE.DoubleSide});h=new GLE.BufferGeometry;h.addAttribute("position",new GLE.Float32BufferAttribute(e,3));h.addAttribute("uv",new GLE.Float32BufferAttribute(a,2));a=new GLE.Mesh(h,g);a.name="scene";a.material.depthTest=!0;a.material.depthWrite=!0;a.material.transparent=!0;a.material.side=GLE.DoubleSide;a.visible=!0;a.frustumCulled=!1;var m=a.material.uniforms,e=new Image;m.texture1.value=new GLE.Texture(e);e.onload=function(){m.texture1.value.needsUpdate=!0};c.add(a);GLE_cubeCamera.position.y=-100;GLE_cubeCamera.ux();GLE_cubeCamera.lookAt(d);animate3()}function mapUpdate0(){SetViewPort("top");G_3.ge("logo")&&(G_3.ge("logo").visible=!1);G_4.sr(G_29,0);G_4.render(G_3,G_2);new GLE.TextureLoader;GLE_cubeScene.ge("camera").material.uniforms.texture1.value.image.src=GetImage();G_4.sr(G_29,GLE_BACK_ALPHA)}function mapUpdate1(){SetViewPort("top");G_3.ge("logo")&&(G_3.ge("logo").visible=!1);G_4.sr(G_29,0);G_4.render(G_3,G_2);new GLE.TextureLoader;GLE_cubeScene.ge("scene").material.uniforms.texture1.value.image.src=GetImage();G_4.sr(G_29,GLE_BACK_ALPHA)}function animate3(){requestAnimationFrame(animate3);render3()}function render3(){GLE_cubeRenderer.render(GLE_cubeScene,GLE_cubeCamera)}var GLE_cubeParent,GLE_bCubeControls=1,GLE_cubePickingTexture,GLE_cubeIds;function ViewCubeInit(c){container=document.getElementById(G_15);GLE_cubeCamera=new GLE.Pa(45,1,1,1E3);GLE_cubeCamera.near=1.5;GLE_cubeCamera.far=500;GLE_cubeScene=new GLE.Scene;GLE_cubePickingTexture=new GLE.Wt(180,180);GLE_cubePickingTexture.texture.minFilter=GLE.Nr;GLE_cubeRenderer=new GLE.Wr({alpha:!0,antialias:!0,precision:"highp",preserveDrawingBuffer:!0});GLE_cubeRenderer.so(1*window.devicePixelRatio);GLE_cubeRenderer.setSize(180,180);GLE_cubeRenderer.sr(16711680,0);G_0.appendChild(GLE_cubeRenderer.domElement);GLE_cubeRenderer.domElement.style.zIndex="99999";GLE_cubeRenderer.domElement.style.top="0px";GLE_cubeRenderer.domElement.style.right="0px";GLE_cubeRenderer.domElement.style.position="absolute";var a=new GLE.Geometry,d=new GLE.Mal({color:16711680});GLE_cubeParent=new GLE.Mesh(a,d);GLE_cubeScene.add(GLE_cubeParent);GLE_cubeParent.position.z=10;GLE_cubeParent.position.y=10;GLE_cubeControls=new GLE.CubeTs(GLE_cubeCamera,GLE_cubeRenderer.domElement,new GLE.Vector3(0,0,0));GLE_cubeControls.rd=.5;GLE_cubeControls.zd=1;GLE_cubeControls.pd=1;GLE_cubeControls.sg=!1;a=new GLE.Vector3(0,0,0);(new GLE.Mesh(new GLE.CubeGeometry(0,0,0),new GLE.Mal({color:0,wireframe:!0}))).name="mycube";var d=new Float32Array(18),d=[-5,-5,5,-5,-5,-5,5,-5,5,-5,-5,-5,5,-5,-5,5,-5,5],e=new Float32Array(12),e=[0,1,0,0,1,1,0,0,1,0,1,1],g={texture1:{value:null},color:{value:new GLE.Vector4(1,1,1,1)}},g=new GLE.ShaderMaterial({uniforms:g,vertexShader:"varying vec2 vUv;         void main(){                vUv \x3d uv;               vec4 mvPosition \x3d projectionMatrix*modelViewMatrix * vec4( position, 1.0 );             gl_Position \x3d mvPosition;           }",fragmentShader:"uniform sampler2D texture1;          uniform vec4 color;         varying vec2 vUv;           void main(void){                gl_FragColor \x3d texture2D(texture1, vUv)*color;            }",side:GLE.DoubleSide}),h=new GLE.BufferGeometry;h.addAttribute("position",new GLE.Float32BufferAttribute(d,3));h.addAttribute("uv",new GLE.Float32BufferAttribute(e,2));d=new GLE.Mesh(h,g);d.name="cube-home";d.material.depthTest=!1;d.renderOrder=100;d.material.depthWrite=!0;d.material.transparent=!0;d.material.side=GLE.DoubleSide;d.position.x=30;d.position.z=30;d.visible=!0;d.frustumCulled=!1;var l=d.material.uniforms,e=new Image;l.texture1.value=new GLE.Texture(e);e.onload=function(){l.texture1.value.needsUpdate=!0};GLE_cubeScene.add(d);e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAEbeAABG3gGOJjJbAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAPuSURBVHja7NpPiBtVHAfw92+SMdmE/M/CrjMhgpfSixdBscr26EVPa6UXEQ+Ch0JVKPRWEFoLPQge92Cx7EmPHvyza1tw91pKu0ppm50kpGTyb9KZJDvv/Z7nFm12k0yamZ0v5JY3895n5r35zR+8s7OD5h3OxYaqqu8DiDxCCBFC28Ph4DfG2Efz7guZ587q9foSIaTJGP2Ec7cAABgAMOduljG2TinrNRpP9EACVCqV13VdNwEg93//EYInV1dXHlSr1VOBAmg2zdPlcvme67rR8dODM03Ttrvd7tlAADQaT84Wi4VfhRD0sG0AAKdSqeutVutrXwNYVv/i8nLxOgDgSdpns9nLtu1c8yWAZfW/TyYTl6bdTjweO+c4zqavAFyX/5xMJj6f1fZisdi6ELDlCwAh4LaisA9mvV1KyXtSyrsLDSClvEspedur0xVjfIIQUllIAEqZgTE+4fWqDQAaY6y1MAC1Wk0lhHaE4KvzK6V5hjFm1+v1lZcKYBjGa6VSqQsgUvO/n+AxTdMeV6vVt14KgGm23i2VSn8fprrzEIFpmna70+l+PFeARqNxplDIbx2luvNwTcDpdOpH0zTPzwWg3+9fWF5evjFpdedVcrnc1eFweNVTAMuyvkskEt+gBY2qqucdx7nhCYDruj8lk8kv0IInFoudEUL8PlMAzsVNRVE+RD4JpXQNQN6ZCYCU8g5j9B3ksxCCTxJCHk8FQCndxxifRD4NAOiMMfPIAIZhRAghbSHEq8jn4ZxnGWNPa7Va8VAAlUpFL5fLPQBIo4CEcx7Xdb1qGMabLwQwzdapcrn8wHVdFQUsnHOm6/pf7XZn/T8Bms3merFY2BZCMBTQAADOZjOb7Xb73DMAlmV9mc8XNoUQGAU8UkqUyWSu2bZzBSGEmGm2Psvlst8iJNFxSjwe+6rX643w7u6ulPJ4Df7ZeoGQg+M6eEopkIcPH6UpZRuUsj8cx7kFAPeDO/9RxbbtPwkh25SyH/b398v4+bfDjCkRzt1REAGi0ejaaDTaemEhlM/n1oJ6BqTT6TfGVoKjkUuCCjAaHeCxADjQlQCe/IFIYC+DIUAIEAKEACFACBAChAAhwDGN5w9ACSGIc37r4MB9hDEmGKOxdxsAkisKW1EU5bTXb6E9BxgMBhvRaPRTVT36dxSW1b+4tBS/5Osp4DiDib/Ht+2nv/h+DSCE5CZvS1d9D3CYOe9F2/AqEAKEACFACBAChAAhQAgQAoQARwOIRBQlqIONRJg6FqDV6sz624BXpmg704PR6fSssQB7e/duIoT+oZRKQsjUP4RQb4o+D2fRB0qpxJhU9/bubzy/g38HAHgIuHKzx/kXAAAAAElFTkSuQmCC";GLE_cubeCamera.position.y=-100;GLE_cubeCamera.ux();GLE_cubeCamera.lookAt(a);GLE_cubeRenderer.domElement.addEventListener("mousemove",onCubeMouseMove);GLE_cubeRenderer.domElement.addEventListener("mousedown",onCubeClick0,!0);GLE_cubeRenderer.domElement.addEventListener("mouseup",onCubeClick,!0);animate2();LoadCube(c)}function LoadCube(c){JSZipUtils.getBinaryContent(c,function(a,d){JSZip.loadAsync(d).then(function(a){var d=c.lastIndexOf("/"),e=c.lastIndexOf("."),l=c.substr(d+1,e-d-1);a.file(l+".ver").async("arraybuffer").then(function(c){a.file(l+".mat").async("arraybuffer").then(function(d){a.file(l+".pos").async("arraybuffer").then(function(e){a.file(l+".mati").async("arraybuffer").then(function(g){a.file(l+".color").async("arraybuffer").then(function(h){a.file(l+".id").async("arraybuffer").then(function(m){a.file(l+".normal").async("arraybuffer").then(function(a){var l=new Float32Array(c),n=new Float32Array(d),q=new Uint32Array(e),t=new Uint32Array(g),z=new Uint8Array(h),C=new Uint32Array(m);a=new Uint8Array(a);for(var F=new Uint8Array(z.length/4*3),O=new Uint8Array(z.length),v=new Float32Array(3*q.length),L=0;L<O.length;L++)O[L]=255;GLE_cubeIds=C;for(var x=[],L=0;L<C.length/3;L++){var B=parseInt(L/256),p=L-256*B;x.push(C[3*L]);x.push(0);for(j=C[3*L+1];j<C[3*L+2];j++)F[3*j]=255,F[3*j+1]=B,F[3*j+2]=p}for(L=0;L<q.length;L++)C=q[L],C=[l[3*C+0],l[3*C+1],l[3*C+2]],x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],B=t[L],0<n.length&&16*B<n.length&&(x[0]=n[16*B+0],x[1]=n[16*B+1],x[2]=n[16*B+2],x[3]=n[16*B+3],x[4]=n[16*B+4],x[5]=n[16*B+5],x[6]=n[16*B+6],x[7]=n[16*B+7],x[8]=n[16*B+8],x[9]=n[16*B+9],x[10]=n[16*B+10],x[11]=n[16*B+11],x[12]=n[16*B+12],x[13]=n[16*B+13],x[14]=n[16*B+14],x[15]=n[16*B+15]),C=transformMat4(C,C,x),v[3*L+0]=C[0]*GLE_Unit,v[3*L+1]=C[1]*GLE_Unit,v[3*L+2]=C[2]*GLE_Unit,isNaN(C[0])&&(v[3*L+0]=0,v[3*L+1]=0,v[3*L+2]=0);(new GLE.Box3).setFromArray(v);new GLE.TextureLoader;l={bid:{value:0},mc:{value:0},color:{value:new GLE.Vector4(1,1,1,1)},bclip:{value:!1},clip1:{value:new GLE.Vector4(0,0,0,0)},clip2:{value:new GLE.Vector4(0,0,0,0)},clip3:{value:new GLE.Vector4(0,0,0,0)},clip4:{value:new GLE.Vector4(0,0,0,0)},clip5:{value:new GLE.Vector4(0,0,0,0)},clip6:{value:new GLE.Vector4(0,0,0,0)}};l=new GLE.ShaderMaterial({uniforms:l,vertexShader:"                                 varying vec3 vid;                                  attribute vec3 id;                                 varying vec4 vcolor;                                  attribute vec4 acolor;                                 varying vec4 fcolor;                                  attribute vec4 pcolor;                                 varying vec3 vPosition;                                 varying vec3 vNormal;                                 attribute vec3 anormal;                                 void main(){                                     vid \x3d id;                                       vNormal \x3d anormal;                                       vcolor \x3d acolor;                                       fcolor \x3d pcolor;                                       vPosition \x3d position;                                     vec4 mvPosition \x3d projectionMatrix*modelViewMatrix * vec4( position, 1.0 );                                     gl_Position \x3d mvPosition;}",fragmentShader:"                                 uniform int bid;                                 uniform int mc;                                 uniform vec4 color;                                 uniform bool bclip;                                 uniform vec4 clip1;                                 uniform vec4 clip2;                                 uniform vec4 clip3;                                 uniform vec4 clip4;                                 uniform vec4 clip5;                                 uniform vec4 clip6;                                 varying vec3 vid;                                 varying vec4 vcolor;                                 varying vec4 fcolor;                                 varying vec3 vPosition;                                 varying vec3 vNormal;                                 void main(void){                                     if(bid \x3d\x3d 0){                                         if(bclip)                                           {                                               if (length(clip1) \x3e 0.001)                                              {                                                   vec4 c1 \x3d clip1;                                                  vec3 x \x3d vPosition;                                                 float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz);                                                 if (distance1 \x3c 0.0)                                                    {                                                       discard;                                                    }                                               }                                               if (length(clip2) \x3e 0.001)                                              {                                                   vec4 c1 \x3d clip2;                                                  vec3 x \x3d vPosition;                                                 float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz);                                                 if (distance1 \x3c 0.0)                                                    {                                                       discard;                                                    }                                               }                                               if (length(clip3) \x3e 0.001)                                              {                                                   vec4 c1 \x3d clip3;                                                  vec3 x \x3d vPosition;                                                 float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz);                                                 if (distance1 \x3c 0.0)                                                    {                                                       discard;                                                    }                                               }                                               if (length(clip4) \x3e 0.001)                                              {                                                   vec4 c1 \x3d clip4;                                                  vec3 x \x3d vPosition;                                                 float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz);                                                 if (distance1 \x3c 0.0)                                                    {                                                       discard;                                                    }                                               }                                               if (length(clip5) \x3e 0.001)                                              {                                                   vec4 c1 \x3d clip5;                                                  vec3 x \x3d vPosition;                                                 float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz);                                                 if (distance1 \x3c 0.0)                                                    {                                                       discard;                                                    }                                               }                                               if (length(clip6) \x3e 0.001)                                              {                                                   vec4 c1 \x3d clip6;                                                  vec3 x \x3d vPosition;                                                 float distance1 \x3d (dot(c1.xyz, x) + c1.w) / length(c1.xyz);                                                 if (distance1 \x3c 0.0)                                                    {                                                       discard;                                                    }                                               }                                           }                                           vec3 lightADirection \x3d normalize(vec3(0,10000,5000));                                             float lightWeightA \x3d max(dot(vNormal/vec3(255.0,255.0,255.0), lightADirection) * 0.4, 0.0);                                              vec3 lightBDirection \x3d normalize(vec3(0,-10000,5000));                                             float lightWeightB \x3d max(dot(vNormal/vec3(255.0,255.0,255.0), lightBDirection) * 0.4, 0.0);                                              vec3 lightCDirection \x3d normalize(vec3(10000,0,5000));                                             float lightWeightC \x3d max(dot(vNormal/vec3(255.0,255.0,255.0), lightCDirection) * 0.3, 0.0);                                              vec3 lightDDirection \x3d normalize(vec3(-10000,0,5000));                                             float lightWeightD \x3d max(dot(vNormal/vec3(255.0,255.0,255.0), lightDDirection) * 0.3, 0.0);                                              float lightWeighting \x3d lightWeightA + lightWeightB+lightWeightC + lightWeightD + 0.65;                                           if(vcolor.r\x3c254.99 || vcolor.g\x3c254.99 || vcolor.b\x3c254.99){                                              gl_FragColor \x3d vec4(lightWeighting*vcolor.r / 255.0, lightWeighting*vcolor.g / 255.0, lightWeighting*vcolor.b / 255.0, vcolor.a / 255.0);                                            }else if(vcolor.a\x3c254.99){                                             gl_FragColor \x3d vec4(fcolor.r / 255.0, fcolor.g / 255.0, fcolor.b / 255.0, fcolor.a / 255.0)*vec4(lightWeighting,lightWeighting,lightWeighting,vcolor.a/255.0);                                          }                                           else                                           {                                               if(vid.b \x3e 37.0 \x26\x26 vid.b \x3c 42.0){                                                   gl_FragColor \x3dvec4(0.0, 0.0,0.0, 0.0) ;                                             }else {                                                 gl_FragColor \x3dvec4(lightWeighting*fcolor.r / 255.0, lightWeighting*fcolor.g / 255.0,lightWeighting*fcolor.b / 255.0, fcolor.a / 255.0) * color*1.0;                                              }}                                       }                                       else if (bid \x3d\x3d 1)                                     {                                        int r \x3d mc / 65536;                                        int g \x3d (mc - r * 65536) / 256;                                        int b \x3d mc - r * 65536 - g * 256;                                        gl_FragColor \x3d vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, 1.0);                                    }                                    else {                                        gl_FragColor \x3d vec4(vid.r / 255.0, vid.g / 255.0, vid.b / 255.0, 1.0);                                    }                                }",side:GLE.DoubleSide,transparent:!0});n=new GLE.BufferGeometry;n.addAttribute("position",(new GLE.Float32BufferAttribute(v,3)).onUpload(disposeArray1));n.addAttribute("anormal",(new GLE.Uint8BufferAttribute(a,3)).onUpload(disposeArray));n.addAttribute("id",(new GLE.Uint8BufferAttribute(F,3)).onUpload(disposeArray));n.addAttribute("acolor",(new GLE.Uint8BufferAttribute(O,4)).onUpload(disposeArray1));n.addAttribute("pcolor",(new GLE.Uint8BufferAttribute(z,4)).onUpload(disposeArray1));new GLE.PointsMaterial({color:16711680});z=new GLE.Mesh(n,l);z.name="viewcube";z.frustumCulled=!0;z.position.y-=9;z.position.z-=5;z.scale.x=.18;z.scale.y=.18;z.scale.z=.18;GLE_cubeParent.add(z)})})})})})})})})})}var currentCubePoint=null;function onCubeClick0(c){currentCubePoint=c;var a=new GLE.Rr,d=new GLE.Vector2;d.x=(c.pageX-GLE_cubeRenderer.domElement.getBoundingClientRect().left)/GLE_cubeRenderer.domElement.offsetWidth*2-1;d.y=2*-((c.pageY-GLE_cubeRenderer.domElement.getBoundingClientRect().top)/GLE_cubeRenderer.domElement.offsetHeight)+1;a.sa(d,GLE_cubeCamera);var d=[],e=GLE_cubeScene.ge("cube-home"),g=GLE_cubeParent.ge("viewcube");d.push(e);d.push(g);a=a.is(d,!1);0<a.length&&"cube-home"!=a[0].object.name&&(a=a[0].object,a.material.uniforms.bid.value=2,GLE_cubeRenderer.render(GLE_cubeScene,GLE_cubeCamera,GLE_cubePickingTexture),d=new Uint8Array(4),GLE_cubeRenderer.rls(GLE_cubePickingTexture,c.pageX-GLE_cubeRenderer.domElement.getBoundingClientRect().left,GLE_cubePickingTexture.height-(c.pageY-GLE_cubeRenderer.domElement.getBoundingClientRect().top),1,1,d),c=GLE_cubeIds[3*(d[1]<<8|d[2])],a.material.uniforms.bid.value=0,GLE_bCubeControls=1==c||8==c||39==c||9==c||40==c||10==c||42==c||11==c||41==c?2:1)}function onCubeClick(c){GLE_bCubeControls=0;if(c.clientX){var a=Math.abs(currentCubePoint.clientX-c.clientX),d=Math.abs(currentCubePoint.clientY-c.clientY);if(!(50<Math.sqrt(a*a+d*d))){a=new GLE.Rr;d=new GLE.Vector2;d.x=(c.pageX-GLE_cubeRenderer.domElement.getBoundingClientRect().left)/GLE_cubeRenderer.domElement.offsetWidth*2-1;d.y=2*-((c.pageY-GLE_cubeRenderer.domElement.getBoundingClientRect().top)/GLE_cubeRenderer.domElement.offsetHeight)+1;a.sa(d,GLE_cubeCamera);var d=[],e=GLE_cubeScene.ge("cube-home"),g=GLE_cubeParent.ge("viewcube");d.push(e);d.push(g);a=a.is(d,!1);0<a.length&&("cube-home"==a[0].object.name?ZoomFitAll(!0,!0):"cube-front"==a[0].object.name?SetViewPort("front"):"cube-back"==a[0].object.name?SetViewPort("back"):"cube-up"==a[0].object.name?SetViewPort("top"):"cube-down"==a[0].object.name?SetViewPort("bottom"):"cube-left"==a[0].object.name?SetViewPort("left"):"cube-right"==a[0].object.name?SetViewPort("right"):"viewcube"==a[0].object.name&&(a=a[0].object,a.material.uniforms.bid.value=2,GLE_cubeRenderer.render(GLE_cubeScene,GLE_cubeCamera,GLE_cubePickingTexture),d=new Uint8Array(4),GLE_cubeRenderer.rls(GLE_cubePickingTexture,c.pageX-GLE_cubeRenderer.domElement.getBoundingClientRect().left,GLE_cubePickingTexture.height-(c.pageY-GLE_cubeRenderer.domElement.getBoundingClientRect().top),1,1,d),c=GLE_cubeIds[3*(d[1]<<8|d[2])],ReSetPivot(),d=G_53.getCenter(),(new TN.Tn(G_35.position)).to({x:d.x,y:d.y,z:d.z},400).delay(0).easing(TN.Easing.Linear.None).start(),console.log(c),1!=c&&(13==c?(new TN.Tn(G_35.rotation)).to({x:Math.PI/4,y:0,z:-Math.PI/2},400).delay(0).easing(TN.Easing.Linear.None).start():33==c?(new TN.Tn(G_35.rotation)).to({x:-Math.PI/4,y:0,z:-Math.PI/2},400).delay(0).easing(TN.Easing.Linear.None).start():18==c?(new TN.Tn(G_35.rotation)).to({x:Math.PI/4,y:0,z:Math.PI/2},400).delay(0).easing(TN.Easing.Linear.None).start():37==c?(new TN.Tn(G_35.rotation)).to({x:-Math.PI/4,y:0,z:Math.PI/2},400).delay(0).easing(TN.Easing.Linear.None).start():22==c?(new TN.Tn(G_35.rotation)).to({x:0,y:0,z:-Math.PI/4},400).delay(0).easing(TN.Easing.Linear.None).start():24==c?(new TN.Tn(G_35.rotation)).to({x:0,y:0,z:.75*-Math.PI},400).delay(0).easing(TN.Easing.Linear.None).start():26==c?(new TN.Tn(G_35.rotation)).to({x:0,y:0,z:.75*Math.PI},400).delay(0).easing(TN.Easing.Linear.None).start():28==c?(new TN.Tn(G_35.rotation)).to({x:0,y:0,z:Math.PI/4},400).delay(0).easing(TN.Easing.Linear.None).start():30==c?(new TN.Tn(G_35.rotation)).to({x:-Math.PI/4,y:0,z:Math.PI/4},400).delay(0).easing(TN.Easing.Linear.None).start():32==c?(new TN.Tn(G_35.rotation)).to({x:-Math.PI/4,y:0,z:-Math.PI/4},400).delay(0).easing(TN.Easing.Linear.None).start():34==c?(new TN.Tn(G_35.rotation)).to({x:-Math.PI/4,y:0,z:.75*-Math.PI},400).delay(0).easing(TN.Easing.Linear.None).start():36==c?(new TN.Tn(G_35.rotation)).to({x:-Math.PI/4,y:0,z:.75*Math.PI},400).delay(0).easing(TN.Easing.Linear.None).start():35==c?(new TN.Tn(G_35.rotation)).to({x:-Math.PI/4,y:0,z:Math.PI},400).delay(0).easing(TN.Easing.Linear.None).start():15==c?(new TN.Tn(G_35.rotation)).to({x:Math.PI/4,y:0,z:0},400).delay(0).easing(TN.Easing.Linear.None).start():20==c?(new TN.Tn(G_35.rotation)).to({x:.25*Math.PI,y:0,z:Math.PI},400).delay(0).easing(TN.Easing.Linear.None).start():31==c?(new TN.Tn(G_35.rotation)).to({x:-Math.PI/4,y:0,z:0},400).delay(0).easing(TN.Easing.Linear.None).start():14==c?(new TN.Tn(G_35.rotation)).to({x:Math.PI/4,y:0,z:-Math.PI/4},400).delay(0).easing(TN.Easing.Linear.None).start():17==c?(new TN.Tn(G_35.rotation)).to({x:Math.PI/4,y:0,z:Math.PI/4},400).delay(0).easing(TN.Easing.Linear.None).start():19==c?(new TN.Tn(G_35.rotation)).to({x:Math.PI/4,y:0,z:.75*Math.PI},400).delay(0).easing(TN.Easing.Linear.None).start():21==c?(new TN.Tn(G_35.rotation)).to({x:Math.PI/4,y:0,z:.75*-Math.PI},400).delay(0).easing(TN.Easing.Linear.None).start():4==c||29==c||8==c||39==c?(new TN.Tn(G_35.rotation)).to({x:0,y:0,z:0},400).delay(0).easing(TN.Easing.Linear.None).start():7==c||25==c||10==c||42==c?(new TN.Tn(G_35.rotation)).to({x:0,y:0,z:Math.PI},400).delay(0).easing(TN.Easing.Linear.None).start():2==c||16==c?(new TN.Tn(G_35.rotation)).to({x:Math.PI/2,y:0,z:0},400).delay(0).easing(TN.Easing.Linear.None).start():3==c||38==c?(new TN.Tn(G_35.rotation)).to({x:-Math.PI/2,y:0,z:0},400).delay(0).easing(TN.Easing.Linear.None).start():5==c||27==c||11==c||41==c?(new TN.Tn(G_35.rotation)).to({x:0,y:0,z:Math.PI/2},400).delay(0).easing(TN.Easing.Linear.None).start():6!=c&&23!=c&&9!=c&&40!=c||(new TN.Tn(G_35.rotation)).to({x:0,y:0,z:-Math.PI/2},400).delay(0).easing(TN.Easing.Linear.None).start()),a.material.uniforms.bid.value=0))}}}function onCubeMouseMove(c){GLE_cubeScene&&GLE_cubeScene.ge("viewcube")&&(GLE_cubeScene.ge("cube-home").visible=!0,GLE_cubeScene.ge("viewcube").material.uniforms.color.value.x=1,GLE_cubeScene.ge("viewcube").material.uniforms.color.value.y=1,GLE_cubeScene.ge("viewcube").material.uniforms.color.value.z=1);var a=new GLE.Rr,d=new GLE.Vector2;d.x=(c.pageX-GLE_cubeRenderer.domElement.getBoundingClientRect().left)/GLE_cubeRenderer.domElement.offsetWidth*2-1;d.y=2*-((c.pageY-GLE_cubeRenderer.domElement.getBoundingClientRect().top)/GLE_cubeRenderer.domElement.offsetHeight)+1;a.sa(d,GLE_cubeCamera);var d=[],e=GLE_cubeScene.ge("cube-home"),g=GLE_cubeParent.ge("viewcube");d.push(e);d.push(g);e.material.uniforms.color.value.x=1;e.material.uniforms.color.value.y=1;e.material.uniforms.color.value.z=1;a=a.is(d,!1);0<a.length?"viewcube"==a[0].object.name?(a=a[0].object,a.material.uniforms.bid.value=2,GLE_cubeRenderer.render(GLE_cubeScene,GLE_cubeCamera,GLE_cubePickingTexture),d=new Uint8Array(4),GLE_cubeRenderer.rls(GLE_cubePickingTexture,c.pageX-GLE_cubeRenderer.domElement.getBoundingClientRect().left,GLE_cubePickingTexture.height-(c.pageY-GLE_cubeRenderer.domElement.getBoundingClientRect().top),1,1,d),c=GLE_cubeIds[3*(d[1]<<8|d[2])],a.material.uniforms.bid.value=0,1==c?SetCubeActorColor(c,250,128,0):8==c||39==c?SetCubeActorColor("8",240,0,0):9==c||40==c?SetCubeActorColor("9",240,0,0):10==c||42==c?SetCubeActorColor("10",240,0,0):11==c||41==c?SetCubeActorColor("11",240,0,0):4==c||29==c?SetCubeActorColor("29",137,207,240):7==c||25==c?SetCubeActorColor("25",137,207,240):2==c||16==c?SetCubeActorColor("16",137,207,240):3==c||38==c?SetCubeActorColor("38",137,207,240):5==c||27==c?SetCubeActorColor("27",137,207,240):6==c||23==c?SetCubeActorColor("23",137,207,240):SetCubeActorColor(c,137,207,240)):(a[0].object.material.uniforms.color.value.x=.698,a[0].object.material.uniforms.color.value.y=.82,a[0].object.material.uniforms.color.value.z=1,ReSetCubeActorColor()):ReSetCubeActorColor()}function animate2(){requestAnimationFrame(animate2);render2()}function render2(){GLE_cubeParent.rotation.x=G_35.rotation.x;GLE_cubeParent.rotation.y=G_35.rotation.y;GLE_cubeParent.rotation.z=G_35.rotation.z;GLE_cubeRenderer.render(GLE_cubeScene,GLE_cubeCamera);0<GLE_bCubeControls&&GLE_cubeControls.update()}function ReSetCubeActorColor(){var c=GLE_cubeParent.ge("viewcube");if(c){for(var a=c.geometry.attributes.acolor.array,d=0;d<GLE_cubeIds.length/3;d++)for(var e=GLE_cubeIds[3*d+1];e<GLE_cubeIds[3*d+2];e++)a[4*e]=255,a[4*e+1]=255,a[4*e+2]=255;c.geometry.attributes.acolor.needsUpdate=!0}}function SetCubeActorColor(c,a,d,e){for(var g=GLE_cubeParent.ge("viewcube"),h=g.geometry.attributes.acolor.array,l=0;l<GLE_cubeIds.length/3;l++)if(c==GLE_cubeIds[3*l])for(var m=GLE_cubeIds[3*l+1];m<GLE_cubeIds[3*l+2];m++)h[4*m]=a,h[4*m+1]=d,h[4*m+2]=e;else for(m=GLE_cubeIds[3*l+1];m<GLE_cubeIds[3*l+2];m++)h[4*m]=255,h[4*m+1]=255,h[4*m+2]=255;g.geometry.attributes.acolor.needsUpdate=!0}GLE.CubeTs=function(c,a,d){function e(a){!1!==t.enabled&&(window.removeEventListener("keydown",e),H!==I.NONE||a.keyCode!==t.keys[I.ROTATE]||t.noRotate||(H=I.ROTATE))}function g(a){}function h(a){GLE_bRect||!1===t.enabled||(a.preventDefault(),a.stopPropagation(),H===I.NONE&&(H=a.button),H!==I.ROTATE||t.noRotate||(E.copy(L(a.pageX,a.pageY)),G.copy(E)),document.addEventListener("mousemove",l,!1),document.addEventListener("mouseup",m,!1),t.dispatchEvent(O))}function l(a){!1!==t.enabled&&(a.preventDefault(),a.stopPropagation(),H!==I.ROTATE||t.noRotate||(G.copy(E),E.copy(L(a.pageX,a.pageY))))}function m(a){GLE_bRect||!1===t.enabled||(a.preventDefault(),a.stopPropagation(),H=I.NONE,document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",m),t.dispatchEvent(v))}function n(a){}function q(a){if(!1!==t.enabled){switch(a.touches.length){case 1:H=I.TOUCH_ROTATE,E.copy(L(a.touches[0].pageX,a.touches[0].pageY)),G.copy(E)}t.dispatchEvent(O)}}function z(a){if(!1!==t.enabled)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:G.copy(E),E.copy(L(a.touches[0].pageX,a.touches[0].pageY))}}function F(a){if(!1!==t.enabled){switch(a.touches.length){case 0:H=I.NONE;break;case 1:H=I.TOUCH_ROTATE,E.copy(L(a.touches[0].pageX,a.touches[0].pageY)),G.copy(E)}t.dispatchEvent(v)}}function C(a){!1!==t.enabled&&a.preventDefault()}var t=this,I={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=c;this.domElement=void 0!==a?a:document;this.enabled=!0;this.screen={left:0,top:0,width:0,height:0};this.rd=1;this.zd=.5;this.pd=.3;this.sg=this.noPan=this.noZoom=this.noRotate=!1;this.dynamicDampingFactor=.2;this.minDistance=0;this.maxDistance=Infinity;this.keys=[65,83,68];this.target=new GLE.Vector3;var K=new GLE.Vector3,H=I.NONE,A=new GLE.Vector3,G=new GLE.Vector2,E=new GLE.Vector2;new GLE.Vector3;new GLE.Vector2;new GLE.Vector2;new GLE.Vector2;new GLE.Vector2;_myPan=new GLE.Vector3;this.target0=this.target.clone();this.position0=this.object.position.clone();this.up0=this.object.up.clone();var N={type:"change"},O={type:"start"},v={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var a=this.domElement.getBoundingClientRect(),c=this.domElement.ownerDocument.documentElement;this.screen.left=a.left+window.pageXOffset-c.clientLeft;this.screen.top=a.top+window.pageYOffset-c.clientTop;this.screen.width=a.width;this.screen.height=a.height}};this.handleEvent=function(a){if("function"==typeof this[a.type])this[a.type](a)};(function(){var a=new GLE.Vector2;return function(c,d){a.set((c-t.screen.left)/t.screen.width,(d-t.screen.top)/t.screen.height);return a}})();var L=function(){var a=new GLE.Vector2;return function(c,d){a.set((c-.5*t.screen.width-t.screen.left)/(.5*t.screen.width),(t.screen.height+2*(t.screen.top-d))/t.screen.width);return a}}();this.rotateCamera=function(){new GLE.Vector3;new GLE.Quaternion;var a=new GLE.Vector3,c=new GLE.Vector3,d=new GLE.Vector3,e=new GLE.Vector3,g;return function(){e.set(E.x-G.x,E.y-G.y,0);if(g=e.length())G_58=(new Date).getTime(),A.copy(t.object.position).sub(t.target),a.copy(A).normalize(),c.copy(t.object.up).normalize(),d.crossVectors(c,a).normalize(),c.setLength(E.y-G.y),d.setLength(E.x-G.x),G_35.rotation.z+=(E.x-G.x)*this.rd,2>GLE_bCubeControls&&(G_35.rotation.x-=(E.y-G.y)*this.rd,180/Math.PI*G_35.rotation.x<-GLE_AngleLimit&&(G_35.rotation.x=-GLE_AngleLimit*Math.PI/180),180/Math.PI*G_35.rotation.x>GLE_AngleLimit&&(G_35.rotation.x=GLE_AngleLimit*Math.PI/180));G.copy(E)}}();this.update=function(){t.noRotate||t.rotateCamera()};this.reset=function(){H=I.NONE;t.target.copy(t.target0);t.object.position.copy(t.position0);t.object.up.copy(t.up0);A.subVectors(t.object.position,t.target);t.object.lookAt(t.target);t.dispatchEvent(N);K.copy(t.object.position)};this.dispose=function(){this.domElement.removeEventListener("contextmenu",C,!1);this.domElement.removeEventListener("mousedown",h,!1);this.domElement.removeEventListener("wheel",n,!1);this.domElement.removeEventListener("touchstart",q,!1);this.domElement.removeEventListener("touchend",F,!1);this.domElement.removeEventListener("touchmove",z,!1);document.removeEventListener("mousemove",l,!1);document.removeEventListener("mouseup",m,!1);window.removeEventListener("keydown",e,!1);window.removeEventListener("keyup",g,!1)};this.domElement.addEventListener("contextmenu",C,!1);this.domElement.addEventListener("mousedown",h,!1);this.domElement.addEventListener("wheel",n,!1);this.domElement.addEventListener("touchstart",q,!1);this.domElement.addEventListener("touchend",F,!1);this.domElement.addEventListener("touchmove",z,!1);window.addEventListener("keydown",e,!1);window.addEventListener("keyup",g,!1);this.handleResize();this.update()};GLE.CubeTs.prototype=Object.create(GLE.EventDispatcher.prototype);GLE.CubeTs.prototype.constructor=GLE.CubeTs;